const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll-KvKAY8Mr.js","./webworkerAll-CSkpf5C_.js","./colorToUniform-C2GHuDhf.js","./CanvasPool-DLboMJOo.js","./WebGPURenderer-BFiCowuc.js","./SharedSystems-Dxj7vChC.js","./WebGLRenderer-Bb4WvEDC.js"])))=>i.map(i=>d[i]);
var U4=Object.defineProperty;var Y4=(n,t,e)=>t in n?U4(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ot=(n,t,e)=>Y4(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();var ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Au(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Tc={exports:{}},j4=Tc.exports,np;function X4(){return np||(np=1,function(n,t){(function(e){var i,r=e.document,s=e.location,a={timeout:10,debug:!1,version:!1},o={modules:{},status:{},event:{},callback:{}},c=function(){this.v="2.11.5"},l=e.LAYUI_GLOBAL||{},u=(i=r.currentScript&&r.currentScript.tagName.toUpperCase()==="SCRIPT"?r.currentScript.src:function(){for(var y,d=r.getElementsByTagName("script"),_=d.length-1,g=_;0<g;g--)if(d[g].readyState==="interactive"){y=d[g].src;break}return y||d[_].src}(),a.dir=l.dir||i.substring(0,i.lastIndexOf("/")+1)),h=function(y,d){d=d||"log",e.console&&console[d]&&console[d]("layui error hint: "+y)},p=a.builtin={lay:"lay",layer:"layer",laydate:"laydate",laypage:"laypage",laytpl:"laytpl",form:"form",upload:"upload",dropdown:"dropdown",transfer:"transfer",tree:"tree",table:"table",treeTable:"treeTable",tabs:"tabs",element:"element",rate:"rate",colorpicker:"colorpicker",slider:"slider",carousel:"carousel",flow:"flow",util:"util",code:"code",jquery:"jquery",component:"component",all:"all","layui.all":"layui.all"},f=(typeof Object.assign!="function"&&(Object.assign=function(y){var d=Object(y);if(!(arguments.length<2))for(var _=1;_<arguments.length;_++){var g=arguments[_];if(g!=null)for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(d[m]=g[m])}return d}),function(y,d,_){var g=function(S){S.type!=="load"&&!/^(complete|loaded)$/.test((S.currentTarget||S.srcElement).readyState)||(v(),typeof d!="function")||d(S)},m=function(S){v(),typeof _=="function"&&_(S)},v=function(){y.detachEvent?y.detachEvent("onreadystatechange",g):(y.removeEventListener("load",g,!1),y.removeEventListener("error",m,!1))};!y.attachEvent||y.attachEvent.toString&&y.attachEvent.toString().indexOf("[native code")<0?(y.addEventListener("load",g,!1),y.addEventListener("error",m,!1)):y.attachEvent("onreadystatechange",g)}),x=(c.prototype.cache=Object.assign(a,o),c.prototype.config=function(y){return Object.assign(a,y),this},c.prototype.define=function(y,d){return typeof y=="function"&&(d=y,y=[]),this.use(y,function(){var _=function(g,m){layui[g]=m,o.status[g]=!0};return typeof d=="function"&&d(function(g,m){_(g,m),o.callback[g]=function(){d(_)}}),this},null,"define"),this},c.prototype.use=function(y,d,_,g){var m,v,S,M,w,L,P,N,k=this,D=a.dir=a.dir||u;return y=typeof y=="string"?[y]:typeof y=="function"?(d=y,["all"]):y,a.host||(a.host=(D.match(/\/\/([\s\S]+?)\//)||["//"+s.host+"/"])[0]),y&&(e.jQuery&&jQuery.fn.on&&(k.each(y,function(C,T){T==="jquery"&&y.splice(C,1)}),layui.jquery=layui.$=e.jQuery),_=_||[],m=y[0],v=k.modules[m],S=typeof v=="object",M=function(){_.push(layui[m]),1<y.length?k.use(y.slice(1),d,_,g):typeof d=="function"&&(layui.jquery&&typeof layui.jquery=="function"&&g!=="define"?layui.jquery(function(){d.apply(layui,_)}):d.apply(layui,_))},w=function(){var C=0;(function T(){return++C>1e3*a.timeout/5?h(m+" is not a valid module","error"):void((S?layui[m]=e[v.api]:o.status[m])?M():setTimeout(T,5))})()},y.length===0||layui["layui.all"]&&p[m]?M():(N=S?v.src:v,D=(p[m]?D+"modules/":N?"":a.base)+(N=(N=N||m).replace(/\s/g,"").replace(/\.js[^\/\.]*$/,""))+".js",!o.modules[m]&&layui[m]&&(o.modules[m]=D),o.modules[m]?w():(L=r.getElementsByTagName("head")[0],(P=r.createElement("script")).async=!0,P.charset="utf-8",P.src=D+((N=a.version===!0?a.v||new Date().getTime():a.version||"")?"?v="+N:""),L.appendChild(P),f(P,function(){L.removeChild(P),w()},function(){L.removeChild(P)}),o.modules[m]=D))),k},c.prototype.modules=Object.assign({},p),c.prototype.extend=function(y){var d,_,g=a.base||"",m=/^\{\/\}/;for(d in y=y||{})this[d]||this.modules[d]?h("the "+d+" module already exists, extend failure"):(typeof(_=y[d])=="string"&&(_=((g=m.test(_)?"":g)+_).replace(m,"")),this.modules[d]=_);return this},c.prototype.disuse=function(y){var d=this;return y=d.isArray(y)?y:[y],d.each(y,function(_,g){delete d[g],delete p[g],delete d.modules[g],delete o.status[g],delete o.modules[g]}),d},c.prototype.getStyle=function(y,d){return y=y.currentStyle||e.getComputedStyle(y,null),y.getPropertyValue?y.getPropertyValue(d):y.getAttribute(d.replace(/-(\w)/g,function(_,g){return g?g.toUpperCase():""}))},c.prototype.link=function(y,d,_){var g,m=this,v=r.getElementsByTagName("head")[0],S=typeof d=="function";if(typeof d=="string"&&(_=d),typeof y=="object")return g=m.type(_)==="array",m.each(y,function(w,L){m.link(L,w===y.length-1&&d,g&&_[w])});_="layuicss-"+(_=_||y.replace(/^(#|(http(s?)):\/\/|\/\/)|\.|\/|\?.+/g,""));var M=r.getElementById(_);return M||((M=r.createElement("link")).href=y+(a.debug?"?v="+new Date().getTime():""),M.rel="stylesheet",M.id=_,v.appendChild(M)),M.__lay_readyState__==="complete"?S&&d(M):f(M,function(){M.__lay_readyState__="complete",S&&d(M)},function(){h(y+" load error","error"),v.removeChild(M)}),m},c.prototype.addcss=function(y,d,_){return layui.link(a.dir+"css/"+y,d,_)},c.prototype.factory=function(y){if(layui[y])return typeof a.callback[y]=="function"?a.callback[y]:null},c.prototype.img=function(y,d,_){var g=new Image;if(g.src=y,g.complete)return d(g);g.onload=function(){g.onload=null,typeof d=="function"&&d(g)},g.onerror=function(m){g.onerror=null,typeof _=="function"&&_(m)}},c.prototype.router=c.prototype.hash=function(y){var d={path:[],pathname:[],search:{},hash:((y=y||s.hash).match(/[^#](#.*$)/)||[])[1]||"",href:""};return/^#/.test(y)&&(y=y.replace(/^#/,""),y=(d.href=y).replace(/([^#])(#.*$)/,"$1").split("/")||[],this.each(y,function(_,g){/^\w+=/.test(g)?(g=g.split("="),d.search[g[0]]=g[1]):d.path.push(g)}),d.pathname=d.path),d},c.prototype.url=function(y){var d,_,g=this;return{pathname:(y?((y.match(/\.[^.]+?\/.+/)||[])[0]||"").replace(/^[^\/]+/,"").replace(/\?.+/,""):s.pathname).replace(/^\//,"").split("/"),search:(d={},_=(y?((y.match(/\?.+/)||[])[0]||"").replace(/\#.+/,""):s.search).replace(/^\?+/,"").split("&"),g.each(_,function(m,v){var S=v.indexOf("="),M=S<0?v.substr(0,v.length):S!==0&&v.substr(0,S);M&&(d[M]=0<S?v.substr(S+1):null)}),d),hash:g.router(y?(y.match(/#.+/)||[])[0]||"/":s.hash)}},c.prototype.data=function(y,d,_){if(y=y||"layui",_=_||localStorage,d===null)return delete _[y];d=typeof d=="object"?d:{key:d};try{var g=JSON.parse(_[y])}catch{g={}}return"value"in d&&(g[d.key]=d.value),d.remove&&delete g[d.key],_[y]=JSON.stringify(g),d.key?g[d.key]:g},c.prototype.sessionData=function(y,d){return this.data(y,d,sessionStorage)},c.prototype.device=function(y){var d=navigator.userAgent.toLowerCase(),_=function(m){var v=new RegExp(m+"/([^\\s\\_\\-]+)");return(m=(d.match(v)||[])[1])||!1},g={os:/windows/.test(d)?"windows":/linux/.test(d)?"linux":/iphone|ipod|ipad|ios/.test(d)?"ios":/mac/.test(d)?"mac":void 0,ie:!!(e.ActiveXObject||"ActiveXObject"in e)&&((d.match(/msie\s(\d+)/)||[])[1]||"11"),weixin:_("micromessenger")};return y&&!g[y]&&(g[y]=_(y)),g.android=/android/.test(d),g.ios=g.os==="ios",g.mobile=g.android||g.ios,g},c.prototype.hint=function(){return{error:h}},c.prototype._typeof=c.prototype.type=function(y){return y===null?String(y):typeof y=="object"||typeof y=="function"?(d=(d=Object.prototype.toString.call(y).match(/\s(.+)\]$/)||[])[1]||"Object",new RegExp("\\b(Function|Array|Date|RegExp|Object|Error|Symbol)\\b").test(d)?d.toLowerCase():"object"):typeof y;var d},c.prototype._isArray=c.prototype.isArray=function(y){var d,_=this.type(y);return!(!y||typeof y!="object"||y===e)&&(d="length"in y&&y.length,_==="array"||d===0||typeof d=="number"&&0<d&&d-1 in y)},c.prototype.each=function(y,d){var _,g=function(m,v){return d.call(v[m],m,v[m])};if(typeof d=="function"){if(this.isArray(y=y||[]))for(_=0;_<y.length&&!g(_,y);_++);else for(_ in y)if(g(_,y))break}return this},c.prototype.sort=function(y,d,_,g){if(g=g?y||[]:JSON.parse(JSON.stringify(y||[])),this.type(y)!=="object"||d){if(typeof y!="object")return[g];g.sort(function(m,v){var S=m[d],M=v[d];if(!isNaN(m)&&!isNaN(v))return m-v;if(!isNaN(m)&&isNaN(v)){if(!d||typeof v!="object")return-1;S=m}else if(isNaN(m)&&!isNaN(v)){if(!d||typeof m!="object")return 1;M=v}return m=[!isNaN(S),!isNaN(M)],m[0]&&m[1]?S&&!M&&M!==0?1:!S&&S!==0&&M?-1:S-M:m[0]||m[1]?m[0]||!m[1]?-1:!m[0]||m[1]?1:void 0:M<S?1:S<M?-1:0}),_&&g.reverse()}return g},c.prototype.stope=function(y){try{y.stopPropagation()}catch{y.cancelBubble=!0}},"LAYUI-EVENT-REMOVE");c.prototype.onevent=function(y,d,_){return typeof y!="string"||typeof _!="function"?this:c.event(y,d,null,_)},c.prototype.event=c.event=function(M,d,_,g){var m=this,v=null,S=(d||"").match(/\((.*)\)$/)||[],M=(M+"."+d).replace(S[0],""),w=S[1]||"",L=function(P,N){(N&&N.call(m,_))===!1&&v===null&&(v=!1)};return _===x?(delete(m.cache.event[M]||{})[w],m):g?(o.event[M]=o.event[M]||{},w?o.event[M][w]=[g]:(o.event[M][w]=o.event[M][w]||[],o.event[M][w].push(g)),this):(layui.each(o.event[M],function(P,N){(w==="{*}"||(P===""&&layui.each(N,L),w&&P===w))&&layui.each(N,L)}),v)},c.prototype.on=function(y,d,_){return this.onevent.call(this,d,y,_)},c.prototype.off=function(y,d){return this.event.call(this,d,y,x)},c.prototype.debounce=function(y,d){var _;return function(){var g=this,m=arguments;clearTimeout(_),_=setTimeout(function(){y.apply(g,m)},d)}},c.prototype.throttle=function(y,d){var _=!1;return function(){_||(y.apply(this,arguments),_=!0,setTimeout(function(){_=!1},d))}},e.layui=new c})(window),layui.define(function(e){var i=layui.cache;layui.config({dir:i.dir.replace(/lay\/dest\/$/,"")}),e("layui.all",layui.v)}),function(e){var i,r=e.document,s=function(c){return new a(c)},a=function(c){var l=this,u=typeof c=="object"?layui.isArray(c)?c:[c]:(this.selector=c,r.querySelectorAll(c||null));s.each(u,function(h,p){l.push(u[h])})},o=(Array.prototype.indexOf=Array.prototype.indexOf||function(c,l){var u=-1;return l=l||0,layui.each(this,function(h,p){if(c===p&&l<=h)return u=h,!0}),u},a.fn=a.prototype=[],a.fn.constructor=a,s.extend=function(){var c,l=1,u=arguments,h=function(p,f){for(var x in p=p||(layui.type(f)==="array"?[]:{}),f)p[x]=f[x]&&f[x].constructor===Object?h(p[x],f[x]):f[x];return p};for(u[0]=typeof u[0]=="object"?u[0]:{},c=u.length;l<c;l++)typeof u[l]=="object"&&h(u[0],u[l]);return u[0]},s.ie=(i=navigator.userAgent.toLowerCase(),!!(e.ActiveXObject||"ActiveXObject"in e)&&((i.match(/msie\s(\d+)/)||[])[1]||"11")),s.layui=layui||{},s.getPath=layui.cache.dir,s.stope=layui.stope,s.each=function(){return layui.each.apply(layui,arguments),this},s.digit=function(c,l){if(typeof c!="string"&&typeof c!="number")return"";var u="";l=l||2;for(var h=(c=String(c)).length;h<l;h++)u+="0";return c<Math.pow(10,l)?u+c:c},s.elem=function(c,l){var u=r.createElement(c);return s.each(l||{},function(h,p){u.setAttribute(h,p)}),u},s.hasScrollbar=function(){return r.body.scrollHeight>(e.innerHeight||r.documentElement.clientHeight)},s.getStyleRules=function(c,l){if(c)return c=(c=c.sheet||c.styleSheet||{}).cssRules||c.rules,typeof l=="function"&&layui.each(c,function(u,h){if(l(h,u))return!0}),c},s.style=function(c){c=c||{};var l=s.elem("style"),u=c.text||"",h=c.target;if(u)return"styleSheet"in l?(l.setAttribute("type","text/css"),l.styleSheet.cssText=u):l.innerHTML=u,l.id="LAY-STYLE-"+(c.id||(u=s.style.index||0,s.style.index++,"DF-"+u)),h&&((c=s(h).find("#"+l.id))[0]&&c.remove(),s(h).append(l)),l},s.position=function(c,l,u){var h,p,f,x,y,d,_,g,m;l&&(u=u||{},c!==r&&c!==s("body")[0]||(u.clickType="right"),h=u.clickType==="right"?{left:(h=u.e||e.event||{}).clientX,top:h.clientY,right:h.clientX,bottom:h.clientY}:c.getBoundingClientRect(),d=l.offsetWidth,_=l.offsetHeight,p=function(v){return r.body[v=v?"scrollLeft":"scrollTop"]|r.documentElement[v]},f=function(v){return r.documentElement[v?"clientWidth":"clientHeight"]},x="margin"in u?u.margin:5,m=h.left,y=h.bottom,u.align==="center"?m-=(d-c.offsetWidth)/2:u.align==="right"&&(m=m-d+c.offsetWidth),(m=m+d+x>f("width")?f("width")-d-x:m)<x&&(m=x),h.bottom+_+x>f()&&(h.top>_+x&&h.top<=f()?y=h.top-_-2*x:u.allowBottomOut||(y=f()-_-2*x)<0&&(y=0)),(d=u.position)&&(l.style.position=d),_=u.offset?u.offset[0]:0,g=u.offset?u.offset[1]:0,l.style.left=m+(d==="fixed"?0:p(1))+_+"px",l.style.top=y+(d==="fixed"?0:p())+g+"px",s.hasScrollbar()||(m=l.getBoundingClientRect(),!u.SYSTEM_RELOAD&&m.bottom+x>f()&&(u.SYSTEM_RELOAD=!0,setTimeout(function(){s.position(c,l,u)},50))))},s.options=function(h,l){if(l=typeof l=="object"?l:{attr:l},h===r)return{};var h=s(h),u=l.attr||"lay-options",h=h.attr(u);try{return new Function("return "+(h||"{}"))()}catch(p){return layui.hint().error(l.errorText||[u+'="'+h+'"',`
 parseerror: `+p].join(`
`),"error"),{}}},s.isTopElem=function(c){var l=[r,s("body")[0]],u=!1;return s.each(l,function(h,p){if(p===c)return u=!0}),u},s.clipboard={writeText:function(c){var l=String(c.text);function u(){var h=r.createElement("textarea");h.value=l,h.style.position="fixed",h.style.opacity="0",h.style.top="0px",h.style.left="0px",r.body.appendChild(h),h.select();try{r.execCommand("copy"),typeof c.done=="function"&&c.done()}catch(p){typeof c.error=="function"&&c.error(p)}finally{h.remove?h.remove():r.body.removeChild(h)}}navigator&&"clipboard"in navigator?navigator.clipboard.writeText(l).then(c.done,function(){u()}):u()}},s.passiveSupported=function(){var c=!1;try{var l=Object.defineProperty({},"passive",{get:function(){c=!0}});e.addEventListener("test",null,l),e.removeEventListener("test",null,l)}catch{}return c}(),s.touchEventsSupported=function(){return"ontouchstart"in e},s.touchSwipe=function(c,l){var u,h,p,f=l,x=s(c)[0],y=!("preventDefault"in f)||f.preventDefault;x&&s.touchEventsSupported()&&(u={pointerStart:{x:0,y:0},pointerEnd:{x:0,y:0},distanceX:0,distanceY:0,direction:"none",timeStart:null},l=function(d){d.touches.length===1&&(x.addEventListener("touchmove",h,!!s.passiveSupported&&{passive:!1}),x.addEventListener("touchend",p),x.addEventListener("touchcancel",p),u.timeStart=Date.now(),u.pointerStart.x=u.pointerEnd.x=d.touches[0].clientX,u.pointerStart.y=u.pointerEnd.y=d.touches[0].clientY,u.distanceX=u.distanceY=0,u.direction="none",f.onTouchStart)&&f.onTouchStart(d,u)},h=function(d){y&&d.preventDefault(),u.pointerEnd.x=d.touches[0].clientX,u.pointerEnd.y=d.touches[0].clientY,u.distanceX=u.pointerStart.x-u.pointerEnd.x,u.distanceY=u.pointerStart.y-u.pointerEnd.y,Math.abs(u.distanceX)>Math.abs(u.distanceY)?u.direction=0<u.distanceX?"left":"right":u.direction=0<u.distanceY?"up":"down",f.onTouchMove&&f.onTouchMove(d,u)},p=function(d){f.onTouchEnd&&f.onTouchEnd(d,u),x.removeEventListener("touchmove",h),x.removeEventListener("touchend",p,!!s.passiveSupported&&{passive:!1}),x.removeEventListener("touchcancel",p)},x.__lay_touchswipe_cb_&&x.removeEventListener("touchstart",x.__lay_touchswipe_cb_),x.__lay_touchswipe_cb_=l,x.addEventListener("touchstart",l))},s.addEvent=r.addEventListener?function(c,l,u,h){c.addEventListener(l,u,h)}:function(c,l,u){var h="_lay_on_"+l,p=function(x){x.target=x.srcElement,u.call(c,x)},f=(p._rawFn=u,c[h]||(c[h]=[]),!1);s.each(c[h],function(x,y){if(y._rawFn===u)return f=!0}),f||(c[h].push(p),c.attachEvent("on"+l,p))},s.removeEvent=r.removeEventListener?function(c,l,u,h){c.removeEventListener(l,u,h)}:function(c,l,u){var h,p="_lay_on_"+l,f=c[p];layui.isArray(f)&&(h=[],s.each(f,function(x,y){y._rawFn===u?c.detachEvent("on"+l,y):h.push(y)}),c[p]=h)},s.onClickOutside=function(c,l,y){var h=(y=y||{}).event||("onpointerdown"in e?"pointerdown":"mousedown"),p=y.scope||r,f=y.ignore||[],x=!("capture"in y)||y.capture,y=y.detectIframe;function d(g,m,v,S){return g.addEventListener?g.addEventListener(m,v,S):g.attachEvent("on"+m,v),function(){g.removeEventListener?g.removeEventListener(m,v,S):g.detachEvent("on"+m,v)}}var _=[d(p,h,function(g){var m=c,v=g.target||g.srcElement,S=function(L){var w=L.composedPath&&L.composedPath()||L.path,L=L.target||L.srcElement;return w??[L].concat(function P(N,k){return k=k||[],N=N.parentNode,N?P(N,k.concat([N])):k}(L))}(g);m&&m!==v&&S.indexOf(m)===-1&&!function(M,w){for(var L=M.target||M.srcElement,P=0;P<f.length;P++){var N=f[P];if(typeof N=="string")for(var k=r.querySelectorAll(N),D=0;D<k.length;D++){var C=k[P];if(C===L||w.indexOf(C)!==-1)return 1}else if(N&&(N===L||w.indexOf(N)!==-1))return 1}}(g,S)&&l(g)},s.passiveSupported?{passive:!0,capture:x}:x),y&&d(e,"blur",function(g){setTimeout(function(){r.activeElement&&r.activeElement.tagName==="IFRAME"&&c.contains&&!c.contains(r.activeElement)&&l(g)},0)})];return function(){for(var g=0;g<_.length;g++)_[g]&&_[g]();_=null}},Object.prototype.hasOwnProperty);s.hasOwn=function(c,l){return o.call(c,l)},a.addStr=function(c,l){return c=c.replace(/\s+/," "),l=l.replace(/\s+/," ").split(" "),s.each(l,function(u,h){new RegExp("\\b"+h+"\\b").test(c)||(c=c+" "+h)}),c.replace(/^\s|\s$/,"")},a.removeStr=function(c,l){return c=c.replace(/\s+/," "),l=l.replace(/\s+/," ").split(" "),s.each(l,function(u,h){h=new RegExp("\\b"+h+"\\b"),h.test(c)&&(c=c.replace(h,""))}),c.replace(/\s+/," ").replace(/^\s|\s$/,"")},a.fn.find=function(c){var l=[],u=typeof c=="object";return this.each(function(h,p){p=u&&p.contains(c)?c:p.querySelectorAll(c||null),s.each(p,function(f,x){l.push(x)})}),s(l)},a.fn.each=function(c){return s.each.call(this,this,c)},a.fn.addClass=function(c,l){return this.each(function(u,h){h.className=a[l?"removeStr":"addStr"](h.className,c)})},a.fn.removeClass=function(c){return this.addClass(c,!0)},a.fn.hasClass=function(c){var l=!1;return this.each(function(u,h){new RegExp("\\b"+c+"\\b").test(h.className)&&(l=!0)}),l},a.fn.css=function(c,l){var u=this,h=function(p){return isNaN(p)?p:p+"px"};return typeof c!="string"||l!==void 0?u.each(function(p,f){typeof c=="object"?s.each(c,function(x,y){f.style[x]=h(y)}):f.style[c]=h(l)}):0<u.length?u[0].style[c]:void 0},a.fn.width=function(c){var l=this;return c!==void 0?l.each(function(u,h){l.css("width",c)}):0<l.length?l[0].offsetWidth:void 0},a.fn.height=function(c){var l=this;return c!==void 0?l.each(function(u,h){l.css("height",c)}):0<l.length?l[0].offsetHeight:void 0},a.fn.attr=function(c,l){var u=this;return l!==void 0?u.each(function(h,p){p.setAttribute(c,l)}):0<u.length?u[0].getAttribute(c):void 0},a.fn.removeAttr=function(c){return this.each(function(l,u){u.removeAttribute(c)})},a.fn.html=function(c){var l=this;return c!==void 0?this.each(function(u,h){h.innerHTML=c}):0<l.length?l[0].innerHTML:void 0},a.fn.val=function(c){var l=this;return c!==void 0?this.each(function(u,h){h.value=c}):0<l.length?l[0].value:void 0},a.fn.append=function(c){return this.each(function(l,u){typeof c=="object"?u.appendChild(c):u.innerHTML=u.innerHTML+c})},a.fn.remove=function(c){return this.each(function(l,u){c?u.removeChild(c):u.parentNode.removeChild(u)})},a.fn.on=function(c,l,u){return this.each(function(h,p){s.addEvent(p,c,l,u)})},a.fn.off=function(c,l,u){return this.each(function(h,p){s.removeEvent(p,c,l,u)})},e.lay=s,e.layui&&layui.define&&layui.define(function(c){c("lay",s)})}(window),function(e){var i={escape:function(l){var u=/[<"'>]|&(?=#?[a-zA-Z0-9]+)/g;return l==null?"":u.test(l+="")?l.replace(u,function(h){return"&#"+h.charCodeAt(0)+";"}):l}},r=function(l,u){return new RegExp(l,u||"g")},s=function(p,u,h){u=u||{};var p="Laytpl "+((u=Object.assign({errorContext:""},u)).type||"")+"Error: "+p,f=u.errorContext;return delete u.errorContext,typeof console=="object"&&console.error(p,`
`,f,`
`,u),typeof h=="function"&&h(u),p},a={open:"{{",close:"}}",cache:!0,condense:!0,tagStyle:""},o=function(l,u){var h=this;u=h.config=Object.assign({template:l},a,u),h.vars=Object.assign({include:function(p,f){return p=document.getElementById(p),p=p?p.innerHTML:"",p?h.render(p,f):""}},i),h.compile(u.template)},c=(o.prototype.render=function(l,u){var h=this,p=h.config,f=l?h.compile(l):h.compilerCache||h.compile(p.template),x=function(){u=u||p.data||{};try{return f(u)}catch(y){return l=l||p.template,s(y,{errorContext:h.extractErrorContext(l,u),template:l,type:"Render"},p.error)}}();return p.cache&&!l&&(h.compilerCache=f),x},o.prototype.compile=function(l){var u=this,h=u.config,p=h.open,f=h.close,x=h.condense,y=r,d="\u2028";if(typeof l!="string"||!l)return function(){return""};var _=function(w,L){return w=["(?:"+p+(w[0]||"")+"\\s*)","("+(w[1]||"[\\s\\S]")+"*?)","(?:\\s*"+(w[2]||"")+f+")"],(L=L||{}).before&&w.unshift(L.before),L.after&&w.push(L.after),y(w.join(""))},S=x?["",""]:["(?:(?:\\n)*\\s*)","(?:\\s*?)"],g={before:S[0],after:S[1]},m=function(w,L){return w=(w=x?w:w.replace(y(d),L?"":`
`)).replace(/\\(\\|")/g,"$1")},v=u.parse=function(w){var L,P,N;return(w=w||"")&&(w=(w=(w=x?w.replace(/\t/g," ").replace(/\s+/g," "):w).replace(y("([}\\]])"+f),"$1 "+f).replace(/(?=\\|")/g,"\\").replace(/\r?\n/g,x?"":d)).replace(_(["!","","!"],g),function(k,D){return D=D.replace(y(p+"|"+f),function(C){return C.replace(/(?=.)/g,"\\")})}),L=function(k){return['";',k,'__laytpl__+="'].join(`
`)},P=function(k,D,C){return C&&(D=D==="-"?"":"_escape",C=m(C,!0))?L("__laytpl__+="+D+"("+C+");"):""},N=function(k,D){return D?(D=m(D),L(D)):""},w=h.tagStyle==="modern"?(w=(w=w.replace(_(["#"],g),"")).replace(_(["(=|-)"]),P)).replace(_([],g),N):(w=w.replace(_(["#"],g),N)).replace(_(["(=|-)*"]),P),x||(w=w.replace(y(d),"\\n"))),w},S=u.createCompiler=function(w,L){return L=L||M(w),new Function("laytpl","return "+L)(u.vars)},M=u.createBuilder=function(w,L){return L=L||["function(d){",'"use strict";','var __laytpl__="",'+function(){var P,N=[];for(P in u.vars)N.push((P==="escape"?"_":"")+P+"=laytpl."+P);return N.join(",")}()+";",'__laytpl__="'+v(w)+'";',"return __laytpl__;","};"].join(`
`)};try{return S(l)}catch(w){return delete u.compilerCache,function(){return s(w,{errorContext:u.extractErrorContext(l),template:l,type:"Compile"},h.error)}}},o.prototype.extractErrorContext=function(l,u){var h=1,p=l.split(/\r?\n/g),f=(l=l.replace(/(?=^)/gm,function(){return"/*LINE:"+h+++"*/"}),this.createBuilder(l)),x=f.split(/\r?\n/),y="laytpl.builder.map";try{f+=`
//# sourceURL=`+y;var d=this.createCompiler(l,f);u&&d(u)}catch(M){var l=r(y.replace(/\./g,"\\.")+":(\\d+)","i"),f=(M.stack.match(l)||[])[1]||0,_=function(N,D){var D=D?/\/\*LINE:(\d+)\*\/[^*]*$/:/\/\*LINE:(\d+)\*\//;return!(D=(String(x[N-1]).match(D)||[])[1])&&0<N?_(N-1,!0):D},u=_(f-2);if(u){var g=u;g=parseInt(g)-1;for(var m=[""],v=Math.max(0,g-3),S=Math.min(p.length,g+3);v<=S;v++)m.push((v==g?"? ":"  ")+(v+1)+"| "+p[v]);return m.join(`
`)+`
`}return M}},function(l,u){return l=new o(l,u),(function(){var h=this,p=h.config;return{config:p,render:function(d,x){p.data=d;var y,d=h.render();return p.target&&(y=document.querySelector(p.target))&&(y.innerHTML=d),typeof x=="function"?(x(d),this):d},compile:function(f){return p.template=f,delete h.compilerCache,this},error:function(f){return f&&(p.error=f),this},parse:function(f,x){return this.compile(f).render(x)}}}).call(l)});c.extendVars=function(l){Object.assign(i,l)},c.config=c.set=function(l){Object.assign(a,l)},typeof layui=="object"?layui.define(function(l){l("laytpl",c)}):n.exports=c}(),layui.define(function(e){var i=document,r="getElementById",s="getElementsByTagName",a="layui-disabled",o=function(l){var u=this;u.config=l||{},u.config.index=++c.index,u.render(!0)},c=(o.prototype.type=function(){var l=this.config;if(typeof l.elem=="object")return l.elem.length===void 0?2:3},o.prototype.view=function(){var l,u,h,p=this.config,f=p.groups="groups"in p?Number(p.groups)||0:5,x=(p.layout=typeof p.layout=="object"?p.layout:["prev","page","next"],p.count=Number(p.count)||0,p.curr=Number(p.curr)||1,p.limits=typeof p.limits=="object"?p.limits:[10,20,30,40,50],p.limit=Number(p.limit)||10,p.pages=Math.ceil(p.count/p.limit)||1,p.curr>p.pages?p.curr=p.pages:p.curr<1&&(p.curr=1),f<0?f=1:f>p.pages&&(f=p.pages),p.prev="prev"in p?p.prev:"上一页",p.next="next"in p?p.next:"下一页",p.pages>f?Math.ceil((p.curr+(1<f?1:0))/(0<f?f:1)):1),y={prev:p.prev?'<a class="layui-laypage-prev'+(p.curr==1?" "+a:"")+'" data-page="'+(p.curr-1)+'">'+p.prev+"</a>":"",page:function(){var d=[];if(p.count<1)return"";1<x&&p.first!==!1&&f!==0&&d.push('<a class="layui-laypage-first" data-page="1"  title="首页">'+(p.first||1)+"</a>");var _=Math.floor((f-1)/2),g=1<x?p.curr-_:1,m=1<x?(_=p.curr+(f-_-1))>p.pages?p.pages:_:f;for(m-g<f-1&&(g=m-f+1),p.first!==!1&&2<g&&d.push('<span class="layui-laypage-spr">...</span>');g<=m;g++)g===p.curr?d.push('<span class="layui-laypage-curr"><em class="layui-laypage-em" '+(/^#/.test(p.theme)?'style="background-color:'+p.theme+';"':"")+"></em><em>"+g+"</em></span>"):d.push('<a data-page="'+g+'">'+g+"</a>");return p.pages>f&&p.pages>m&&p.last!==!1&&(m+1<p.pages&&d.push('<span class="layui-laypage-spr">...</span>'),f!==0)&&d.push('<a class="layui-laypage-last" title="尾页"  data-page="'+p.pages+'">'+(p.last||p.pages)+"</a>"),d.join("")}(),next:p.next?'<a class="layui-laypage-next'+(p.curr==p.pages?" "+a:"")+'" data-page="'+(p.curr+1)+'">'+p.next+"</a>":"",count:'<span class="layui-laypage-count">'+(u=typeof p.countText=="object"?p.countText:["共 "," 条"])[0]+p.count+u[1]+"</span>",limit:(l=['<span class="layui-laypage-limits"><select lay-ignore>'],layui.each(p.limits,function(d,_){var g;l.push('<option value="'+_+'"'+(_===p.limit?" selected":"")+">"+(g=(_=_)+" 条/页",typeof p.limitTemplet=="function"&&p.limitTemplet(_)||g)+"</option>")}),l.join("")+"</select></span>"),refresh:['<a data-page="'+p.curr+'" class="layui-laypage-refresh">','<i class="layui-icon layui-icon-refresh"></i>',"</a>"].join(""),skip:['<span class="layui-laypage-skip">'+(u=typeof p.skipText=="object"?p.skipText:["到第","页","确定"])[0],'<input type="text" min="1" value="'+p.curr+'" class="layui-input">',u[1]+'<button type="button" class="layui-laypage-btn">'+u[2]+"</button>","</span>"].join("")};return['<div class="layui-box layui-unselect layui-laypage layui-laypage-'+(p.theme?/^#/.test(p.theme)?"molv":p.theme:"default")+'" id="layui-laypage-'+p.index+'">',(h=[],layui.each(p.layout,function(d,_){y[_]&&h.push(y[_])}),h.join("")),"</div>"].join("")},o.prototype.jump=function(l,u){if(l){var h=this,p=h.config,f=l.children,x=l[s]("button")[0],y=l[s]("input")[0],l=l[s]("select")[0],d=function(){var v=Number(y.value.replace(/\s|\D/g,""));v&&(p.curr=v,h.render())};if(u)return d();for(var _=0,g=f.length;_<g;_++)f[_].nodeName.toLowerCase()==="a"&&c.on(f[_],"click",function(){var v=Number(this.getAttribute("data-page"));v<1||v>p.pages||(p.curr=v,h.render())});l&&c.on(l,"change",function(){var v=this.value;p.curr*v>p.count&&(p.curr=Math.ceil(p.count/v)),p.limit=v,h.render()}),x&&c.on(x,"click",function(){d()})}},o.prototype.skip=function(l){var u,h;l&&(u=this,h=l[s]("input")[0])&&c.on(h,"keyup",function(x){var f=this.value,x=x.keyCode;/^(37|38|39|40)$/.test(x)||(/\D/.test(f)&&(this.value=f.replace(/\D/,"")),x===13&&u.jump(l,!0))})},o.prototype.render=function(l){var u=this,h=u.config,f=u.type(),p=u.view(),f=(f===2?h.elem&&(h.elem.innerHTML=p):f===3?h.elem.html(p):i[r](h.elem)&&(i[r](h.elem).innerHTML=p),h.jump&&h.jump(h,l),i[r]("layui-laypage-"+h.index));u.jump(f),h.hash&&!l&&(location.hash="!"+h.hash+"="+h.curr),u.skip(f)},{render:function(l){return new o(l).index},index:layui.laypage?layui.laypage.index+1e4:0,on:function(l,u,h){return l.attachEvent?l.attachEvent("on"+u,function(p){p.target=p.srcElement,h.call(l,p)}):l.addEventListener(u,h,!1),this}});e("laypage",c)}),function(e,i){var r=e.layui&&layui.define,s={getPath:e.lay&&lay.getPath?lay.getPath:"",link:function(k,D,C){l.path&&e.lay&&lay.layui&&lay.layui.link(l.path+k,D,C)}},a=e.LAYUI_GLOBAL||{},o="laydate",c="lay-"+o+"-id",l={v:"5.6.0",config:{weekStart:0},index:e.laydate&&e.laydate.v?1e5:0,path:a.laydate_dir||s.getPath,set:function(k){var D=this;return D.config=lay.extend({},D.config,k),D},ready:function(k){var D="laydate",C=(r?"modules/":"")+"laydate.css?v="+l.v;return r?layui["layui.all"]?typeof k=="function"&&k():layui.addcss(C,k,D):s.link(C,k,D),this}},u=function(){var k=this,D=k.config.id;return(u.that[D]=k).inst={hint:function(C){k.hint.call(k,C)},reload:function(C){k.reload.call(k,C)},config:k.config}},h="layui-this",p="laydate-disabled",f=[100,2e5],x="layui-laydate-static",y="layui-laydate-list",d="laydate-selected",_="layui-laydate-hint",g="laydate-day-prev",m="laydate-day-next",v=".laydate-btns-confirm",S="laydate-time-text",M="laydate-btns-time",w="layui-laydate-preview",L="layui-laydate-shade",P=function(k){var D,C=this,T=(C.index=++l.index,C.config=lay.extend({},C.config,l.config,k),lay(k.elem||C.config.elem));return 1<T.length?(lay.each(T,function(){l.render(lay.extend({},C.config,{elem:this}))}),C):(k=lay.extend(C.config,lay.options(T[0])),T[0]&&T.attr(c)?(D=u.getThis(T.attr(c)))?D.reload(k):void 0:(k.id="id"in k?k.id:T.attr("id")||C.index,k.index=C.index,void l.ready(function(){C.init()})))},N="yyyy|y|MM|M|dd|d|HH|H|mm|m|ss|s";u.formatArr=function(k){return(k||"").match(new RegExp(N+"|.","g"))||[]},P.isLeapYear=function(k){return k%4==0&&k%100!=0||k%400==0},P.prototype.config={type:"date",range:!1,format:"yyyy-MM-dd",value:null,isInitValue:!0,min:"1900-1-1",max:"2099-12-31",trigger:"click",show:!1,showBottom:!0,isPreview:!0,btns:["clear","now","confirm"],lang:"cn",theme:"default",position:null,calendar:!1,mark:{},holidays:null,zIndex:null,done:null,change:null,autoConfirm:!0,shade:0},P.prototype.lang=function(){var k={cn:{weeks:["日","一","二","三","四","五","六"],time:["时","分","秒"],timeTips:"选择时间",startTime:"开始时间",endTime:"结束时间",dateTips:"返回日期",month:["一","二","三","四","五","六","七","八","九","十","十一","十二"],tools:{confirm:"确定",clear:"清空",now:"现在"},timeout:"结束时间不能早于开始时间<br>请重新选择",invalidDate:"不在有效日期或时间范围内",formatError:["日期格式不合法<br>必须遵循下述格式：<br>","<br>已为你重置"],preview:"当前选中的结果"},en:{weeks:["Su","Mo","Tu","We","Th","Fr","Sa"],time:["Hours","Minutes","Seconds"],timeTips:"Select Time",startTime:"Start Time",endTime:"End Time",dateTips:"Select Date",month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tools:{confirm:"Confirm",clear:"Clear",now:"Now"},timeout:"End time cannot be less than start Time<br>Please re-select",invalidDate:"Invalid date",formatError:["The date format error<br>Must be followed：<br>","<br>It has been reset"],preview:"The selected result"}};return k[this.config.lang]||k.cn},P.prototype.markerOfChineseFestivals={"0-1-1":"元旦","0-2-14":"情人","0-3-8":"妇女","0-3-12":"植树","0-4-1":"愚人","0-5-1":"劳动","0-5-4":"青年","0-6-1":"儿童","0-9-10":"教师","0-10-1":"国庆","0-12-25":"圣诞"},P.prototype.reload=function(k){this.config=lay.extend({},this.config,k),this.init()},P.prototype.init=function(){var k=this,D=k.config,C=D.position==="static",T={year:"yyyy",month:"yyyy-MM",date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss"};D.elem=lay(D.elem),D.eventElem=lay(D.eventElem),D.elem[0]&&(layui.type(D.theme)!=="array"&&(D.theme=[D.theme]),D.fullPanel&&(D.type!=="datetime"||D.range)&&delete D.fullPanel,k.rangeStr=D.range?typeof D.range=="string"?D.range:"-":"",k.rangeLinked=!(!D.range||!D.rangeLinked||D.type!=="date"&&D.type!=="datetime"),k.autoCalendarModel=function(){var A=k.rangeLinked;return k.rangeLinked=D.range&&(D.type==="date"||D.type==="datetime")&&(!k.startDate||!k.endDate||k.startDate&&k.endDate&&k.startDate.year===k.endDate.year&&k.startDate.month===k.endDate.month),lay(k.elem)[k.rangeLinked?"addClass":"removeClass"]("layui-laydate-linkage"),k.rangeLinked!=A},k.autoCalendarModel.auto=k.rangeLinked&&D.rangeLinked==="auto",layui.type(D.range)==="array"&&(k.rangeElem=[lay(D.range[0]),lay(D.range[1])]),T[D.type]||(e.console&&console.error&&console.error("laydate type error:'"+D.type+"' is not supported"),D.type="date"),D.format===T.date&&(D.format=T[D.type]||T.date),k.format=u.formatArr(D.format),D.weekStart&&!/^[0-6]$/.test(D.weekStart)&&(T=k.lang(),D.weekStart=T.weeks.indexOf(D.weekStart),D.weekStart===-1)&&(D.weekStart=0),k.EXP_IF="",k.EXP_SPLIT="",lay.each(k.format,function(A,E){A=new RegExp(N).test(E)?"\\d{"+(new RegExp(N).test(k.format[A===0?A+1:A-1]||"")?/^yyyy|y$/.test(E)?4:E.length:/^yyyy$/.test(E)?"1,4":/^y$/.test(E)?"1,308":"1,2")+"}":"\\"+E,k.EXP_IF=k.EXP_IF+A,k.EXP_SPLIT=k.EXP_SPLIT+"("+A+")"}),k.EXP_IF_ONE=new RegExp("^"+k.EXP_IF+"$"),k.EXP_IF=new RegExp("^"+(D.range?k.EXP_IF+"\\s\\"+k.rangeStr+"\\s"+k.EXP_IF:k.EXP_IF)+"$"),k.EXP_SPLIT=new RegExp("^"+k.EXP_SPLIT+"$",""),k.isInput(D.elem[0])||D.trigger==="focus"&&(D.trigger="click"),D.elem.attr("lay-key",k.index),D.eventElem.attr("lay-key",k.index),D.elem.attr(c,D.id),lay.each(["min","max"],function($,E){var Y=[],q=[];if(typeof D[E]=="number")var I=D[E],B=new Date,B=k.newDate({year:B.getFullYear(),month:B.getMonth(),date:B.getDate(),hours:$?23:0,minutes:$?59:0,seconds:$?59:0}).getTime(),$=new Date(I?I<864e5?B+864e5*I:I:B),Y=[$.getFullYear(),$.getMonth()+1,$.getDate()],q=[$.getHours(),$.getMinutes(),$.getSeconds()];else if(typeof D[E]=="string")Y=(D[E].match(/\d+-\d+-\d+/)||[""])[0].split("-"),q=(D[E].match(/\d+:\d+:\d+/)||[""])[0].split(":");else if(typeof D[E]=="object")return D[E];D[E]={year:0|Y[0]||new Date().getFullYear(),month:Y[1]?(0|Y[1])-1:new Date().getMonth(),date:0|Y[2]||new Date().getDate(),hours:0|q[0],minutes:0|q[1],seconds:0|q[2]}}),k.elemID="layui-laydate"+D.elem.attr("lay-key"),(D.show||C)&&k.render(),C||k.events(),typeof D.formatToDisplay=="function"&&(k.isInput(D.elem[0])?k.formatToDisplay(D.elem[0],D.formatToDisplay):(T=k.rangeElem)&&(k.formatToDisplay(T[0][0],D.formatToDisplay),k.formatToDisplay(T[1][0],D.formatToDisplay))),D.value)&&D.isInitValue&&(layui.type(D.value)==="date"?k.setValue(k.parse(0,k.systemDate(D.value))):k.setValue(D.value))},P.prototype.render=function(){var k,D,C,T,A=this,E=A.config,I=A.lang(),B=E.position==="static",$=A.elem=lay.elem("div",{id:A.elemID,class:["layui-laydate",E.range?" layui-laydate-range":"",A.rangeLinked?" layui-laydate-linkage":"",B?" "+x:"",E.fullPanel?" laydate-theme-fullpanel":"",(k="",lay.each(E.theme,function(z,H){H==="default"||/^#/.test(H)||(k+=" laydate-theme-"+H)}),k)].join("")}),Y=A.elemMain=[],q=A.elemHeader=[],G=A.elemCont=[],F=A.table=[],U=A.footer=lay.elem("div",{class:"layui-laydate-footer"}),tt=A.shortcut=lay.elem("ul",{class:"layui-laydate-shortcut"}),j=(E.zIndex&&($.style.zIndex=E.zIndex),lay.each(new Array(2),function(z){if(!E.range&&0<z)return!0;var H=lay.elem("div",{class:"layui-laydate-header"}),X=[((X=lay.elem("i",{class:"layui-icon laydate-icon laydate-prev-y"})).innerHTML="&#xe65a;",X),((X=lay.elem("i",{class:"layui-icon laydate-icon laydate-prev-m"})).innerHTML="&#xe603;",X),((X=lay.elem("div",{class:"laydate-set-ym"})).appendChild(lay.elem("span")),X.appendChild(lay.elem("span")),X),((X=lay.elem("i",{class:"layui-icon laydate-icon laydate-next-m"})).innerHTML="&#xe602;",X),((X=lay.elem("i",{class:"layui-icon laydate-icon laydate-next-y"})).innerHTML="&#xe65b;",X)],K=lay.elem("div",{class:"layui-laydate-content"}),rt=lay.elem("table"),nt=lay.elem("thead"),Q=lay.elem("tr");lay.each(X,function(it,at){H.appendChild(at)}),nt.appendChild(Q),lay.each(new Array(6),function(it){var at=rt.insertRow(0);lay.each(new Array(7),function(ut){var ft;it===0&&((ft=lay.elem("th")).innerHTML=I.weeks[(ut+E.weekStart)%7],Q.appendChild(ft)),at.insertCell(ut)})}),rt.insertBefore(nt,rt.children[0]),K.appendChild(rt),Y[z]=lay.elem("div",{class:"layui-laydate-main laydate-main-list-"+z}),Y[z].appendChild(H),Y[z].appendChild(K),q.push(X),G.push(K),F.push(rt)}),lay(U).html((j=[],D=[],E.type==="datetime"&&j.push('<span lay-type="datetime" class="'+M+'">'+I.timeTips+"</span>"),(E.range||E.type!=="datetime"||E.fullPanel)&&j.push('<span class="'+w+'" title="'+I.preview+'"></span>'),lay.each(E.btns,function(z,H){var X=I.tools[H]||"btn";E.range&&H==="now"||(B&&H==="clear"&&(X=E.lang==="cn"?"重置":"Reset"),D.push('<span lay-type="'+H+'" class="laydate-btns-'+H+'">'+X+"</span>"))}),j.push('<div class="laydate-footer-btns">'+D.join("")+"</div>"),j.join(""))),E.shortcuts&&($.appendChild(tt),lay(tt).html((C=[],lay.each(E.shortcuts,function(z,H){C.push('<li data-index="'+z+'">'+H.text+"</li>")}),C.join(""))).find("li").on("click",function(z){var X=E.shortcuts[this.dataset.index]||{},X=(typeof X.value=="function"?X.value():X.value)||[],H=(layui.isArray(X)||(X=[X]),E.type),X=(lay.each(X,function(K,rt){var nt=[E.dateTime,A.endDate][K];H==="time"&&layui.type(rt)!=="date"?A.EXP_IF.test(rt)&&(rt=(rt.match(A.EXP_SPLIT)||[]).slice(1),lay.extend(nt,{hours:0|rt[0],minutes:0|rt[2],seconds:0|rt[4]})):lay.extend(nt,A.systemDate(layui.type(rt)==="date"?rt:new Date(rt))),H!=="time"&&H!=="datetime"||(A[["startTime","endTime"][K]]={hours:nt.hours,minutes:nt.minutes,seconds:nt.seconds}),K===0?A.startDate=lay.extend({},nt):A.endState=!0,H==="year"||H==="month"||H==="time"?A.listYM[K]=[nt.year,nt.month+1]:K&&A.autoCalendarModel.auto&&A.autoCalendarModel()}),A.checkDate("limit").calendar(null,null,"init"),lay(A.footer).find("."+M).removeClass(p));X&&X.attr("lay-type")==="date"&&X[0].click(),A.done(null,"change"),lay(this).addClass(h),E.position!=="static"&&A.setValue(A.parse()).done().remove()})),lay.each(Y,function(z,H){$.appendChild(H)}),E.showBottom&&$.appendChild(U),lay.elem("style")),et=[],V=!0,tt=(lay.each(E.theme,function(z,H){V&&/^#/.test(H)?(V=!(T=!0),et.push(["#{{id}} .layui-laydate-header{background-color:{{theme}};}","#{{id}} li.layui-this,#{{id}} td.layui-this>div{background-color:{{theme}} !important;}",E.theme.indexOf("circle")!==-1?"":"#{{id}} .layui-this{background-color:{{theme}} !important;}","#{{id}} .laydate-day-now{color:{{theme}} !important;}","#{{id}} .laydate-day-now:after{border-color:{{theme}} !important;}"].join("").replace(/{{id}}/g,A.elemID).replace(/{{theme}}/g,H))):!V&&/^#/.test(H)&&et.push(["#{{id}} .laydate-selected>div{background-color:{{theme}} !important;}","#{{id}} .laydate-selected:hover>div{background-color:{{theme}} !important;}"].join("").replace(/{{id}}/g,A.elemID).replace(/{{theme}}/g,H))}),E.shortcuts&&E.range&&et.push("#{{id}}.layui-laydate-range{width: 628px;}".replace(/{{id}}/g,A.elemID)),et.length&&(et=et.join(""),"styleSheet"in j?(j.setAttribute("type","text/css"),j.styleSheet.cssText=et):j.innerHTML=et,T&&lay($).addClass("laydate-theme-molv"),$.appendChild(j)),A.remove(P.thisElemDate),l.thisId=E.id,B?E.elem.append($):(i.body.appendChild($),A.position()),E.shade?'<div class="'+L+'" style="z-index:'+(parseInt(layui.getStyle($,"z-index"))-1)+"; background-color: "+(E.shade[1]||"#000")+"; opacity: "+(E.shade[0]||E.shade)+'"></div>':"");$.insertAdjacentHTML("beforebegin",tt),A.checkDate().calendar(null,0,"init"),A.changeEvent(),P.thisElemDate=A.elemID,A.renderAdditional(),typeof E.ready=="function"&&E.ready(lay.extend({},E.dateTime,{month:E.dateTime.month+1})),A.preview()},P.prototype.remove=function(k){var D=this,C=D.config,T=lay("#"+(k||D.elemID));return T[0]&&(T.hasClass(x)||D.checkDate(function(){T.remove(),delete D.startDate,delete D.endDate,delete D.endState,delete D.startTime,delete D.endTime,delete l.thisId,typeof C.close=="function"&&C.close(D)}),lay("."+L).remove()),D},P.prototype.position=function(){var k=this.config;return lay.position(k.elem[0],this.elem,{position:k.position}),this},P.prototype.hint=function(k){var D=this,C=(D.config,lay.elem("div",{class:_}));D.elem&&(C.innerHTML=(k=typeof k=="object"?k||{}:{content:k}).content||"",lay(D.elem).find("."+_).remove(),D.elem.appendChild(C),clearTimeout(D.hinTimer),D.hinTimer=setTimeout(function(){lay(D.elem).find("."+_).remove()},"ms"in k?k.ms:3e3))},P.prototype.getAsYM=function(k,D,C){return C?D--:D++,D<0&&(D=11,k--),11<D&&(D=0,k++),[k,D]},P.prototype.systemDate=function(k){var D=k||new Date;return{year:D.getFullYear(),month:D.getMonth(),date:D.getDate(),hours:k?k.getHours():0,minutes:k?k.getMinutes():0,seconds:k?k.getSeconds():0}},P.prototype.checkDate=function(k){var D,C,T,A,E,I=this,B=I.config,$=I.lang(),Y=B.dateTime=B.dateTime||I.systemDate(),q=B.elem[0],G=(I.isInput(q),function(){if(I.rangeElem){var j=[I.rangeElem[0].val(),I.rangeElem[1].val()];if(j[0]&&j[1])return j.join(" "+I.rangeStr+" ")}return I.isInput(q)?q.value:B.position==="static"?"":lay(q).attr("lay-date")}()),F=function(j){j&&(j.year>f[1]&&(j.year=f[1],C=!0),11<j.month&&(j.month=11,C=!0),59<j.seconds&&(j.seconds=0,j.minutes++,C=!0),59<j.minutes&&(j.minutes=0,j.hours++,C=!0),23<j.hours&&(j.hours=0,C=!0),D=l.getEndDate(j.month+1,j.year),j.date>D)&&(j.date=D,C=!0)},U=function(j,et,V){var tt=["startTime","endTime"];et=(et.match(I.EXP_SPLIT)||[]).slice(1),V=V||0,B.range&&(I[tt[V]]=I[tt[V]]||{}),lay.each(I.format,function(z,H){var X=parseFloat(et[z]);et[z].length<H.length&&(C=!0),/yyyy|y/.test(H)?(X<f[0]&&(X=f[0],C=!0),j.year=X):/MM|M/.test(H)?(X<1&&(X=1,C=!0),j.month=X-1):/dd|d/.test(H)?(X<1&&(X=1,C=!0),j.date=X):/HH|H/.test(H)?(X<0&&(C=!(X=0)),23<X&&(X=23,C=!0),j.hours=X,B.range&&(I[tt[V]].hours=X)):/mm|m/.test(H)?(X<0&&(C=!(X=0)),59<X&&(X=59,C=!0),j.minutes=X,B.range&&(I[tt[V]].minutes=X)):/ss|s/.test(H)&&(X<0&&(C=!(X=0)),59<X&&(X=59,C=!0),j.seconds=X,B.range)&&(I[tt[V]].seconds=X)}),F(j)};return k==="limit"?B.range?(F(I.rangeLinked?I.startDate:Y),I.endDate&&F(I.endDate)):F(Y):(typeof(G=G||B.value)=="string"&&(G=G.replace(/\s+/g," ").replace(/^\s|\s$/g,"")),(T=function(){var j,et,V;B.range&&(I.endDate=I.endDate||lay.extend({},B.dateTime,(j={},et=B.dateTime,V=I.getAsYM(et.year,et.month),B.type==="year"?j.year=et.year+1:B.type!=="time"&&(j.year=V[0],j.month=V[1]),B.type!=="datetime"&&B.type!=="time"||(j.hours=23,j.minutes=j.seconds=59),j)))})(),typeof G=="string"&&G?I.EXP_IF.test(G)?B.range?(G=G.split(" "+I.rangeStr+" "),lay.each([B.dateTime,I.endDate],function(j,et){U(et,G[j],j)})):U(Y,G):(I.hint($.formatError[0]+(B.range?B.format+" "+I.rangeStr+" "+B.format:B.format)+$.formatError[1]),C=!0):G&&layui.type(G)==="date"?B.dateTime=I.systemDate(G):(B.dateTime=I.systemDate(),delete I.startTime,delete I.endDate,T(),delete I.endTime),I.rangeElem&&(T=[I.rangeElem[0].val(),I.rangeElem[1].val()],A=[B.dateTime,I.endDate],lay.each(T,function(j,et){I.EXP_IF_ONE.test(et)&&U(A[j],et,j)})),F(Y),B.range&&F(I.endDate),C&&G&&I.setValue(!B.range||I.endDate?I.parse():""),I.getDateTime(Y)>I.getDateTime(B.max)?(Y=B.dateTime=lay.extend({},B.max),E=!0):I.getDateTime(Y)<I.getDateTime(B.min)&&(Y=B.dateTime=lay.extend({},B.min),E=!0),B.range&&((I.getDateTime(I.endDate)<I.getDateTime(B.min)||I.getDateTime(I.endDate)>I.getDateTime(B.max))&&(I.endDate=lay.extend({},B.max),E=!0),I.startTime={hours:B.dateTime.hours,minutes:B.dateTime.minutes,seconds:B.dateTime.seconds},I.endTime={hours:I.endDate.hours,minutes:I.endDate.minutes,seconds:I.endDate.seconds},B.type==="month")&&(B.dateTime.date=1,I.endDate.date=1),E&&G&&(I.setValue(I.parse()),I.hint("value "+$.invalidDate+$.formatError[1])),I.startDate=I.startDate||G&&lay.extend({},B.dateTime),I.autoCalendarModel.auto&&I.autoCalendarModel(),I.endState=!B.range||!I.rangeLinked||!(!I.startDate||!I.endDate),k&&k()),I},P.prototype.markRender=function(k,D,C){var T;typeof C=="object"?lay.each(C||{},function(A,E){A=A.split("-"),A[0]!=D[0]&&A[0]!=0||A[1]!=D[1]&&A[1]!=0||A[2]!=D[2]||(T=E||D[2])}):typeof C=="string"&&(T=C||D[2]),T&&k.find("div").html('<span class="laydate-day-mark">'+T+"</span>")},P.prototype.mark=function(k,D){var C=this,T=C.config,A=function(E){C.markRender(k,D,E)};return T.calendar&&T.lang==="cn"&&A(C.markerOfChineseFestivals),typeof T.mark=="function"?T.mark({year:D[0],month:D[1],date:D[2]},A):typeof T.mark=="object"&&A(T.mark),C},P.prototype.holidaysRender=function(k,D,C){var T=["holidays","workdays"],A=function(E,I,B){E.find("div").html(["<span",' class="laydate-day-holidays"',' type="'+I+'"',">",B,"</span>"].join(""))};layui.type(C)==="array"?lay.each(C,function(E,I){lay.each(I,function(B,$){var Y,q,G;$=$,Y=k.attr("lay-ymd"),q=$.split("-"),G=Y.split("-"),lay.each(q,function(F,U){q[F]=parseInt(U,10)}),lay.each(G,function(F,U){G[F]=parseInt(U,10)}),q.join("-")===G.join("-")&&A(k,T[E],D[2])})}):typeof C=="string"&&T.indexOf(C)!==-1&&A(k,C,D[2])},P.prototype.holidays=function(k,D){var C=this,T=C.config,A=function(E){C.holidaysRender(k,D,E)};return typeof T.holidays=="function"?T.holidays({year:D[0],month:D[1],date:D[2]},A):layui.type(T.holidays)==="array"&&A(T.holidays),C},P.prototype.cellRender=function(k,D,C){var T=this.config;return typeof T.cellRender=="function"&&T.cellRender(D,function(A){typeof A=="string"?lay(k).html(A):typeof A=="object"&&lay(k).html("").append(lay(A)[0])},{originElem:k,type:C}),this},P.prototype.startOfYear=function(k){return k=new Date(k),k.setFullYear(k.getFullYear(),0,1),k.setHours(0,0,0,0),k},P.prototype.endOfYear=function(D){var D=new Date(D),C=D.getFullYear();return D.setFullYear(C+1,0,0),D.setHours(23,59,59,999),D},P.prototype.startOfMonth=function(k){return k=new Date(k),k.setDate(1),k.setHours(0,0,0,0),k},P.prototype.endOfMonth=function(D){var D=new Date(D),C=D.getMonth();return D.setFullYear(D.getFullYear(),C+1,0),D.setHours(23,59,59,999),D},P.prototype.addDays=function(k,D){return k=new Date(k),D&&k.setDate(k.getDate()+D),k},P.prototype.isDisabledYearOrMonth=function(k,D,C){for(var T=this,A=T.config,E=D==="year"?T.startOfYear(k):T.startOfMonth(k),D=D==="year"?T.endOfYear(k):T.endOfMonth(k),I=Math.floor((D.getTime()-E.getTime())/864e5)+1,B=0,$=0;$<I;$++){var Y=T.addDays(E,$);A.disabledDate.call(A,Y,C)&&B++}return B===I},P.prototype.isDisabledDate=function(k,D){D=D||{};var C=this.config,T=!C.range||D.rangeType===0?"start":"end";return!!C.disabledDate&&C.type!=="time"&&(D.disabledType==="date"||D.disabledType==="datetime")&&((k=new Date(k)).setHours(0,0,0,0),D.type==="year"||D.type==="month"?this.isDisabledYearOrMonth(k,D.type,T):C.disabledDate.call(C,k,T))},P.prototype.isDisabledTime=function(k,D){D=D||{};var C,T=this.config,A=!T.range||D.rangeType===0?"start":"end";return!!T.disabledTime&&!(T.type!=="time"&&T.type!=="datetime"||D.disabledType!=="time"&&D.disabledType!=="datetime")&&(C=function(E,I,B){return function(){return(typeof I=="function"&&I.apply(T,B)||[]).indexOf(E)!==-1}},k=this.systemDate(new Date(k)),A=T.disabledTime.call(T,this.newDate(k),A)||{},D.disabledType==="datetime"?C(k.hours,A.hours)()||C(k.minutes,A.minutes,[k.hours])()||C(k.seconds,A.seconds,[k.hours,k.minutes])():[C(k.hours,A.hours),C(k.minutes,A.minutes,[k.hours]),C(k.seconds,A.seconds,[k.hours,k.minutes])][D.time.length-1]())},P.prototype.isDisabledDateTime=function(k,D){return this.config,this.isDisabledDate(k,D=D||{})||this.isDisabledTime(k,D)},P.prototype.limit=function(k){k=k||{};var D=this,C=D.config,T={},A=k.index>(k.time?0:41)?D.endDate:C.dateTime;return lay.each({now:lay.extend({},A,k.date||{}),min:C.min,max:C.max},function(E,I){var B;T[E]=D.newDate(lay.extend({year:I.year,month:k.type==="year"?0:I.month,date:k.type==="year"||k.type==="month"?1:I.date},(B={},lay.each(k.time,function($,Y){B[Y]=I[Y]}),B))).getTime()}),A=T.now<T.min||T.max<T.now||D.isDisabledDateTime(T.now,k),k.elem&&k.elem[A?"addClass":"removeClass"](p),A},P.prototype.thisDateTime=function(k){var D=this.config;return k?this.endDate:D.dateTime},P.prototype.calendar=function(k,D,C){D=D?1:0;var T,A,E,I=this,B=I.config,$=k||I.thisDateTime(D),Y=new Date,q=I.lang(),G=B.type!=="date"&&B.type!=="datetime",F=lay(I.table[D]).find("td"),U=lay(I.elemHeader[D][2]).find("span");return $.year<f[0]&&($.year=f[0],I.hint(q.invalidDate)),$.year>f[1]&&($.year=f[1],I.hint(q.invalidDate)),I.firstDate||(I.firstDate=lay.extend({},$)),Y.setFullYear($.year,$.month,1),T=(Y.getDay()+(7-B.weekStart))%7,A=l.getEndDate($.month||12,$.year),E=l.getEndDate($.month+1,$.year),lay.each(F,function(j,et){var V,tt=[$.year,$.month];(et=lay(et)).removeAttr("class"),j<T?(V=A-T+j,et.addClass("laydate-day-prev"),tt=I.getAsYM($.year,$.month,"sub")):T<=j&&j<E+T?(V=j-T,I.rangeLinked||V+1===$.date&&et.addClass(h)):(V=j-E-T,et.addClass("laydate-day-next"),tt=I.getAsYM($.year,$.month)),tt[1]++,tt[2]=V+1,et.attr("lay-ymd",tt.join("-")).html("<div>"+tt[2]+"</div>"),I.mark(et,tt).holidays(et,tt).limit({elem:et,date:{year:tt[0],month:tt[1]-1,date:tt[2]},index:j,rangeType:D,disabledType:"date"}),I.cellRender(et,{year:tt[0],month:tt[1],date:tt[2]},"date")}),lay(U[0]).attr("lay-ym",$.year+"-"+($.month+1)),lay(U[1]).attr("lay-ym",$.year+"-"+($.month+1)),I.panelYM||(I.panelYM={}),I.panelYM[D]={year:$.year,month:$.month},B.lang==="cn"?(lay(U[0]).attr("lay-type","year").html($.year+" 年"),lay(U[1]).attr("lay-type","month").html($.month+1+" 月")):(lay(U[0]).attr("lay-type","month").html(q.month[$.month]),lay(U[1]).attr("lay-type","year").html($.year)),G&&(B.range?!k&&C==="init"||(I.listYM=[[(I.startDate||B.dateTime).year,(I.startDate||B.dateTime).month+1],[I.endDate.year,I.endDate.month+1]],I.list(B.type,0).list(B.type,1),B.type==="time"?I.setBtnStatus("时间",lay.extend({},I.systemDate(),I.startTime),lay.extend({},I.systemDate(),I.endTime)):I.setBtnStatus(!0)):(I.listYM=[[$.year,$.month+1]],I.list(B.type,0))),B.range&&C==="init"&&(I.rangeLinked?(Y=I.getAsYM($.year,$.month,D?"sub":null),I.calendar(lay.extend({},$,{year:Y[0],month:Y[1]}),1-D)):I.calendar(null,1-D)),B.range||(F=["hours","minutes","seconds"],I.limit({elem:lay(I.footer).find(".laydate-btns-now"),date:I.systemDate(/^(datetime|time)$/.test(B.type)?new Date:null),index:0,time:F,disabledType:"datetime"}),I.limit({elem:lay(I.footer).find(v),index:0,time:F,disabledType:"datetime"})),I.setBtnStatus(),lay(I.shortcut).find("li."+h).removeClass(h),B.range&&!G&&C!=="init"&&I.stampRange(),I},P.prototype.list=function(k,D){var C,T,A,E,I,B,$,Y=this,q=Y.config,G=Y.rangeLinked?q.dateTime:[q.dateTime,Y.endDate][D],F=Y.lang(),U=q.range&&q.type!=="date"&&q.type!=="datetime",j=lay.elem("ul",{class:y+" "+{year:"laydate-year-list",month:"laydate-month-list",time:"laydate-time-list"}[k]}),et=Y.elemHeader[D],V=lay(et[2]).find("span"),tt=Y.elemCont[D||0],z=lay(tt).find("."+y)[0],H=q.lang==="cn",X=H?"年":"",K=Y.listYM[D]||{},rt=["hours","minutes","seconds"],nt=["startTime","endTime"][D];return K[0]<1&&(K[0]=1),k==="year"?(A=C=K[0]-7,C<1&&(A=C=1),lay.each(new Array(15),function(Q){var it=lay.elem("li",{"lay-ym":C}),at={year:C,month:0,date:1};C==K[0]&&lay(it).addClass(h),it.innerHTML=C+X,j.appendChild(it),Y.limit({elem:lay(it),date:at,index:D,type:k,rangeType:D,disabledType:"date"}),Y.cellRender(it,{year:C,month:1,date:1},"year"),C++}),lay(V[H?0:1]).attr("lay-ym",C-8+"-"+K[1]).html(A+X+" - "+(C-1)+X)):k==="month"?(lay.each(new Array(12),function(Q){var it=lay.elem("li",{"lay-ym":Q}),at={year:K[0],month:Q,date:1};Q+1==K[1]&&lay(it).addClass(h),it.innerHTML=F.month[Q]+(H?"月":""),j.appendChild(it),Y.limit({elem:lay(it),date:at,index:D,type:k,rangeType:D,disabledType:"date"}),Y.cellRender(it,{year:K[0],month:Q+1,date:1},"month")}),lay(V[H?0:1]).attr("lay-ym",K[0]+"-"+K[1]).html(K[0]+X)):k==="time"&&(T=function(){lay(j).find("ol").each(function(Q,it){lay(it).find("li").each(function(at,ut){Y.limit({elem:lay(ut),date:[{hours:at},{hours:Y[nt].hours,minutes:at},{hours:Y[nt].hours,minutes:Y[nt].minutes,seconds:at}][Q],index:D,rangeType:D,disabledType:"time",time:[["hours"],["hours","minutes"],["hours","minutes","seconds"]][Q]})})}),q.range||Y.limit({elem:lay(Y.footer).find(v),date:Y[nt],index:0,time:["hours","minutes","seconds"],disabledType:"datetime"})},q.range?Y[nt]||(Y[nt]=nt==="startTime"?G:Y.endDate):Y[nt]=G,lay.each([24,60,60],function(Q,it){var at=lay.elem("li"),ut=["<p>"+F.time[Q]+"</p><ol>"];lay.each(new Array(it),function(ft){ut.push("<li"+(Y[nt][rt[Q]]===ft?' class="'+h+'"':"")+">"+lay.digit(ft,2)+"</li>")}),at.innerHTML=ut.join("")+"</ol>",j.appendChild(at)}),T(),A=q.format.indexOf("H")!==-1,V=q.format.indexOf("m")!==-1,$=q.format.indexOf("s")!==-1,E=j.children,I=0,lay.each([A,V,$],function(Q,it){it||(E[Q].className+=" layui-hide",I++)}),j.className+=" laydate-time-list-hide-"+I),z&&tt.removeChild(z),tt.appendChild(j),k==="year"||k==="month"?(lay(Y.elemMain[D]).addClass("laydate-ym-show"),lay(j).find("li").on("click",function(){var Q,it,at=0|lay(this).attr("lay-ym");lay(this).hasClass(p)||(Y.rangeLinked?lay.extend(G,{year:k==="year"?at:K[0],month:k==="year"?K[1]-1:at}):G[k]=at,Q=["year","month"].indexOf(q.type)!==-1,it=k==="year"&&["date","datetime"].indexOf(q.type)!==-1,Q||it?(lay(j).find("."+h).removeClass(h),lay(this).addClass(h),(q.type==="month"&&k==="year"||it)&&(Y.listYM[D][0]=at,U&&((D?Y.endDate:G).year=at),Y.list("month",D))):(Y.checkDate("limit").calendar(G,D,"init"),Y.closeList()),q.range||Y.limit({type:k,elem:lay(Y.footer).find(v),date:G,disabledType:"datetime"}),Y.setBtnStatus(),!q.range&&q.autoConfirm&&(q.type==="month"&&k==="month"||q.type==="year"&&k==="year")&&Y.setValue(Y.parse()).done().remove(),Y.autoCalendarModel.auto&&!Y.rangeLinked?Y.choose(lay(tt).find("td.layui-this"),D):Y.endState&&Y.done(null,"change"),lay(Y.footer).find("."+M).removeClass(p))})):(V=lay.elem("span",{class:S}),B=function(){lay(j).find("ol").each(function(Q){var it=this,at=lay(it).find("li");it.scrollTop=30*(Y[nt][rt[Q]]-2),it.scrollTop<=0&&at.each(function(ut,ft){if(!lay(this).hasClass(p))return it.scrollTop=30*(ut-2),!0})})},$=lay(et[2]).find("."+S),B(),V.innerHTML=q.range?[F.startTime,F.endTime][D]:F.timeTips,lay(Y.elemMain[D]).addClass("laydate-time-show"),$[0]&&$.remove(),et[2].appendChild(V),(z=lay(j).find("ol")).each(function(Q){var it=this;lay(it).find("li").on("click",function(){var at=0|this.innerHTML;lay(this).hasClass(p)||(q.range?Y[nt][rt[Q]]=at:G[rt[Q]]=at,lay(it).find("."+h).removeClass(h),lay(this).addClass(h),T(),B(),!Y.endDate&&q.type!=="time"&&q.type!=="datetime"||Y.done(null,"change"),Y.setBtnStatus())})}),layui.device().mobile&&z.css({overflowY:"auto",touchAction:"pan-y"})),Y},P.prototype.listYM=[],P.prototype.closeList=function(){var k=this;k.config,lay.each(k.elemCont,function(D,C){lay(this).find("."+y).remove(),lay(k.elemMain[D]).removeClass("laydate-ym-show laydate-time-show")}),lay(k.elem).find("."+S).remove()},P.prototype.setBtnStatus=function(k,D,C){var T=this,A=T.config,E=T.lang(),I=lay(T.footer).find(v),B=A.type==="datetime"||A.type==="time"?["hours","minutes","seconds"]:void 0;A.range&&(D=D||(T.rangeLinked?T.startDate:A.dateTime),C=C||T.endDate,A=!T.endState||T.newDate(D).getTime()>T.newDate(C).getTime(),T.limit({date:D,disabledType:"datetime",time:B,rangeType:0})||T.limit({date:C,disabledType:"datetime",time:B,rangeType:1})?I.addClass(p):I[A?"addClass":"removeClass"](p),k)&&A&&T.hint(typeof k=="string"?E.timeout.replace(/\u65e5\u671f/g,k):E.timeout)},P.prototype.parse=function(k,A){var C=this,T=C.config,E=C.rangeLinked?C.startDate:T.dateTime,A=A||(k=="end"?lay.extend({},C.endDate,C.endTime):T.range?lay.extend({},E||T.dateTime,C.startTime):T.dateTime),E=l.parse(A,C.format,1);return T.range&&k===void 0?E+" "+C.rangeStr+" "+C.parse("end"):E},P.prototype.newDate=function(k){return k=k||{},new Date(k.year||1,k.month||0,k.date||1,k.hours||0,k.minutes||0,k.seconds||0)},P.prototype.getDateTime=function(k){return this.newDate(k).getTime()},P.prototype.formatToDisplay=function(k,D){var C=this,T=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");Object.defineProperty(k,"value",lay.extend({},T,{get:function(){return this.getAttribute("lay-date")},set:function(A){T.set.call(this,D.call(C,A)),this.setAttribute("lay-date",A)}}))},P.prototype.setValue=function(k){var D,C=this,T=C.config,A=T.elem[0];return T.position!=="static"&&(k=k||"",C.isInput(A)?lay(A).val(k):(D=C.rangeElem)?(layui.type(k)!=="array"&&(k=k.split(" "+C.rangeStr+" ")),D[0].val(k[0]||""),D[1].val(k[1]||"")):(lay(A).find("*").length===0&&(D=typeof T.formatToDisplay=="function"?T.formatToDisplay(k):k,lay(A).html(D)),lay(A).attr("lay-date",k))),C},P.prototype.preview=function(){var k,D=this,C=D.config;C.isPreview&&(k=lay(D.elem).find("."+w),C=!C.range||(D.rangeLinked?D.endState:D.endDate)?D.parse():"",k.html(C),k.html())&&(k.css({color:"#16b777"}),setTimeout(function(){k.css({color:"#777"})},300))},P.prototype.renderAdditional=function(){this.config.fullPanel&&this.list("time",0)},P.prototype.stampRange=function(){var k,D=this,C=D.config,T=D.rangeLinked?D.startDate:C.dateTime,A=lay(D.elem).find("td");C.range&&!D.endState&&lay(D.footer).find(v).addClass(p),T=T&&D.newDate({year:T.year,month:T.month,date:T.date}).getTime(),k=D.endState&&D.endDate&&D.newDate({year:D.endDate.year,month:D.endDate.month,date:D.endDate.date}).getTime(),lay.each(A,function(E,I){var B=lay(I).attr("lay-ymd").split("-"),B=D.newDate({year:B[0],month:B[1]-1,date:B[2]}).getTime();C.rangeLinked&&!D.startDate&&B===D.newDate(D.systemDate()).getTime()&&lay(I).addClass(lay(I).hasClass(g)||lay(I).hasClass(m)?"":"laydate-day-now"),lay(I).removeClass(d+" "+h),B!==T&&B!==k||(D.rangeLinked||!D.rangeLinked&&(E<42?B===T:B===k))&&lay(I).addClass(lay(I).hasClass(g)||lay(I).hasClass(m)?d:h),T<B&&B<k&&lay(I).addClass(d)})},P.prototype.done=function(k,D){var C=this,T=C.config,A=lay.extend({},lay.extend(C.rangeLinked?C.startDate:T.dateTime,C.startTime)),E=lay.extend({},lay.extend(C.endDate,C.endTime));return lay.each([A,E],function(I,B){"month"in B&&lay.extend(B,{month:B.month+1})}),C.preview(),k=k||[C.parse(),A,E],D==="change"&&C.renderAdditional(),typeof T[D||"done"]=="function"&&T[D||"done"].apply(T,k),C},P.prototype.checkPanelDate=function(k,D){var C,T=this.config;if(T.type==="date"||T.type==="datetime")return T=D===0,k=k.month+1,C=this.panelYM[D].month+1,T=this.endState&&(T&&C<k||!T&&k<C)?1-D:D,{needFullRender:k!==C,index:T}},P.prototype.choose=function(k,D){var C,T,A,E,I,B,$;k.hasClass(p)||(T=(C=this).config,A=D,C.rangeLinked&&(C.endState||!C.startDate?(D=0,C.endState=!1):(D=1,C.endState=!0)),E=C.thisDateTime(D),lay(C.elem).find("td"),k={year:0|(k=k.attr("lay-ymd").split("-"))[0],month:(0|k[1])-1,date:0|k[2]},lay.extend(E,k),T.range?(lay.each(["startTime","endTime"],function(Y,q){C[q]=C[q]||{hours:Y?23:0,minutes:Y?59:0,seconds:Y?59:0},D===Y&&(C.getDateTime(lay.extend({},E,C[q]))<C.getDateTime(T.min)?(C[q]={hours:T.min.hours,minutes:T.min.minutes,seconds:T.min.seconds},lay.extend(E,C[q])):C.getDateTime(lay.extend({},E,C[q]))>C.getDateTime(T.max)&&(C[q]={hours:T.max.hours,minutes:T.max.minutes,seconds:T.max.seconds},lay.extend(E,C[q])))}),D||(C.startDate=lay.extend({},E)),C.endState&&!C.limit({date:C.rangeLinked?C.startDate:C.thisDateTime(1-D),disabledType:"date"})&&(((I=C.endState&&C.autoCalendarModel.auto?C.autoCalendarModel():I)||C.rangeLinked&&C.endState)&&C.newDate(C.startDate)>C.newDate(C.endDate)&&(C.startDate.year===C.endDate.year&&C.startDate.month===C.endDate.month&&C.startDate.date===C.endDate.date&&(B=C.startTime,C.startTime=C.endTime,C.endTime=B),B=C.startDate,C.startDate=lay.extend({},C.endDate,C.startTime),T.dateTime=lay.extend({},C.startDate),C.endDate=lay.extend({},B,C.endTime)),I)&&(T.dateTime=lay.extend({},C.startDate)),C.rangeLinked?(k=C.checkPanelDate(E,A),B=lay.extend({},E),$=I||k&&k.needFullRender?"init":null,k=k?k.index:A,C.calendar(B,k,$)):C.calendar(null,D,I?"init":null),C.endState&&C.done(null,"change")):T.position==="static"?C.calendar().done().done(null,"change"):T.type==="date"?T.autoConfirm?C.setValue(C.parse()).done().remove():C.calendar().done(null,"change"):T.type==="datetime"&&C.calendar().done(null,"change"))},P.prototype.tool=function(k,D){var C=this,T=C.config,A=C.lang(),E=T.dateTime,I=T.position==="static",B={datetime:function(){lay(k).hasClass(p)||(C.list("time",0),T.range&&C.list("time",1),lay(k).attr("lay-type","date").html(C.lang().dateTips))},date:function(){C.closeList(),lay(k).attr("lay-type","datetime").html(C.lang().timeTips)},clear:function(){I&&(lay.extend(E,C.firstDate),C.calendar()),T.range&&(delete T.dateTime,delete C.endDate,delete C.startTime,delete C.endTime),C.setValue(""),C.done(null,"onClear").done(["",{},{}]).remove()},now:function(){var $=new Date;if(lay(k).hasClass(p))return C.hint(A.tools.now+", "+A.invalidDate);lay.extend(E,C.systemDate(),{hours:$.getHours(),minutes:$.getMinutes(),seconds:$.getSeconds()}),C.setValue(C.parse()),I&&C.calendar(),C.done(null,"onNow").done().remove()},confirm:function(){if(T.range){if(lay(k).hasClass(p))return(T.type==="time"?C.startTime&&C.endTime&&C.newDate(C.startTime)>C.newDate(C.endTime):C.startDate&&C.endDate&&C.newDate(lay.extend({},C.startDate,C.startTime||{}))>C.newDate(lay.extend({},C.endDate,C.endTime||{})))?C.hint(T.type==="time"?A.timeout.replace(/\u65e5\u671f/g,"时间"):A.timeout):C.hint(A.invalidDate)}else if(lay(k).hasClass(p))return C.hint(A.invalidDate);C.setValue(C.parse()),C.done(null,"onConfirm").done().remove()}};B[D]&&B[D]()},P.prototype.change=function(k){var D=this,C=D.config,T=D.thisDateTime(k),A=C.range&&(C.type==="year"||C.type==="month"),E=D.elemCont[k||0],I=D.listYM[k],B=function($){var Y=lay(E).find(".laydate-year-list")[0],q=lay(E).find(".laydate-month-list")[0];return Y&&(I[0]=$?I[0]-15:I[0]+15,D.list("year",k)),q&&($?I[0]--:I[0]++,D.list("month",k)),(Y||q)&&(lay.extend(T,{year:I[0]}),A&&(T.year=I[0]),C.range||D.done(null,"change"),C.range||D.limit({elem:lay(D.footer).find(v),date:{year:I[0],month:Y?0:I[1]-1},disabledType:"datetime"})),D.setBtnStatus(),Y||q};return{prevYear:function(){B("sub")||(D.rangeLinked?(C.dateTime.year--,D.checkDate("limit").calendar(null,null,"init")):(T.year--,D.checkDate("limit").calendar(null,k),D.autoCalendarModel.auto?D.choose(lay(E).find("td.layui-this"),k):D.done(null,"change")))},prevMonth:function(){var $,Y;D.rangeLinked?(Y=D.panelYM[0],Y=D.getAsYM(Y.year,Y.month,"sub"),$=lay.extend({},C.dateTime,D.panelYM[0],{year:Y[0],month:Y[1]}),D.checkDate("limit").calendar($,null,"init")):(Y=D.getAsYM(T.year,T.month,"sub"),lay.extend(T,{year:Y[0],month:Y[1]}),D.checkDate("limit").calendar(null,null,"init"),D.autoCalendarModel.auto?D.choose(lay(E).find("td.layui-this"),k):D.done(null,"change"))},nextMonth:function(){var $,Y;D.rangeLinked?(Y=D.panelYM[0],Y=D.getAsYM(Y.year,Y.month),$=lay.extend({},C.dateTime,D.panelYM[0],{year:Y[0],month:Y[1]}),D.checkDate("limit").calendar($,null,"init")):(Y=D.getAsYM(T.year,T.month),lay.extend(T,{year:Y[0],month:Y[1]}),D.checkDate("limit").calendar(null,null,"init"),D.autoCalendarModel.auto?D.choose(lay(E).find("td.layui-this"),k):D.done(null,"change"))},nextYear:function(){B()||(D.rangeLinked?(C.dateTime.year++,D.checkDate("limit").calendar(null,0,"init")):(T.year++,D.checkDate("limit").calendar(null,k),D.autoCalendarModel.auto?D.choose(lay(E).find("td.layui-this"),k):D.done(null,"change")))}}},P.prototype.changeEvent=function(){var k=this;k.config,lay(k.elem).on("click",function(D){lay.stope(D)}).on("mousedown",function(D){lay.stope(D)}),lay.each(k.elemHeader,function(D,C){lay(C[0]).on("click",function(T){k.change(D).prevYear()}),lay(C[1]).on("click",function(T){k.change(D).prevMonth()}),lay(C[2]).find("span").on("click",function(T){var E=lay(this),A=E.attr("lay-ym"),E=E.attr("lay-type");A&&(A=A.split("-"),k.listYM[D]=[0|A[0],0|A[1]],k.list(E,D),lay(k.footer).find("."+M).addClass(p))}),lay(C[3]).on("click",function(T){k.change(D).nextMonth()}),lay(C[4]).on("click",function(T){k.change(D).nextYear()})}),lay.each(k.table,function(D,C){lay(C).find("td").on("click",function(){k.choose(lay(this),D)})}),lay(k.footer).find("span").on("click",function(){var D=lay(this).attr("lay-type");k.tool(this,D)})},P.prototype.isInput=function(k){return/input|textarea/.test(k.tagName.toLocaleLowerCase())||/INPUT|TEXTAREA/.test(k.tagName)},P.prototype.events=function(){var k,D=this,C=D.config;C.elem[0]&&!C.elem[0].eventHandler&&(C.elem.on(C.trigger,k=function(){l.thisId!==C.id&&D.render()}),C.elem[0].eventHandler=!0,C.eventElem.on(C.trigger,k),D.unbind=function(){D.remove(),C.elem.off(C.trigger,k),C.elem.removeAttr("lay-key"),C.elem.removeAttr(c),C.elem[0].eventHandler=!1,C.eventElem.off(C.trigger,k),C.eventElem.removeAttr("lay-key"),delete u.that[C.id]})},u.that={},u.getThis=function(k){var D=u.that[k];return!D&&r&&layui.hint().error(k?o+" instance with ID '"+k+"' not found":"ID argument required"),D},s.run=function(k){k(i).on("mousedown",function(D){var C,T;l.thisId&&(C=u.getThis(l.thisId))&&(T=C.config,D.target===T.elem[0]||D.target===T.eventElem[0]||D.target===k(T.closeStop)[0]||T.elem[0]&&T.elem[0].contains(D.target)||C.remove())}).on("keydown",function(D){var C;l.thisId&&(C=u.getThis(l.thisId))&&C.config.position!=="static"&&D.keyCode===13&&k("#"+C.elemID)[0]&&C.elemID===P.thisElemDate&&(D.preventDefault(),k(C.footer).find(v)[0].click())}),k(e).on("resize",function(){if(l.thisId){var D=u.getThis(l.thisId);if(D)return!(!D.elem||!k(".layui-laydate")[0])&&void D.position()}})},l.render=function(k){return k=new P(k),u.call(k)},l.reload=function(k,D){if(k=u.getThis(k),k)return k.reload(D)},l.getInst=function(k){if(k=u.getThis(k),k)return k.inst},l.hint=function(k,D){if(k=u.getThis(k),k)return k.hint(D)},l.unbind=function(k){if(k=u.getThis(k),k)return k.unbind()},l.close=function(k){if(k=u.getThis(k||l.thisId),k)return k.remove()},l.parse=function(k,D,C){return k=k||{},D=((D=typeof D=="string"?u.formatArr(D):D)||[]).concat(),lay.each(D,function(T,A){/yyyy|y/.test(A)?D[T]=lay.digit(k.year,A.length):/MM|M/.test(A)?D[T]=lay.digit(k.month+(C||0),A.length):/dd|d/.test(A)?D[T]=lay.digit(k.date,A.length):/HH|H/.test(A)?D[T]=lay.digit(k.hours,A.length):/mm|m/.test(A)?D[T]=lay.digit(k.minutes,A.length):/ss|s/.test(A)&&(D[T]=lay.digit(k.seconds,A.length))}),D.join("")},l.getEndDate=function(k,D){var C=new Date;return C.setFullYear(D||C.getFullYear(),k||C.getMonth()+1,1),new Date(C.getTime()-864e5).getDate()},r?(l.ready(),layui.define("lay",function(k){l.path=layui.cache.dir,s.run(lay),k(o,l)})):(l.ready(),s.run(e.lay),e.laydate=l)}(window,window.document),function(e,i){n.exports=e.document?i(e):function(r){if(r.document)return i(r);throw new Error("jQuery requires a window with a document")}}(typeof window<"u"?window:j4,function(e,i){var r=[],s=Object.getPrototypeOf,a=r.slice,o=r.flat?function(b){return r.flat.call(b)}:function(b){return r.concat.apply([],b)},c=r.push,l=r.indexOf,u={},h=u.toString,p=u.hasOwnProperty,f=p.toString,x=f.call(Object),y={},d=function(R){return typeof R=="function"&&typeof R.nodeType!="number"&&typeof R.item!="function"},_=function(R){return R!=null&&R===R.window},g=e.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function v(b,R,O){var W,Z,J=(O=O||g).createElement("script");if(J.text=b,R)for(W in m)(Z=R[W]||R.getAttribute&&R.getAttribute(W))&&J.setAttribute(W,Z);O.head.appendChild(J).parentNode.removeChild(J)}function S(b){return b==null?b+"":typeof b=="object"||typeof b=="function"?u[h.call(b)]||"object":typeof b}var ni="3.7.1",M=/HTML$/i,w=function(b,R){return new w.fn.init(b,R)};function L(b){var R=!!b&&"length"in b&&b.length,O=S(b);return!d(b)&&!_(b)&&(O==="array"||R===0||typeof R=="number"&&0<R&&R-1 in b)}function P(b,R){return b.nodeName&&b.nodeName.toLowerCase()===R.toLowerCase()}w.fn=w.prototype={jquery:ni,constructor:w,length:0,toArray:function(){return a.call(this)},get:function(b){return b==null?a.call(this):b<0?this[b+this.length]:this[b]},pushStack:function(b){return b=w.merge(this.constructor(),b),b.prevObject=this,b},each:function(b){return w.each(this,b)},map:function(b){return this.pushStack(w.map(this,function(R,O){return b.call(R,O,R)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(b,R){return(R+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(b,R){return R%2}))},eq:function(O){var R=this.length,O=+O+(O<0?R:0);return this.pushStack(0<=O&&O<R?[this[O]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},w.extend=w.fn.extend=function(){var b,R,O,W,Z,J=arguments[0]||{},st=1,lt=arguments.length,ct=!1;for(typeof J=="boolean"&&(ct=J,J=arguments[st]||{},st++),typeof J=="object"||d(J)||(J={}),st===lt&&(J=this,st--);st<lt;st++)if((b=arguments[st])!=null)for(R in b)O=b[R],R!=="__proto__"&&J!==O&&(ct&&O&&(w.isPlainObject(O)||(W=Array.isArray(O)))?(Z=J[R],Z=W&&!Array.isArray(Z)?[]:W||w.isPlainObject(Z)?Z:{},W=!1,J[R]=w.extend(ct,Z,O)):O!==void 0&&(J[R]=O));return J},w.extend({expando:"jQuery"+(ni+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw new Error(b)},noop:function(){},isPlainObject:function(b){return!(!b||h.call(b)!=="[object Object]"||(b=s(b))&&(typeof(b=p.call(b,"constructor")&&b.constructor)!="function"||f.call(b)!==x))},isEmptyObject:function(b){for(var R in b)return!1;return!0},globalEval:function(b,R,O){v(b,{nonce:R&&R.nonce},O)},each:function(b,R){var O,W=0;if(L(b))for(O=b.length;W<O&&R.call(b[W],W,b[W])!==!1;W++);else for(W in b)if(R.call(b[W],W,b[W])===!1)break;return b},text:function(b){var R,O="",W=0,Z=b.nodeType;if(!Z)for(;R=b[W++];)O+=w.text(R);return Z===1||Z===11?b.textContent:Z===9?b.documentElement.textContent:Z===3||Z===4?b.nodeValue:O},makeArray:function(b,R){return R=R||[],b!=null&&(L(Object(b))?w.merge(R,typeof b=="string"?[b]:b):c.call(R,b)),R},inArray:function(b,R,O){return R==null?-1:l.call(R,b,O)},isXMLDoc:function(O){var R=O&&O.namespaceURI,O=O&&(O.ownerDocument||O).documentElement;return!M.test(R||O&&O.nodeName||"HTML")},merge:function(b,R){for(var O=+R.length,W=0,Z=b.length;W<O;W++)b[Z++]=R[W];return b.length=Z,b},grep:function(b,R,O){for(var W=[],Z=0,J=b.length,st=!O;Z<J;Z++)!R(b[Z],Z)!=st&&W.push(b[Z]);return W},map:function(b,R,O){var W,Z,J=0,st=[];if(L(b))for(W=b.length;J<W;J++)(Z=R(b[J],J,O))!=null&&st.push(Z);else for(J in b)(Z=R(b[J],J,O))!=null&&st.push(Z);return o(st)},guid:1,support:y}),typeof Symbol=="function"&&(w.fn[Symbol.iterator]=r[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,R){u["[object "+R+"]"]=R.toLowerCase()});var N=r.pop,k=r.sort,D=r.splice,C="[\\x20\\t\\r\\n\\f]",T=new RegExp("^"+C+"+|((?:^|[^\\\\])(?:\\\\.)*)"+C+"+$","g"),A=(w.contains=function(b,R){return R=R&&R.parentNode,b===R||!(!R||R.nodeType!==1||!(b.contains?b.contains(R):b.compareDocumentPosition&&16&b.compareDocumentPosition(R)))},/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g);function E(b,R){return R?b==="\0"?"�":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b}w.escapeSelector=function(b){return(b+"").replace(A,E)};var I,B,$,Y,q,G,F,U,j,et,V=g,tt=c,z=tt,H=w.expando,X=0,K=0,rt=ge(),nt=ge(),Q=ge(),it=ge(),at=function(b,R){return b===R&&(q=!0),0},ut="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ni="(?:\\\\[\\da-fA-F]{1,6}"+C+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",ft="\\["+C+"*("+ni+")(?:"+C+"*([*^$|!~]?=)"+C+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ni+"))|)"+C+"*\\]",dt=":("+ni+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ft+")*)|.*)\\)|)",xt=new RegExp(C+"+","g"),vt=new RegExp("^"+C+"*,"+C+"*"),_t=new RegExp("^"+C+"*([>+~]|"+C+")"+C+"*"),yt=new RegExp(C+"|>"),mt=new RegExp(dt),pt=new RegExp("^"+ni+"$"),bt={ID:new RegExp("^#("+ni+")"),CLASS:new RegExp("^\\.("+ni+")"),TAG:new RegExp("^("+ni+"|[*])"),ATTR:new RegExp("^"+ft),PSEUDO:new RegExp("^"+dt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+C+"*(even|odd|(([+-]|)(\\d*)n|)"+C+"*(?:([+-]|)"+C+"*(\\d+)|))"+C+"*\\)|)","i"),bool:new RegExp("^(?:"+ut+")$","i"),needsContext:new RegExp("^"+C+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+C+"*((?:-\\d)?\\d*)"+C+"*\\)|)(?=[^-]|$)","i")},Mt=/^(?:input|select|textarea|button)$/i,Pt=/^h\d$/i,kt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ft=/[+~]/,Dt=new RegExp("\\\\[\\da-fA-F]{1,6}"+C+"?|\\\\([^\\r\\n\\f])","g"),Gt=function(b,R){return b="0x"+b.slice(1)-65536,R||(b<0?String.fromCharCode(65536+b):String.fromCharCode(b>>10|55296,1023&b|56320))},Vt=function(){or()},fe=Nl(function(b){return b.disabled===!0&&P(b,"fieldset")},{dir:"parentNode",next:"legend"});try{z.apply(r=a.call(V.childNodes),V.childNodes),r[V.childNodes.length].nodeType}catch{z={apply:function(R,O){tt.apply(R,a.call(O))},call:function(R){tt.apply(R,a.call(arguments,1))}}}function zt(b,R,O,W){var Z,J,st,lt,ct,gt,ht=R&&R.ownerDocument,wt=R?R.nodeType:9;if(O=O||[],typeof b!="string"||!b||wt!==1&&wt!==9&&wt!==11)return O;if(!W&&(or(R),R=R||G,U)){if(wt!==11&&(lt=kt.exec(b)))if(Z=lt[1]){if(wt===9){if(!(gt=R.getElementById(Z)))return O;if(gt.id===Z)return z.call(O,gt),O}else if(ht&&(gt=ht.getElementById(Z))&&zt.contains(R,gt)&&gt.id===Z)return z.call(O,gt),O}else{if(lt[2])return z.apply(O,R.getElementsByTagName(b)),O;if((Z=lt[3])&&R.getElementsByClassName)return z.apply(O,R.getElementsByClassName(Z)),O}if(!(it[b+" "]||j&&j.test(b))){if(gt=b,ht=R,wt===1&&(yt.test(b)||_t.test(b))){for((ht=Ft.test(b)&&Ku(R.parentNode)||R)==R&&y.scope||((st=R.getAttribute("id"))?st=w.escapeSelector(st):R.setAttribute("id",st=H)),J=(ct=Ma(b)).length;J--;)ct[J]=(st?"#"+st:":scope")+" "+Il(ct[J]);gt=ct.join(",")}try{return z.apply(O,ht.querySelectorAll(gt)),O}catch{it(b,!0)}finally{st===H&&R.removeAttribute("id")}}}return p1(b.replace(T,"$1"),R,O,W)}function ge(){var b=[];function R(O,W){return b.push(O+" ")>B.cacheLength&&delete R[b.shift()],R[O+" "]=W}return R}function Jt(b){return b[H]=!0,b}function ps(b){var R=G.createElement("fieldset");try{return!!b(R)}catch{return!1}finally{R.parentNode&&R.parentNode.removeChild(R)}}function d1(b){return function(R){return"form"in R?R.parentNode&&R.disabled===!1?"label"in R?"label"in R.parentNode?R.parentNode.disabled===b:R.disabled===b:R.isDisabled===b||R.isDisabled!==!b&&fe(R)===b:R.disabled===b:"label"in R&&R.disabled===b}}function Pr(b){return Jt(function(R){return R=+R,Jt(function(O,W){for(var Z,J=b([],O.length,R),st=J.length;st--;)O[Z=J[st]]&&(O[Z]=!(W[Z]=O[Z]))})})}function Ku(b){return b&&typeof b.getElementsByTagName<"u"&&b}function or(R){var R=R?R.ownerDocument||R:V;return R!=G&&R.nodeType===9&&R.documentElement&&(F=(G=R).documentElement,U=!w.isXMLDoc(G),et=F.matches||F.webkitMatchesSelector||F.msMatchesSelector,F.msMatchesSelector&&V!=G&&(R=G.defaultView)&&R.top!==R&&R.addEventListener("unload",Vt),y.getById=ps(function(O){return F.appendChild(O).id=w.expando,!G.getElementsByName||!G.getElementsByName(w.expando).length}),y.disconnectedMatch=ps(function(O){return et.call(O,"*")}),y.scope=ps(function(){return G.querySelectorAll(":scope")}),y.cssHas=ps(function(){try{G.querySelector(":has(*,:jqfake)")}catch{return 1}}),y.getById?(B.filter.ID=function(O){var W=O.replace(Dt,Gt);return function(Z){return Z.getAttribute("id")===W}},B.find.ID=function(O,W){if(typeof W.getElementById<"u"&&U)return(O=W.getElementById(O))?[O]:[]}):(B.filter.ID=function(O){var W=O.replace(Dt,Gt);return function(Z){return Z=typeof Z.getAttributeNode<"u"&&Z.getAttributeNode("id"),Z&&Z.value===W}},B.find.ID=function(O,W){if(typeof W.getElementById<"u"&&U){var Z,J,st,lt=W.getElementById(O);if(lt){if((Z=lt.getAttributeNode("id"))&&Z.value===O)return[lt];for(st=W.getElementsByName(O),J=0;lt=st[J++];)if((Z=lt.getAttributeNode("id"))&&Z.value===O)return[lt]}return[]}}),B.find.TAG=function(O,W){return typeof W.getElementsByTagName<"u"?W.getElementsByTagName(O):W.querySelectorAll(O)},B.find.CLASS=function(O,W){if(typeof W.getElementsByClassName<"u"&&U)return W.getElementsByClassName(O)},j=[],ps(function(O){var W;F.appendChild(O).innerHTML="<a id='"+H+"' href='' disabled='disabled'></a><select id='"+H+"-\r\\' disabled='disabled'><option selected=''></option></select>",O.querySelectorAll("[selected]").length||j.push("\\["+C+"*(?:value|"+ut+")"),O.querySelectorAll("[id~="+H+"-]").length||j.push("~="),O.querySelectorAll("a#"+H+"+*").length||j.push(".#.+[+~]"),O.querySelectorAll(":checked").length||j.push(":checked"),(W=G.createElement("input")).setAttribute("type","hidden"),O.appendChild(W).setAttribute("name","D"),F.appendChild(O).disabled=!0,O.querySelectorAll(":disabled").length!==2&&j.push(":enabled",":disabled"),(W=G.createElement("input")).setAttribute("name",""),O.appendChild(W),O.querySelectorAll("[name='']").length||j.push("\\["+C+"*name"+C+"*="+C+`*(?:''|"")`)}),y.cssHas||j.push(":has"),j=j.length&&new RegExp(j.join("|")),at=function(O,W){var Z;return O===W?(q=!0,0):(Z=!O.compareDocumentPosition-!W.compareDocumentPosition)||(1&(Z=(O.ownerDocument||O)==(W.ownerDocument||W)?O.compareDocumentPosition(W):1)||!y.sortDetached&&W.compareDocumentPosition(O)===Z?O===G||O.ownerDocument==V&&zt.contains(V,O)?-1:W===G||W.ownerDocument==V&&zt.contains(V,W)?1:Y?l.call(Y,O)-l.call(Y,W):0:4&Z?-1:1)}),G}for(I in zt.matches=function(b,R){return zt(b,null,null,R)},zt.matchesSelector=function(b,R){if(or(b),U&&!it[R+" "]&&(!j||!j.test(R)))try{var O=et.call(b,R);if(O||y.disconnectedMatch||b.document&&b.document.nodeType!==11)return O}catch{it(R,!0)}return 0<zt(R,G,null,[b]).length},zt.contains=function(b,R){return(b.ownerDocument||b)!=G&&or(b),w.contains(b,R)},zt.attr=function(b,R){(b.ownerDocument||b)!=G&&or(b);var O=B.attrHandle[R.toLowerCase()],O=O&&p.call(B.attrHandle,R.toLowerCase())?O(b,R,!U):void 0;return O!==void 0?O:b.getAttribute(R)},zt.error=function(b){throw new Error("Syntax error, unrecognized expression: "+b)},w.uniqueSort=function(b){var R,O=[],W=0,Z=0;if(q=!y.sortStable,Y=!y.sortStable&&a.call(b,0),k.call(b,at),q){for(;R=b[Z++];)R===b[Z]&&(W=O.push(Z));for(;W--;)D.call(b,O[W],1)}return Y=null,b},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(a.apply(this)))},(B=w.expr={cacheLength:50,createPseudo:Jt,match:bt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(Dt,Gt),b[3]=(b[3]||b[4]||b[5]||"").replace(Dt,Gt),b[2]==="~="&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),b[1].slice(0,3)==="nth"?(b[3]||zt.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*(b[3]==="even"||b[3]==="odd")),b[5]=+(b[7]+b[8]||b[3]==="odd")):b[3]&&zt.error(b[0]),b},PSEUDO:function(b){var R,O=!b[6]&&b[2];return bt.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":O&&mt.test(O)&&(R=(R=Ma(O,!0))&&O.indexOf(")",O.length-R)-O.length)&&(b[0]=b[0].slice(0,R),b[2]=O.slice(0,R)),b.slice(0,3))}},filter:{TAG:function(b){var R=b.replace(Dt,Gt).toLowerCase();return b==="*"?function(){return!0}:function(O){return P(O,R)}},CLASS:function(b){var R=rt[b+" "];return R||(R=new RegExp("(^|"+C+")"+b+"("+C+"|$)"))&&rt(b,function(O){return R.test(typeof O.className=="string"&&O.className||typeof O.getAttribute<"u"&&O.getAttribute("class")||"")})},ATTR:function(b,R,O){return function(W){return W=zt.attr(W,b),W==null?R==="!=":!R||(W+="",R==="="?W===O:R==="!="?W!==O:R==="^="?O&&W.indexOf(O)===0:R==="*="?O&&-1<W.indexOf(O):R==="$="?O&&W.slice(-O.length)===O:R==="~="?-1<(" "+W.replace(xt," ")+" ").indexOf(O):R==="|="&&(W===O||W.slice(0,O.length+1)===O+"-"))}},CHILD:function(b,R,O,W,Z){var J=b.slice(0,3)!=="nth",st=b.slice(-4)!=="last",lt=R==="of-type";return W===1&&Z===0?function(ct){return!!ct.parentNode}:function(ct,gt,ht){var wt,St,Ct,Tt,Et,Bt=J!=st?"nextSibling":"previousSibling",ie=ct.parentNode,Ht=lt&&ct.nodeName.toLowerCase(),At=!ht&&!lt,$t=!1;if(ie){if(J){for(;Bt;){for(Ct=ct;Ct=Ct[Bt];)if(lt?P(Ct,Ht):Ct.nodeType===1)return!1;Et=Bt=b==="only"&&!Et&&"nextSibling"}return!0}if(Et=[st?ie.firstChild:ie.lastChild],st&&At){for($t=(Tt=(wt=(St=ie[H]||(ie[H]={}))[b]||[])[0]===X&&wt[1])&&wt[2],Ct=Tt&&ie.childNodes[Tt];Ct=++Tt&&Ct&&Ct[Bt]||($t=Tt=0,Et.pop());)if(Ct.nodeType===1&&++$t&&Ct===ct){St[b]=[X,Tt,$t];break}}else if(($t=At?Tt=(wt=(St=ct[H]||(ct[H]={}))[b]||[])[0]===X&&wt[1]:$t)===!1)for(;(Ct=++Tt&&Ct&&Ct[Bt]||($t=Tt=0,Et.pop()))&&((lt?!P(Ct,Ht):Ct.nodeType!==1)||!++$t||(At&&((St=Ct[H]||(Ct[H]={}))[b]=[X,$t]),Ct!==ct)););return($t-=Z)===W||$t%W==0&&0<=$t/W}}},PSEUDO:function(b,R){var O,W=B.pseudos[b]||B.setFilters[b.toLowerCase()]||zt.error("unsupported pseudo: "+b);return W[H]?W(R):1<W.length?(O=[b,b,"",R],B.setFilters.hasOwnProperty(b.toLowerCase())?Jt(function(Z,J){for(var st,lt=W(Z,R),ct=lt.length;ct--;)Z[st=l.call(Z,lt[ct])]=!(J[st]=lt[ct])}):function(Z){return W(Z,0,O)}):W}},pseudos:{not:Jt(function(b){var R=[],O=[],W=Ju(b.replace(T,"$1"));return W[H]?Jt(function(Z,J,st,lt){for(var ct,gt=W(Z,null,lt,[]),ht=Z.length;ht--;)(ct=gt[ht])&&(Z[ht]=!(J[ht]=ct))}):function(Z,J,st){return R[0]=Z,W(R,null,st,O),R[0]=null,!O.pop()}}),has:Jt(function(b){return function(R){return 0<zt(b,R).length}}),contains:Jt(function(b){return b=b.replace(Dt,Gt),function(R){return-1<(R.textContent||w.text(R)).indexOf(b)}}),lang:Jt(function(b){return pt.test(b||"")||zt.error("unsupported lang: "+b),b=b.replace(Dt,Gt).toLowerCase(),function(R){var O;do if(O=U?R.lang:R.getAttribute("xml:lang")||R.getAttribute("lang"))return(O=O.toLowerCase())===b||O.indexOf(b+"-")===0;while((R=R.parentNode)&&R.nodeType===1);return!1}}),target:function(b){var R=e.location&&e.location.hash;return R&&R.slice(1)===b.id},root:function(b){return b===F},focus:function(b){return b===function(){try{return G.activeElement}catch{}}()&&G.hasFocus()&&!!(b.type||b.href||~b.tabIndex)},enabled:d1(!1),disabled:d1(!0),checked:function(b){return P(b,"input")&&!!b.checked||P(b,"option")&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,b.selected===!0},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType<6)return!1;return!0},parent:function(b){return!B.pseudos.empty(b)},header:function(b){return Pt.test(b.nodeName)},input:function(b){return Mt.test(b.nodeName)},button:function(b){return P(b,"input")&&b.type==="button"||P(b,"button")},text:function(b){return P(b,"input")&&b.type==="text"&&((b=b.getAttribute("type"))==null||b.toLowerCase()==="text")},first:Pr(function(){return[0]}),last:Pr(function(b,R){return[R-1]}),eq:Pr(function(b,R,O){return[O<0?O+R:O]}),even:Pr(function(b,R){for(var O=0;O<R;O+=2)b.push(O);return b}),odd:Pr(function(b,R){for(var O=1;O<R;O+=2)b.push(O);return b}),lt:Pr(function(b,R,O){for(var W=O<0?O+R:R<O?R:O;0<=--W;)b.push(W);return b}),gt:Pr(function(b,R,O){for(var W=O<0?O+R:O;++W<R;)b.push(W);return b})}}).pseudos.nth=B.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})B.pseudos[I]=function(b){return function(R){return P(R,"input")&&R.type===b}}(I);for(I in{submit:!0,reset:!0})B.pseudos[I]=function(b){return function(R){return(P(R,"input")||P(R,"button"))&&R.type===b}}(I);function f1(){}function Ma(b,R){var O,W,Z,J,st,lt,ct,gt=nt[b+" "];if(gt)return R?0:gt.slice(0);for(st=b,lt=[],ct=B.preFilter;st;){for(J in O&&!(W=vt.exec(st))||(W&&(st=st.slice(W[0].length)||st),lt.push(Z=[])),O=!1,(W=_t.exec(st))&&(O=W.shift(),Z.push({value:O,type:W[0].replace(T," ")}),st=st.slice(O.length)),B.filter)!(W=bt[J].exec(st))||ct[J]&&!(W=ct[J](W))||(O=W.shift(),Z.push({value:O,type:J,matches:W}),st=st.slice(O.length));if(!O)break}return R?st.length:st?zt.error(b):nt(b,lt).slice(0)}function Il(b){for(var R=0,O=b.length,W="";R<O;R++)W+=b[R].value;return W}function Nl(b,R,O){var W=R.dir,Z=R.next,J=Z||W,st=O&&J==="parentNode",lt=K++;return R.first?function(ct,gt,ht){for(;ct=ct[W];)if(ct.nodeType===1||st)return b(ct,gt,ht);return!1}:function(ct,gt,ht){var wt,St,Ct=[X,lt];if(ht){for(;ct=ct[W];)if((ct.nodeType===1||st)&&b(ct,gt,ht))return!0}else for(;ct=ct[W];)if(ct.nodeType===1||st)if(St=ct[H]||(ct[H]={}),Z&&P(ct,Z))ct=ct[W]||ct;else{if((wt=St[J])&&wt[0]===X&&wt[1]===lt)return Ct[2]=wt[2];if((St[J]=Ct)[2]=b(ct,gt,ht))return!0}return!1}}function Zu(b){return 1<b.length?function(R,O,W){for(var Z=b.length;Z--;)if(!b[Z](R,O,W))return!1;return!0}:b[0]}function Fl(b,R,O,W,Z){for(var J,st=[],lt=0,ct=b.length,gt=R!=null;lt<ct;lt++)!(J=b[lt])||O&&!O(J,W,Z)||(st.push(J),gt&&R.push(lt));return st}function Qu(b,R,O,W,Z,J){return W&&!W[H]&&(W=Qu(W)),Z&&!Z[H]&&(Z=Qu(Z,J)),Jt(function(st,lt,ct,gt){var ht,wt,St,Ct,Tt=[],Et=[],Bt=lt.length,ie=st||function(At,$t,Ot){for(var Kt=0,Fe=$t.length;Kt<Fe;Kt++)zt(At,$t[Kt],Ot);return Ot}(R||"*",ct.nodeType?[ct]:ct,[]),Ht=!b||!st&&R?ie:Fl(ie,Tt,b,ct,gt);if(O?O(Ht,Ct=Z||(st?b:Bt||W)?[]:lt,ct,gt):Ct=Ht,W)for(ht=Fl(Ct,Et),W(ht,[],ct,gt),wt=ht.length;wt--;)(St=ht[wt])&&(Ct[Et[wt]]=!(Ht[Et[wt]]=St));if(st){if(Z||b){if(Z){for(ht=[],wt=Ct.length;wt--;)(St=Ct[wt])&&ht.push(Ht[wt]=St);Z(null,Ct=[],ht,gt)}for(wt=Ct.length;wt--;)(St=Ct[wt])&&-1<(ht=Z?l.call(st,St):Tt[wt])&&(st[ht]=!(lt[ht]=St))}}else Ct=Fl(Ct===lt?Ct.splice(Bt,Ct.length):Ct),Z?Z(null,lt,Ct,gt):z.apply(lt,Ct)})}function Ju(b,R){var O,W,Z,J,st,lt,ct=[],gt=[],ht=Q[b+" "];if(!ht){for(O=(R=R||Ma(b)).length;O--;)((ht=function wt(St){for(var Ct,Tt,Et,Bt=St.length,ie=B.relative[St[0].type],Ht=ie||B.relative[" "],At=ie?1:0,$t=Nl(function(Fe){return Fe===Ct},Ht,!0),Ot=Nl(function(Fe){return-1<l.call(Ct,Fe)},Ht,!0),Kt=[function(Fe,Xe,Nn){return Fe=!ie&&(Nn||Xe!=$)||((Ct=Xe).nodeType?$t:Ot)(Fe,Xe,Nn),Ct=null,Fe}];At<Bt;At++)if(Tt=B.relative[St[At].type])Kt=[Nl(Zu(Kt),Tt)];else{if((Tt=B.filter[St[At].type].apply(null,St[At].matches))[H]){for(Et=++At;Et<Bt&&!B.relative[St[Et].type];Et++);return Qu(1<At&&Zu(Kt),1<At&&Il(St.slice(0,At-1).concat({value:St[At-2].type===" "?"*":""})).replace(T,"$1"),Tt,At<Et&&wt(St.slice(At,Et)),Et<Bt&&wt(St=St.slice(Et)),Et<Bt&&Il(St))}Kt.push(Tt)}return Zu(Kt)}(R[O]))[H]?ct:gt).push(ht);(ht=Q(b,(W=gt,J=0<(Z=ct).length,st=0<W.length,lt=function(wt,St,Ct,Tt,Et){var Bt,ie,Ht,At=0,$t="0",Ot=wt&&[],Kt=[],Fe=$,Xe=wt||st&&B.find.TAG("*",Et),Nn=X+=Fe==null?1:Math.random()||.1,Cs=Xe.length;for(Et&&($=St==G||St||Et);$t!==Cs&&(Bt=Xe[$t])!=null;$t++){if(st&&Bt){for(ie=0,St||Bt.ownerDocument==G||(or(Bt),Ct=!U);Ht=W[ie++];)if(Ht(Bt,St||G,Ct)){z.call(Tt,Bt);break}Et&&(X=Nn)}J&&((Bt=!Ht&&Bt)&&At--,wt)&&Ot.push(Bt)}if(At+=$t,J&&$t!==At){for(ie=0;Ht=Z[ie++];)Ht(Ot,Kt,St,Ct);if(wt){if(0<At)for(;$t--;)Ot[$t]||Kt[$t]||(Kt[$t]=N.call(Tt));Kt=Fl(Kt)}z.apply(Tt,Kt),Et&&!wt&&0<Kt.length&&1<At+Z.length&&w.uniqueSort(Tt)}return Et&&(X=Nn,$=Fe),Ot},J?Jt(lt):lt))).selector=b}return ht}function p1(b,R,O,W){var Z,J,st,lt,ct,gt=typeof b=="function"&&b,ht=!W&&Ma(b=gt.selector||b);if(O=O||[],ht.length===1){if(2<(J=ht[0]=ht[0].slice(0)).length&&(st=J[0]).type==="ID"&&R.nodeType===9&&U&&B.relative[J[1].type]){if(!(R=(B.find.ID(st.matches[0].replace(Dt,Gt),R)||[])[0]))return O;gt&&(R=R.parentNode),b=b.slice(J.shift().value.length)}for(Z=bt.needsContext.test(b)?0:J.length;Z--&&(st=J[Z],!B.relative[lt=st.type]);)if((ct=B.find[lt])&&(W=ct(st.matches[0].replace(Dt,Gt),Ft.test(J[0].type)&&Ku(R.parentNode)||R))){if(J.splice(Z,1),b=W.length&&Il(J))break;return z.apply(O,W),O}}return(gt||Ju(b,ht))(W,R,!U,O,!R||Ft.test(b)&&Ku(R.parentNode)||R),O}f1.prototype=B.filters=B.pseudos,B.setFilters=new f1,y.sortStable=H.split("").sort(at).join("")===H,or(),y.sortDetached=ps(function(b){return 1&b.compareDocumentPosition(G.createElement("fieldset"))}),w.find=zt,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,zt.compile=Ju,zt.select=p1,zt.setDocument=or,zt.tokenize=Ma,zt.escape=w.escapeSelector,zt.getText=w.text,zt.isXML=w.isXMLDoc,zt.selectors=w.expr,zt.support=w.support,zt.uniqueSort=w.uniqueSort;var gs=function(b,R,O){for(var W=[],Z=O!==void 0;(b=b[R])&&b.nodeType!==9;)if(b.nodeType===1){if(Z&&w(b).is(O))break;W.push(b)}return W},g1=function(b,R){for(var O=[];b;b=b.nextSibling)b.nodeType===1&&b!==R&&O.push(b);return O},m1=w.expr.match.needsContext,y1=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function th(b,R,O){return d(R)?w.grep(b,function(W,Z){return!!R.call(W,Z,W)!==O}):R.nodeType?w.grep(b,function(W){return W===R!==O}):typeof R!="string"?w.grep(b,function(W){return-1<l.call(R,W)!==O}):w.filter(R,b,O)}w.filter=function(b,R,O){var W=R[0];return O&&(b=":not("+b+")"),R.length===1&&W.nodeType===1?w.find.matchesSelector(W,b)?[W]:[]:w.find.matches(b,w.grep(R,function(Z){return Z.nodeType===1}))},w.fn.extend({find:function(b){var R,O,W=this.length,Z=this;if(typeof b!="string")return this.pushStack(w(b).filter(function(){for(R=0;R<W;R++)if(w.contains(Z[R],this))return!0}));for(O=this.pushStack([]),R=0;R<W;R++)w.find(b,Z[R],O);return 1<W?w.uniqueSort(O):O},filter:function(b){return this.pushStack(th(this,b||[],!1))},not:function(b){return this.pushStack(th(this,b||[],!0))},is:function(b){return!!th(this,typeof b=="string"&&m1.test(b)?w(b):b||[],!1).length}});var v1,o4=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,l4=((w.fn.init=function(b,R,O){if(b){if(O=O||v1,typeof b!="string")return b.nodeType?(this[0]=b,this.length=1,this):d(b)?O.ready!==void 0?O.ready(b):b(w):w.makeArray(b,this);if(!(W=b[0]==="<"&&b[b.length-1]===">"&&3<=b.length?[null,b,null]:o4.exec(b))||!W[1]&&R)return(!R||R.jquery?R||O:this.constructor(R)).find(b);if(W[1]){if(R=R instanceof w?R[0]:R,w.merge(this,w.parseHTML(W[1],R&&R.nodeType?R.ownerDocument||R:g,!0)),y1.test(W[1])&&w.isPlainObject(R))for(var W in R)d(this[W])?this[W](R[W]):this.attr(W,R[W])}else(O=g.getElementById(W[2]))&&(this[0]=O,this.length=1)}return this}).prototype=w.fn,v1=w(g),/^(?:parents|prev(?:Until|All))/),c4={children:!0,contents:!0,next:!0,prev:!0};function x1(b,R){for(;(b=b[R])&&b.nodeType!==1;);return b}w.fn.extend({has:function(b){var R=w(b,this),O=R.length;return this.filter(function(){for(var W=0;W<O;W++)if(w.contains(this,R[W]))return!0})},closest:function(b,R){var O,W=0,Z=this.length,J=[],st=typeof b!="string"&&w(b);if(!m1.test(b)){for(;W<Z;W++)for(O=this[W];O&&O!==R;O=O.parentNode)if(O.nodeType<11&&(st?-1<st.index(O):O.nodeType===1&&w.find.matchesSelector(O,b))){J.push(O);break}}return this.pushStack(1<J.length?w.uniqueSort(J):J)},index:function(b){return b?typeof b=="string"?l.call(w(b),this[0]):l.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,R){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(b,R))))},addBack:function(b){return this.add(b==null?this.prevObject:this.prevObject.filter(b))}}),w.each({parent:function(b){return b=b.parentNode,b&&b.nodeType!==11?b:null},parents:function(b){return gs(b,"parentNode")},parentsUntil:function(b,R,O){return gs(b,"parentNode",O)},next:function(b){return x1(b,"nextSibling")},prev:function(b){return x1(b,"previousSibling")},nextAll:function(b){return gs(b,"nextSibling")},prevAll:function(b){return gs(b,"previousSibling")},nextUntil:function(b,R,O){return gs(b,"nextSibling",O)},prevUntil:function(b,R,O){return gs(b,"previousSibling",O)},siblings:function(b){return g1((b.parentNode||{}).firstChild,b)},children:function(b){return g1(b.firstChild)},contents:function(b){return b.contentDocument!=null&&s(b.contentDocument)?b.contentDocument:(P(b,"template")&&(b=b.content||b),w.merge([],b.childNodes))}},function(b,R){w.fn[b]=function(O,W){var Z=w.map(this,R,O);return(W=b.slice(-5)!=="Until"?O:W)&&typeof W=="string"&&(Z=w.filter(W,Z)),1<this.length&&(c4[b]||w.uniqueSort(Z),l4.test(b))&&Z.reverse(),this.pushStack(Z)}});var hn=/[^\x20\t\r\n\f]+/g;function ms(b){return b}function Ol(b){throw b}function _1(b,R,O,W){var Z;try{b&&d(Z=b.promise)?Z.call(b).done(R).fail(O):b&&d(Z=b.then)?Z.call(b,R,O):R.apply(void 0,[b].slice(W))}catch(J){O.apply(void 0,[J])}}w.Callbacks=function(b){var R,O;b=typeof b=="string"?(R=b,O={},w.each(R.match(hn)||[],function(St,Ct){O[Ct]=!0}),O):w.extend({},b);var W,Z,J,st,lt=[],ct=[],gt=-1,ht=function(){for(st=st||b.once,J=W=!0;ct.length;gt=-1)for(Z=ct.shift();++gt<lt.length;)lt[gt].apply(Z[0],Z[1])===!1&&b.stopOnFalse&&(gt=lt.length,Z=!1);b.memory||(Z=!1),W=!1,st&&(lt=Z?[]:"")},wt={add:function(){return lt&&(Z&&!W&&(gt=lt.length-1,ct.push(Z)),function St(Ct){w.each(Ct,function(Tt,Et){d(Et)?b.unique&&wt.has(Et)||lt.push(Et):Et&&Et.length&&S(Et)!=="string"&&St(Et)})}(arguments),Z)&&!W&&ht(),this},remove:function(){return w.each(arguments,function(St,Ct){for(var Tt;-1<(Tt=w.inArray(Ct,lt,Tt));)lt.splice(Tt,1),Tt<=gt&&gt--}),this},has:function(St){return St?-1<w.inArray(St,lt):0<lt.length},empty:function(){return lt=lt&&[],this},disable:function(){return st=ct=[],lt=Z="",this},disabled:function(){return!lt},lock:function(){return st=ct=[],Z||W||(lt=Z=""),this},locked:function(){return!!st},fireWith:function(St,Ct){return st||(Ct=[St,(Ct=Ct||[]).slice?Ct.slice():Ct],ct.push(Ct),W)||ht(),this},fire:function(){return wt.fireWith(this,arguments),this},fired:function(){return!!J}};return wt},w.extend({Deferred:function(b){var R=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],O="pending",W={state:function(){return O},always:function(){return Z.done(arguments).fail(arguments),this},catch:function(J){return W.then(null,J)},pipe:function(){var J=arguments;return w.Deferred(function(st){w.each(R,function(lt,ct){var gt=d(J[ct[4]])&&J[ct[4]];Z[ct[1]](function(){var ht=gt&&gt.apply(this,arguments);ht&&d(ht.promise)?ht.promise().progress(st.notify).done(st.resolve).fail(st.reject):st[ct[0]+"With"](this,gt?[ht]:arguments)})}),J=null}).promise()},then:function(J,st,lt){var ct=0;function gt(ht,wt,St,Ct){return function(){var Tt=this,Et=arguments,Bt=function(){var Ht,At;if(!(ht<ct)){if((Ht=St.apply(Tt,Et))===wt.promise())throw new TypeError("Thenable self-resolution");At=Ht&&(typeof Ht=="object"||typeof Ht=="function")&&Ht.then,d(At)?Ct?At.call(Ht,gt(ct,wt,ms,Ct),gt(ct,wt,Ol,Ct)):(ct++,At.call(Ht,gt(ct,wt,ms,Ct),gt(ct,wt,Ol,Ct),gt(ct,wt,ms,wt.notifyWith))):(St!==ms&&(Tt=void 0,Et=[Ht]),(Ct||wt.resolveWith)(Tt,Et))}},ie=Ct?Bt:function(){try{Bt()}catch(Ht){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(Ht,ie.error),ct<=ht+1&&(St!==Ol&&(Tt=void 0,Et=[Ht]),wt.rejectWith(Tt,Et))}};ht?ie():(w.Deferred.getErrorHook?ie.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(ie.error=w.Deferred.getStackHook()),e.setTimeout(ie))}}return w.Deferred(function(ht){R[0][3].add(gt(0,ht,d(lt)?lt:ms,ht.notifyWith)),R[1][3].add(gt(0,ht,d(J)?J:ms)),R[2][3].add(gt(0,ht,d(st)?st:Ol))}).promise()},promise:function(J){return J!=null?w.extend(J,W):W}},Z={};return w.each(R,function(J,st){var lt=st[2],ct=st[5];W[st[1]]=lt.add,ct&&lt.add(function(){O=ct},R[3-J][2].disable,R[3-J][3].disable,R[0][2].lock,R[0][3].lock),lt.add(st[3].fire),Z[st[0]]=function(){return Z[st[0]+"With"](this===Z?void 0:this,arguments),this},Z[st[0]+"With"]=lt.fireWith}),W.promise(Z),b&&b.call(Z,Z),Z},when:function(b){var R=arguments.length,O=R,W=Array(O),Z=a.call(arguments),J=w.Deferred(),st=function(lt){return function(ct){W[lt]=this,Z[lt]=1<arguments.length?a.call(arguments):ct,--R||J.resolveWith(W,Z)}};if(R<=1&&(_1(b,J.done(st(O)).resolve,J.reject,!R),J.state()==="pending"||d(Z[O]&&Z[O].then)))return J.then();for(;O--;)_1(Z[O],st(O),J.reject);return J.promise()}});var u4=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,eh=(w.Deferred.exceptionHook=function(b,R){e.console&&e.console.warn&&b&&u4.test(b.name)&&e.console.warn("jQuery.Deferred exception: "+b.message,b.stack,R)},w.readyException=function(b){e.setTimeout(function(){throw b})},w.Deferred());function Bl(){g.removeEventListener("DOMContentLoaded",Bl),e.removeEventListener("load",Bl),w.ready()}w.fn.ready=function(b){return eh.then(b).catch(function(R){w.readyException(R)}),this},w.extend({isReady:!1,readyWait:1,ready:function(b){(b===!0?--w.readyWait:w.isReady)||(w.isReady=!0)!==b&&0<--w.readyWait||eh.resolveWith(g,[w])}}),w.ready.then=eh.then,g.readyState==="complete"||g.readyState!=="loading"&&!g.documentElement.doScroll?e.setTimeout(w.ready):(g.addEventListener("DOMContentLoaded",Bl),e.addEventListener("load",Bl));var Rn=function(b,R,O,W,Z,J,st){var lt=0,ct=b.length,gt=O==null;if(S(O)==="object")for(lt in Z=!0,O)Rn(b,R,lt,O[lt],!0,J,st);else if(W!==void 0&&(Z=!0,d(W)||(st=!0),R=gt?st?(R.call(b,W),null):(gt=R,function(ht,wt,St){return gt.call(w(ht),St)}):R))for(;lt<ct;lt++)R(b[lt],O,st?W:W.call(b[lt],lt,R(b[lt],O)));return Z?b:gt?R.call(b):ct?R(b[0],O):J},h4=/^-ms-/,d4=/-([a-z])/g;function f4(b,R){return R.toUpperCase()}function dn(b){return b.replace(h4,"ms-").replace(d4,f4)}var Aa=function(b){return b.nodeType===1||b.nodeType===9||!+b.nodeType};function Ea(){this.expando=w.expando+Ea.uid++}Ea.uid=1,Ea.prototype={cache:function(b){var R=b[this.expando];return R||(R={},Aa(b)&&(b.nodeType?b[this.expando]=R:Object.defineProperty(b,this.expando,{value:R,configurable:!0}))),R},set:function(b,R,O){var W,Z=this.cache(b);if(typeof R=="string")Z[dn(R)]=O;else for(W in R)Z[dn(W)]=R[W];return Z},get:function(b,R){return R===void 0?this.cache(b):b[this.expando]&&b[this.expando][dn(R)]},access:function(b,R,O){return R===void 0||R&&typeof R=="string"&&O===void 0?this.get(b,R):(this.set(b,R,O),O!==void 0?O:R)},remove:function(b,R){var O,W=b[this.expando];if(W!==void 0){if(R!==void 0)for(O=(R=Array.isArray(R)?R.map(dn):(R=dn(R))in W?[R]:R.match(hn)||[]).length;O--;)delete W[R[O]];R!==void 0&&!w.isEmptyObject(W)||(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){return b=b[this.expando],b!==void 0&&!w.isEmptyObject(b)}};var Nt=new Ea,li=new Ea,p4=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,g4=/[A-Z]/g;function b1(b,R,O){var W,Z;if(O===void 0&&b.nodeType===1)if(W="data-"+R.replace(g4,"-$&").toLowerCase(),typeof(O=b.getAttribute(W))=="string"){try{O=(Z=O)==="true"||Z!=="false"&&(Z==="null"?null:Z===+Z+""?+Z:p4.test(Z)?JSON.parse(Z):Z)}catch{}li.set(b,R,O)}else O=void 0;return O}w.extend({hasData:function(b){return li.hasData(b)||Nt.hasData(b)},data:function(b,R,O){return li.access(b,R,O)},removeData:function(b,R){li.remove(b,R)},_data:function(b,R,O){return Nt.access(b,R,O)},_removeData:function(b,R){Nt.remove(b,R)}}),w.fn.extend({data:function(b,R){var O,W,Z,J=this[0],st=J&&J.attributes;if(b!==void 0)return typeof b=="object"?this.each(function(){li.set(this,b)}):Rn(this,function(lt){var ct;if(J&&lt===void 0)return(ct=li.get(J,b))!==void 0||(ct=b1(J,b))!==void 0?ct:void 0;this.each(function(){li.set(this,b,lt)})},null,R,1<arguments.length,null,!0);if(this.length&&(Z=li.get(J),J.nodeType===1)&&!Nt.get(J,"hasDataAttrs")){for(O=st.length;O--;)st[O]&&(W=st[O].name).indexOf("data-")===0&&(W=dn(W.slice(5)),b1(J,W,Z[W]));Nt.set(J,"hasDataAttrs",!0)}return Z},removeData:function(b){return this.each(function(){li.remove(this,b)})}}),w.extend({queue:function(b,R,O){var W;if(b)return W=Nt.get(b,R=(R||"fx")+"queue"),O&&(!W||Array.isArray(O)?W=Nt.access(b,R,w.makeArray(O)):W.push(O)),W||[]},dequeue:function(b,R){R=R||"fx";var O=w.queue(b,R),W=O.length,Z=O.shift(),J=w._queueHooks(b,R);Z==="inprogress"&&(Z=O.shift(),W--),Z&&(R==="fx"&&O.unshift("inprogress"),delete J.stop,Z.call(b,function(){w.dequeue(b,R)},J)),!W&&J&&J.empty.fire()},_queueHooks:function(b,R){var O=R+"queueHooks";return Nt.get(b,O)||Nt.access(b,O,{empty:w.Callbacks("once memory").add(function(){Nt.remove(b,[R+"queue",O])})})}}),w.fn.extend({queue:function(b,R){var O=2;return typeof b!="string"&&(R=b,b="fx",O--),arguments.length<O?w.queue(this[0],b):R===void 0?this:this.each(function(){var W=w.queue(this,b,R);w._queueHooks(this,b),b==="fx"&&W[0]!=="inprogress"&&w.dequeue(this,b)})},dequeue:function(b){return this.each(function(){w.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,R){var O,W=1,Z=w.Deferred(),J=this,st=this.length,lt=function(){--W||Z.resolveWith(J,[J])};for(typeof b!="string"&&(R=b,b=void 0),b=b||"fx";st--;)(O=Nt.get(J[st],b+"queueHooks"))&&O.empty&&(W++,O.empty.add(lt));return lt(),Z.promise(R)}});var ni=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pa=new RegExp("^(?:([+-])=|)("+ni+")([a-z%]*)$","i"),In=["Top","Right","Bottom","Left"],Dr=g.documentElement,ys=function(b){return w.contains(b.ownerDocument,b)},m4={composed:!0},zl=(Dr.getRootNode&&(ys=function(b){return w.contains(b.ownerDocument,b)||b.getRootNode(m4)===b.ownerDocument}),function(b,R){return(b=R||b).style.display==="none"||b.style.display===""&&ys(b)&&w.css(b,"display")==="none"});function w1(b,R,O,W){var Z,J,st=20,lt=W?function(){return W.cur()}:function(){return w.css(b,R,"")},ct=lt(),gt=O&&O[3]||(w.cssNumber[R]?"":"px"),ht=b.nodeType&&(w.cssNumber[R]||gt!=="px"&&+ct)&&Pa.exec(w.css(b,R));if(ht&&ht[3]!==gt){for(gt=gt||ht[3],ht=+(ct/=2)||1;st--;)w.style(b,R,ht+gt),(1-J)*(1-(J=lt()/ct||.5))<=0&&(st=0),ht/=J;w.style(b,R,(ht*=2)+gt),O=O||[]}return O&&(ht=+ht||+ct||0,Z=O[1]?ht+(O[1]+1)*O[2]:+O[2],W)&&(W.unit=gt,W.start=ht,W.end=Z),Z}var C1={};function vs(b,R){for(var O,W,Z,J,st,lt=[],ct=0,gt=b.length;ct<gt;ct++)(W=b[ct]).style&&(O=W.style.display,R?(O==="none"&&(lt[ct]=Nt.get(W,"display")||null,lt[ct]||(W.style.display="")),W.style.display===""&&zl(W)&&(lt[ct]=(st=J=void 0,J=(Z=W).ownerDocument,Z=Z.nodeName,(st=C1[Z])||(J=J.body.appendChild(J.createElement(Z)),st=w.css(J,"display"),J.parentNode.removeChild(J),C1[Z]=st=st==="none"?"block":st),st))):O!=="none"&&(lt[ct]="none",Nt.set(W,"display",O)));for(ct=0;ct<gt;ct++)lt[ct]!=null&&(b[ct].style.display=lt[ct]);return b}w.fn.extend({show:function(){return vs(this,!0)},hide:function(){return vs(this)},toggle:function(b){return typeof b=="boolean"?b?this.show():this.hide():this.each(function(){zl(this)?w(this).show():w(this).hide()})}});var Da=/^(?:checkbox|radio)$/i,S1=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,T1=/^$|^module$|\/(?:java|ecma)script/i,Fi=(ft=g.createDocumentFragment().appendChild(g.createElement("div")),(dt=g.createElement("input")).setAttribute("type","radio"),dt.setAttribute("checked","checked"),dt.setAttribute("name","t"),ft.appendChild(dt),y.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",y.option=!!ft.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function ci(b,R){var O=typeof b.getElementsByTagName<"u"?b.getElementsByTagName(R||"*"):typeof b.querySelectorAll<"u"?b.querySelectorAll(R||"*"):[];return R===void 0||R&&P(b,R)?w.merge([b],O):O}function ih(b,R){for(var O=0,W=b.length;O<W;O++)Nt.set(b[O],"globalEval",!R||Nt.get(R[O],"globalEval"))}Fi.tbody=Fi.tfoot=Fi.colgroup=Fi.caption=Fi.thead,Fi.th=Fi.td,y.option||(Fi.optgroup=Fi.option=[1,"<select multiple='multiple'>","</select>"]);var y4=/<|&#?\w+;/;function k1(b,R,O,W,Z){for(var J,st,lt,ct,gt,ht=R.createDocumentFragment(),wt=[],St=0,Ct=b.length;St<Ct;St++)if((J=b[St])||J===0)if(S(J)==="object")w.merge(wt,J.nodeType?[J]:J);else if(y4.test(J)){for(st=st||ht.appendChild(R.createElement("div")),lt=(S1.exec(J)||["",""])[1].toLowerCase(),lt=Fi[lt]||Fi._default,st.innerHTML=lt[1]+w.htmlPrefilter(J)+lt[2],gt=lt[0];gt--;)st=st.lastChild;w.merge(wt,st.childNodes),(st=ht.firstChild).textContent=""}else wt.push(R.createTextNode(J));for(ht.textContent="",St=0;J=wt[St++];)if(W&&-1<w.inArray(J,W))Z&&Z.push(J);else if(ct=ys(J),st=ci(ht.appendChild(J),"script"),ct&&ih(st),O)for(gt=0;J=st[gt++];)T1.test(J.type||"")&&O.push(J);return ht}var M1=/^([^.]*)(?:\.(.+)|)/;function xs(){return!0}function _s(){return!1}function nh(b,R,O,W,Z,J){var st,lt;if(typeof R=="object"){for(lt in typeof O!="string"&&(W=W||O,O=void 0),R)nh(b,lt,O,W,R[lt],J);return b}if(W==null&&Z==null?(Z=O,W=O=void 0):Z==null&&(typeof O=="string"?(Z=W,W=void 0):(Z=W,W=O,O=void 0)),Z===!1)Z=_s;else if(!Z)return b;return J===1&&(st=Z,(Z=function(ct){return w().off(ct),st.apply(this,arguments)}).guid=st.guid||(st.guid=w.guid++)),b.each(function(){w.event.add(this,R,Z,W,O)})}function Hl(b,R,O){O?(Nt.set(b,R,!1),w.event.add(b,R,{namespace:!1,handler:function(W){var Z,J=Nt.get(this,R);if(1&W.isTrigger&&this[R]){if(J)(w.event.special[R]||{}).delegateType&&W.stopPropagation();else if(J=a.call(arguments),Nt.set(this,R,J),this[R](),Z=Nt.get(this,R),Nt.set(this,R,!1),J!==Z)return W.stopImmediatePropagation(),W.preventDefault(),Z}else J&&(Nt.set(this,R,w.event.trigger(J[0],J.slice(1),this)),W.stopPropagation(),W.isImmediatePropagationStopped=xs)}})):Nt.get(b,R)===void 0&&w.event.add(b,R,xs)}w.event={global:{},add:function(b,R,O,W,Z){var J,st,lt,ct,gt,ht,wt,St,Ct,Tt=Nt.get(b);if(Aa(b))for(O.handler&&(O=(J=O).handler,Z=J.selector),Z&&w.find.matchesSelector(Dr,Z),O.guid||(O.guid=w.guid++),lt=(lt=Tt.events)||(Tt.events=Object.create(null)),st=(st=Tt.handle)||(Tt.handle=function(Et){return w!==void 0&&w.event.triggered!==Et.type?w.event.dispatch.apply(b,arguments):void 0}),ct=(R=(R||"").match(hn)||[""]).length;ct--;)wt=Ct=(St=M1.exec(R[ct])||[])[1],St=(St[2]||"").split(".").sort(),wt&&(gt=w.event.special[wt]||{},wt=(Z?gt.delegateType:gt.bindType)||wt,gt=w.event.special[wt]||{},Ct=w.extend({type:wt,origType:Ct,data:W,handler:O,guid:O.guid,selector:Z,needsContext:Z&&w.expr.match.needsContext.test(Z),namespace:St.join(".")},J),(ht=lt[wt])||((ht=lt[wt]=[]).delegateCount=0,gt.setup&&gt.setup.call(b,W,St,st)!==!1)||b.addEventListener&&b.addEventListener(wt,st),gt.add&&(gt.add.call(b,Ct),Ct.handler.guid||(Ct.handler.guid=O.guid)),Z?ht.splice(ht.delegateCount++,0,Ct):ht.push(Ct),w.event.global[wt]=!0)},remove:function(b,R,O,W,Z){var J,st,lt,ct,gt,ht,wt,St,Ct,Tt,Et,Bt=Nt.hasData(b)&&Nt.get(b);if(Bt&&(ct=Bt.events)){for(gt=(R=(R||"").match(hn)||[""]).length;gt--;)if(Ct=Et=(lt=M1.exec(R[gt])||[])[1],Tt=(lt[2]||"").split(".").sort(),Ct){for(wt=w.event.special[Ct]||{},St=ct[Ct=(W?wt.delegateType:wt.bindType)||Ct]||[],lt=lt[2]&&new RegExp("(^|\\.)"+Tt.join("\\.(?:.*\\.|)")+"(\\.|$)"),st=J=St.length;J--;)ht=St[J],!Z&&Et!==ht.origType||O&&O.guid!==ht.guid||lt&&!lt.test(ht.namespace)||W&&W!==ht.selector&&(W!=="**"||!ht.selector)||(St.splice(J,1),ht.selector&&St.delegateCount--,wt.remove&&wt.remove.call(b,ht));st&&!St.length&&(wt.teardown&&wt.teardown.call(b,Tt,Bt.handle)!==!1||w.removeEvent(b,Ct,Bt.handle),delete ct[Ct])}else for(Ct in ct)w.event.remove(b,Ct+R[gt],O,W,!0);w.isEmptyObject(ct)&&Nt.remove(b,"handle events")}},dispatch:function(ct){var R,O,W,Z,J,st=new Array(arguments.length),lt=w.event.fix(ct),ct=(Nt.get(this,"events")||Object.create(null))[lt.type]||[],gt=w.event.special[lt.type]||{};for(st[0]=lt,R=1;R<arguments.length;R++)st[R]=arguments[R];if(lt.delegateTarget=this,!gt.preDispatch||gt.preDispatch.call(this,lt)!==!1){for(J=w.event.handlers.call(this,lt,ct),R=0;(W=J[R++])&&!lt.isPropagationStopped();)for(lt.currentTarget=W.elem,O=0;(Z=W.handlers[O++])&&!lt.isImmediatePropagationStopped();)lt.rnamespace&&Z.namespace!==!1&&!lt.rnamespace.test(Z.namespace)||(lt.handleObj=Z,lt.data=Z.data,(Z=((w.event.special[Z.origType]||{}).handle||Z.handler).apply(W.elem,st))!==void 0&&(lt.result=Z)===!1&&(lt.preventDefault(),lt.stopPropagation()));return gt.postDispatch&&gt.postDispatch.call(this,lt),lt.result}},handlers:function(b,R){var O,W,Z,J,st,lt=[],ct=R.delegateCount,gt=b.target;if(ct&&gt.nodeType&&!(b.type==="click"&&1<=b.button)){for(;gt!==this;gt=gt.parentNode||this)if(gt.nodeType===1&&(b.type!=="click"||gt.disabled!==!0)){for(J=[],st={},O=0;O<ct;O++)st[Z=(W=R[O]).selector+" "]===void 0&&(st[Z]=W.needsContext?-1<w(Z,this).index(gt):w.find(Z,this,null,[gt]).length),st[Z]&&J.push(W);J.length&&lt.push({elem:gt,handlers:J})}}return gt=this,ct<R.length&&lt.push({elem:gt,handlers:R.slice(ct)}),lt},addProp:function(b,R){Object.defineProperty(w.Event.prototype,b,{enumerable:!0,configurable:!0,get:d(R)?function(){if(this.originalEvent)return R(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(O){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:O})}})},fix:function(b){return b[w.expando]?b:new w.Event(b)},special:{load:{noBubble:!0},click:{setup:function(b){return b=this||b,Da.test(b.type)&&b.click&&P(b,"input")&&Hl(b,"click",!0),!1},trigger:function(b){return b=this||b,Da.test(b.type)&&b.click&&P(b,"input")&&Hl(b,"click"),!0},_default:function(b){return b=b.target,Da.test(b.type)&&b.click&&P(b,"input")&&Nt.get(b,"click")||P(b,"a")}},beforeunload:{postDispatch:function(b){b.result!==void 0&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}},w.removeEvent=function(b,R,O){b.removeEventListener&&b.removeEventListener(R,O)},w.Event=function(b,R){if(!(this instanceof w.Event))return new w.Event(b,R);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||b.defaultPrevented===void 0&&b.returnValue===!1?xs:_s,this.target=b.target&&b.target.nodeType===3?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,R&&w.extend(this,R),this.timeStamp=b&&b.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:_s,isPropagationStopped:_s,isImmediatePropagationStopped:_s,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=xs,b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=xs,b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=xs,b&&!this.isSimulated&&b.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(b,R){function O(W){var Z,J;g.documentMode?(Z=Nt.get(this,"handle"),(J=w.event.fix(W)).type=W.type==="focusin"?"focus":"blur",J.isSimulated=!0,Z(W),J.target===J.currentTarget&&Z(J)):w.event.simulate(R,W.target,w.event.fix(W))}w.event.special[b]={setup:function(){var W;if(Hl(this,b,!0),!g.documentMode)return!1;(W=Nt.get(this,R))||this.addEventListener(R,O),Nt.set(this,R,(W||0)+1)},trigger:function(){return Hl(this,b),!0},teardown:function(){var W;if(!g.documentMode)return!1;(W=Nt.get(this,R)-1)?Nt.set(this,R,W):(this.removeEventListener(R,O),Nt.remove(this,R))},_default:function(W){return Nt.get(W.target,b)},delegateType:R},w.event.special[R]={setup:function(){var W=this.ownerDocument||this.document||this,Z=g.documentMode?this:W,J=Nt.get(Z,R);J||(g.documentMode?this.addEventListener(R,O):W.addEventListener(b,O,!0)),Nt.set(Z,R,(J||0)+1)},teardown:function(){var W=this.ownerDocument||this.document||this,Z=g.documentMode?this:W,J=Nt.get(Z,R)-1;J?Nt.set(Z,R,J):(g.documentMode?this.removeEventListener(R,O):W.removeEventListener(b,O,!0),Nt.remove(Z,R))}}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,R){w.event.special[b]={delegateType:R,bindType:R,handle:function(O){var W,Z=O.relatedTarget,J=O.handleObj;return Z&&(Z===this||w.contains(this,Z))||(O.type=J.origType,W=J.handler.apply(this,arguments),O.type=R),W}}}),w.fn.extend({on:function(b,R,O,W){return nh(this,b,R,O,W)},one:function(b,R,O,W){return nh(this,b,R,O,W,1)},off:function(b,R,O){var W,Z;if(b&&b.preventDefault&&b.handleObj)W=b.handleObj,w(b.delegateTarget).off(W.namespace?W.origType+"."+W.namespace:W.origType,W.selector,W.handler);else{if(typeof b!="object")return R!==!1&&typeof R!="function"||(O=R,R=void 0),O===!1&&(O=_s),this.each(function(){w.event.remove(this,b,O,R)});for(Z in b)this.off(Z,R,b[Z])}return this}});var v4=/<script|<style|<link/i,x4=/checked\s*(?:[^=]|=\s*.checked.)/i,_4=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function A1(b,R){return P(b,"table")&&P(R.nodeType!==11?R:R.firstChild,"tr")&&w(b).children("tbody")[0]||b}function b4(b){return b.type=(b.getAttribute("type")!==null)+"/"+b.type,b}function w4(b){return(b.type||"").slice(0,5)==="true/"?b.type=b.type.slice(5):b.removeAttribute("type"),b}function E1(b,R){var O,W,Z,J;if(R.nodeType===1){if(Nt.hasData(b)&&(J=Nt.get(b).events))for(Z in Nt.remove(R,"handle events"),J)for(O=0,W=J[Z].length;O<W;O++)w.event.add(R,Z,J[Z][O]);li.hasData(b)&&(b=li.access(b),b=w.extend({},b),li.set(R,b))}}function bs(b,R,O,W){R=o(R);var Z,J,st,lt,ct,gt,ht=0,wt=b.length,St=wt-1,Ct=R[0],Tt=d(Ct);if(Tt||1<wt&&typeof Ct=="string"&&!y.checkClone&&x4.test(Ct))return b.each(function(Et){var Bt=b.eq(Et);Tt&&(R[0]=Ct.call(this,Et,Bt.html())),bs(Bt,R,O,W)});if(wt&&(J=(Z=k1(R,b[0].ownerDocument,!1,b,W)).firstChild,Z.childNodes.length===1&&(Z=J),J||W)){for(lt=(st=w.map(ci(Z,"script"),b4)).length;ht<wt;ht++)ct=Z,ht!==St&&(ct=w.clone(ct,!0,!0),lt)&&w.merge(st,ci(ct,"script")),O.call(b[ht],ct,ht);if(lt)for(gt=st[st.length-1].ownerDocument,w.map(st,w4),ht=0;ht<lt;ht++)ct=st[ht],T1.test(ct.type||"")&&!Nt.access(ct,"globalEval")&&w.contains(gt,ct)&&(ct.src&&(ct.type||"").toLowerCase()!=="module"?w._evalUrl&&!ct.noModule&&w._evalUrl(ct.src,{nonce:ct.nonce||ct.getAttribute("nonce")},gt):v(ct.textContent.replace(_4,""),ct,gt))}return b}function P1(b,R,O){for(var W,Z=R?w.filter(R,b):b,J=0;(W=Z[J])!=null;J++)O||W.nodeType!==1||w.cleanData(ci(W)),W.parentNode&&(O&&ys(W)&&ih(ci(W,"script")),W.parentNode.removeChild(W));return b}w.extend({htmlPrefilter:function(b){return b},clone:function(b,R,O){var W,Z,J,st,lt,ct,gt,ht=b.cloneNode(!0),wt=ys(b);if(!(y.noCloneChecked||b.nodeType!==1&&b.nodeType!==11||w.isXMLDoc(b)))for(st=ci(ht),W=0,Z=(J=ci(b)).length;W<Z;W++)lt=J[W],ct=st[W],gt=void 0,(gt=ct.nodeName.toLowerCase())==="input"&&Da.test(lt.type)?ct.checked=lt.checked:gt!=="input"&&gt!=="textarea"||(ct.defaultValue=lt.defaultValue);if(R)if(O)for(J=J||ci(b),st=st||ci(ht),W=0,Z=J.length;W<Z;W++)E1(J[W],st[W]);else E1(b,ht);return 0<(st=ci(ht,"script")).length&&ih(st,!wt&&ci(b,"script")),ht},cleanData:function(b){for(var R,O,W,Z=w.event.special,J=0;(O=b[J])!==void 0;J++)if(Aa(O)){if(R=O[Nt.expando]){if(R.events)for(W in R.events)Z[W]?w.event.remove(O,W):w.removeEvent(O,W,R.handle);O[Nt.expando]=void 0}O[li.expando]&&(O[li.expando]=void 0)}}}),w.fn.extend({detach:function(b){return P1(this,b,!0)},remove:function(b){return P1(this,b)},text:function(b){return Rn(this,function(R){return R===void 0?w.text(this):this.empty().each(function(){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(this.textContent=R)})},null,b,arguments.length)},append:function(){return bs(this,arguments,function(b){this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||A1(this,b).appendChild(b)})},prepend:function(){return bs(this,arguments,function(b){var R;this.nodeType!==1&&this.nodeType!==11&&this.nodeType!==9||(R=A1(this,b)).insertBefore(b,R.firstChild)})},before:function(){return bs(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return bs(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,R=0;(b=this[R])!=null;R++)b.nodeType===1&&(w.cleanData(ci(b,!1)),b.textContent="");return this},clone:function(b,R){return b=b!=null&&b,R=R??b,this.map(function(){return w.clone(this,b,R)})},html:function(b){return Rn(this,function(R){var O=this[0]||{},W=0,Z=this.length;if(R===void 0&&O.nodeType===1)return O.innerHTML;if(typeof R=="string"&&!v4.test(R)&&!Fi[(S1.exec(R)||["",""])[1].toLowerCase()]){R=w.htmlPrefilter(R);try{for(;W<Z;W++)(O=this[W]||{}).nodeType===1&&(w.cleanData(ci(O,!1)),O.innerHTML=R);O=0}catch{}}O&&this.empty().append(R)},null,b,arguments.length)},replaceWith:function(){var b=[];return bs(this,arguments,function(R){var O=this.parentNode;w.inArray(this,b)<0&&(w.cleanData(ci(this)),O)&&O.replaceChild(R,this)},b)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,R){w.fn[b]=function(O){for(var W,Z=[],J=w(O),st=J.length-1,lt=0;lt<=st;lt++)W=lt===st?this:this.clone(!0),w(J[lt])[R](W),c.apply(Z,W.get());return this.pushStack(Z)}});var D1,L1,R1,I1,rh,N1,Gl,Oi,sh=new RegExp("^("+ni+")(?!px)[a-z%]+$","i"),ah=/^--/,Wl=function(b){var R=b.ownerDocument.defaultView;return(R=R&&R.opener?R:e).getComputedStyle(b)},F1=function(b,R,O){var W,Z={};for(W in R)Z[W]=b.style[W],b.style[W]=R[W];for(W in O=O.call(b),R)b.style[W]=Z[W];return O},C4=new RegExp(In.join("|"),"i");function La(){var b;Oi&&(Gl.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Oi.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Dr.appendChild(Gl).appendChild(Oi),b=e.getComputedStyle(Oi),D1=b.top!=="1%",N1=$l(b.marginLeft)===12,Oi.style.right="60%",I1=$l(b.right)===36,L1=$l(b.width)===36,Oi.style.position="absolute",R1=$l(Oi.offsetWidth/3)===12,Dr.removeChild(Gl),Oi=null)}function $l(b){return Math.round(parseFloat(b))}function Ra(b,R,O){var W,Z=ah.test(R),J=b.style;return(O=O||Wl(b))&&(W=O.getPropertyValue(R)||O[R],(W=Z?W&&(W.replace(T,"$1")||void 0):W)!==""||ys(b)||(W=w.style(b,R)),!y.pixelBoxStyles())&&sh.test(W)&&C4.test(R)&&(Z=J.width,b=J.minWidth,R=J.maxWidth,J.minWidth=J.maxWidth=J.width=W,W=O.width,J.width=Z,J.minWidth=b,J.maxWidth=R),W!==void 0?W+"":W}function O1(b,R){return{get:function(){if(!b())return(this.get=R).apply(this,arguments);delete this.get}}}Gl=g.createElement("div"),(Oi=g.createElement("div")).style&&(Oi.style.backgroundClip="content-box",Oi.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle=Oi.style.backgroundClip==="content-box",w.extend(y,{boxSizingReliable:function(){return La(),L1},pixelBoxStyles:function(){return La(),I1},pixelPosition:function(){return La(),D1},reliableMarginLeft:function(){return La(),N1},scrollboxSize:function(){return La(),R1},reliableTrDimensions:function(){var b,R,O;return rh==null&&(b=g.createElement("table"),R=g.createElement("tr"),O=g.createElement("div"),b.style.cssText="position:absolute;left:-11111px;border-collapse:separate",R.style.cssText="box-sizing:content-box;border:1px solid",R.style.height="1px",O.style.height="9px",O.style.display="block",Dr.appendChild(b).appendChild(R).appendChild(O),O=e.getComputedStyle(R),rh=parseInt(O.height,10)+parseInt(O.borderTopWidth,10)+parseInt(O.borderBottomWidth,10)===R.offsetHeight,Dr.removeChild(b)),rh}}));var B1=["Webkit","Moz","ms"],z1=g.createElement("div").style,H1={};function oh(b){var R=w.cssProps[b]||H1[b];return R||(b in z1?b:H1[b]=function(O){for(var W=O[0].toUpperCase()+O.slice(1),Z=B1.length;Z--;)if((O=B1[Z]+W)in z1)return O}(b)||b)}var S4=/^(none|table(?!-c[ea]).+)/,T4={position:"absolute",visibility:"hidden",display:"block"},G1={letterSpacing:"0",fontWeight:"400"};function W1(b,R,O){var W=Pa.exec(R);return W?Math.max(0,W[2]-(O||0))+(W[3]||"px"):R}function lh(b,R,O,W,Z,J){var st=R==="width"?1:0,lt=0,ct=0,gt=0;if(O===(W?"border":"content"))return 0;for(;st<4;st+=2)O==="margin"&&(gt+=w.css(b,O+In[st],!0,Z)),W?(O==="content"&&(ct-=w.css(b,"padding"+In[st],!0,Z)),O!=="margin"&&(ct-=w.css(b,"border"+In[st]+"Width",!0,Z))):(ct+=w.css(b,"padding"+In[st],!0,Z),O!=="padding"?ct+=w.css(b,"border"+In[st]+"Width",!0,Z):lt+=w.css(b,"border"+In[st]+"Width",!0,Z));return!W&&0<=J&&(ct+=Math.max(0,Math.ceil(b["offset"+R[0].toUpperCase()+R.slice(1)]-J-ct-lt-.5))||0),ct+gt}function $1(b,R,O){var W=Wl(b),Z=(!y.boxSizingReliable()||O)&&w.css(b,"boxSizing",!1,W)==="border-box",J=Z,st=Ra(b,R,W),lt="offset"+R[0].toUpperCase()+R.slice(1);if(sh.test(st)){if(!O)return st;st="auto"}return(!y.boxSizingReliable()&&Z||!y.reliableTrDimensions()&&P(b,"tr")||st==="auto"||!parseFloat(st)&&w.css(b,"display",!1,W)==="inline")&&b.getClientRects().length&&(Z=w.css(b,"boxSizing",!1,W)==="border-box",J=lt in b)&&(st=b[lt]),(st=parseFloat(st)||0)+lh(b,R,O||(Z?"border":"content"),J,W,st)+"px"}function Vi(b,R,O,W,Z){return new Vi.prototype.init(b,R,O,W,Z)}w.extend({cssHooks:{opacity:{get:function(b,R){if(R)return(R=Ra(b,"opacity"))===""?"1":R}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(b,R,O,W){if(b&&b.nodeType!==3&&b.nodeType!==8&&b.style){var Z,J,st,lt=dn(R),ct=ah.test(R),gt=b.style;if(ct||(R=oh(lt)),st=w.cssHooks[R]||w.cssHooks[lt],O===void 0)return st&&"get"in st&&(Z=st.get(b,!1,W))!==void 0?Z:gt[R];(J=typeof O)=="string"&&(Z=Pa.exec(O))&&Z[1]&&(O=w1(b,R,Z),J="number"),O==null||O!=O||(J!=="number"||ct||(O+=Z&&Z[3]||(w.cssNumber[lt]?"":"px")),y.clearCloneStyle||O!==""||R.indexOf("background")!==0||(gt[R]="inherit"),st&&"set"in st&&(O=st.set(b,O,W))===void 0)||(ct?gt.setProperty(R,O):gt[R]=O)}},css:function(b,R,O,W){var Z,J=dn(R);return ah.test(R)||(R=oh(J)),(Z=(Z=(J=w.cssHooks[R]||w.cssHooks[J])&&"get"in J?J.get(b,!0,O):Z)===void 0?Ra(b,R,W):Z)==="normal"&&R in G1&&(Z=G1[R]),(O===""||O)&&(J=parseFloat(Z),O===!0||isFinite(J))?J||0:Z}}),w.each(["height","width"],function(b,R){w.cssHooks[R]={get:function(O,W,Z){if(W)return!S4.test(w.css(O,"display"))||O.getClientRects().length&&O.getBoundingClientRect().width?$1(O,R,Z):F1(O,T4,function(){return $1(O,R,Z)})},set:function(O,W,ct){var J=Wl(O),st=!y.scrollboxSize()&&J.position==="absolute",lt=(st||ct)&&w.css(O,"boxSizing",!1,J)==="border-box",ct=ct?lh(O,R,ct,lt,J):0;return lt&&st&&(ct-=Math.ceil(O["offset"+R[0].toUpperCase()+R.slice(1)]-parseFloat(J[R])-lh(O,R,"border",!1,J)-.5)),ct&&(lt=Pa.exec(W))&&(lt[3]||"px")!=="px"&&(O.style[R]=W,W=w.css(O,R)),W1(0,W,ct)}}}),w.cssHooks.marginLeft=O1(y.reliableMarginLeft,function(b,R){if(R)return(parseFloat(Ra(b,"marginLeft"))||b.getBoundingClientRect().left-F1(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(b,R){w.cssHooks[b+R]={expand:function(O){for(var W=0,Z={},J=typeof O=="string"?O.split(" "):[O];W<4;W++)Z[b+In[W]+R]=J[W]||J[W-2]||J[0];return Z}},b!=="margin"&&(w.cssHooks[b+R].set=W1)}),w.fn.extend({css:function(b,R){return Rn(this,function(O,W,Z){var J,st,lt={},ct=0;if(Array.isArray(W)){for(J=Wl(O),st=W.length;ct<st;ct++)lt[W[ct]]=w.css(O,W[ct],!1,J);return lt}return Z!==void 0?w.style(O,W,Z):w.css(O,W)},b,R,1<arguments.length)}}),((w.Tween=Vi).prototype={constructor:Vi,init:function(b,R,O,W,Z,J){this.elem=b,this.prop=O,this.easing=Z||w.easing._default,this.options=R,this.start=this.now=this.cur(),this.end=W,this.unit=J||(w.cssNumber[O]?"":"px")},cur:function(){var b=Vi.propHooks[this.prop];return(b&&b.get?b:Vi.propHooks._default).get(this)},run:function(b){var R,O=Vi.propHooks[this.prop];return this.options.duration?this.pos=R=w.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=R=b,this.now=(this.end-this.start)*R+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(O&&O.set?O:Vi.propHooks._default).set(this),this}}).init.prototype=Vi.prototype,(Vi.propHooks={_default:{get:function(b){return b.elem.nodeType!==1||b.elem[b.prop]!=null&&b.elem.style[b.prop]==null?b.elem[b.prop]:(b=w.css(b.elem,b.prop,""))&&b!=="auto"?b:0},set:function(b){w.fx.step[b.prop]?w.fx.step[b.prop](b):b.elem.nodeType!==1||!w.cssHooks[b.prop]&&b.elem.style[oh(b.prop)]==null?b.elem[b.prop]=b.now:w.style(b.elem,b.prop,b.now+b.unit)}}}).scrollTop=Vi.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}},w.easing={linear:function(b){return b},swing:function(b){return .5-Math.cos(b*Math.PI)/2},_default:"swing"},w.fx=Vi.prototype.init,w.fx.step={};var ws,Ul,k4=/^(?:toggle|show|hide)$/,M4=/queueHooks$/;function ch(){Ul&&(g.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ch):e.setTimeout(ch,w.fx.interval),w.fx.tick())}function U1(){return e.setTimeout(function(){ws=void 0}),ws=Date.now()}function Yl(b,R){var O,W=0,Z={height:b};for(R=R?1:0;W<4;W+=2-R)Z["margin"+(O=In[W])]=Z["padding"+O]=b;return R&&(Z.opacity=Z.width=b),Z}function Y1(b,R,O){for(var W,Z=(qi.tweeners[R]||[]).concat(qi.tweeners["*"]),J=0,st=Z.length;J<st;J++)if(W=Z[J].call(O,R,b))return W}function qi(b,R,O){var W,Z,J,st,lt,ct,gt,ht=0,wt=qi.prefilters.length,St=w.Deferred().always(function(){delete Ct.elem}),Ct=function(){if(!Z){for(var Ht=ws||U1(),Ht=Math.max(0,Tt.startTime+Tt.duration-Ht),At=1-(Ht/Tt.duration||0),$t=0,Ot=Tt.tweens.length;$t<Ot;$t++)Tt.tweens[$t].run(At);if(St.notifyWith(b,[Tt,At,Ht]),At<1&&Ot)return Ht;Ot||St.notifyWith(b,[Tt,1,0]),St.resolveWith(b,[Tt])}return!1},Tt=St.promise({elem:b,props:w.extend({},R),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},O),originalProperties:R,originalOptions:O,startTime:ws||U1(),duration:O.duration,tweens:[],createTween:function(Ht,At){return At=w.Tween(b,Tt.opts,Ht,At,Tt.opts.specialEasing[Ht]||Tt.opts.easing),Tt.tweens.push(At),At},stop:function(Ht){var At=0,$t=Ht?Tt.tweens.length:0;if(!Z){for(Z=!0;At<$t;At++)Tt.tweens[At].run(1);Ht?(St.notifyWith(b,[Tt,1,0]),St.resolveWith(b,[Tt,Ht])):St.rejectWith(b,[Tt,Ht])}return this}}),Et=Tt.props,Bt=Et,ie=Tt.opts.specialEasing;for(J in Bt)if(lt=ie[st=dn(J)],ct=Bt[J],Array.isArray(ct)&&(lt=ct[1],ct=Bt[J]=ct[0]),J!==st&&(Bt[st]=ct,delete Bt[J]),(gt=w.cssHooks[st])&&"expand"in gt)for(J in ct=gt.expand(ct),delete Bt[st],ct)J in Bt||(Bt[J]=ct[J],ie[J]=lt);else ie[st]=lt;for(;ht<wt;ht++)if(W=qi.prefilters[ht].call(Tt,b,Et,Tt.opts))return d(W.stop)&&(w._queueHooks(Tt.elem,Tt.opts.queue).stop=W.stop.bind(W)),W;return w.map(Et,Y1,Tt),d(Tt.opts.start)&&Tt.opts.start.call(b,Tt),Tt.progress(Tt.opts.progress).done(Tt.opts.done,Tt.opts.complete).fail(Tt.opts.fail).always(Tt.opts.always),w.fx.timer(w.extend(Ct,{elem:b,anim:Tt,queue:Tt.opts.queue})),Tt}w.Animation=w.extend(qi,{tweeners:{"*":[function(b,R){var O=this.createTween(b,R);return w1(O.elem,b,Pa.exec(R),O),O}]},tweener:function(b,R){for(var O,W=0,Z=(b=d(b)?(R=b,["*"]):b.match(hn)).length;W<Z;W++)O=b[W],qi.tweeners[O]=qi.tweeners[O]||[],qi.tweeners[O].unshift(R)},prefilters:[function(b,R,O){var W,Z,J,st,lt,ct,gt,ht="width"in R||"height"in R,wt=this,St={},Ct=b.style,Tt=b.nodeType&&zl(b),Et=Nt.get(b,"fxshow");for(W in O.queue||((st=w._queueHooks(b,"fx")).unqueued==null&&(st.unqueued=0,lt=st.empty.fire,st.empty.fire=function(){st.unqueued||lt()}),st.unqueued++,wt.always(function(){wt.always(function(){st.unqueued--,w.queue(b,"fx").length||st.empty.fire()})})),R)if(Z=R[W],k4.test(Z)){if(delete R[W],J=J||Z==="toggle",Z===(Tt?"hide":"show")){if(Z!=="show"||!Et||Et[W]===void 0)continue;Tt=!0}St[W]=Et&&Et[W]||w.style(b,W)}if((ct=!w.isEmptyObject(R))||!w.isEmptyObject(St))for(W in ht&&b.nodeType===1&&(O.overflow=[Ct.overflow,Ct.overflowX,Ct.overflowY],(gt=Et&&Et.display)==null&&(gt=Nt.get(b,"display")),(ht=w.css(b,"display"))==="none"&&(gt?ht=gt:(vs([b],!0),gt=b.style.display||gt,ht=w.css(b,"display"),vs([b]))),ht==="inline"||ht==="inline-block"&&gt!=null)&&w.css(b,"float")==="none"&&(ct||(wt.done(function(){Ct.display=gt}),gt==null&&(ht=Ct.display,gt=ht==="none"?"":ht)),Ct.display="inline-block"),O.overflow&&(Ct.overflow="hidden",wt.always(function(){Ct.overflow=O.overflow[0],Ct.overflowX=O.overflow[1],Ct.overflowY=O.overflow[2]})),ct=!1,St)ct||(Et?"hidden"in Et&&(Tt=Et.hidden):Et=Nt.access(b,"fxshow",{display:gt}),J&&(Et.hidden=!Tt),Tt&&vs([b],!0),wt.done(function(){for(W in Tt||vs([b]),Nt.remove(b,"fxshow"),St)w.style(b,W,St[W])})),ct=Y1(Tt?Et[W]:0,W,wt),W in Et||(Et[W]=ct.start,Tt&&(ct.end=ct.start,ct.start=0))}],prefilter:function(b,R){R?qi.prefilters.unshift(b):qi.prefilters.push(b)}}),w.speed=function(b,R,O){var W=b&&typeof b=="object"?w.extend({},b):{complete:O||!O&&R||d(b)&&b,duration:b,easing:O&&R||R&&!d(R)&&R};return w.fx.off?W.duration=0:typeof W.duration!="number"&&(W.duration in w.fx.speeds?W.duration=w.fx.speeds[W.duration]:W.duration=w.fx.speeds._default),W.queue!=null&&W.queue!==!0||(W.queue="fx"),W.old=W.complete,W.complete=function(){d(W.old)&&W.old.call(this),W.queue&&w.dequeue(this,W.queue)},W},w.fn.extend({fadeTo:function(b,R,O,W){return this.filter(zl).css("opacity",0).show().end().animate({opacity:R},b,O,W)},animate:function(b,st,O,W){var Z=w.isEmptyObject(b),J=w.speed(st,O,W),st=function(){var lt=qi(this,w.extend({},b),J);(Z||Nt.get(this,"finish"))&&lt.stop(!0)};return st.finish=st,Z||J.queue===!1?this.each(st):this.queue(J.queue,st)},stop:function(b,R,O){var W=function(Z){var J=Z.stop;delete Z.stop,J(O)};return typeof b!="string"&&(O=R,R=b,b=void 0),R&&this.queue(b||"fx",[]),this.each(function(){var Z=!0,J=b!=null&&b+"queueHooks",st=w.timers,lt=Nt.get(this);if(J)lt[J]&&lt[J].stop&&W(lt[J]);else for(J in lt)lt[J]&&lt[J].stop&&M4.test(J)&&W(lt[J]);for(J=st.length;J--;)st[J].elem!==this||b!=null&&st[J].queue!==b||(st[J].anim.stop(O),Z=!1,st.splice(J,1));!Z&&O||w.dequeue(this,b)})},finish:function(b){return b!==!1&&(b=b||"fx"),this.each(function(){var R,O=Nt.get(this),W=O[b+"queue"],Z=O[b+"queueHooks"],J=w.timers,st=W?W.length:0;for(O.finish=!0,w.queue(this,b,[]),Z&&Z.stop&&Z.stop.call(this,!0),R=J.length;R--;)J[R].elem===this&&J[R].queue===b&&(J[R].anim.stop(!0),J.splice(R,1));for(R=0;R<st;R++)W[R]&&W[R].finish&&W[R].finish.call(this);delete O.finish})}}),w.each(["toggle","show","hide"],function(b,R){var O=w.fn[R];w.fn[R]=function(W,Z,J){return W==null||typeof W=="boolean"?O.apply(this,arguments):this.animate(Yl(R,!0),W,Z,J)}}),w.each({slideDown:Yl("show"),slideUp:Yl("hide"),slideToggle:Yl("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,R){w.fn[b]=function(O,W,Z){return this.animate(R,O,W,Z)}}),w.timers=[],w.fx.tick=function(){var b,R=0,O=w.timers;for(ws=Date.now();R<O.length;R++)(b=O[R])()||O[R]!==b||O.splice(R--,1);O.length||w.fx.stop(),ws=void 0},w.fx.timer=function(b){w.timers.push(b),w.fx.start()},w.fx.interval=13,w.fx.start=function(){Ul||(Ul=!0,ch())},w.fx.stop=function(){Ul=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(b,R){return b=w.fx&&w.fx.speeds[b]||b,this.queue(R=R||"fx",function(O,W){var Z=e.setTimeout(O,b);W.stop=function(){e.clearTimeout(Z)}})},dt=g.createElement("input"),ft=g.createElement("select").appendChild(g.createElement("option")),dt.type="checkbox",y.checkOn=dt.value!=="",y.optSelected=ft.selected,(dt=g.createElement("input")).value="t",dt.type="radio",y.radioValue=dt.value==="t";var j1,Ia=w.expr.attrHandle,A4=(w.fn.extend({attr:function(b,R){return Rn(this,w.attr,b,R,1<arguments.length)},removeAttr:function(b){return this.each(function(){w.removeAttr(this,b)})}}),w.extend({attr:function(b,R,O){var W,Z,J=b.nodeType;if(J!==3&&J!==8&&J!==2)return typeof b.getAttribute>"u"?w.prop(b,R,O):(J===1&&w.isXMLDoc(b)||(Z=w.attrHooks[R.toLowerCase()]||(w.expr.match.bool.test(R)?j1:void 0)),O!==void 0?O===null?void w.removeAttr(b,R):Z&&"set"in Z&&(W=Z.set(b,O,R))!==void 0?W:(b.setAttribute(R,O+""),O):!(Z&&"get"in Z&&(W=Z.get(b,R))!==null)&&(W=w.find.attr(b,R))==null?void 0:W)},attrHooks:{type:{set:function(b,R){var O;if(!y.radioValue&&R==="radio"&&P(b,"input"))return O=b.value,b.setAttribute("type",R),O&&(b.value=O),R}}},removeAttr:function(b,R){var O,W=0,Z=R&&R.match(hn);if(Z&&b.nodeType===1)for(;O=Z[W++];)b.removeAttribute(O)}}),j1={set:function(b,R,O){return R===!1?w.removeAttr(b,O):b.setAttribute(O,O),O}},w.each(w.expr.match.bool.source.match(/\w+/g),function(b,R){var O=Ia[R]||w.find.attr;Ia[R]=function(W,Z,J){var st,lt,ct=Z.toLowerCase();return J||(lt=Ia[ct],Ia[ct]=st,st=O(W,Z,J)!=null?ct:null,Ia[ct]=lt),st}}),/^(?:input|select|textarea|button)$/i),E4=/^(?:a|area)$/i;function Lr(b){return(b.match(hn)||[]).join(" ")}function Rr(b){return b.getAttribute&&b.getAttribute("class")||""}function uh(b){return Array.isArray(b)?b:typeof b=="string"&&b.match(hn)||[]}w.fn.extend({prop:function(b,R){return Rn(this,w.prop,b,R,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[w.propFix[b]||b]})}}),w.extend({prop:function(b,R,O){var W,Z,J=b.nodeType;if(J!==3&&J!==8&&J!==2)return J===1&&w.isXMLDoc(b)||(R=w.propFix[R]||R,Z=w.propHooks[R]),O!==void 0?Z&&"set"in Z&&(W=Z.set(b,O,R))!==void 0?W:b[R]=O:Z&&"get"in Z&&(W=Z.get(b,R))!==null?W:b[R]},propHooks:{tabIndex:{get:function(b){var R=w.find.attr(b,"tabindex");return R?parseInt(R,10):A4.test(b.nodeName)||E4.test(b.nodeName)&&b.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(w.propHooks.selected={get:function(b){return b=b.parentNode,b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode,b&&(b.selectedIndex,b.parentNode)&&b.parentNode.selectedIndex}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(b){var R,O,W,Z,J,st;return d(b)?this.each(function(lt){w(this).addClass(b.call(this,lt,Rr(this)))}):(R=uh(b)).length?this.each(function(){if(W=Rr(this),O=this.nodeType===1&&" "+Lr(W)+" "){for(J=0;J<R.length;J++)Z=R[J],O.indexOf(" "+Z+" ")<0&&(O+=Z+" ");st=Lr(O),W!==st&&this.setAttribute("class",st)}}):this},removeClass:function(b){var R,O,W,Z,J,st;return d(b)?this.each(function(lt){w(this).removeClass(b.call(this,lt,Rr(this)))}):arguments.length?(R=uh(b)).length?this.each(function(){if(W=Rr(this),O=this.nodeType===1&&" "+Lr(W)+" "){for(J=0;J<R.length;J++)for(Z=R[J];-1<O.indexOf(" "+Z+" ");)O=O.replace(" "+Z+" "," ");st=Lr(O),W!==st&&this.setAttribute("class",st)}}):this:this.attr("class","")},toggleClass:function(b,R){var O,W,Z,J,st=typeof b,lt=st=="string"||Array.isArray(b);return d(b)?this.each(function(ct){w(this).toggleClass(b.call(this,ct,Rr(this),R),R)}):typeof R=="boolean"&&lt?R?this.addClass(b):this.removeClass(b):(O=uh(b),this.each(function(){if(lt)for(J=w(this),Z=0;Z<O.length;Z++)W=O[Z],J.hasClass(W)?J.removeClass(W):J.addClass(W);else b!==void 0&&st!="boolean"||((W=Rr(this))&&Nt.set(this,"__className__",W),this.setAttribute&&this.setAttribute("class",!W&&b!==!1&&Nt.get(this,"__className__")||""))}))},hasClass:function(b){for(var R,O=0,W=" "+b+" ";R=this[O++];)if(R.nodeType===1&&-1<(" "+Lr(Rr(R))+" ").indexOf(W))return!0;return!1}});var P4=/\r/g,Na=(w.fn.extend({val:function(b){var R,O,W,Z=this[0];return arguments.length?(W=d(b),this.each(function(J){this.nodeType!==1||((J=W?b.call(this,J,w(this).val()):b)==null?J="":typeof J=="number"?J+="":Array.isArray(J)&&(J=w.map(J,function(st){return st==null?"":st+""})),(R=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in R&&R.set(this,J,"value")!==void 0)||(this.value=J)})):Z?(R=w.valHooks[Z.type]||w.valHooks[Z.nodeName.toLowerCase()])&&"get"in R&&(O=R.get(Z,"value"))!==void 0?O:typeof(O=Z.value)=="string"?O.replace(P4,""):O??"":void 0}}),w.extend({valHooks:{option:{get:function(b){var R=w.find.attr(b,"value");return R??Lr(w.text(b))}},select:{get:function(b){for(var R,O=b.options,W=b.selectedIndex,Z=b.type==="select-one",J=Z?null:[],st=Z?W+1:O.length,lt=W<0?st:Z?W:0;lt<st;lt++)if(((R=O[lt]).selected||lt===W)&&!R.disabled&&(!R.parentNode.disabled||!P(R.parentNode,"optgroup"))){if(R=w(R).val(),Z)return R;J.push(R)}return J},set:function(b,R){for(var O,W,Z=b.options,J=w.makeArray(R),st=Z.length;st--;)((W=Z[st]).selected=-1<w.inArray(w.valHooks.option.get(W),J))&&(O=!0);return O||(b.selectedIndex=-1),J}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(b,R){if(Array.isArray(R))return b.checked=-1<w.inArray(w(b).val(),R)}},y.checkOn||(w.valHooks[this].get=function(b){return b.getAttribute("value")===null?"on":b.value})}),e.location),X1={guid:Date.now()},hh=/\?/,V1=(w.parseXML=function(b){var R,O;if(!b||typeof b!="string")return null;try{R=new e.DOMParser().parseFromString(b,"text/xml")}catch{}return O=R&&R.getElementsByTagName("parsererror")[0],R&&!O||w.error("Invalid XML: "+(O?w.map(O.childNodes,function(W){return W.textContent}).join(`
`):b)),R},/^(?:focusinfocus|focusoutblur)$/),q1=function(b){b.stopPropagation()},D4=(w.extend(w.event,{trigger:function(b,R,O,W){var Z,J,st,lt,ct,gt,ht,wt=[O||g],St=p.call(b,"type")?b.type:b,Ct=p.call(b,"namespace")?b.namespace.split("."):[],Tt=ht=J=O=O||g;if(O.nodeType!==3&&O.nodeType!==8&&!V1.test(St+w.event.triggered)&&(-1<St.indexOf(".")&&(St=(Ct=St.split(".")).shift(),Ct.sort()),lt=St.indexOf(":")<0&&"on"+St,(b=b[w.expando]?b:new w.Event(St,typeof b=="object"&&b)).isTrigger=W?2:3,b.namespace=Ct.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+Ct.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=O),R=R==null?[b]:w.makeArray(R,[b]),gt=w.event.special[St]||{},W||!gt.trigger||gt.trigger.apply(O,R)!==!1)){if(!W&&!gt.noBubble&&!_(O)){for(st=gt.delegateType||St,V1.test(st+St)||(Tt=Tt.parentNode);Tt;Tt=Tt.parentNode)wt.push(Tt),J=Tt;J===(O.ownerDocument||g)&&wt.push(J.defaultView||J.parentWindow||e)}for(Z=0;(Tt=wt[Z++])&&!b.isPropagationStopped();)ht=Tt,b.type=1<Z?st:gt.bindType||St,(ct=(Nt.get(Tt,"events")||Object.create(null))[b.type]&&Nt.get(Tt,"handle"))&&ct.apply(Tt,R),(ct=lt&&Tt[lt])&&ct.apply&&Aa(Tt)&&(b.result=ct.apply(Tt,R),b.result===!1)&&b.preventDefault();return b.type=St,W||b.isDefaultPrevented()||gt._default&&gt._default.apply(wt.pop(),R)!==!1||!Aa(O)||lt&&d(O[St])&&!_(O)&&((J=O[lt])&&(O[lt]=null),w.event.triggered=St,b.isPropagationStopped()&&ht.addEventListener(St,q1),O[St](),b.isPropagationStopped()&&ht.removeEventListener(St,q1),w.event.triggered=void 0,J)&&(O[lt]=J),b.result}},simulate:function(b,R,O){O=w.extend(new w.Event,O,{type:b,isSimulated:!0}),w.event.trigger(O,null,R)}}),w.fn.extend({trigger:function(b,R){return this.each(function(){w.event.trigger(b,R,this)})},triggerHandler:function(b,R){var O=this[0];if(O)return w.event.trigger(b,R,O,!0)}}),/\[\]$/),K1=/\r?\n/g,L4=/^(?:submit|button|image|reset|file)$/i,R4=/^(?:input|select|textarea|keygen)/i;w.param=function(b,R){var O,W=[],Z=function(J,st){st=d(st)?st():st,W[W.length]=encodeURIComponent(J)+"="+encodeURIComponent(st??"")};if(b==null)return"";if(Array.isArray(b)||b.jquery&&!w.isPlainObject(b))w.each(b,function(){Z(this.name,this.value)});else for(O in b)(function J(st,lt,ct,gt){if(Array.isArray(lt))w.each(lt,function(wt,St){ct||D4.test(st)?gt(st,St):J(st+"["+(typeof St=="object"&&St!=null?wt:"")+"]",St,ct,gt)});else if(ct||S(lt)!=="object")gt(st,lt);else for(var ht in lt)J(st+"["+ht+"]",lt[ht],ct,gt)})(O,b[O],R,Z);return W.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=w.prop(this,"elements");return b?w.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!w(this).is(":disabled")&&R4.test(this.nodeName)&&!L4.test(b)&&(this.checked||!Da.test(b))}).map(function(b,R){var O=w(this).val();return O==null?null:Array.isArray(O)?w.map(O,function(W){return{name:R.name,value:W.replace(K1,`\r
`)}}):{name:R.name,value:O.replace(K1,`\r
`)}}).get()}});var I4=/%20/g,N4=/#.*$/,F4=/([?&])_=[^&]*/,O4=/^(.*?):[ \t]*([^\r\n]*)$/gm,B4=/^(?:GET|HEAD)$/,z4=/^\/\//,Z1={},dh={},Q1="*/".concat("*"),fh=g.createElement("a");function J1(b){return function(R,O){typeof R!="string"&&(O=R,R="*");var W,Z=0,J=R.toLowerCase().match(hn)||[];if(d(O))for(;W=J[Z++];)W[0]==="+"?(W=W.slice(1)||"*",(b[W]=b[W]||[]).unshift(O)):(b[W]=b[W]||[]).push(O)}}function tp(b,R,O,W){var Z={},J=b===dh;function st(lt){var ct;return Z[lt]=!0,w.each(b[lt]||[],function(gt,ht){return ht=ht(R,O,W),typeof ht!="string"||J||Z[ht]?J?!(ct=ht):void 0:(R.dataTypes.unshift(ht),st(ht),!1)}),ct}return st(R.dataTypes[0])||!Z["*"]&&st("*")}function ph(b,R){var O,W,Z=w.ajaxSettings.flatOptions||{};for(O in R)R[O]!==void 0&&((Z[O]?b:W=W||{})[O]=R[O]);return W&&w.extend(!0,b,W),b}function H4(b,R,O,W){var Z,J,st,lt,ct,gt={},ht=b.dataTypes.slice();if(ht[1])for(st in b.converters)gt[st.toLowerCase()]=b.converters[st];for(J=ht.shift();J;)if(b.responseFields[J]&&(O[b.responseFields[J]]=R),!ct&&W&&b.dataFilter&&(R=b.dataFilter(R,b.dataType)),ct=J,J=ht.shift()){if(J==="*")J=ct;else if(ct!=="*"&&ct!==J){if(!(st=gt[ct+" "+J]||gt["* "+J])){for(Z in gt)if((lt=Z.split(" "))[1]===J&&(st=gt[ct+" "+lt[0]]||gt["* "+lt[0]])){st===!0?st=gt[Z]:gt[Z]!==!0&&(J=lt[0],ht.unshift(lt[1]));break}}if(st!==!0)if(st&&b.throws)R=st(R);else try{R=st(R)}catch(wt){return{state:"parsererror",error:st?wt:"No conversion from "+ct+" to "+J}}}}return{state:"success",data:R}}fh.href=Na.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Na.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Na.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Q1,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,R){return R?ph(ph(b,w.ajaxSettings),R):ph(w.ajaxSettings,b)},ajaxPrefilter:J1(Z1),ajaxTransport:J1(dh),ajax:function(b,R){typeof b=="object"&&(R=b,b=void 0);var O,W,Z,J,st,lt,ct,gt,ht=w.ajaxSetup({},R=R||{}),wt=ht.context||ht,St=ht.context&&(wt.nodeType||wt.jquery)?w(wt):w.event,Ct=w.Deferred(),Tt=w.Callbacks("once memory"),Et=ht.statusCode||{},Bt={},ie={},Ht="canceled",At={readyState:0,getResponseHeader:function(Ot){var Kt;if(lt){if(!J)for(J={};Kt=O4.exec(Z);)J[Kt[1].toLowerCase()+" "]=(J[Kt[1].toLowerCase()+" "]||[]).concat(Kt[2]);Kt=J[Ot.toLowerCase()+" "]}return Kt==null?null:Kt.join(", ")},getAllResponseHeaders:function(){return lt?Z:null},setRequestHeader:function(Ot,Kt){return lt==null&&(Ot=ie[Ot.toLowerCase()]=ie[Ot.toLowerCase()]||Ot,Bt[Ot]=Kt),this},overrideMimeType:function(Ot){return lt==null&&(ht.mimeType=Ot),this},statusCode:function(Ot){if(Ot)if(lt)At.always(Ot[At.status]);else for(var Kt in Ot)Et[Kt]=[Et[Kt],Ot[Kt]];return this},abort:function(Ot){return Ot=Ot||Ht,O&&O.abort(Ot),$t(0,Ot),this}};if(Ct.promise(At),ht.url=((b||ht.url||Na.href)+"").replace(z4,Na.protocol+"//"),ht.type=R.method||R.type||ht.method||ht.type,ht.dataTypes=(ht.dataType||"*").toLowerCase().match(hn)||[""],ht.crossDomain==null){b=g.createElement("a");try{b.href=ht.url,b.href=b.href,ht.crossDomain=fh.protocol+"//"+fh.host!=b.protocol+"//"+b.host}catch{ht.crossDomain=!0}}if(ht.data&&ht.processData&&typeof ht.data!="string"&&(ht.data=w.param(ht.data,ht.traditional)),tp(Z1,ht,R,At),!lt){for(gt in(ct=w.event&&ht.global)&&w.active++==0&&w.event.trigger("ajaxStart"),ht.type=ht.type.toUpperCase(),ht.hasContent=!B4.test(ht.type),W=ht.url.replace(N4,""),ht.hasContent?ht.data&&ht.processData&&(ht.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ht.data=ht.data.replace(I4,"+")):(b=ht.url.slice(W.length),ht.data&&(ht.processData||typeof ht.data=="string")&&(W+=(hh.test(W)?"&":"?")+ht.data,delete ht.data),ht.cache===!1&&(W=W.replace(F4,"$1"),b=(hh.test(W)?"&":"?")+"_="+X1.guid+++b),ht.url=W+b),ht.ifModified&&(w.lastModified[W]&&At.setRequestHeader("If-Modified-Since",w.lastModified[W]),w.etag[W])&&At.setRequestHeader("If-None-Match",w.etag[W]),(ht.data&&ht.hasContent&&ht.contentType!==!1||R.contentType)&&At.setRequestHeader("Content-Type",ht.contentType),At.setRequestHeader("Accept",ht.dataTypes[0]&&ht.accepts[ht.dataTypes[0]]?ht.accepts[ht.dataTypes[0]]+(ht.dataTypes[0]!=="*"?", "+Q1+"; q=0.01":""):ht.accepts["*"]),ht.headers)At.setRequestHeader(gt,ht.headers[gt]);if(ht.beforeSend&&(ht.beforeSend.call(wt,At,ht)===!1||lt))return At.abort();if(Ht="abort",Tt.add(ht.complete),At.done(ht.success),At.fail(ht.error),O=tp(dh,ht,R,At)){if(At.readyState=1,ct&&St.trigger("ajaxSend",[At,ht]),lt)return At;ht.async&&0<ht.timeout&&(st=e.setTimeout(function(){At.abort("timeout")},ht.timeout));try{lt=!1,O.send(Bt,$t)}catch(Ot){if(lt)throw Ot;$t(-1,Ot)}}else $t(-1,"No Transport")}return At;function $t(Ot,Kt,Fe,Xe){var Nn,Cs,Ss,fn=Kt;lt||(lt=!0,st&&e.clearTimeout(st),O=void 0,Z=Xe||"",At.readyState=0<Ot?4:0,Xe=200<=Ot&&Ot<300||Ot===304,Fe&&(Ss=function(jl,$4,mh){for(var Xl,lr,cr,yh,vh=jl.contents,Fn=jl.dataTypes;Fn[0]==="*";)Fn.shift(),Xl===void 0&&(Xl=jl.mimeType||$4.getResponseHeader("Content-Type"));if(Xl){for(lr in vh)if(vh[lr]&&vh[lr].test(Xl)){Fn.unshift(lr);break}}if(Fn[0]in mh)cr=Fn[0];else{for(lr in mh){if(!Fn[0]||jl.converters[lr+" "+Fn[0]]){cr=lr;break}yh=yh||lr}cr=cr||yh}if(cr)return cr!==Fn[0]&&Fn.unshift(cr),mh[cr]}(ht,At,Fe)),!Xe&&-1<w.inArray("script",ht.dataTypes)&&w.inArray("json",ht.dataTypes)<0&&(ht.converters["text script"]=function(){}),Ss=H4(ht,Ss,At,Xe),Xe?(ht.ifModified&&((Fe=At.getResponseHeader("Last-Modified"))&&(w.lastModified[W]=Fe),Fe=At.getResponseHeader("etag"))&&(w.etag[W]=Fe),Ot===204||ht.type==="HEAD"?fn="nocontent":Ot===304?fn="notmodified":(fn=Ss.state,Nn=Ss.data,Xe=!(Cs=Ss.error))):(Cs=fn,!Ot&&fn||(fn="error",Ot<0&&(Ot=0))),At.status=Ot,At.statusText=(Kt||fn)+"",Xe?Ct.resolveWith(wt,[Nn,fn,At]):Ct.rejectWith(wt,[At,fn,Cs]),At.statusCode(Et),Et=void 0,ct&&St.trigger(Xe?"ajaxSuccess":"ajaxError",[At,ht,Xe?Nn:Cs]),Tt.fireWith(wt,[At,fn]),ct&&(St.trigger("ajaxComplete",[At,ht]),--w.active||w.event.trigger("ajaxStop")))}},getJSON:function(b,R,O){return w.get(b,R,O,"json")},getScript:function(b,R){return w.get(b,void 0,R,"script")}}),w.each(["get","post"],function(b,R){w[R]=function(O,W,Z,J){return d(W)&&(J=J||Z,Z=W,W=void 0),w.ajax(w.extend({url:O,type:R,dataType:J,data:W,success:Z},w.isPlainObject(O)&&O))}}),w.ajaxPrefilter(function(b){for(var R in b.headers)R.toLowerCase()==="content-type"&&(b.contentType=b.headers[R]||"")}),w._evalUrl=function(b,R,O){return w.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(W){w.globalEval(W,R,O)}})},w.fn.extend({wrapAll:function(b){return this[0]&&(d(b)&&(b=b.call(this[0])),b=w(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var R=this;R.firstElementChild;)R=R.firstElementChild;return R}).append(this)),this},wrapInner:function(b){return d(b)?this.each(function(R){w(this).wrapInner(b.call(this,R))}):this.each(function(){var R=w(this),O=R.contents();O.length?O.wrapAll(b):R.append(b)})},wrap:function(b){var R=d(b);return this.each(function(O){w(this).wrapAll(R?b.call(this,O):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(b){return!w.expr.pseudos.visible(b)},w.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var G4={0:200,1223:204},Fa=w.ajaxSettings.xhr(),ep=(y.cors=!!Fa&&"withCredentials"in Fa,y.ajax=Fa=!!Fa,w.ajaxTransport(function(b){var R,O;if(y.cors||Fa&&!b.crossDomain)return{send:function(W,Z){var J,st=b.xhr();if(st.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(J in b.xhrFields)st[J]=b.xhrFields[J];for(J in b.mimeType&&st.overrideMimeType&&st.overrideMimeType(b.mimeType),b.crossDomain||W["X-Requested-With"]||(W["X-Requested-With"]="XMLHttpRequest"),W)st.setRequestHeader(J,W[J]);R=function(lt){return function(){R&&(R=O=st.onload=st.onerror=st.onabort=st.ontimeout=st.onreadystatechange=null,lt==="abort"?st.abort():lt==="error"?typeof st.status!="number"?Z(0,"error"):Z(st.status,st.statusText):Z(G4[st.status]||st.status,st.statusText,(st.responseType||"text")!=="text"||typeof st.responseText!="string"?{binary:st.response}:{text:st.responseText},st.getAllResponseHeaders()))}},st.onload=R(),O=st.onerror=st.ontimeout=R("error"),st.onabort!==void 0?st.onabort=O:st.onreadystatechange=function(){st.readyState===4&&e.setTimeout(function(){R&&O()})},R=R("abort");try{st.send(b.hasContent&&b.data||null)}catch(lt){if(R)throw lt}},abort:function(){R&&R()}}}),w.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return w.globalEval(b),b}}}),w.ajaxPrefilter("script",function(b){b.cache===void 0&&(b.cache=!1),b.crossDomain&&(b.type="GET")}),w.ajaxTransport("script",function(b){var R,O;if(b.crossDomain||b.scriptAttrs)return{send:function(W,Z){R=w("<script>").attr(b.scriptAttrs||{}).prop({charset:b.scriptCharset,src:b.url}).on("load error",O=function(J){R.remove(),O=null,J&&Z(J.type==="error"?404:200,J.type)}),g.head.appendChild(R[0])},abort:function(){O&&O()}}}),[]),gh=/(=)\?(?=&|$)|\?\?/,W4=(w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=ep.pop()||w.expando+"_"+X1.guid++;return this[b]=!0,b}}),w.ajaxPrefilter("json jsonp",function(b,R,O){var W,Z,J,st=b.jsonp!==!1&&(gh.test(b.url)?"url":typeof b.data=="string"&&(b.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&gh.test(b.data)&&"data");if(st||b.dataTypes[0]==="jsonp")return W=b.jsonpCallback=d(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,st?b[st]=b[st].replace(gh,"$1"+W):b.jsonp!==!1&&(b.url+=(hh.test(b.url)?"&":"?")+b.jsonp+"="+W),b.converters["script json"]=function(){return J||w.error(W+" was not called"),J[0]},b.dataTypes[0]="json",Z=e[W],e[W]=function(){J=arguments},O.always(function(){Z===void 0?w(e).removeProp(W):e[W]=Z,b[W]&&(b.jsonpCallback=R.jsonpCallback,ep.push(W)),J&&d(Z)&&Z(J[0]),J=Z=void 0}),"script"}),y.createHTMLDocument=((ni=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",ni.childNodes.length===2),w.parseHTML=function(b,R,O){var W;return typeof b!="string"?[]:(typeof R=="boolean"&&(O=R,R=!1),R||(y.createHTMLDocument?((W=(R=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,R.head.appendChild(W)):R=g),W=!O&&[],(O=y1.exec(b))?[R.createElement(O[1])]:(O=k1([b],R,W),W&&W.length&&w(W).remove(),w.merge([],O.childNodes)))},w.fn.load=function(b,R,O){var W,Z,J,st=this,lt=b.indexOf(" ");return-1<lt&&(W=Lr(b.slice(lt)),b=b.slice(0,lt)),d(R)?(O=R,R=void 0):R&&typeof R=="object"&&(Z="POST"),0<st.length&&w.ajax({url:b,type:Z||"GET",dataType:"html",data:R}).done(function(ct){J=arguments,st.html(W?w("<div>").append(w.parseHTML(ct)).find(W):ct)}).always(O&&function(ct,gt){st.each(function(){O.apply(this,J||[ct.responseText,gt,ct])})}),this},w.expr.pseudos.animated=function(b){return w.grep(w.timers,function(R){return b===R.elem}).length},w.offset={setOffset:function(b,R,O){var W,Z,J,st,lt=w.css(b,"position"),ct=w(b),gt={};lt==="static"&&(b.style.position="relative"),J=ct.offset(),W=w.css(b,"top"),st=w.css(b,"left"),lt=(lt==="absolute"||lt==="fixed")&&-1<(W+st).indexOf("auto")?(Z=(lt=ct.position()).top,lt.left):(Z=parseFloat(W)||0,parseFloat(st)||0),(R=d(R)?R.call(b,O,w.extend({},J)):R).top!=null&&(gt.top=R.top-J.top+Z),R.left!=null&&(gt.left=R.left-J.left+lt),"using"in R?R.using.call(b,gt):ct.css(gt)}},w.fn.extend({offset:function(b){var R,O;return arguments.length?b===void 0?this:this.each(function(W){w.offset.setOffset(this,b,W)}):(O=this[0])?O.getClientRects().length?(R=O.getBoundingClientRect(),O=O.ownerDocument.defaultView,{top:R.top+O.pageYOffset,left:R.left+O.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var b,R,O,W=this[0],Z={top:0,left:0};if(w.css(W,"position")==="fixed")R=W.getBoundingClientRect();else{for(R=this.offset(),O=W.ownerDocument,b=W.offsetParent||O.documentElement;b&&(b===O.body||b===O.documentElement)&&w.css(b,"position")==="static";)b=b.parentNode;b&&b!==W&&b.nodeType===1&&((Z=w(b).offset()).top+=w.css(b,"borderTopWidth",!0),Z.left+=w.css(b,"borderLeftWidth",!0))}return{top:R.top-Z.top-w.css(W,"marginTop",!0),left:R.left-Z.left-w.css(W,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&w.css(b,"position")==="static";)b=b.offsetParent;return b||Dr})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,R){var O=R==="pageYOffset";w.fn[b]=function(W){return Rn(this,function(Z,J,st){var lt;if(_(Z)?lt=Z:Z.nodeType===9&&(lt=Z.defaultView),st===void 0)return lt?lt[R]:Z[J];lt?lt.scrollTo(O?lt.pageXOffset:st,O?st:lt.pageYOffset):Z[J]=st},b,W,arguments.length)}}),w.each(["top","left"],function(b,R){w.cssHooks[R]=O1(y.pixelPosition,function(O,W){if(W)return W=Ra(O,R),sh.test(W)?w(O).position()[R]+"px":W})}),w.each({Height:"height",Width:"width"},function(b,R){w.each({padding:"inner"+b,content:R,"":"outer"+b},function(O,W){w.fn[W]=function(Z,J){var st=arguments.length&&(O||typeof Z!="boolean"),lt=O||(Z===!0||J===!0?"margin":"border");return Rn(this,function(ct,gt,ht){var wt;return _(ct)?W.indexOf("outer")===0?ct["inner"+b]:ct.document.documentElement["client"+b]:ct.nodeType===9?(wt=ct.documentElement,Math.max(ct.body["scroll"+b],wt["scroll"+b],ct.body["offset"+b],wt["offset"+b],wt["client"+b])):ht===void 0?w.css(ct,gt,lt):w.style(ct,gt,ht,lt)},R,st?Z:void 0,st)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(b,R){w.fn[R]=function(O){return this.on(R,O)}}),w.fn.extend({bind:function(b,R,O){return this.on(b,null,R,O)},unbind:function(b,R){return this.off(b,null,R)},delegate:function(b,R,O,W){return this.on(R,b,O,W)},undelegate:function(b,R,O){return arguments.length===1?this.off(b,"**"):this.off(R,b||"**",O)},hover:function(b,R){return this.on("mouseenter",b).on("mouseleave",R||b)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,R){w.fn[R]=function(O,W){return 0<arguments.length?this.on(R,null,O,W):this.trigger(R)}}),/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g);return w.proxy=function(b,R){var O,W;return typeof R=="string"&&(W=b[R],R=b,b=W),d(b)?(O=a.call(arguments,2),(W=function(){return b.apply(R||this,O.concat(a.call(arguments)))}).guid=b.guid=b.guid||w.guid++,W):void 0},w.holdReady=function(b){b?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=P,w.isFunction=d,w.isWindow=_,w.camelCase=dn,w.type=S,w.now=Date.now,w.isNumeric=function(b){var R=w.type(b);return(R==="number"||R==="string")&&!isNaN(b-parseFloat(b))},w.trim=function(b){return b==null?"":(b+"").replace(W4,"$1")},typeof layui=="object"&&layui.define(function(b){b("jquery",layui.$=w)}),w}),layui.define(["jquery","lay"],function(e){var i=layui.$,r=layui.lay;e("component",function(s){var a=(s=i.extend(!0,{isDeepReload:!1},s)).name,o="lay-"+a+"-id",c={config:{},index:layui[a]?layui[a].index+1e4:0,CONST:i.extend(!0,{MOD_NAME:a,MOD_ID:o,CLASS_THIS:"layui-this",CLASS_SHOW:"layui-show",CLASS_HIDE:"layui-hide",CLASS_HIDEV:"layui-hide-v",CLASS_DISABLED:"layui-disabled",CLASS_NONE:"layui-none"},s.CONST),set:function(h){return i.extend(!0,this.config,h),this},on:function(h,p){return layui.onevent.call(this,a,h,p)}},l=function(){var h=this,p=h.config,p={config:p,id:p.id,reload:function(f){h.reload.call(h,f)}};return typeof s.extendsInstance=="function"&&i.extend(!0,p,s.extendsInstance.call(h)),p},u=function(h){var p=this;p.index=++c.index,p.config=i.extend(!0,{},p.config,c.config,h),typeof s.beforeInit=="function"&&s.beforeInit.call(p,p.config),p.init()};return u.prototype.config=s.config,u.prototype.reload=function(h,p){var f=this;f.config=i.extend(s.isDeepReload,{},f.config,h),f.init(!0,p)},u.prototype.init=function(h,p){var f,x=this,y=x.config,d=i(y.elem);return 1<d.length?(layui.each(d,function(){c.render(i.extend({},y,{elem:this}))}),x):(f=r.options(d[0]),h?y=x.config=i.extend(f,y):i.extend(y,f),!h&&d.attr(o)?(f=c.getInst(d.attr(o)))?f.reload(y,p):void 0:(y.elem=i(y.elem),y.id=r.hasOwn(y,"id")?y.id:d.attr("id")||x.index,l.that[y.id]=x,typeof s.beforeRender=="function"&&s.beforeRender.call(x,y),typeof x.render=="function"&&(c.cache.id[y.id]=null,d.attr(o,y.id),x.render(h)),void(typeof x.events=="function"&&x.events())))},u.prototype.render=s.render,u.prototype.events=s.events,u.prototype.cache=function(h,p,f){var x=this.config.elem,y=o+"-cache";if(x){var d=x.data(y)||{};if(p===void 0)return d[h];f?delete d[h]:d[h]=p,x.data(y,d)}},u.prototype.removeCache=function(h){this.cache(h,null,!0)},l.that={},c.getInst=c.getThis=function(h){if(h===void 0)throw new Error("ID argument required");return l.that[h]},c.getAllInst=function(){return l.that},c.removeInst=function(h){delete l.that[h],delete c.cache.id[h]},c.cache={id:{}},c.Class=u,c.reload=function(h,p){if(h=c.getInst(h),h)return h.reload(p),l.call(h)},c.render=function(h){return h=new u(h),l.call(h)},c})}),function(e,i){var r,s,a,o=e.layui&&layui.define,c={getPath:(a=document.currentScript&&document.currentScript.tagName.toUpperCase()==="SCRIPT"?document.currentScript.src:function(){for(var d,_=document.getElementsByTagName("script"),g=_.length-1,m=g;0<m;m--)if(_[m].readyState==="interactive"){d=_[m].src;break}return d||_[g].src}(),(e.LAYUI_GLOBAL||{}).layer_dir||a.substring(0,a.lastIndexOf("/")+1)),config:{removeFocus:!0},end:{},beforeEnd:{},events:{resize:{}},minStackIndex:0,minStackArr:[],btn:["确定","取消"],type:["dialog","page","iframe","loading","tips"],getStyle:function(d,_){return d=d.currentStyle||e.getComputedStyle(d,null),d[d.getPropertyValue?"getPropertyValue":"getAttribute"](_)},link:function(d,_,g){var m,v,S,M,w,L;l.path&&(m=document.getElementsByTagName("head")[0],v=document.createElement("link"),S=((g=typeof _=="string"?_:g)||d).replace(/\.|\//g,""),M="layuicss-"+S,w="creating",L=0,v.rel="stylesheet",v.href=l.path+d,v.id=M,document.getElementById(M)||m.appendChild(v),typeof _=="function")&&function P(N){var k=document.getElementById(M);return 100<++L?e.console&&console.error(S+".css: Invalid"):void(parseInt(c.getStyle(k,"width"))===1989?(N===w&&k.removeAttribute("lay-status"),k.getAttribute("lay-status")===w?setTimeout(P,100):_()):(k.setAttribute("lay-status",w),setTimeout(function(){P(w)},100)))}()}},l={v:"3.7.0",ie:(a=navigator.userAgent.toLowerCase(),!!(e.ActiveXObject||"ActiveXObject"in e)&&((a.match(/msie\s(\d+)/)||[])[1]||"11")),index:e.layer&&e.layer.v?1e5:0,path:c.getPath,config:function(d,_){return l.cache=c.config=r.extend({},c.config,d=d||{}),l.path=c.config.path||l.path,typeof d.extend=="string"&&(d.extend=[d.extend]),c.config.path&&l.ready(),d.extend&&(o?layui.addcss("modules/layer/"+d.extend):c.link("css/"+d.extend)),this},ready:function(d){var _="layer",g=(o?"modules/":"css/")+"layer.css?v="+l.v;return o?layui["layui.all"]?typeof d=="function"&&d():layui.addcss(g,d,_):c.link(g,d,_),this},alert:function(d,_,g){var m=typeof _=="function";return l.open(r.extend({content:d,yes:g=m?_:g},m?{}:_))},confirm:function(d,_,g,m){var v=typeof _=="function";return v&&(m=g,g=_),l.open(r.extend({content:d,btn:c.btn,yes:g,btn2:m},v?{}:_))},msg:function(d,_,g){var m=typeof _=="function",v=c.config.skin,v=(v?v+" "+v+"-msg":"")||"layui-layer-msg",S=h.anim.length-1;return m&&(g=_),l.open(r.extend({content:d,time:3e3,shade:!1,skin:v,title:!1,closeBtn:!1,btn:!1,resize:!1,end:g,removeFocus:!1},m&&!c.config.skin?{skin:v+" layui-layer-hui",anim:S}:((_=_||{}).icon!==-1&&(_.icon!==i||c.config.skin)||(_.skin=v+" "+(_.skin||"layui-layer-hui")),_)))},load:function(d,_){return l.open(r.extend({type:3,icon:d||0,resize:!1,shade:.01,removeFocus:!1},_))},tips:function(d,_,g){return l.open(r.extend({type:4,content:[d,_],closeBtn:!1,time:3e3,shade:!1,resize:!1,fixed:!1,maxWidth:260,removeFocus:!1},g))}},u=function(d){var _=this,g=function(){_.creat()};_.index=++l.index,_.config.maxWidth=r(s).width()-30,_.config=r.extend({},_.config,c.config,d),document.body?g():setTimeout(function(){g()},30)},h=(u.pt=u.prototype,["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"]),p=(h.anim={0:"layer-anim-00",1:"layer-anim-01",2:"layer-anim-02",3:"layer-anim-03",4:"layer-anim-04",5:"layer-anim-05",6:"layer-anim-06",slideDown:"layer-anim-slide-down",slideLeft:"layer-anim-slide-left",slideUp:"layer-anim-slide-up",slideRight:"layer-anim-slide-right"},h.SHADE="layui-layer-shade",h.MOVE="layui-layer-move","LAYUI-LAYER-SHADE-KEY"),f="LAYUI_LAYER_CONTENT_RECORD_HEIGHT",x=(u.pt.config={type:0,shade:.3,fixed:!0,move:h[1],title:"信息",offset:"auto",area:"auto",closeBtn:1,icon:-1,time:0,zIndex:19891014,maxWidth:360,anim:0,isOutAnim:!0,minStack:!0,moveType:1,resize:!0,scrollbar:!0,tips:2},u.pt.vessel=function(d,_){var g,m=this.index,v=this.config,S=v.zIndex+m,w=typeof v.title=="object",M=v.maxmin&&(v.type===1||v.type===2),w=v.title?'<div class="layui-layer-title" style="'+(w?v.title[1]:"")+'">'+(w?v.title[0]:v.title)+"</div>":"";return v.zIndex=S,_([v.shade?'<div class="'+h.SHADE+'" id="'+h.SHADE+m+'" times="'+m+'" style="z-index:'+(S-1)+'; "></div>':"",'<div class="'+h[0]+" layui-layer-"+c.type[v.type]+(v.type!=0&&v.type!=2||v.shade?"":" layui-layer-border")+" "+(v.skin||"")+'" id="'+h[0]+m+'" type="'+c.type[v.type]+'" times="'+m+'" showtime="'+v.time+'" conType="'+(d?"object":"string")+'" style="z-index: '+S+"; width:"+v.area[0]+";height:"+v.area[1]+";position:"+(v.fixed?"fixed;":"absolute;")+'">'+(d&&v.type!=2?"":w)+"<div"+(v.id?' id="'+v.id+'"':"")+' class="layui-layer-content'+(v.type==0&&v.icon!==-1?" layui-layer-padding":"")+(v.type==3?" layui-layer-loading"+v.icon:"")+'">'+(m=["layui-icon-tips","layui-icon-success","layui-icon-error","layui-icon-question","layui-icon-lock","layui-icon-face-cry","layui-icon-face-smile"],S="layui-anim layui-anim-rotate layui-anim-loop",v.type==0&&v.icon!==-1?'<i class="layui-layer-face layui-icon '+((g=v.icon==16?"layui-icon layui-icon-loading "+S:g)||m[v.icon]||m[0])+'"></i>':v.type==3?(g=["layui-icon-loading","layui-icon-loading-1"],v.icon==2?'<div class="layui-layer-loading-2 '+S+'"></div>':'<i class="layui-layer-loading-icon layui-icon '+(g[v.icon]||g[0])+" "+S+'"></i>'):"")+((v.type!=1||!d)&&v.content||"")+'</div><div class="layui-layer-setwin">'+(m=[],M&&(m.push('<span class="layui-layer-min"></span>'),m.push('<span class="layui-layer-max"></span>')),v.closeBtn&&m.push('<span class="layui-icon layui-icon-close '+[h[7],h[7]+(v.title?v.closeBtn:v.type==4?"1":"2")].join(" ")+'"></span>'),m.join(""))+"</div>"+(v.btn?function(){var L="";typeof v.btn=="string"&&(v.btn=[v.btn]);for(var P,N=0,k=v.btn.length;N<k;N++)L+='<a class="'+h[6]+N+'">'+v.btn[N]+"</a>";return'<div class="'+(P=[h[6]],v.btnAlign&&P.push(h[6]+"-"+v.btnAlign),P.join(" "))+'">'+L+"</div>"}():"")+(v.resize?'<span class="layui-layer-resize"></span>':"")+"</div>"],w,r('<div class="'+h.MOVE+'" id="'+h.MOVE+'"></div>')),this},u.pt.creat=function(){var d,_,g,m,v=this,S=v.config,M=v.index,w=typeof(N=S.content)=="object",L=r("body"),P=function(k){var D;S.shift&&(S.anim=S.shift),h.anim[S.anim]&&(D="layer-anim "+h.anim[S.anim],k.addClass(D).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r(this).removeClass(D)}))};if(S.id&&r("."+h[0]).find("#"+S.id)[0])d=r("#"+S.id).closest("."+h[0]),_=d.attr("times"),g=d.data("config"),m=r("#"+h.SHADE+_),(d.data("maxminStatus")||{})==="min"?l.restore(_):g.hideOnClose&&(m.show(),d.show(),P(d),setTimeout(function(){m.css({opacity:m.data(p)})},10));else{switch(S.removeFocus&&document.activeElement&&document.activeElement.blur(),typeof S.area=="string"&&(S.area=S.area==="auto"?["",""]:[S.area,""]),l.ie==6&&(S.fixed=!1),S.type){case 0:S.btn="btn"in S?S.btn:c.btn[0],l.closeAll("dialog");break;case 2:var N=S.content=w?S.content:[S.content||"","auto"];S.content='<iframe scrolling="'+(S.content[1]||"auto")+'" allowtransparency="true" id="'+h[4]+M+'" name="'+h[4]+M+`" onload="this.className='';" class="layui-layer-load" frameborder="0" src="`+S.content[0]+'"></iframe>';break;case 3:delete S.title,delete S.closeBtn,S.icon===-1&&S.icon,l.closeAll("loading");break;case 4:w||(S.content=[S.content,"body"]),S.follow=S.content[1],S.content=S.content[0]+'<i class="layui-layer-TipsG"></i>',delete S.title,S.tips=typeof S.tips=="object"?S.tips:[S.tips,!0],S.tipsMore||l.closeAll("tips")}v.vessel(w,function(k,D,C){L.append(k[0]),w?S.type==2||S.type==4?r("body").append(k[1]):N.parents("."+h[0])[0]||(N.data("display",N.css("display")).show().addClass("layui-layer-wrap").wrap(k[1]),r("#"+h[0]+M).find("."+h[5]).before(D)):L.append(k[1]),r("#"+h.MOVE)[0]||L.append(c.moveElem=C),v.layero=r("#"+h[0]+M),v.shadeo=r("#"+h.SHADE+M),S.scrollbar||c.setScrollbar(M)}).auto(M),v.shadeo.css({"background-color":S.shade[1]||"#000",opacity:S.shade[0]||S.shade,transition:S.shade[2]||""}),v.shadeo.data(p,S.shade[0]||S.shade),S.type==2&&l.ie==6&&v.layero.find("iframe").attr("src",N[0]),S.type==4?v.tips():(v.offset(),parseInt(c.getStyle(document.getElementById(h.MOVE),"z-index"))||(v.layero.css("visibility","hidden"),l.ready(function(){v.offset(),v.layero.css("visibility","visible")}))),!S.fixed||c.events.resize[v.index]||(c.events.resize[v.index]=function(){v.resize()},s.on("resize",c.events.resize[v.index])),v.layero.data("config",S),S.time<=0||setTimeout(function(){l.close(v.index)},S.time),v.move().callback(),P(v.layero)}},u.pt.resize=function(){var d=this,_=d.config;d.offset(),(/^\d+%$/.test(_.area[0])||/^\d+%$/.test(_.area[1]))&&d.auto(d.index),_.type==4&&d.tips()},u.pt.auto=function(M){var _=this.config,g=r("#"+h[0]+M),m=((_.area[0]===""||_.area[0]==="auto")&&0<_.maxWidth&&(l.ie&&l.ie<8&&_.btn&&g.width(g.innerWidth()),g.outerWidth()>_.maxWidth)&&g.width(_.maxWidth),[g.innerWidth(),g.innerHeight()]),v=g.find(h[1]).outerHeight()||0,S=g.find("."+h[6]).outerHeight()||0,M=function(w){(w=g.find(w)).height(m[1]-v-S-2*(0|parseFloat(w.css("padding-top"))))};return _.type===2?M("iframe"):_.area[1]===""||_.area[1]==="auto"?0<_.maxHeight&&g.outerHeight()>_.maxHeight?(m[1]=_.maxHeight,M("."+h[5])):_.fixed&&m[1]>=s.height()&&(m[1]=s.height(),M("."+h[5])):M("."+h[5]),this},u.pt.offset=function(){var d=this,_=d.config,g=d.layero,m=[g.outerWidth(),g.outerHeight()],v=typeof _.offset=="object";d.offsetTop=(s.height()-m[1])/2,d.offsetLeft=(s.width()-m[0])/2,v?(d.offsetTop=_.offset[0],d.offsetLeft=_.offset[1]||d.offsetLeft):_.offset!=="auto"&&(_.offset==="t"?d.offsetTop=0:_.offset==="r"?d.offsetLeft=s.width()-m[0]:_.offset==="b"?d.offsetTop=s.height()-m[1]:_.offset==="l"?d.offsetLeft=0:_.offset==="lt"?(d.offsetTop=0,d.offsetLeft=0):_.offset==="lb"?(d.offsetTop=s.height()-m[1],d.offsetLeft=0):_.offset==="rt"?(d.offsetTop=0,d.offsetLeft=s.width()-m[0]):_.offset==="rb"?(d.offsetTop=s.height()-m[1],d.offsetLeft=s.width()-m[0]):d.offsetTop=_.offset),_.fixed||(d.offsetTop=/%$/.test(d.offsetTop)?s.height()*parseFloat(d.offsetTop)/100:parseFloat(d.offsetTop),d.offsetLeft=/%$/.test(d.offsetLeft)?s.width()*parseFloat(d.offsetLeft)/100:parseFloat(d.offsetLeft),d.offsetTop+=s.scrollTop(),d.offsetLeft+=s.scrollLeft()),g.data("maxminStatus")==="min"&&(d.offsetTop=s.height()-(g.find(h[1]).outerHeight()||0),d.offsetLeft=g.css("left")),g.css({top:d.offsetTop,left:d.offsetLeft})},u.pt.tips=function(){var d=this.config,_=this.layero,g=[_.outerWidth(),_.outerHeight()],S=r(d.follow),m={width:(S=S[0]?S:r("body")).outerWidth(),height:S.outerHeight(),top:S.offset().top,left:S.offset().left},v=_.find(".layui-layer-TipsG"),S=d.tips[0];d.tips[1]||v.remove(),m.autoLeft=function(){0<m.left+g[0]-s.width()?(m.tipLeft=m.left+m.width-g[0],v.css({right:12,left:"auto"})):m.tipLeft=m.left},m.where=[function(){m.autoLeft(),m.tipTop=m.top-g[1]-10,v.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",d.tips[1])},function(){m.tipLeft=m.left+m.width+10,m.tipTop=m.top-(.75*m.height<21?21-.5*m.height:0),m.tipTop=Math.max(m.tipTop,0),v.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",d.tips[1])},function(){m.autoLeft(),m.tipTop=m.top+m.height+10,v.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",d.tips[1])},function(){m.tipLeft=m.left-g[0]-10,m.tipTop=m.top-(.75*m.height<21?21-.5*m.height:0),m.tipTop=Math.max(m.tipTop,0),v.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",d.tips[1])}],m.where[S-1](),S===1?m.top-(s.scrollTop()+g[1]+16)<0&&m.where[2]():S===2?0<s.width()-(m.left+m.width+g[0]+16)||m.where[3]():S===3?0<m.top-s.scrollTop()+m.height+g[1]+16-s.height()&&m.where[0]():S===4&&0<g[0]+16-m.left&&m.where[1](),_.find("."+h[5]).css({"background-color":d.tips[1],"padding-right":d.closeBtn?"30px":""}),_.css({left:m.tipLeft-(d.fixed?s.scrollLeft():0),top:m.tipTop-(d.fixed?s.scrollTop():0)})},u.pt.move=function(){var d=this,_=d.config,g=r(document),m=d.layero,v=["LAY_MOVE_DICT","LAY_RESIZE_DICT"],S=m.find(_.move),M=m.find(".layui-layer-resize");return _.move&&S.css("cursor","move"),S.on("mousedown",function(w){var L,P;w.button||(L=r(this),P={},_.move&&(P.layero=m,P.config=_,P.offset=[w.clientX-parseFloat(m.css("left")),w.clientY-parseFloat(m.css("top"))],L.data(v[0],P),c.eventMoveElem=L,c.moveElem.css("cursor","move").show()),w.preventDefault())}),M.on("mousedown",function(w){var L=r(this),P={};_.resize&&(P.layero=m,P.config=_,P.offset=[w.clientX,w.clientY],P.index=d.index,P.area=[m.outerWidth(),m.outerHeight()],L.data(v[1],P),c.eventResizeElem=L,c.moveElem.css("cursor","se-resize").show()),w.preventDefault()}),c.docEvent||(g.on("mousemove",function(w){var L,P,N,k,D,C,T;c.eventMoveElem&&(L=(k=c.eventMoveElem.data(v[0])||{}).layero,D=k.config,C=w.clientX-k.offset[0],T=w.clientY-k.offset[1],P=L.css("position")==="fixed",w.preventDefault(),k.stX=P?0:s.scrollLeft(),k.stY=P?0:s.scrollTop(),D.moveOut||(P=s.width()-L.outerWidth()+k.stX,N=s.height()-L.outerHeight()+k.stY,P<(C=C<k.stX?k.stX:C)&&(C=P),N<(T=T<k.stY?k.stY:T)&&(T=N)),L.css({left:C,top:T})),c.eventResizeElem&&(D=(k=c.eventResizeElem.data(v[1])||{}).config,C=w.clientX-k.offset[0],T=w.clientY-k.offset[1],w.preventDefault(),l.style(k.index,{width:k.area[0]+C,height:k.area[1]+T}),D.resizing)&&D.resizing(k.layero)}).on("mouseup",function(w){var L,P;c.eventMoveElem&&(P=(L=c.eventMoveElem.data(v[0])||{}).config,c.eventMoveElem.removeData(v[0]),delete c.eventMoveElem,c.moveElem.hide(),P.moveEnd)&&P.moveEnd(L.layero),c.eventResizeElem&&(c.eventResizeElem.removeData(v[1]),delete c.eventResizeElem,c.moveElem.hide())}),c.docEvent=!0),d},u.pt.btnLoading=function(d,_){_?d.find(".layui-layer-btn-loading-icon")[0]||d.addClass("layui-layer-btn-is-loading").attr({disabled:""}).prepend('<i class="layui-layer-btn-loading-icon layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i>'):d.removeClass("layui-layer-btn-is-loading").removeAttr("disabled").find(".layui-layer-btn-loading-icon").remove()},u.pt.callback=function(){var d=this,_=d.layero,g=d.config;d.openLayer(),g.success&&(g.type==2?_.find("iframe").on("load",function(){g.success(_,d.index,d)}):g.success(_,d.index,d)),l.ie==6&&d.IE6(_),_.find("."+h[6]).children("a").on("click",function(){var m,v=r(this),S=v.index();v.attr("disabled")||(g.btnAsync?(m=S===0?g.yes||g.btn1:g["btn"+(S+1)],d.loading=function(M){d.btnLoading(v,M)},m?c.promiseLikeResolve(m.call(g,d.index,_,d)).then(function(M){M!==!1&&l.close(d.index)},function(M){M!==i&&e.console&&e.console.error("layer error hint: "+M)}):l.close(d.index)):S===0?g.yes?g.yes(d.index,_,d):g.btn1?g.btn1(d.index,_,d):l.close(d.index):(g["btn"+(S+1)]&&g["btn"+(S+1)](d.index,_,d))!==!1&&l.close(d.index))}),_.find("."+h[7]).on("click",function(){(g.cancel&&g.cancel(d.index,_,d))!==!1&&l.close(d.index)}),g.shadeClose&&d.shadeo.on("click",function(){l.close(d.index)}),_.find(".layui-layer-min").on("click",function(){(g.min&&g.min(_,d.index,d))!==!1&&l.min(d.index,g)}),_.find(".layui-layer-max").on("click",function(){r(this).hasClass("layui-layer-maxmin")?(l.restore(d.index),g.restore&&g.restore(_,d.index,d)):(l.full(d.index,g),setTimeout(function(){g.full&&g.full(_,d.index,d)},100))}),g.end&&(c.end[d.index]=g.end),g.beforeEnd&&(c.beforeEnd[d.index]=r.proxy(g.beforeEnd,g,_,d.index,d))},c.reselect=function(){r.each(r("select"),function(d,_){var g=r(this);g.parents("."+h[0])[0]||g.attr("layer")==1&&r("."+h[0]).length<1&&g.removeAttr("layer").show()})},u.pt.IE6=function(d){r("select").each(function(_,g){var m=r(this);m.parents("."+h[0])[0]||m.css("display")!=="none"&&m.attr({layer:"1"}).hide()})},u.pt.openLayer=function(){l.zIndex=this.config.zIndex,l.setTop=function(d){return l.zIndex=parseInt(d[0].style.zIndex),d.on("mousedown",function(){l.zIndex++,d.css("z-index",l.zIndex+1)}),l.zIndex}},c.record=function(d){if(!d[0])return e.console&&console.error("index error");var g=d.attr("type"),_=d.find(".layui-layer-content"),g=g===c.type[2]?_.children("iframe"):_,m=[d[0].style.width||c.getStyle(d[0],"width"),d[0].style.height||c.getStyle(d[0],"height"),d.position().top,d.position().left+parseFloat(d.css("margin-left"))];d.find(".layui-layer-max").addClass("layui-layer-maxmin"),d.attr({area:m}),_.data(f,c.getStyle(g[0],"height"))},c.setScrollbar=function(d){h.html.css("overflow","hidden")},c.restScrollbar=function(d){h.html.css("overflow")&&r("."+h[0]).filter(function(){var _=r(this);return(_.data("config")||{}).scrollbar===!1&&_.data("maxminStatus")!=="min"&&_.attr("times")!==String(d)}).length===0&&h.html.css("overflow","")},c.promiseLikeResolve=function(d){var _=r.Deferred();return d&&typeof d.then=="function"?d.then(_.resolve,_.reject):_.resolve(d),_.promise()},(e.layer=l).getChildFrame=function(d,_){return _=_||r("."+h[4]).attr("times"),r("#"+h[0]+_).find("iframe").contents().find(d)},l.getFrameIndex=function(d){if(d)return r("#"+d).parents("."+h[4]).attr("times")},l.iframeAuto=function(d){var _,g,m;d&&(_=l.getChildFrame("html",d).outerHeight(),g=(d=r("#"+h[0]+d)).find(h[1]).outerHeight()||0,m=d.find("."+h[6]).outerHeight()||0,d.css({height:_+g+m}),d.find("iframe").css({height:_}))},l.iframeSrc=function(d,_){r("#"+h[0]+d).find("iframe").attr("src",_)},l.style=function(m,_,g){var m=r("#"+h[0]+m),v=m.find(".layui-layer-content"),S=m.attr("type"),M=m.find(h[1]).outerHeight()||0,w=m.find("."+h[6]).outerHeight()||0;m.attr("minLeft"),S!==c.type[3]&&S!==c.type[4]&&(g||(parseFloat(_.width)<=260&&(_.width=260),parseFloat(_.height)-M-w<=64&&(_.height=64+M+w)),m.css(_),w=m.find("."+h[6]).outerHeight()||0,S===c.type[2]?m.find("iframe").css({height:(typeof _.height=="number"?_.height:m.height())-M-w}):v.css({height:(typeof _.height=="number"?_.height:m.height())-M-w-parseFloat(v.css("padding-top"))-parseFloat(v.css("padding-bottom"))}))},l.min=function(d,_){var g,m,v,S,M,w,L=r("#"+h[0]+d),P=L.data("maxminStatus");P!=="min"&&(P==="max"&&l.restore(d),L.data("maxminStatus","min"),_=_||L.data("config")||{},P=r("#"+h.SHADE+d),g=L.find(".layui-layer-min"),m=L.find(h[1]).outerHeight()||0,S=(v=typeof(S=L.attr("minLeft"))=="string")?S:181*c.minStackIndex+"px",M=L.css("position"),w={width:180,height:m,position:"fixed",overflow:"hidden"},c.record(L),0<c.minStackArr.length&&(S=c.minStackArr[0],c.minStackArr.shift()),parseFloat(S)+180>s.width()&&(S=s.width()-180-(c.minStackArr.edgeIndex=c.minStackArr.edgeIndex||0,c.minStackArr.edgeIndex+=3))<0&&(S=0),_.minStack&&(w.left=S,w.top=s.height()-m,v||c.minStackIndex++,L.attr("minLeft",S)),L.attr("position",M),l.style(d,w,!0),g.hide(),L.attr("type")==="page"&&L.find(h[4]).hide(),c.restScrollbar(d),P.hide())},l.restore=function(d){var _=r("#"+h[0]+d),g=r("#"+h.SHADE+d),m=_.find(".layui-layer-content"),v=_.attr("area").split(","),S=_.attr("type"),M=_.data("config")||{},w=m.data(f);_.removeData("maxminStatus"),l.style(d,{width:v[0],height:v[1],top:parseFloat(v[2]),left:parseFloat(v[3]),position:_.attr("position"),overflow:"visible"},!0),_.find(".layui-layer-max").removeClass("layui-layer-maxmin"),_.find(".layui-layer-min").show(),S==="page"&&_.find(h[4]).show(),M.scrollbar?c.restScrollbar(d):c.setScrollbar(d),w!==i&&(m.removeData(f),(S===c.type[2]?m.children("iframe"):m).css({height:w})),g.show()},l.full=function(d){var _=r("#"+h[0]+d),g=_.data("maxminStatus");g!=="max"&&(g==="min"&&l.restore(d),_.data("maxminStatus","max"),c.record(_),c.setScrollbar(d),setTimeout(function(){var m=_.css("position")==="fixed";l.style(d,{top:m?0:s.scrollTop(),left:m?0:s.scrollLeft(),width:"100%",height:"100%"},!0),_.find(".layui-layer-min").hide()},100))},l.title=function(d,_){r("#"+h[0]+(_||l.index)).find(h[1]).html(d)},l.close=function(d,_){var g,m,v=(g=r("."+h[0]).children("#"+d).closest("."+h[0]))[0]?(d=g.attr("times"),g):r("#"+h[0]+d),S=v.attr("type"),M=v.data("config")||{},w=M.id&&M.hideOnClose;v[0]&&(m=function(){var L={slideDown:"layer-anim-slide-down-out",slideLeft:"layer-anim-slide-left-out",slideUp:"layer-anim-slide-up-out",slideRight:"layer-anim-slide-right-out"}[M.anim]||"layer-anim-close",P=function(){var k="layui-layer-wrap";if(w)return v.removeClass("layer-anim "+L),v.hide();if(S===c.type[1]&&v.attr("conType")==="object"){v.children(":not(."+h[5]+")").remove();for(var D=v.find("."+k),C=0;C<2;C++)D.unwrap();D.css("display",D.data("display")).removeClass(k)}else{if(S===c.type[2])try{var T=r("#"+h[4]+d)[0];T.contentWindow.document.write(""),T.contentWindow.close(),v.find("."+h[5])[0].removeChild(T)}catch{}v[0].innerHTML="",v.remove()}typeof c.end[d]=="function"&&c.end[d](),delete c.end[d],typeof _=="function"&&_(),c.events.resize[d]&&(s.off("resize",c.events.resize[d]),delete c.events.resize[d])},N=r("#"+h.SHADE+d);l.ie&&l.ie<10||!M.isOutAnim?N[w?"hide":"remove"]():(N.css({opacity:0}),setTimeout(function(){N[w?"hide":"remove"]()},350)),M.isOutAnim&&v.addClass("layer-anim "+L),l.ie==6&&c.reselect(),c.restScrollbar(d),typeof v.attr("minLeft")=="string"&&(c.minStackIndex--,c.minStackArr.push(v.attr("minLeft"))),l.ie&&l.ie<10||!M.isOutAnim?P():setTimeout(function(){P()},200)},w||typeof c.beforeEnd[d]!="function"?(delete c.beforeEnd[d],m()):c.promiseLikeResolve(c.beforeEnd[d]()).then(function(L){L!==!1&&(delete c.beforeEnd[d],m())},function(L){L!==i&&e.console&&e.console.error("layer error hint: "+L)}))},l.closeAll=function(d,_){typeof d=="function"&&(_=d,d=null);var g=r("."+h[0]);r.each(g,function(m){var v=r(this),S=d?v.attr("type")===d:1;S&&l.close(v.attr("times"),m===g.length-1?_:null)}),g.length===0&&typeof _=="function"&&_()},l.closeLast=function(d,_){var g,m=[],v=r.isArray(d);r(typeof d=="string"?".layui-layer-"+d:".layui-layer").each(function(S,M){if(M=r(M),v&&d.indexOf(M.attr("type"))===-1||M.css("display")==="none")return!0;m.push(Number(M.attr("times")))}),0<m.length&&(g=Math.max.apply(null,m),l.close(g,_))},l.cache||{}),y=function(d){return x.skin?" "+x.skin+" "+x.skin+"-"+d:""};l.prompt=function(d,_){var g="",m="";typeof(d=d||{})=="function"&&(_=d),d.area&&(g='style="width: '+(S=d.area)[0]+"; height: "+S[1]+';"',delete d.area),d.placeholder&&(m=' placeholder="'+d.placeholder+'"');var v,S=d.formType==2?'<textarea class="layui-layer-input"'+g+m+"></textarea>":'<input type="'+(d.formType==1?"password":"text")+'" class="layui-layer-input"'+m+">",M=d.success;return delete d.success,l.open(r.extend({type:1,btn:["确定","取消"],content:S,skin:"layui-layer-prompt"+y("prompt"),maxWidth:s.width(),success:function(w){(v=w.find(".layui-layer-input")).val(d.value||"").focus(),typeof M=="function"&&M(w)},resize:!1,yes:function(w){var L=v.val();L.length>(d.maxlength||500)?l.tips("最多输入"+(d.maxlength||500)+"个字符",v,{tips:1}):_&&_(L,w,v)}},d))},l.tab=function(d){var _=(d=d||{}).tab||{},g="layui-this",m=d.success;return delete d.success,l.open(r.extend({type:1,skin:"layui-layer-tab"+y("tab"),resize:!1,title:function(){var v=_.length,S=1,M="";if(0<v)for(M='<span class="'+g+'">'+_[0].title+"</span>";S<v;S++)M+="<span>"+_[S].title+"</span>";return M}(),content:'<ul class="layui-layer-tabmain">'+function(){var v=_.length,S=1,M="";if(0<v)for(M='<li class="layui-layer-tabli '+g+'">'+(_[0].content||"no content")+"</li>";S<v;S++)M+='<li class="layui-layer-tabli">'+(_[S].content||"no  content")+"</li>";return M}()+"</ul>",success:function(v){var S=v.find(".layui-layer-title").children(),M=v.find(".layui-layer-tabmain").children();S.on("mousedown",function(L){L.stopPropagation?L.stopPropagation():L.cancelBubble=!0;var L=r(this),P=L.index();L.addClass(g).siblings().removeClass(g),M.eq(P).show().siblings().hide(),typeof d.change=="function"&&d.change(P)}),typeof m=="function"&&m(v)}},d))},l.photos=function(d,_,g){var m={};if((d=r.extend(!0,{toolbar:!0,footer:!0},d)).photos){var N=!(typeof d.photos=="string"||d.photos instanceof r),v=N?d.photos:{},S=v.data||[],M=v.start||0,w=d.success;if(m.imgIndex=1+(0|M),d.img=d.img||"img",delete d.success,N){if(S.length===0)return l.msg("没有图片")}else{var L=r(d.photos),P=function(){S=[],L.find(d.img).each(function(T){var A=r(this);A.attr("layer-index",T),S.push({alt:A.attr("alt"),pid:A.attr("layer-pid"),src:A.attr("lay-src")||A.attr("layer-src")||A.attr("src"),thumb:A.attr("src")})})};if(P(),_||L.on("click",d.img,function(){P();var T=r(this).attr("layer-index");l.photos(r.extend(d,{photos:{start:T,data:S,tab:d.tab},full:d.full}),!0)}),!_)return}m.imgprev=function(T){m.imgIndex--,m.imgIndex<1&&(m.imgIndex=S.length),m.tabimg(T)},m.imgnext=function(T,A){m.imgIndex++,m.imgIndex>S.length&&(m.imgIndex=1,A)||m.tabimg(T)},m.keyup=function(T){var A;m.end||(A=T.keyCode,T.preventDefault(),A===37?m.imgprev(!0):A===39?m.imgnext(!0):A===27&&l.close(m.index))},m.tabimg=function(T){if(!(S.length<=1))return v.start=m.imgIndex-1,l.close(m.index),l.photos(d,!0,T)},m.isNumber=function(T){return typeof T=="number"&&!isNaN(T)},m.image={},m.getTransform=function(B){var A=[],E=B.rotate,I=B.scaleX,B=B.scale;return m.isNumber(E)&&E!==0&&A.push("rotate("+E+"deg)"),m.isNumber(I)&&I!==1&&A.push("scaleX("+I+")"),m.isNumber(B)&&A.push("scale("+B+")"),A.length?A.join(" "):"none"},m.event=function(T,A,E){var I,B;m.main.find(".layui-layer-photos-prev").on("click",function($){$.preventDefault(),m.imgprev(!0)}),m.main.find(".layui-layer-photos-next").on("click",function($){$.preventDefault(),m.imgnext(!0)}),r(document).on("keyup",m.keyup),T.off("click").on("click","*[toolbar-event]",function(){var $=r(this);switch($.attr("toolbar-event")){case"rotate":m.image.rotate=((m.image.rotate||0)+Number($.attr("data-option")))%360,m.imgElem.css({transform:m.getTransform(m.image)});break;case"scalex":m.image.scaleX=m.image.scaleX===-1?1:-1,m.imgElem.css({transform:m.getTransform(m.image)});break;case"zoom":var Y=Number($.attr("data-option"));m.image.scale=(m.image.scale||1)+Y,Y<0&&m.image.scale<0-Y&&(m.image.scale=0-Y),m.imgElem.css({transform:m.getTransform(m.image)});break;case"reset":m.image.scaleX=1,m.image.scale=1,m.image.rotate=0,m.imgElem.css({transform:"none"});break;case"close":l.close(A)}E.offset(),E.auto(A)}),m.main.on("mousewheel DOMMouseScroll",function($){var Y=$.originalEvent.wheelDelta||-$.originalEvent.detail,q=m.main.find('[toolbar-event="zoom"]');(0<Y?q.eq(0):q.eq(1)).trigger("click"),$.preventDefault()}),(e.layui||e.lay)&&(I=e.layui.lay||e.lay,B=function($,Y){var q=Date.now()-Y.timeStart,q=Y.distanceX/q,G=s.width()/3;(.25<Math.abs(q)||Math.abs(Y.distanceX)>G)&&(Y.direction==="left"?m.imgnext(!0):Y.direction==="right"&&m.imgprev(!0))},r.each([E.shadeo,m.main],function($,Y){I.touchSwipe(Y,{onTouchEnd:B})}))},m.loadi=l.load(1,{shade:!("shade"in d)&&[.9,i,"unset"],scrollbar:!1});var N=S[M].src,k=function(T){l.close(m.loadi);var A,E=S[M].alt||"";g&&(d.anim=-1),m.index=l.open(r.extend({type:1,id:"layui-layer-photos",area:(T=[T.width,T.height],A=[r(e).width()-100,r(e).height()-100],!d.full&&(A[0]<T[0]||A[1]<T[1])&&((A=[T[0]/A[0],T[1]/A[1]])[1]<A[0]?(T[0]=T[0]/A[0],T[1]=T[1]/A[0]):A[0]<A[1]&&(T[0]=T[0]/A[1],T[1]=T[1]/A[1])),[T[0]+"px",T[1]+"px"]),title:!1,shade:[.9,i,"unset"],shadeClose:!0,closeBtn:!1,move:".layer-layer-photos-main img",moveType:1,scrollbar:!1,moveOut:!0,anim:5,isOutAnim:!1,skin:"layui-layer-photos"+y("photos"),content:'<div class="layer-layer-photos-main"><img src="'+S[M].src+'" alt="'+E+'" layer-pid="'+(S[M].pid||"")+'">'+(A=['<div class="layui-layer-photos-pointer">'],1<S.length&&A.push(['<div class="layer-layer-photos-page">','<span class="layui-icon layui-icon-left layui-layer-photos-prev"></span>','<span class="layui-icon layui-icon-right layui-layer-photos-next"></span>',"</div>"].join("")),d.toolbar&&A.push(['<div class="layui-layer-photos-toolbar layui-layer-photos-header">','<span toolbar-event="rotate" data-option="90" title="旋转"><i class="layui-icon layui-icon-refresh"></i></span>','<span toolbar-event="scalex" title="变换"><i class="layui-icon layui-icon-slider"></i></span>','<span toolbar-event="zoom" data-option="0.1" title="放大"><i class="layui-icon layui-icon-add-circle"></i></span>','<span toolbar-event="zoom" data-option="-0.1" title="缩小"><i class="layui-icon layui-icon-reduce-circle"></i></span>','<span toolbar-event="reset" title="还原"><i class="layui-icon layui-icon-refresh-1"></i></span>','<span toolbar-event="close" title="关闭"><i class="layui-icon layui-icon-close"></i></span>',"</div>"].join("")),d.footer&&A.push(['<div class="layui-layer-photos-toolbar layui-layer-photos-footer">',"<h3>"+E+"</h3>","<em>"+m.imgIndex+" / "+S.length+"</em>",'<a href="'+S[M].src+'" target="_blank">查看原图</a>',"</div>"].join("")),A.push("</div>"),A.join(""))+"</div>",success:function(I,B,$){m.main=I.find(".layer-layer-photos-main"),m.footer=I.find(".layui-layer-photos-footer"),m.imgElem=m.main.children("img"),m.event(I,B,$),d.tab&&d.tab(S[M],I),typeof w=="function"&&w(I)},end:function(){m.end=!0,r(document).off("keyup",m.keyup)}},d))},D=function(){l.close(m.loadi),l.msg("当前图片地址异常，<br>是否继续查看下一张？",{time:3e4,btn:["下一张","不看了"],yes:function(){1<S.length&&m.imgnext(!0,!0)}})},C=new Image;C.src=N,C.complete?k(C):(C.onload=function(){C.onload=null,k(C)},C.onerror=function(T){C.onerror=null,D(T)})}},c.run=function(_){s=(r=_)(e);var _=navigator.userAgent.toLowerCase(),_=/android|iphone|ipod|ipad|ios/.test(_),g=r(e);_&&r.each({Height:"height",Width:"width"},function(m,v){var S="inner"+m;s[v]=function(){return S in e?e[S]:g[v]()}}),h.html=r("html"),l.open=function(m){return new u(m).index}},e.layui&&layui.define?(l.ready(),layui.define(["jquery","lay"],function(d){l.path=layui.cache.dir,c.run(layui.$),d("layer",e.layer=l)})):(l.ready(),c.run(e.jQuery))}(window),layui.define("jquery",function(e){var i=layui.$,r=layui.hint(),s={fixbar:function(a){var o,c,l,u,h="layui-fixbar",p=i(document),f=(a=i.extend(!0,{target:"body",bars:[],default:!0,margin:160,duration:320},a),i(a.target)),x=a.scroll?i(a.scroll):i(a.target==="body"?p:f),y=(a.default&&(a.bar1&&a.bars.push({type:"bar1",icon:"layui-icon-chat"}),a.bar2&&a.bars.push({type:"bar2",icon:"layui-icon-help"}),a.bars.push({type:"top",icon:"layui-icon-top"})),i("<ul>").addClass(h));layui.each(a.bars,function(d,_){var g=i('<li class="layui-icon">');g.addClass(_.icon).attr({"lay-type":_.type,style:_.style||(a.bgcolor?"background-color: "+a.bgcolor:"")}).html(_.content),g.on("click",function(){var m=i(this).attr("lay-type");m==="top"&&(a.target==="body"?i("html,body"):x).animate({scrollTop:0},a.duration),typeof a.click=="function"&&a.click.call(this,m)}),layui.type(a.on)==="object"&&layui.each(a.on,function(m,v){g.on(m,function(){var S=i(this).attr("lay-type");typeof v=="function"&&v.call(this,S)})}),_.type==="top"&&(g.addClass("layui-fixbar-top"),o=g),y.append(g)}),f.find("."+h).remove(),typeof a.css=="object"&&y.css(a.css),f.append(y),o&&(l=function d(){return x.scrollTop()>=a.margin?c||(o.show(),c=1):c&&(o.hide(),c=0),d}()),x.on("scroll",function(){l&&(clearTimeout(u),u=setTimeout(function(){l()},100))})},countdown:function(a){a=i.extend(!0,{date:new Date,now:new Date},a);var o=arguments,c=(1<o.length&&(a.date=new Date(o[0]),a.now=new Date(o[1]),a.clock=o[2]),{options:a,clear:function(){clearTimeout(c.timer)},reload:function(u){this.clear(),i.extend(!0,this.options,{now:new Date},u),l()}}),l=(typeof a.ready=="function"&&a.ready(),function u(){var p=new Date(a.date),h=new Date(a.now),p=0<(p=p.getTime()-h.getTime())?p:0,f={d:Math.floor(p/864e5),h:Math.floor(p/36e5)%24,m:Math.floor(p/6e4)%60,s:Math.floor(p/1e3)%60};return 1<o.length&&(f=[f.d,f.h,f.m,f.s]),c.timer=setTimeout(function(){h.setTime(h.getTime()+1e3),a.now=h,l()},1e3),typeof a.clock=="function"&&a.clock(f,c),p<=0&&(clearTimeout(c.timer),typeof a.done=="function")&&a.done(f,c),u}());return c},timeAgo:function(a,o){var c=this,l=[[],[]],u=new Date().getTime()-new Date(a).getTime();return 26784e5<u?(u=new Date(a),l[0][0]=c.digit(u.getFullYear(),4),l[0][1]=c.digit(u.getMonth()+1),l[0][2]=c.digit(u.getDate()),o||(l[1][0]=c.digit(u.getHours()),l[1][1]=c.digit(u.getMinutes()),l[1][2]=c.digit(u.getSeconds())),l[0].join("-")+" "+l[1].join(":")):864e5<=u?(u/1e3/60/60/24|0)+" 天前":36e5<=u?(u/1e3/60/60|0)+" 小时前":18e4<=u?(u/1e3/60|0)+" 分钟前":u<0?"未来":"刚刚"},digit:function(a,o){var c="";o=o||2;for(var l=(a=String(a)).length;l<o;l++)c+="0";return a<Math.pow(10,o)?c+(0|a):a},toDateString:function(a,o,c){var l,u,h,p,f,x,y,d,_,g,m;return a===null||a===""?"":(l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,u=this,(a=function(v){if(v===void 0)return new Date;if(!isNaN(v))return new Date(typeof v=="string"?parseInt(v):v);if(typeof v=="string"&&!/Z$/i.test(v)){var S,M,w=v.match(l);if(w)return S=w[2]-1||0,M=(w[7]||"0").substring(0,3),new Date(w[1],S,w[3]||1,w[4]||0,w[5]||0,w[6]||0,M)}return new Date(v)}(a)).getDate()?(h=a.getFullYear(),p=a.getMonth(),f=a.getDate(),x=a.getHours(),y=a.getMinutes(),d=a.getSeconds(),_=a.getMilliseconds(),g=c&&c.customMeridiem||function(v,S){return v=100*v+S,v<600?"凌晨":v<900?"早上":v<1100?"上午":v<1300?"中午":v<1800?"下午":"晚上"},m={yy:function(){return String(h).slice(-2)},yyyy:function(){return u.digit(h,4)},M:function(){return String(p+1)},MM:function(){return u.digit(p+1)},d:function(){return String(f)},dd:function(){return u.digit(f)},H:function(){return String(x)},HH:function(){return u.digit(x)},h:function(){return String(x%12||12)},hh:function(){return u.digit(x%12||12)},A:function(){return g(x,y)},m:function(){return String(y)},mm:function(){return u.digit(y)},s:function(){return String(d)},ss:function(){return u.digit(d)},SSS:function(){return u.digit(_,3)}},(o=o||"yyyy-MM-dd HH:mm:ss").replace(/\[([^\]]+)]|y{1,4}|M{1,2}|d{1,2}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|SSS/g,function(v,S){return S||m[v]&&m[v]()||v})):(r.error('Invalid millisecond for "util.toDateString(millisecond)"'),""))},escape:function(a){return a==null?"":/[<"'>]|&(?=#?[a-zA-Z0-9]+)/g.test(a+="")?a.replace(/&(?=#?[a-zA-Z0-9]+;?)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;"):a},unescape:function(a){return a==null?"":String(a).replace(/\&quot;/g,'"').replace(/\&#39;/g,"'").replace(/\&gt;/g,">").replace(/\&lt;/g,"<").replace(/\&amp;/g,"&")},openWin:function(a){var o=(a=a||{}).window||window.open(a.url||"",a.target,a.specs);a.url||(o.document.open("text/html","replace"),o.document.write(a.content||""),o.document.close())},toVisibleArea:function(a){var o,c,l,u,h,p,f,x;(a=i.extend({margin:160,duration:200,type:"y"},a)).scrollElem[0]&&a.thisElem[0]&&(o=a.scrollElem,f=a.thisElem,l=(h=a.type==="y")?"top":"left",u=o[c=h?"scrollTop":"scrollLeft"](),h=o[h?"height":"width"](),p=o.offset()[l],x={},(f=f.offset()[l]-p)>h-a.margin||f<a.margin)&&(x[c]=f-h/2+u,o.animate(x,a.duration))},on:function(a,o,c){typeof a=="object"&&(c=o||{},o=a,a=c.attr||"lay-on");var l,u=(c=i.extend({elem:"body",trigger:"click"},typeof c=="object"?c:{trigger:c})).elem=i(c.elem),h="["+a+"]",p="UTIL_ON_DATA";if(u[0])return u.data(p)||u.data(p,{events:{}}),p=u.data(p),l=a+"_"+c.trigger,o=p.events[l]=i.extend(!0,p.events[l],o),l=c.trigger+".lay_util_on",u.off(l,h),u.on(l,h,function(f){var x=i(this),y=x.attr(a);typeof o[y]=="function"&&o[y].call(this,x,f)}),o}};s.event=s.on,e("util",s)}),layui.define(["jquery","laytpl","lay","util"],function(e){var i,r,s,a=layui.$,o=layui.laytpl,c=layui.util,l=(layui.hint(),layui.device().mobile?"touchstart":"mousedown"),u="dropdown",h="layui_dropdown_index_opened",p="lay-"+u+"-id",f={config:{customName:{id:"id",title:"title",children:"child"}},index:layui[u]?layui[u].index+1e4:0,set:function(D){var C=this;return C.config=a.extend({},C.config,D),C},on:function(D,C){return layui.onevent.call(this,u,D,C)}},x=function(){var D=this,C=D.config,T=C.id;return{config:C,reload:function(A){D.reload.call(D,A)},reloadData:function(A){f.reloadData(T,A)},close:function(){D.remove()},open:function(){D.render()}}},y="layui-dropdown",d="layui-menu-item-up",_="layui-menu-item-down",g="layui-menu-body-title",m="layui-menu-item-group",v="layui-menu-item-parent",S="layui-menu-item-checked",M="layui-menu-item-checked2",w="layui-menu-body-panel",L="layui-menu-body-panel-left",P="layui-dropdown-shade",N="."+m+">."+g,k=function(D){var C=this;C.index=++f.index,C.config=a.extend({},C.config,f.config,D),C.init()};k.prototype.config={trigger:"click",content:"",className:"",style:"",show:!1,isAllowSpread:!0,isSpreadItem:!0,data:[],delay:[200,300],shade:0,accordion:!1,closeOnClick:!0},k.prototype.reload=function(D,C){var T=this;T.config=a.extend({},T.config,D),T.init(!0,C)},k.prototype.init=function(D,C){var T=this,A=T.config,E=a(A.elem);return 1<E.length?(layui.each(E,function(){f.render(a.extend({},A,{elem:this}))}),T):(a.extend(A,lay.options(E[0])),!D&&E.attr(p)?(D=x.getThis(E.attr(p)))?D.reload(A,C):void 0:(A.elem=a(A.elem),A.target=a("body"),A.id="id"in A?A.id:E.attr("id")||T.index,x.that[A.id]=T,E.attr(p,A.id),A.customName=a.extend({},f.config.customName,A.customName),A.trigger==="hover"&&(A.trigger="mouseenter"),(A.show||C==="reloadData"&&T.mainElem&&A.target.find(T.mainElem.get(0)).length)&&T.render(C),void T.events()))},k.prototype.render=function(D){var C,T=this,A=T.config,E=A.customName,I=function(q,G){return layui.each(G,function(F,U){var j,et=U[E.children]&&0<U[E.children].length,V=("isSpreadItem"in U?U:A).isSpreadItem,tt=(z=c.escape(U[E.title]),tt=U.templet||A.templet,z=tt?typeof tt=="function"?tt(U):o(tt).render(U):z),z=(et&&(U.type=U.type||"parent"),U.type?{group:"group",parent:"parent","-":"-"}[U.type]||"parent":"");(z==="-"||U[E.title]||U[E.id]||et)&&((tt=a(["<li"+(j={group:"layui-menu-item-group"+(A.isAllowSpread?V?" layui-menu-item-down":" layui-menu-item-up":""),parent:v,"-":"layui-menu-item-divider"},et||z?' class="'+j[z]+'"':U.disabled?' class="layui-disabled"':"")+">",(j="href"in U?'<a href="'+U.href+'" target="'+(U.target||"_self")+'">'+tt+"</a>":tt,et?'<div class="'+g+'">'+j+(z==="parent"?'<i class="layui-icon layui-icon-right"></i>':z==="group"&&A.isAllowSpread?'<i class="layui-icon layui-icon-'+(V?"up":"down")+'"></i>':"")+"</div>":'<div class="'+g+'">'+j+"</div>"),"</li>"].join(""))).data("item",U),et&&(V=a('<div class="layui-panel layui-menu-body-panel"></div>'),j=a("<ul></ul>"),z==="parent"?(V.append(I(j,U[E.children])),tt.append(V)):tt.append(I(j,U[E.children]))),q.append(tt))}),q},B=['<div class="layui-dropdown layui-border-box layui-panel layui-anim layui-anim-downbit" '+p+'="'+A.id+'">',"</div>"].join(""),$=A.content||($=a('<ul class="layui-menu layui-dropdown-menu"></ul>'),0<A.data.length?I($,A.data):$.html('<li class="layui-menu-item-none">暂无数据</li>'),$),Y=x.findMainElem(A.id);D==="reloadData"&&Y.length?(C=T.mainElem=Y).html($):((C=T.mainElem=a(B)).append($),C.addClass(A.className),C.attr("style",A.style),T.remove(f.thisId),A.target.append(C),A.elem.data(h,!0),D=A.shade?'<div class="'+P+'" style="z-index:'+(C.css("z-index")-1)+"; background-color: "+(A.shade[1]||"#000")+"; opacity: "+(A.shade[0]||A.shade)+'"></div>':"",C.before(D),A.trigger==="mouseenter"&&C.on("mouseenter",function(){clearTimeout(x.timer)}).on("mouseleave",function(){T.delayRemove()})),T.position(),f.thisId=A.id,C.find(".layui-menu").on(l,function(q){layui.stope(q)}),C.find(".layui-menu li").on("click",function(q){var G=a(this),F=G.data("item")||{},U=F[E.children]&&0<F[E.children].length,j=A.clickScope==="all";F.disabled||U&&!j||F.type==="-"||((typeof A.click=="function"?A.click(F,G,q):null)===!1||U||T.remove(),layui.stope(q))}),C.find(N).on("click",function(q){var G=a(this).parent();(G.data("item")||{}).type==="group"&&A.isAllowSpread&&x.spread(G,A.accordion)}),typeof A.ready=="function"&&A.ready(C,A.elem)},k.prototype.position=function(D){var C=this.config;lay.position(C.elem[0],this.mainElem[0],{position:C.position,e:this.e,clickType:C.trigger==="contextmenu"?"right":null,align:C.align||null})},k.prototype.remove=function(D){D=D||this.config.id;var C=x.getThis(D);C&&(C=C.config,(D=x.findMainElem(D))[0])&&(D.prev("."+P).remove(),D.remove(),C.elem.removeData(h),delete f.thisId,typeof C.close=="function")&&C.close(C.elem)},k.prototype.normalizedDelay=function(){var D=this.config,D=[].concat(D.delay);return{show:D[0],hide:D[1]!==void 0?D[1]:D[0]}},k.prototype.delayRemove=function(){var D=this;D.config,clearTimeout(x.timer),x.timer=setTimeout(function(){D.remove()},D.normalizedDelay().hide)},k.prototype.events=function(){var D=this,C=D.config,T=C.trigger==="mouseenter",A=C.trigger+".lay_dropdown_render";D.thisEventElem&&D.thisEventElem.off(A),D.thisEventElem=C.elem,C.elem.off(A).on(A,function(E){clearTimeout(x.timer),D.e=E;var I=C.elem.data(h);T?I||(x.timer=setTimeout(function(){D.render()},D.normalizedDelay().show)):C.closeOnClick&&I&&C.trigger==="click"?D.remove():D.render(),E.preventDefault()}),T&&C.elem.on("mouseleave",function(){D.delayRemove()})},x.that={},x.getThis=function(D){if(D===void 0)throw new Error("ID argument required");return x.that[D]},x.findMainElem=function(D){return a("."+y+"["+p+'="'+D+'"]')},x.spread=function(D,C){var T=D.children("ul"),A=D.hasClass(d),E=function(){a(this).css({display:""})};T.is(":animated")||(A?(D.removeClass(d).addClass(_),T.hide().stop().slideDown(200,E)):(T.stop().slideUp(200,E),D.removeClass(_).addClass(d)),A&&C&&((T=D.siblings("."+_)).children("ul").stop().slideUp(200,E),T.removeClass(_).addClass(d)))},i=a(window),r=a(document),i.on("resize",function(){if(f.thisId){var D=x.getThis(f.thisId);if(D)return!(D.mainElem&&!D.mainElem[0]||!a("."+y)[0])&&void(D.config.trigger==="contextmenu"?D.remove():D.position())}}),lay(r).on(l,function(D){if(f.thisId){var C=x.getThis(f.thisId);if(C){var T=C.config,A=lay.isTopElem(T.elem[0]),E=T.trigger==="contextmenu",A=!(A||E)&&(T.elem[0]===D.target||T.elem.find(D.target)[0]),E=C.mainElem&&(D.target===C.mainElem[0]||C.mainElem.find(D.target)[0]);if(!A&&!E){if(D.type==="touchstart"&&T.elem.data(h)&&a(D.target).hasClass(P)&&D.preventDefault(),typeof T.onClickOutside=="function"&&T.onClickOutside(D)===!1)return;C.remove()}}}},!!lay.passiveSupported&&{passive:!1}),i.on("blur",function(D){var C;f.thisId&&(C=x.getThis(f.thisId))&&C.config.elem.data(h)&&setTimeout(function(){if(document.activeElement&&document.activeElement.tagName==="IFRAME"&&C.mainElem&&C.mainElem[0]&&C.mainElem[0].contains&&!C.mainElem[0].contains(document.activeElement)){if(typeof C.config.onClickOutside=="function"&&C.config.onClickOutside(D.originalEvent)===!1)return;C.remove()}},0)}),s=".layui-menu:not(.layui-dropdown-menu) li",r.on("click",s,function(D){var C=a(this),T=C.parents(".layui-menu").eq(0),A=C.hasClass(m)||C.hasClass(v),E=T.attr("lay-filter")||T.attr("id"),I=lay.options(this);C.hasClass("layui-menu-item-divider")||A||(T.find("."+S).removeClass(S),T.find("."+M).removeClass(M),C.addClass(S),C.parents("."+v).addClass(M),I.title=I.title||a.trim(C.children("."+g).text()),layui.event.call(this,u,"click("+E+")",I))}),r.on("click",s+N,function(D){var A=a(this),C=A.parents("."+m+":eq(0)"),T=lay.options(C[0]),A=typeof A.parents(".layui-menu").eq(0).attr("lay-accordion")=="string";"isAllowSpread"in T&&!T.isAllowSpread||x.spread(C,A)}),s=".layui-menu ."+v,r.on("mouseenter",s,function(D){var C,T=a(this).find("."+w);T[0]&&((C=T[0].getBoundingClientRect()).right>i.width()&&(T.addClass(L),(C=T[0].getBoundingClientRect()).left<0)&&T.removeClass(L),C.bottom>i.height())&&T.eq(0).css("margin-top",-(C.bottom-i.height()+5))}).on("mouseleave",s,function(D){var C=a(this).children("."+w);C.removeClass(L),C.css("margin-top",0)}),f.close=function(D){return D=x.getThis(D),D?(D.remove(),x.call(D)):this},f.open=function(D){return D=x.getThis(D),D?(D.render(),x.call(D)):this},f.reload=function(D,C,T){return D=x.getThis(D),D?(D.reload(C,T),x.call(D)):this},f.reloadData=function(){var D=a.extend([],arguments),C=(D[2]="reloadData",new RegExp("^("+["data","templet","content"].join("|")+")$"));return layui.each(D[1],function(T,A){C.test(T)||delete D[1][T]}),f.reload.apply(null,D)},f.render=function(D){return D=new k(D),x.call(D)},e(u,f)}),layui.define(["jquery","lay"],function(e){var i=layui.$,r=layui.lay,s={config:{},index:layui.slider?layui.slider.index+1e4:0,set:function(y){var d=this;return d.config=i.extend({},d.config,y),d},on:function(y,d){return layui.onevent.call(this,a,y,d)}},a="slider",o="layui-disabled",c="layui-slider-bar",l="layui-slider-wrap",u="layui-slider-wrap-btn",h="layui-slider-tips",p="layui-slider-input-txt",f="layui-slider-hover",x=function(y){var d=this;d.index=++s.index,d.config=i.extend({},d.config,s.config,y),d.render()};x.prototype.config={type:"default",min:0,max:100,value:0,step:1,showstep:!1,tips:!0,tipsAlways:!1,input:!1,range:!1,height:200,disabled:!1,theme:"#16baaa"},x.prototype.precision=function(){var y=this.config,y=i.map([y.min,y.max,y.step],function(d,_){return d=String(d).split("."),d[1]?d[1].length:0});return Math.max.apply(null,y)},x.prototype.render=function(){var y=this,d=y.config,g=i(d.elem);if(1<g.length)return layui.each(g,function(){s.render(i.extend({},d,{elem:this}))}),y;i.extend(d,r.options(g[0])),d.step<=0&&(d.step=1),d.max<d.min&&(d.max=d.min+d.step),d.range?(d.value=typeof d.value=="object"?d.value:[d.min,d.value],g=Math.min(d.value[0],d.value[1]),m=Math.max(d.value[0],d.value[1]),d.value[0]=Math.max(g,d.min),d.value[1]=Math.max(m,d.min),d.value[0]=Math.min(d.value[0],d.max),d.value[1]=Math.min(d.value[1],d.max),m=(d.value[0]-d.min)/(d.max-d.min)*100,v=(S=(d.value[1]-d.min)/(d.max-d.min)*100)-m+"%",m+="%",S+="%"):(typeof d.value=="object"&&(d.value=Math.min.apply(null,d.value)),d.value<d.min&&(d.value=d.min),d.value>d.max&&(d.value=d.max),v=(d.value-d.min)/(d.max-d.min)*100+"%");var _,g=d.disabled?"#c2c2c2":d.theme,m='<div class="layui-slider '+(d.type==="vertical"?"layui-slider-vertical":"")+'">'+(d.tips?'<div class="'+h+'" '+(d.tipsAlways?"":'style="display:none;"')+"></div>":"")+'<div class="layui-slider-bar" style="background:'+g+"; "+(d.type==="vertical"?"height":"width")+":"+v+";"+(d.type==="vertical"?"bottom":"left")+":"+(m||0)+';"></div><div class="layui-slider-wrap" style="'+(d.type==="vertical"?"bottom":"left")+":"+(m||v)+';"><div class="layui-slider-wrap-btn" style="border: 2px solid '+g+';"></div></div>'+(d.range?'<div class="layui-slider-wrap" style="'+(d.type==="vertical"?"bottom":"left")+":"+S+';"><div class="layui-slider-wrap-btn" style="border: 2px solid '+g+';"></div></div>':"")+"</div>",v=i(d.elem),S=v.next(".layui-slider");if(S[0]&&S.remove(),y.elemTemp=i(m),d.range?(y.elemTemp.find("."+l).eq(0).data("value",d.value[0]),y.elemTemp.find("."+l).eq(1).data("value",d.value[1])):y.elemTemp.find("."+l).data("value",d.value),v.html(y.elemTemp),d.type==="vertical"&&y.elemTemp.height(d.height+"px"),d.showstep){for(var M=(d.max-d.min)/d.step,w="",L=1;L<1+M;L++){var P=100*L/M;P<100&&(w+='<div class="layui-slider-step" style="'+(d.type==="vertical"?"bottom":"left")+":"+P+'%"></div>')}y.elemTemp.append(w)}function N(C){C=C.parent().data("value"),C=d.setTips?d.setTips(C):C,y.elemTemp.find("."+h).html(C)}function k(C){var T=d.type==="vertical"?d.height:y.elemTemp[0].offsetWidth,A=y.elemTemp.find("."+l);return(d.type==="vertical"?T-C.parent()[0].offsetTop-A.height():C.parent()[0].offsetLeft)/T*100}function D(C){d.type==="vertical"?y.elemTemp.find("."+h).css({bottom:C+"%","margin-bottom":"20px",display:"inline-block"}):y.elemTemp.find("."+h).css({left:C+"%",display:"inline-block"})}d.input&&!d.range&&(g=i('<div class="layui-slider-input"><div class="layui-slider-input-txt"><input type="text" class="layui-input"></div><div class="layui-slider-input-btn"><i class="layui-icon layui-icon-up"></i><i class="layui-icon layui-icon-down"></i></div></div>'),v.css("position","relative"),v.append(g),v.find("."+p).children("input").val(d.value),d.type==="vertical"?g.css({left:0,top:-48}):y.elemTemp.css("margin-right",g.outerWidth()+15)),d.disabled?(y.elemTemp.addClass(o),y.elemTemp.find("."+u).addClass(o)):y.slide(),d.tips&&(d.tipsAlways?(N(S=y.elemTemp.find("."+u)),D(k(S))):y.elemTemp.find("."+u).on("mouseover",function(){N(i(this));var C=k(i(this));clearTimeout(_),_=setTimeout(function(){D(C)},300)}).on("mouseout",function(){clearTimeout(_),d.tipsAlways||y.elemTemp.find("."+h).css("display","none")}))},x.prototype.slide=function(y,d,_){var g=this,m=g.config,v=g.elemTemp,S=function(){return m.type==="vertical"?m.height:v[0].offsetWidth},M=v.find("."+l),w=v.next(".layui-slider-input"),L=w.children("."+p).children("input").val(),P=100/((m.max-m.min)/m.step),N=g.precision(),k=function(A,E,I){A=(A=100<(A=100<Math.ceil(A)*P?Math.ceil(A)*P:Math.round(A)*P)?100:A)<0?0:A,M.eq(E).css(m.type==="vertical"?"bottom":"left",A+"%");var B,Y=D(M[0].offsetLeft),q=m.range?D(M[1].offsetLeft):0,$=(m.type==="vertical"?(v.find("."+h).css({bottom:A+"%","margin-bottom":"20px"}),Y=D(S()-M[0].offsetTop-M.height()),q=m.range?D(S()-M[1].offsetTop-M.height()):0):v.find("."+h).css("left",A+"%"),Y=100<Y?100:Y,q=100<q?100:q,Math.min(Y,q)),Y=Math.abs(Y-q),q=(m.type==="vertical"?v.find("."+c).css({height:Y+"%",bottom:$+"%"}):v.find("."+c).css({width:Y+"%",left:$+"%"}),m.min+(m.max-m.min)*A/100),q=Number(parseFloat(q).toFixed(N));L=q,w.children("."+p).children("input").val(L),M.eq(E).data("value",q),v.find("."+h).html(m.setTips?m.setTips(q):q),m.range&&(B=[M.eq(0).data("value"),M.eq(1).data("value")])[0]>B[1]&&B.reverse(),g.value=m.range?B:q,m.change&&m.change(g.value),I==="done"&&m.done&&m.done(g.value)},D=function(A){var E=A/S()*100/P,I=Math.round(E)*P;return I=A==S()?Math.ceil(E)*P:I},C=i(['<div class="layui-auxiliar-moving" id="LAY-slider-moving"></div'].join(""));if(y==="set")return k((d-m.min)/(m.max-m.min)*100/P,_,"done");v.find("."+u).each(function(A){var E=i(this);E.on("mousedown touchstart",function(I){(I=I||window.event).type==="touchstart"&&(I.clientX=I.originalEvent.touches[0].clientX,I.clientY=I.originalEvent.touches[0].clientY);var B,$,Y,q,G=E.parent()[0].offsetLeft,F=I.clientX;m.type==="vertical"&&(G=S()-E.parent()[0].offsetTop-M.height(),F=I.clientY),B=E,$=function(U){(U=U||window.event).type==="touchmove"&&(U.clientX=U.touches[0].clientX,U.clientY=U.touches[0].clientY);var j=G+(m.type==="vertical"?F-U.clientY:U.clientX-F),j=(j=(j=j<0?0:j)>S()?S():j)/S()*100/P;k(j,A),E.addClass(f),v.find("."+h).show(),U.preventDefault()},Y=function(U){E.removeClass(f),m.tipsAlways||setTimeout(function(){v.find("."+h).hide()},U)},q=function(){Y&&Y(r.touchEventsSupported()?1e3:0),C.remove(),m.done&&m.done(g.value),r.touchEventsSupported()&&(B[0].removeEventListener("touchmove",$,!!r.passiveSupported&&{passive:!1}),B[0].removeEventListener("touchend",q),B[0].removeEventListener("touchcancel",q))},i("#LAY-slider-moving")[0]||i("body").append(C),C.on("mousemove",$),C.on("mouseup",q).on("mouseleave",q),r.touchEventsSupported()&&(B[0].addEventListener("touchmove",$,!!r.passiveSupported&&{passive:!1}),B[0].addEventListener("touchend",q),B[0].addEventListener("touchcancel",q))})}),v.on("click",function(A){var E=i("."+u),I=i(this);!E.is(event.target)&&E.has(event.target).length===0&&E.length&&(I=(E=(E=(E=m.type==="vertical"?S()-A.clientY+I.offset().top-i(window).scrollTop():A.clientX-I.offset().left-i(window).scrollLeft())<0?0:E)>S()?S():E)/S()*100/P,E=m.range?m.type==="vertical"?Math.abs(E-parseInt(i(M[0]).css("bottom")))>Math.abs(E-parseInt(i(M[1]).css("bottom")))?1:0:Math.abs(E-M[0].offsetLeft)>Math.abs(E-M[1].offsetLeft)?1:0:0,k(I,E,"done"),A.preventDefault())}),w.children(".layui-slider-input-btn").children("i").each(function(A){i(this).on("click",function(){L=w.children("."+p).children("input").val();var E=((L=A==1?L-m.step<m.min?m.min:Number(L)-m.step:Number(L)+m.step>m.max?m.max:Number(L)+m.step)-m.min)/(m.max-m.min)*100/P;k(E,0,"done")})});var T=function(){var A=this.value,A=(A=(A=(A=isNaN(A)?0:A)<m.min?m.min:A)>m.max?m.max:A,((this.value=A)-m.min)/(m.max-m.min)*100/P);k(A,0,"done")};w.children("."+p).children("input").on("keydown",function(A){A.keyCode===13&&(A.preventDefault(),T.call(this))}).on("change",T)},x.prototype.events=function(){this.config},s.render=function(y){return y=new x(y),(function(){var d=this,_=d.config;return{setValue:function(g,m){return g=(g=g>_.max?_.max:g)<_.min?_.min:g,_.value=g,d.slide("set",g,m||0)},config:_}}).call(y)},e(a,s)}),layui.define(["jquery","lay"],function(e){var i=layui.$,r=layui.lay,s=layui.hint(),a=layui.device().mobile?"click":"mousedown",o={config:{},index:layui.colorpicker?layui.colorpicker.index+1e4:0,set:function(C){var T=this;return T.config=i.extend({},T.config,C),T},on:function(C,T){return layui.onevent.call(this,"colorpicker",C,T)}},c=function(){var C=this.config,T=C.id;return c.that[T]=this,{config:C}},l="colorpicker",u="layui-colorpicker",h=".layui-colorpicker-main",p="layui-icon-down",f="layui-icon-close",x="layui-colorpicker-trigger-span",y="layui-colorpicker-trigger-i",d="layui-colorpicker-side-slider",_="layui-colorpicker-basis",g="layui-colorpicker-alpha-bgcolor",m="layui-colorpicker-alpha-slider",v="layui-colorpicker-basis-cursor",S="layui-colorpicker-main-input",M=function(C){var T={h:0,s:0,b:0},A=Math.min(C.r,C.g,C.b),E=Math.max(C.r,C.g,C.b),I=E-A;return T.b=E,T.s=E!==0?255*I/E:0,T.s!==0?C.r==E?T.h=(C.g-C.b)/I:C.g==E?T.h=2+(C.b-C.r)/I:T.h=4+(C.r-C.g)/I:T.h=-1,E===A&&(T.h=0),T.h*=60,T.h<0&&(T.h+=360),T.s*=100/255,T.b*=100/255,T},w=function(B){var T,A={},E=B.h,I=255*B.s/100,B=255*B.b/100;return I==0?A.r=A.g=A.b=B:(B=E%60*((T=B)-(I=(255-I)*B/255))/60,(E=E===360?0:E)<60?(A.r=T,A.b=I,A.g=I+B):E<120?(A.g=T,A.b=I,A.r=T-B):E<180?(A.g=T,A.r=I,A.b=I+B):E<240?(A.b=T,A.r=I,A.g=T-B):E<300?(A.b=T,A.g=I,A.r=I+B):E<360?(A.r=T,A.g=I,A.b=T-B):(A.r=0,A.g=0,A.b=0)),{r:Math.round(A.r),g:Math.round(A.g),b:Math.round(A.b)}},L=function(T){var T=w(T),A=[T.r.toString(16),T.g.toString(16),T.b.toString(16)];return i.each(A,function(E,I){I.length===1&&(A[E]="0"+I)}),A.join("")},P=function(C){return C=C.match(/[0-9]{1,3}/g)||[],{r:C[0],g:C[1],b:C[2]}},N=i(window),k=i(document),D=function(C){this.index=++o.index,this.config=i.extend({},this.config,o.config,C),this.render()};D.prototype.config={color:"",size:null,alpha:!1,format:"hex",predefine:!1,colors:["#16baaa","#16b777","#1E9FFF","#FF5722","#FFB800","#01AAED","#999","#c00","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgb(0, 186, 189)","rgb(255, 120, 0)","rgb(250, 212, 0)","#393D49","rgba(0,0,0,.5)","rgba(255, 69, 0, 0.68)","rgba(144, 240, 144, 0.5)","rgba(31, 147, 255, 0.73)"]},D.prototype.render=function(){var C=this,T=C.config;if(1<(E=i(T.elem)).length)return layui.each(E,function(){o.render(i.extend({},T,{elem:this}))}),C;i.extend(T,r.options(E[0]));var A=i(['<div class="layui-unselect layui-colorpicker">',"<span "+(T.format=="rgb"&&T.alpha?'class="layui-colorpicker-trigger-bgcolor"':"")+">",'<span class="layui-colorpicker-trigger-span" ','lay-type="'+(T.format=="rgb"?T.alpha?"rgba":"torgb":"")+'" ','style="'+(A="",T.color?(A=T.color,3<(T.color.match(/[0-9]{1,3}/g)||[]).length&&(T.alpha&&T.format=="rgb"||(A="#"+L(M(P(T.color))))),"background: "+A):A)+'">','<i class="layui-icon layui-colorpicker-trigger-i '+(T.color?p:f)+'"></i>',"</span>","</span>","</div>"].join("")),E=T.elem=i(T.elem);T.size&&A.addClass("layui-colorpicker-"+T.size),E.addClass("layui-inline").html(C.elemColorBox=A),T.id="id"in T?T.id:E.attr("id")||C.index,C.color=C.elemColorBox.find("."+x)[0].style.background,C.events()},D.prototype.renderPicker=function(){var C,T=this,A=T.config,E=T.elemColorBox[0],I=T.elemPicker=i(['<div id="layui-colorpicker'+T.index+'" data-index="'+T.index+'" class="layui-anim layui-anim-downbit layui-colorpicker-main">','<div class="layui-colorpicker-main-wrapper">','<div class="layui-colorpicker-basis">','<div class="layui-colorpicker-basis-white"></div>','<div class="layui-colorpicker-basis-black"></div>','<div class="layui-colorpicker-basis-cursor"></div>',"</div>",'<div class="layui-colorpicker-side">','<div class="layui-colorpicker-side-slider"></div>',"</div>","</div>",'<div class="layui-colorpicker-main-alpha '+(A.alpha?"layui-show":"")+'">','<div class="layui-colorpicker-alpha-bgcolor">','<div class="layui-colorpicker-alpha-slider"></div>',"</div>","</div>",A.predefine?(C=['<div class="layui-colorpicker-main-pre">'],layui.each(A.colors,function(B,$){C.push(['<div class="layui-colorpicker-pre'+(3<($.match(/[0-9]{1,3}/g)||[]).length?" layui-colorpicker-pre-isalpha":"")+'">','<div style="background:'+$+'"></div>',"</div>"].join(""))}),C.push("</div>"),C.join("")):"",'<div class="layui-colorpicker-main-input">','<div class="layui-inline">','<input type="text" class="layui-input">',"</div>",'<div class="layui-btn-container">','<button class="layui-btn layui-btn-primary layui-btn-sm" colorpicker-events="clear">清空</button>','<button class="layui-btn layui-btn-sm" colorpicker-events="confirm">确定</button>',"</div","</div>","</div>"].join(""));T.elemColorBox.find("."+x)[0],i(h)[0]&&i(h).data("index")==T.index?T.removePicker(D.thisElemInd):(T.removePicker(D.thisElemInd),i("body").append(I)),o.thisId=A.id,D.thisElemInd=T.index,D.thisColor=E.style.background,T.position(),T.pickerEvents()},D.prototype.removePicker=function(A){var T=this.config,A=i("#layui-colorpicker"+(A||this.index));return A[0]&&(A.remove(),delete o.thisId,typeof T.close=="function")&&T.close(this.color),this},D.prototype.position=function(){var C=this,T=C.config;return r.position(C.bindElem||C.elemColorBox[0],C.elemPicker[0],{position:T.position,align:"center"}),C},D.prototype.val=function(){var C,T=this,A=(T.config,T.elemColorBox.find("."+x)),E=T.elemPicker.find("."+S),I=A[0].style.backgroundColor;I?(C=M(P(I)),A=A.attr("lay-type"),T.select(C.h,C.s,C.b),A==="torgb"?E.find("input").val(I):A==="rgba"?(A=P(I),(I.match(/[0-9]{1,3}/g)||[]).length===3?(E.find("input").val("rgba("+A.r+", "+A.g+", "+A.b+", 1)"),T.elemPicker.find("."+m).css("left",280)):(E.find("input").val(I),I=280*I.slice(I.lastIndexOf(",")+1,I.length-1),T.elemPicker.find("."+m).css("left",I)),T.elemPicker.find("."+g)[0].style.background="linear-gradient(to right, rgba("+A.r+", "+A.g+", "+A.b+", 0), rgb("+A.r+", "+A.g+", "+A.b+"))"):E.find("input").val("#"+L(C))):(T.select(0,100,100),E.find("input").val(""),T.elemPicker.find("."+g)[0].style.background="",T.elemPicker.find("."+m).css("left",280))},D.prototype.side=function(){var C=this,T=C.config,A=C.elemColorBox.find("."+x),E=A.attr("lay-type"),I=C.elemPicker.find(".layui-colorpicker-side"),B=C.elemPicker.find("."+d),$=C.elemPicker.find("."+_),Y=C.elemPicker.find("."+v),q=C.elemPicker.find("."+g),G=C.elemPicker.find("."+m),F=B[0].offsetTop/180*360,U=100-Y[0].offsetTop/180*100,j=Y[0].offsetLeft/260*100,et=Math.round(G[0].offsetLeft/280*100)/100,V=C.elemColorBox.find("."+y),tt=C.elemPicker.find(".layui-colorpicker-pre").children("div"),z=function(ft,dt,it,at){C.select(ft,dt,it);var ut=w({h:ft,s:dt,b:it}),ft=L({h:ft,s:dt,b:it}),dt=C.elemPicker.find("."+S).find("input");V.addClass(p).removeClass(f),A[0].style.background="rgb("+ut.r+", "+ut.g+", "+ut.b+")",E==="torgb"?dt.val("rgb("+ut.r+", "+ut.g+", "+ut.b+")"):E==="rgba"?(G.css("left",280*at),dt.val("rgba("+ut.r+", "+ut.g+", "+ut.b+", "+at+")"),A[0].style.background="rgba("+ut.r+", "+ut.g+", "+ut.b+", "+at+")",q[0].style.background="linear-gradient(to right, rgba("+ut.r+", "+ut.g+", "+ut.b+", 0), rgb("+ut.r+", "+ut.g+", "+ut.b+"))"):dt.val("#"+ft),T.change&&T.change(i.trim(C.elemPicker.find("."+S).find("input").val()))},H=i(['<div class="layui-auxiliar-moving" id="LAY-colorpicker-moving"></div>'].join("")),X=function(nt){i("#LAY-colorpicker-moving")[0]||i("body").append(H),H.on("mousemove",nt),H.on("mouseup",function(){H.remove()}).on("mouseleave",function(){H.remove()})},K=!0,rt=!0;B.on("mousedown",function(nt,Q){var it=this.offsetTop,at=(nt.clientY===void 0?Q:nt).clientY;rt&&layui.stope(nt),X(function(ut){var ft=it+(ut.clientY-at),dt=I[0].offsetHeight,dt=(ft=dt<(ft=ft<0?0:ft)?dt:ft)/180*360;z(F=dt,j,U,et),ut.preventDefault()}),nt.preventDefault()}),I.on("mousedown",function(nt){var Q=nt.clientY-i(this).offset().top+N.scrollTop(),Q=(Q=(Q=Q<0?0:Q)>this.offsetHeight?this.offsetHeight:Q)/180*360;z(F=Q,j,U,et),nt.preventDefault(),K&&B.trigger("mousedown",nt)}),Y.on("mousedown",function(nt,Q){var it=this.offsetTop,at=this.offsetLeft,ut=(nt.clientY===void 0?Q:nt).clientY,ft=(nt.clientX===void 0?Q:nt).clientX;rt&&layui.stope(nt),X(function(dt){var xt=it+(dt.clientY-ut),yt=at+(dt.clientX-ft),vt=$[0].offsetHeight,_t=$[0].offsetWidth,_t=(yt=_t<(yt=yt<0?0:yt)?_t:yt)/260*100,yt=100-(xt=vt<(xt=xt<0?0:xt)?vt:xt)/180*100;z(F,j=_t,U=yt,et),dt.preventDefault()}),nt.preventDefault()}),$.on("mousedown",function(nt){var it=nt.clientY-i(this).offset().top+N.scrollTop(),Q=nt.clientX-i(this).offset().left+N.scrollLeft(),Q=((it=it<0?0:it)>this.offsetHeight&&(it=this.offsetHeight),(Q=(Q=Q<0?0:Q)>this.offsetWidth?this.offsetWidth:Q)/260*100),it=100-it/180*100;z(F,j=Q,U=it,et),layui.stope(nt),nt.preventDefault(),K&&Y.trigger("mousedown",nt)}),G.on("mousedown",function(nt,Q){var it=this.offsetLeft,at=(nt.clientX===void 0?Q:nt).clientX;rt&&layui.stope(nt),X(function(ut){var ft=it+(ut.clientX-at),dt=q[0].offsetWidth,dt=(dt<(ft=ft<0?0:ft)&&(ft=dt),Math.round(ft/280*100)/100);z(F,j,U,et=dt),ut.preventDefault()}),nt.preventDefault()}),q.on("mousedown",function(nt){var Q=nt.clientX-i(this).offset().left,Q=((Q=Q<0?0:Q)>this.offsetWidth&&(Q=this.offsetWidth),Math.round(Q/280*100)/100);z(F,j,U,et=Q),nt.preventDefault(),K&&G.trigger("mousedown",nt)}),tt.each(function(){i(this).on("click",function(){i(this).parent(".layui-colorpicker-pre").addClass("selected").siblings().removeClass("selected");var nt=this.style.backgroundColor,Q=M(P(nt)),it=nt.slice(nt.lastIndexOf(",")+1,nt.length-1);F=Q.h,j=Q.s,U=Q.b,(nt.match(/[0-9]{1,3}/g)||[]).length===3&&(it=1),et=it,z(Q.h,Q.s,Q.b,it)})}),r.touchEventsSupported()&&layui.each([{elem:I,eventType:"mousedown"},{elem:q,eventType:"mousedown"},{elem:$,eventType:"mousedown"}],function(nt,Q){r.touchSwipe(Q.elem,{onTouchStart:function(){rt=K=!1},onTouchMove:function(it){var at,ut;it=it,at=Q.eventType,it=it.touches[0],(ut=document.createEvent("MouseEvent")).initMouseEvent(at,!0,!0,window,1,it.screenX,it.screenY,it.clientX,it.clientY,!1,!1,!1,!1,0,null),it.target.dispatchEvent(ut)},onTouchEnd:function(){H.remove(),rt=K=!0}})})},D.prototype.select=function(B,Y,$,E){this.config;var I=L({h:B,s:100,b:100}),B=(L({h:B,s:Y,b:$}),B/360*180),$=180-$/100*180,Y=Y/100*260,q=this.elemPicker.find("."+_)[0];this.elemPicker.find("."+d).css("top",B),q.style.background="#"+I,this.elemPicker.find("."+v).css({top:$/q.offsetHeight*100+"%",left:Y/q.offsetWidth*100+"%"})},D.prototype.pickerEvents=function(){var C=this,T=C.config,A=C.elemColorBox.find("."+x),E=C.elemPicker.find("."+S+" input"),I={clear:function(B){A[0].style.background="",C.elemColorBox.find("."+y).removeClass(p).addClass(f),C.color="",T.done&&T.done(""),C.removePicker()},confirm:function(B,$){var Y,q,G,F,U=i.trim(E.val());-1<U.indexOf(",")?(q=M(P(U)),C.select(q.h,q.s,q.b),A[0].style.background=Y="#"+L(q),3<(U.match(/[0-9]{1,3}/g)||[]).length&&A.attr("lay-type")==="rgba"&&(G=280*U.slice(U.lastIndexOf(",")+1,U.length-1),C.elemPicker.find("."+m).css("left",G),Y=A[0].style.background=U)):((G=-1<(G=U).indexOf("#")?G.substring(1):G).length===3&&(G=(F=G.split(""))[0]+F[0]+F[1]+F[1]+F[2]+F[2]),F={r:(G=parseInt(G,16))>>16,g:(65280&G)>>8,b:255&G},q=M(F),A[0].style.background=Y="#"+L(q),C.elemColorBox.find("."+y).removeClass(f).addClass(p)),$==="change"?(C.select(q.h,q.s,q.b,$),T.change&&T.change(Y)):(C.color=U,T.done&&T.done(U),C.removePicker())}};C.elemPicker.on("click","*[colorpicker-events]",function(){var B=i(this),$=B.attr("colorpicker-events");I[$]&&I[$].call(this,B)}),E.on("keyup",function(B){var $=i(this);I.confirm.call(this,$,B.keyCode===13?null:"change")})},D.prototype.events=function(){var C=this;C.config,C.elemColorBox.on("click",function(){C.renderPicker(),i(h)[0]&&(C.val(),C.side())})},k.on(a,function(C){var T,A,E;o.thisId&&(T=c.getThis(o.thisId))&&(A=T.config,E=T.elemColorBox.find("."+x),i(C.target).hasClass(u)||i(C.target).parents("."+u)[0]||i(C.target).hasClass(h.replace(/\./g,""))||i(C.target).parents(h)[0]||T.elemPicker&&(T.color?(C=M(P(T.color)),T.select(C.h,C.s,C.b)):T.elemColorBox.find("."+y).removeClass(p).addClass(f),E[0].style.background=T.color||"",typeof A.cancel=="function"&&A.cancel(T.color),T.removePicker()))}),N.on("resize",function(){if(o.thisId){var C=c.getThis(o.thisId);if(C)return!(!C.elemPicker||!i(h)[0])&&void C.position()}}),c.that={},c.getThis=function(C){var T=c.that[C];return T||s.error(C?l+" instance with ID '"+C+"' not found":"ID argument required"),T},o.render=function(C){return C=new D(C),c.call(C)},e(l,o)}),layui.define("jquery",function(e){var i=layui.$,r=(layui.hint(),layui.device()),s="element",a="layui-this",o="layui-show",c=".layui-tab-title",l=function(){this.config={}},u=(l.prototype.set=function(v){return i.extend(!0,this.config,v),this},l.prototype.on=function(v,S){return layui.onevent.call(this,s,v,S)},l.prototype.tabAdd=function(v,S){var M,w=i(".layui-tab[lay-filter="+v+"]"),L=w.children(c),P=L.children(".layui-tab-bar"),N=w.children(".layui-tab-content"),k="<li"+(M=[],layui.each(S,function(D,C){/^(title|content)$/.test(D)||M.push("lay-"+D+'="'+C+'"')}),0<M.length&&M.unshift(""),M.join(" "))+">"+(S.title||"unnaming")+"</li>";return P[0]?P.before(k):L.append(k),N.append('<div class="layui-tab-item" '+(S.id?'lay-id="'+S.id+'"':"")+">"+(S.content||"")+"</div>"),S.change&&this.tabChange(v,S.id),L.data("LAY_TAB_CHANGE",S.change),_.tabAuto(S.change?"change":null,w),this},l.prototype.tabDelete=function(v,S,M){return v=i(".layui-tab[lay-filter="+v+"]").children(c).find('>li[lay-id="'+S+'"]'),_.tabDelete.call(v[0],{liElem:v,force:M}),this},l.prototype.tabChange=function(v,S,M){return v=i(".layui-tab[lay-filter="+v+"]").children(c).find('>li[lay-id="'+S+'"]'),_.tabClick.call(v[0],{liElem:v,force:M}),this},l.prototype.tab=function(v){v=v||{},m.on("click",v.headerElem,function(S){var M=i(v.headerElem).index(i(this));_.tabClick.call(this,{index:M,options:v})})},l.prototype.progress=function(M,S){var w="layui-progress",M=i("."+w+"[lay-filter="+M+"]").find("."+w+"-bar"),w=M.find("."+w+"-text");return M.css("width",function(){return/^.+\/.+$/.test(S)?100*new Function("return "+S)()+"%":S}).attr("lay-percent",S),w.text(S),this},".layui-nav"),h="layui-nav-item",p="layui-nav-bar",f="layui-nav-tree",x="layui-nav-child",y="layui-nav-more",d="layui-anim layui-anim-upbit",_={tabClick:function(v){var w=(v=v||{}).options||{},S=v.liElem||i(this),M=w.headerElem?S.parent():S.parents(".layui-tab").eq(0),w=w.bodyElem?i(w.bodyElem):M.children(".layui-tab-content").children(".layui-tab-item"),L=S.find("a"),L=L.attr("href")!=="javascript:;"&&L.attr("target")==="_blank",P=typeof S.attr("lay-unselect")=="string",N=M.attr("lay-filter"),k=S.attr("lay-id"),D="index"in v?v.index:S.parent().children("li").index(S);if(!v.force){var v=S.siblings("."+a);if(layui.event.call(this,s,"tabBeforeChange("+N+")",{elem:M,from:{index:S.parent().children("li").index(v),id:v.attr("lay-id")},to:{index:D,id:k}})===!1)return}L||P||(S.addClass(a).siblings().removeClass(a),(k?v=(v=w.filter('[lay-id="'+k+'"]')).length?v:w.eq(D):w.eq(D)).addClass(o).siblings().removeClass(o)),layui.event.call(this,s,"tab("+N+")",{elem:M,index:D,id:k})},tabDelete:function(v){var S=(v=v||{}).liElem||i(this).parent(),M=S.parent().children("li").index(S),w=S.closest(".layui-tab"),L=w.children(".layui-tab-content").children(".layui-tab-item"),P=w.attr("lay-filter"),N=S.attr("lay-id");!v.force&&layui.event.call(S[0],s,"tabBeforeDelete("+P+")",{elem:w,index:M,id:N})===!1||(S.hasClass(a)&&(S.next()[0]&&S.next().is("li")?_.tabClick.call(S.next()[0],{index:M+1}):S.prev()[0]&&S.prev().is("li")&&_.tabClick.call(S.prev()[0],null,M-1)),S.remove(),(N?v=(v=L.filter('[lay-id="'+N+'"]')).length?v:L.eq(M):L.eq(M)).remove(),setTimeout(function(){_.tabAuto(null,w)},50),layui.event.call(this,s,"tabDelete("+P+")",{elem:w,index:M,id:N}))},tabAuto:function(v,S){var M="layui-tab-more",w="layui-tab-bar",L="layui-tab-close",P=this;(S||i(".layui-tab")).each(function(){var N=i(this),k=N.children(".layui-tab-title"),D=(N.children(".layui-tab-content").children(".layui-tab-item"),'lay-stope="tabmore"'),D=i('<span class="layui-unselect layui-tab-bar" '+D+"><i "+D+' class="layui-icon">&#xe61a;</i></span>'),C=(P===window&&r.ie,N.attr("lay-allowclose"));C&&C!=="false"&&k.find("li").each(function(){var T,A=i(this);A.find("."+L)[0]||A.attr("lay-allowclose")==="false"||((T=i('<i class="layui-icon layui-icon-close layui-unselect '+L+'"></i>')).on("click",function(E){_.tabDelete.call(this,{e:E})}),A.append(T))}),typeof N.attr("lay-unauto")!="string"&&(k.prop("scrollWidth")>k.outerWidth()+1||k.find("li").length&&k.height()>(C=k.find("li").eq(0).height())+C/2?(v==="change"&&k.data("LAY_TAB_CHANGE")&&k.addClass(M),k.find("."+w)[0]||(k.append(D),N.attr("overflow",""),D.on("click",function(T){var A=k.hasClass(M);k[A?"removeClass":"addClass"](M)}))):(k.find("."+w).remove(),N.removeAttr("overflow")))})},hideTabMore:function(v){var S=i(".layui-tab-title");v!==!0&&i(v.target).attr("lay-stope")==="tabmore"||(S.removeClass("layui-tab-more"),S.find(".layui-tab-bar").attr("title",""))},clickThis:function(){var v=i(this),S=v.closest(u),M=S.attr("lay-filter"),w=v.parent(),L=v.siblings("."+x),P=typeof w.attr("lay-unselect")=="string";if(v.attr("href")!=="javascript:;"&&v.attr("target")==="_blank"||P||L[0]||(S.find("."+a).removeClass(a),w.addClass(a)),S.hasClass(f)){var P=h+"ed",N=!w.hasClass(P),k=function(){i(this).css({display:""}),S.children("."+p).css({opacity:0})};if(L.is(":animated"))return;L.removeClass(d),L[0]&&(N?(L.slideDown(200,k),w.addClass(P)):(w.removeClass(P),L.show().slideUp(200,k)),typeof S.attr("lay-accordion")!="string"&&S.attr("lay-shrink")!=="all"||((N=w.siblings("."+P)).removeClass(P),N.children("."+x).show().stop().slideUp(200,k)))}layui.event.call(this,s,"nav("+M+")",v)},collapse:function(){var v=i(this),N=v.closest(".layui-collapse"),S=N.attr("lay-filter"),M=".layui-colla-content",w=v.parent(".layui-colla-item"),L=v.siblings(M),P=L.css("display")==="none",N=typeof N.attr("lay-accordion")=="string",k=function(){i(this).css("display","")};L.is(":animated")||(P?(L.slideDown(200,k),w.addClass(o)):(w.removeClass(o),L.show().slideUp(200,k)),N&&((N=w.siblings("."+o)).removeClass(o),N.children(M).show().slideUp(200,k)),layui.event.call(this,s,"collapse("+S+")",{title:v,content:L,show:P}))}},g=(l.prototype.render=l.prototype.init=function(v,S){var M=typeof S=="string"&&S?'[lay-filter="'+S+'"]':"",w={tab:function(L){L=L||i(".layui-tab"+M),_.tabAuto.call({},null,L)},nav:function(L){var P={},N={},k={},D="layui-nav-title";(L||i(u+M)).each(function(C){var T=i(this),A=i('<span class="'+p+'"></span>'),E=T.find("."+h),I=T.find("."+p);I[0]&&I.remove(),T.append(A),(T.hasClass(f)?E.find("dd,>."+D):E).off("mouseenter.lay_nav").on("mouseenter.lay_nav",function(){(function(B,$,Y){var q,G=i(this),F=G.find("."+x);$.hasClass(f)?F[0]||(q=G.children("."+D),B.css({top:G.offset().top-$.offset().top,height:(q[0]?q:G).outerHeight(),opacity:1})):(F.addClass(d),F.hasClass("layui-nav-child-c")&&F.css({left:-(F.outerWidth()-G.width())/2}),F[0]?B.css({left:B.position().left+B.width()/2,width:0,opacity:0}):B.css({left:G.position().left+parseFloat(G.css("marginLeft")),top:G.position().top+G.height()-B.height()}),P[Y]=setTimeout(function(){B.css({width:F[0]?0:G.width(),opacity:F[0]?0:1})},r.ie&&r.ie<10?0:200),clearTimeout(k[Y]),F.css("display")==="block"&&clearTimeout(N[Y]),N[Y]=setTimeout(function(){F.addClass(o),G.find("."+y).addClass(y+"d")},300))}).call(this,A,T,C)}).off("mouseleave.lay_nav").on("mouseleave.lay_nav",function(){T.hasClass(f)?A.css({height:0,opacity:0}):(clearTimeout(N[C]),N[C]=setTimeout(function(){T.find("."+x).removeClass(o),T.find("."+y).removeClass(y+"d")},300))}),T.off("mouseleave.lay_nav").on("mouseleave.lay_nav",function(){clearTimeout(P[C]),k[C]=setTimeout(function(){T.hasClass(f)||A.css({width:0,left:A.position().left+A.width()/2,opacity:0})},200)}),E.find("a").each(function(){var B=i(this);B.parent(),B.siblings("."+x)[0]&&!B.children("."+y)[0]&&B.append('<i class="layui-icon layui-icon-down '+y+'"></i>'),B.off("click",_.clickThis).on("click",_.clickThis)})})},breadcrumb:function(L){(L||i(".layui-breadcrumb"+M)).each(function(){var P=i(this),N="lay-separator",k=P.attr(N)||"/",D=P.find("a");D.next("span["+N+"]")[0]||(D.each(function(C){C!==D.length-1&&i(this).after("<span "+N+">"+k+"</span>")}),P.css("visibility","visible"))})},progress:function(L){var P="layui-progress";(L||i("."+P+M)).each(function(){var N=i(this),k=N.find(".layui-progress-bar"),D=k.attr("lay-percent");k.css("width",function(){return/^.+\/.+$/.test(D)?100*new Function("return "+D)()+"%":D}),N.attr("lay-showpercent")&&setTimeout(function(){k.html('<span class="'+P+'-text">'+D+"</span>")},350)})},collapse:function(L){(L||i(".layui-collapse"+M)).each(function(){i(this).find(".layui-colla-item").each(function(){var P=i(this),N=P.find(".layui-colla-title"),k=P.find(".layui-colla-content"),D=k.css("display")==="none";N.find(".layui-colla-icon").remove(),N.append('<i class="layui-icon layui-icon-right layui-colla-icon"></i>'),P[D?"removeClass":"addClass"](o),k.hasClass(o)&&k.removeClass(o),N.off("click",_.collapse).on("click",_.collapse)})})}};return v&&typeof S=="object"&&S instanceof i?w[v](S):w[v]?w[v]():layui.each(w,function(L,P){P()})},new l),m=i(document);i(function(){g.render()}),m.on("click",".layui-tab-title li",_.tabClick),i(window).on("resize",_.tabAuto),e(s,g)}),layui.define(["lay","layer"],function(e){var i=layui.$,r=layui.lay,s=layui.layer,a=layui.device(),o="upload",c="layui_"+o+"_index",l={config:{},index:layui[o]?layui[o].index+1e4:0,set:function(_){var g=this;return g.config=i.extend({},g.config,_),g},on:function(_,g){return layui.onevent.call(this,o,_,g)}},u=function(){var _=this,g=_.config.id;return{upload:function(m){_.upload.call(_,m)},reload:function(m){_.reload.call(_,m)},config:(u.that[g]=_).config}},h="layui-upload-file",p="layui-upload-form",f="layui-upload-iframe",x="layui-upload-choose",y="UPLOADING",d=function(_){var g=this;g.index=++l.index,g.config=i.extend({},g.config,l.config,_),g.render()};d.prototype.config={accept:"images",exts:"",auto:!0,bindAction:"",url:"",force:"",field:"file",acceptMime:"",method:"post",data:{},drag:!0,size:0,number:0,multiple:!1,text:{"cross-domain":"Cross-domain requests are not supported","data-format-error":"Please return JSON data format","check-error":"",error:"","limit-number":null,"limit-size":null}},d.prototype.reload=function(_){var g=this;g.config=i.extend({},g.config,_),g.render(!0)},d.prototype.render=function(_){var g=this,m=g.config,v=i(m.elem);return 1<v.length?(layui.each(v,function(){l.render(i.extend({},m,{elem:this}))}),g):(i.extend(m,r.options(v[0],{attr:v.attr("lay-data")?"lay-data":null})),!_&&v[0]&&v.data(c)?(_=u.getThis(v.data(c)))?_.reload(m):void 0:(m.elem=i(m.elem),m.bindAction=i(m.bindAction),m.id="id"in m?m.id:v.attr("id")||g.index,g.file(),void g.events()))},d.prototype.file=function(){var _=this,g=_.config,m=_.elemFile=i(['<input class="'+h+'" type="file" accept="'+g.acceptMime+'" name="'+g.field+'"',g.multiple?" multiple":"",">"].join("")),v=g.elem.next();(v.hasClass(h)||v.hasClass(p))&&v.remove(),a.ie&&a.ie<10&&g.elem.wrap('<div class="layui-upload-wrap"></div>'),_.isFile()?(_.elemFile=g.elem,g.field=g.elem[0].name):g.elem.after(m),a.ie&&a.ie<10&&_.initIE()},d.prototype.initIE=function(){var _,g=this.config,m=i('<iframe id="'+f+'" class="'+f+'" name="'+f+'" frameborder="0"></iframe>'),v=i(['<form target="'+f+'" class="'+p+'" method="post" key="set-mine" enctype="multipart/form-data" action="'+g.url+'">',"</form>"].join(""));i("#"+f)[0]||i("body").append(m),g.elem.next().hasClass(p)||(this.elemFile.wrap(v),g.elem.next("."+p).append((_=[],layui.each(g.data,function(S,M){M=typeof M=="function"?M():M,_.push('<input type="hidden" name="'+S+'" value="'+M+'">')}),_.join(""))))},d.prototype.msg=function(_){return s.msg(_,{icon:2,shift:6})},d.prototype.isFile=function(){var _=this.config.elem[0];if(_)return _.tagName.toLocaleLowerCase()==="input"&&_.type==="file"},d.prototype.preview=function(_){window.FileReader&&layui.each(this.chooseFiles,function(g,m){var v=new FileReader;v.readAsDataURL(m),v.onload=function(){_&&_(g,m,this.result)}})},d.prototype.upload=function(_,g){var m,v,S,M,w,L=this,P=L.config,N=P.text||{},k=L.elemFile[0],D=function(){return _||L.files||L.chooseFiles||k.files},C=function(){var G=0,F=0,U=D(),j=function(){P.multiple&&G+F===L.fileLength&&typeof P.allDone=="function"&&P.allDone({total:L.fileLength,successful:G,failed:F})},et=function(V){var tt=new FormData,z=function(X){V.unified?layui.each(U,function(K,rt){delete rt[y]}):delete X[y]};if(layui.each(P.data,function(X,K){K=typeof K=="function"?V.unified?K():K(V.index,V.file):K,tt.append(X,K)}),V.unified)layui.each(U,function(X,K){K[y]||(K[y]=!0,tt.append(P.field,K))});else{if(V.file[y])return;tt.append(P.field,V.file),V.file[y]=!0}var H={url:P.url,type:"post",data:tt,dataType:P.dataType||"json",contentType:!1,processData:!1,headers:P.headers||{},success:function(X){P.unified?G+=L.fileLength:G++,E(V.index,X),j(V.index),z(V.file)},error:function(X){P.unified?F+=L.fileLength:F++,L.msg(N.error||["Upload failed, please try again.","status: "+(X.status||"")+" - "+(X.statusText||"error")].join("<br>")),I(V.index,X.responseText,X),j(V.index),z(V.file)}};typeof P.progress=="function"&&(H.xhr=function(){var X=i.ajaxSettings.xhr();return X.upload.addEventListener("progress",function(K){var rt;K.lengthComputable&&(rt=Math.floor(K.loaded/K.total*100),P.progress(rt,(P.item||P.elem)[0],K,V.index))}),X}),i.ajax(H)};P.unified?et({unified:!0,index:0}):layui.each(U,function(V,tt){et({index:V,file:tt})})},T=function(){var G=i("#"+f);L.elemFile.parent().submit(),clearInterval(d.timer),d.timer=setInterval(function(){var F,U=G.contents().find("body");try{F=U.text()}catch{L.msg(N["cross-domain"]),clearInterval(d.timer),I()}F&&(clearInterval(d.timer),U.html(""),E(0,F))},30)},A=function(G){if(P.force==="json"&&typeof G!="object")try{return{status:"CONVERTED",data:JSON.parse(G)}}catch{return L.msg(N["data-format-error"]),{status:"FORMAT_ERROR",data:{}}}return{status:"DO_NOTHING",data:{}}},E=function(G,F){L.elemFile.next("."+x).remove(),k.value="";var U=A(F);switch(U.status){case"CONVERTED":F=U.data;break;case"FORMAT_ERROR":return}typeof P.done=="function"&&P.done(F,G||0,function(j){L.upload(j)})},I=function(G,F,U){P.auto&&(k.value="");var j=A(F);switch(j.status){case"CONVERTED":F=j.data;break;case"FORMAT_ERROR":return}typeof P.error=="function"&&P.error(G||0,function(et){L.upload(et)},F,U)},B=P.exts,q=(v=[],layui.each(_||L.chooseFiles,function(G,F){v.push(F.name)}),v),$={preview:function(G){L.preview(G)},upload:function(G,F){var U={};U[G]=F,L.upload(U)},pushFile:function(){return L.files=L.files||{},layui.each(L.chooseFiles,function(G,F){L.files[G]=F}),L.files},resetFile:function(G,F,U){F=new File([F],U),L.files=L.files||{},L.files[G]=F},getChooseFiles:function(){return L.chooseFiles}},Y={file:"文件",images:"图片",video:"视频",audio:"音频"}[P.accept]||"文件",q=q.length===0?k.value.match(/[^\/\\]+\..+/g)||[]:q;if(q.length!==0){switch(P.accept){case"file":layui.each(q,function(G,F){if(B&&!RegExp(".\\.("+B+")$","i").test(escape(F)))return m=!0});break;case"video":layui.each(q,function(G,F){if(!RegExp(".\\.("+(B||"avi|mp4|wma|rmvb|rm|flash|3gp|flv")+")$","i").test(escape(F)))return m=!0});break;case"audio":layui.each(q,function(G,F){if(!RegExp(".\\.("+(B||"mp3|wav|mid")+")$","i").test(escape(F)))return m=!0});break;default:layui.each(q,function(G,F){if(!RegExp(".\\.("+(B||"jpg|png|gif|bmp|jpeg|svg|webp")+")$","i").test(escape(F)))return m=!0})}if(m)return L.msg(N["check-error"]||"选择的"+Y+"中包含不支持的格式"),k.value="";if(g!=="choose"&&!P.auto||(P.choose&&P.choose($),g!=="choose")){if(L.fileLength=(S=0,Y=D(),layui.each(Y,function(){S++}),S),P.number&&L.fileLength>P.number)return L.msg(typeof N["limit-number"]=="function"?N["limit-number"](P,L.fileLength):"同时最多只能上传: "+P.number+" 个文件<br>您当前已经选择了: "+L.fileLength+" 个文件");if(0<P.size&&!(a.ie&&a.ie<10)&&(layui.each(D(),function(G,F){F.size>1024*P.size&&(F=1<=(F=P.size/1024)?F.toFixed(2)+"MB":P.size+"KB",k.value="",M=F)}),M))return L.msg(typeof N["limit-size"]=="function"?N["limit-size"](P,M):"文件大小不能超过 "+M);w=function(){if(a.ie)return(9<a.ie?C:T)();C()},typeof P.before=="function"?l.util.promiseLikeResolve(P.before($)).then(function(G){G!==!1?w():P.auto&&(k.value="")},function(G){P.auto&&(k.value=""),G!==void 0&&layui.hint().error(G)}):w()}}},d.prototype.events=function(){var _=this,g=_.config,m=function(L){_.chooseFiles={},layui.each(L,function(P,N){var k=new Date().getTime();_.chooseFiles[k+"-"+P]=N})},v=function(k,P){var N=_.elemFile,k=(g.item||g.elem,1<k.length?k.length+"个文件":(k[0]||{}).name||N[0].value.match(/[^\/\\]+\..+/g)||[]);N.next().hasClass(x)&&N.next().remove(),_.upload(null,"choose"),_.isFile()||g.choose||N.after('<span class="layui-inline '+x+'">'+k+"</span>")},S=function(L){var P=!0;return layui.each(_.files,function(N,k){if(!(P=k.name!==L.name))return!0}),P},M=function(L){var P=function(N){N.ext=N.name.substr(N.name.lastIndexOf(".")+1).toLowerCase(),N.sizes=l.util.parseSize(N.size)};return L instanceof FileList?layui.each(L,function(N,k){P(k)}):P(L),L},w=function(L){var P;return(L=L||[]).length?_.files?(P=[],layui.each(L,function(N,k){S(k)&&P.push(M(k))}),P):M(L):[]};g.elem.off("upload.start").on("upload.start",function(){var L=i(this);_.config.item=L,_.elemFile[0].click()}),a.ie&&a.ie<10||g.elem.off("upload.over").on("upload.over",function(){i(this).attr("lay-over","")}).off("upload.leave").on("upload.leave",function(){i(this).removeAttr("lay-over")}).off("upload.drop").on("upload.drop",function(L,k){var N=i(this),k=w(k.originalEvent.dataTransfer.files);N.removeAttr("lay-over"),m(k),g.auto?_.upload():v(k)}),_.elemFile.on("change",function(){var L=w(this.files);L.length!==0&&(m(L),g.auto?_.upload():v(L))}),g.bindAction.off("upload.action").on("upload.action",function(){_.upload()}),g.elem.data(c)||(g.elem.on("click",function(){_.isFile()||i(this).trigger("upload.start")}),g.drag&&g.elem.on("dragover",function(L){L.preventDefault(),i(this).trigger("upload.over")}).on("dragleave",function(L){i(this).trigger("upload.leave")}).on("drop",function(L){L.preventDefault(),i(this).trigger("upload.drop",L)}),g.bindAction.on("click",function(){i(this).trigger("upload.action")}),g.elem.data(c,g.id))},l.util={parseSize:function(_,g){var m,v;return g=g||2,_!=null&&_?(m=typeof _=="string"?parseFloat(_):_,v=Math.floor(Math.log(m)/Math.log(1024)),(_=(_=m/Math.pow(1024,v))%1==0?_:parseFloat(_.toFixed(g)))+["Bytes","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"][v]):"0"},promiseLikeResolve:function(_){var g=i.Deferred();return _&&typeof _.then=="function"?_.then(g.resolve,g.reject):g.resolve(_),g.promise()}},u.that={},u.getThis=function(_){var g=u.that[_];return g||hint.error(_?o+" instance with ID '"+_+"' not found":"ID argument required"),g},l.render=function(_){return _=new d(_),u.call(_)},e(o,l)}),layui.define(["lay","layer","util"],function(e){var i=layui.$,r=layui.layer,s=layui.util,a=layui.hint(),o=(layui.device(),"form"),c=".layui-form",l="layui-this",u="layui-hide",h="layui-disabled",p="layui-input-number-invalid",f=lay.ie&&parseFloat(lay.ie)===8||Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked")===void 0,g=function(){this.config={verify:{required:function(v){if(!/[\S]+/.test(v)||v===void 0||v===null)return"必填项不能为空"},phone:function(v){if(v&&!/^1\d{10}$/.test(v))return"手机号格式不正确"},email:function(v){if(v&&!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(v))return"邮箱格式不正确"},url:function(v){if(v&&!/^(#|(http(s?)):\/\/|\/\/)[^\s]+\.[^\s]+$/.test(v))return"链接格式不正确"},number:function(v){if(v&&isNaN(v))return"只能填写数字"},date:function(v){if(v&&!/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/.test(v))return"日期格式不正确"},identity:function(v){if(v&&!/(^\d{15}$)|(^\d{17}(x|X|\d)$)/.test(v))return"身份证号格式不正确"}},autocomplete:null}},x=(g.prototype.set=function(v){return i.extend(!0,this.config,v),this},g.prototype.verify=function(v){return i.extend(!0,this.config.verify,v),this},g.prototype.getFormElem=function(v){return i(c+(v?'[lay-filter="'+v+'"]':""))},g.prototype.on=function(v,S){return layui.onevent.call(this,o,v,S)},g.prototype.val=function(v,S){return this.getFormElem(v).each(function(M,w){var L,P,N,k,D=i(this);for(L in S)lay.hasOwn(S,L)&&(N=S[L],(k=D.find('[name="'+L+'"]'))[0])&&((P=k[0].type)==="checkbox"?k[0].checked=N:P==="radio"?k.each(function(){this.checked=this.value==N+""}):k.val(N))}),_.render(null,v),this.getValue(v)},g.prototype.getValue=function(L,S){S=S||this.getFormElem(L);var M={},w={},L=S.find("input,select,textarea");return layui.each(L,function(P,N){var k,D=i(this);N.name=(N.name||"").replace(/^\s*|\s*&/,""),N.name&&(/^.*\[\]$/.test(N.name)&&(k=N.name.match(/^(.*)\[\]$/g)[0],M[k]=0|M[k],k=N.name.replace(/^(.*)\[\]$/,"$1["+M[k]+++"]")),/^(checkbox|radio)$/.test(N.type)&&!N.checked||(w[k||N.name]=this.tagName==="SELECT"&&typeof this.getAttribute("multiple")=="string"?D.val()||[]:this.value))}),w},g.prototype.render=function(v,N){var M=this,w=M.config,L=i(c+(N?'[lay-filter="'+N+'"]':"")),P={input:function(D){var D=D||L.find("input,textarea"),C=(w.autocomplete&&D.attr("autocomplete",w.autocomplete),function(T,A){var E=T.val(),I=Number(E),B=Number(T.attr("step"))||1,$=Number(T.attr("min")),Y=Number(T.attr("max")),q=Number(T.attr("lay-precision")),G=A!=="click"&&E==="",F=A==="init",U=isNaN(I),j=typeof T.attr("lay-step-strictly")=="string";if(T.toggleClass(p,U),!U){if(A==="click"){if(T[0].type==="text"&&typeof T.attr("readonly")=="string")return;I=i(this).index()?I-B:I+B}U=function(et){return((et.toString().match(/\.(\d+$)/)||[])[1]||"").length},q=0<=q?q:Math.max(U(B),U(E)),G||(F||Y<=(I=(I=j?Math.round(I/B)*B:I)<=$?$:I)&&(I=Y),q===0?I=parseInt(I):0<q&&(I=I.toFixed(q)),T.val(I),T.attr("lay-input-mirror",T.val())),T[(I<$||Y<I)&&!G?"addClass":"removeClass"]("layui-input-number-out-of-range"),F||((A={increment:T.next().find(".layui-icon-up"),decrement:T.next().find(".layui-icon-down")}).increment[Y<=I&&!G?"addClass":"removeClass"](h),A.decrement[I<=$&&!G?"addClass":"removeClass"](h))}});L.find("input[lay-affix],textarea[lay-affix]").each(function(){var T=i(this),A=T.attr("lay-affix"),E="layui-input-wrap",I="layui-input-suffix",B="layui-input-affix",$=T.is("[disabled]")||T.is("[readonly]"),Y=function(F,U){(F=i(F))[0]&&F[i.trim(U)?"removeClass":"addClass"](u)},q=function(F){F=i.extend({},G[A]||{value:A},F,lay.options(T[0]));var U,j=i('<div class="'+B+'">'),et=layui.isArray(F.value)?F.value:[F.value],et=i((U=[],layui.each(et,function(z,H){U.push('<i class="layui-icon layui-icon-'+H+(F.disabled?" "+h:"")+'"></i>')}),U.join(""))),V=(j.append(et),F.split&&j.addClass("layui-input-split"),F.className&&j.addClass(F.className),T.next("."+B)),tt=(V[0]&&V.remove(),T.parent().hasClass(E)||T.wrap('<div class="'+E+'"></div>'),T.next("."+I));tt[0]?((V=tt.find("."+B))[0]&&V.remove(),tt.prepend(j),T.css("padding-right",function(){return(T.closest(".layui-input-group")[0]?0:tt.outerWidth())+j.outerWidth()})):(j.addClass(I),T.after(j)),F.show==="auto"&&Y(j,T.val()),typeof F.init=="function"&&F.init.call(this,T,F),T.on("input propertychange",function(){var z=this.value;F.show==="auto"&&Y(j,z)}),T.on("blur",function(){typeof F.blur=="function"&&F.blur.call(this,T,F)}),et.on("click",function(){var z=T.attr("lay-filter");i(this).hasClass(h)||(typeof F.click=="function"&&F.click.call(this,T,F),layui.event.call(this,o,"input-affix("+z+")",{elem:T[0],affix:A,options:F}))})},G={eye:{value:"eye-invisible",click:function(F,U){var j="LAY_FORM_INPUT_AFFIX_SHOW",et=F.data(j);F.attr("type",et?"password":"text").data(j,!et),q({value:et?"eye-invisible":"eye"})}},clear:{value:"clear",click:function(F){F.val("").focus(),Y(i(this).parent(),null)},show:"auto",disabled:$},number:{value:["up","down"],split:!0,className:"layui-input-number",disabled:T.is("[disabled]"),init:function(F){var U,j,et,V,tt,z;F.attr("type")!=="text"&&F[0].type!=="text"||(et=j=!(U=".lay_input_number"),V=typeof F.attr("readonly")=="string",tt=typeof F.attr("lay-wheel")=="string",z=F.next(".layui-input-number").children("i"),F.attr("lay-input-mirror",F.val()),F.off(U),F.on("keydown"+U,function(H){j=!1,H.keyCode!==8&&H.keyCode!==46||(j=!0),V||z.length!==2||H.keyCode!==38&&H.keyCode!==40||(H.preventDefault(),z.eq(H.keyCode===38?0:1).click())}),F.on("input"+U+" propertychange"+U,function(H){var X,K;et||H.type==="propertychange"&&H.originalEvent.propertyName!=="value"||(j||(H=this.value)===""||H.slice(0,2)!=="00"&&!H.match(/\s/g)&&!((X=H.match(/\./g))&&1<X.length||(X=H.match(/e/g))&&1<X.length||(K=H.slice(1),(X=K.match(/(\+|-)/g))&&(!/e(\+|-)/i.test(K)||1<X.length))||isNaN(Number(H))&&d.indexOf(H.slice(-1))===-1||/e/i.test(H)&&(!/\de/i.test(H)||/e\./.test(H)))?F.attr("lay-input-mirror",this.value):this.value=F.attr("lay-input-mirror"),F.toggleClass(p,isNaN(Number(this.value))))}),F.on("compositionstart"+U,function(){et=!0}),F.on("compositionend"+U,function(){et=!1,F.trigger("input")}),tt&&F.on(["wheel","mousewheel","DOMMouseScroll"].join(U+" ")+U,function(H){var X;z.length&&i(this).is(":focus")&&(X=0,H.preventDefault(),H.type==="wheel"?(H.deltaX=H.originalEvent.deltaX,H.deltaY=H.originalEvent.deltaY,X=Math.abs(H.deltaX)>=Math.abs(H.deltaY)?H.deltaX:H.deltaY):H.type==="mousewheel"?X=-H.originalEvent.wheelDelta:H.type==="DOMMouseScroll"&&(X=H.originalEvent.detail),z.eq(0<X?1:0).click())}),V&&z.addClass(h)),C.call(this,F,"init")},click:function(F){C.call(this,F,"click")},blur:function(F){C.call(this,F,"blur")}}};q()})},select:function(I){var D="请选择",C="layui-form-select",T="layui-select-none",A="layui-select-create-option",E="layui-select-panel-elem-data",I=I||L.find("select"),B=function($,Y,q,G,F,U){var j,et,V,tt,z,H,X,K,rt,nt=i(this),Q=Y,it=Q.find("input"),at=$.find("dl"),ut=(at.children("dd"),at.children("dt")),ft=this.selectedIndex,dt="";q||(et=nt.attr("lay-search")==="cs"?{caseSensitive:!0}:lay.options(nt,{attr:"lay-search"}),V=nt.attr("lay-append-to")||"body",tt=nt.attr("lay-append-position"),z=!(!lay.ie||lay.ie!=="10"&&lay.ie!=="11"||!it.attr("placeholder")),H=function(){U&&($.appendTo(V).css({width:Q.width()+"px"}),(xt=function(){lay.position(Q[0],$[0],{position:tt,allowBottomOut:!0,offset:[0,5]})})(),i(window).on("resize.lay_select_resize",xt));var xt=$.offset().top+$.outerHeight()+5-m.scrollTop(),vt=at.outerHeight(),_t=at.children("dd");ft=nt[0].selectedIndex,Q.parent().addClass(C+"ed"),_t.removeClass(u),ut.removeClass(u),_t.removeClass(l),0<=ft&&_t.eq(ft).addClass(l),xt+vt>m.height()&&vt<=xt&&$.addClass(C+"up"),K(),z&&at.off("mousedown.lay_select_ieph").on("mousedown.lay_select_ieph",function(){it[0].__ieph=!0,setTimeout(function(){it[0].__ieph=!1},60)}),j=lay.onClickOutside((U?$:at)[0],function(){X(),dt&&it.val(dt)},{ignore:Q,detectIframe:!0,capture:!1})},X=function(xt){Q.parent().removeClass(C+"ed "+C+"up"),it.blur(),F&&at.children("."+A).remove(),typeof j=="function"&&(j(),j=null),U&&($.detach(),i(window).off("resize.lay_select_resize")),xt||rt(it.val(),function(vt){var _t=nt[0].selectedIndex;vt&&(dt=i(nt[0].options[_t]).prop("text"),_t===0&&dt===it.attr("placeholder")&&(dt=""),it.val(dt||""))})},K=function(){var xt,vt,_t=at.children("dd."+l);_t[0]&&(xt=_t.position().top,vt=at.height(),_t=_t.height(),vt<xt&&at.scrollTop(xt+at.scrollTop()-vt+_t-5),xt<0)&&at.scrollTop(xt+at.scrollTop()-5)},Q.on("click",function(xt){(Q.parent().hasClass(C+"ed")?X:H)(),at.find("."+T).remove()}),Q.find(".layui-edge").on("click",function(){it.focus()}),it.on("keyup",function(xt){xt.keyCode===9&&H()}).on("keydown",function(xt){var vt=xt.keyCode,_t=(vt===9&&X(),function(yt){xt.preventDefault();var mt,pt,bt=at.children("dd:not(."+u+",."+h+")");bt.length&&(mt=bt.length-1,pt=-1,layui.each(bt,function(Mt,Pt){if(i(Pt).hasClass(l))return pt=Mt,!0}),yt=yt==="prev"?pt-1<0?mt:pt-1:mt<pt+1?0:pt+1,bt.eq(yt).addClass(l).siblings().removeClass(l),K())});vt===38&&_t("prev"),vt===40&&_t("next"),vt===13&&(xt.preventDefault(),at.children("dd."+l).trigger("click"))}).on("paste",function(){H()}),rt=function(xt,vt,_t){var yt,mt=0,Mt=at.children("dd"),pt=!1,bt=xt,Mt=(et.caseSensitive||(xt=xt.toLowerCase()),et.fuzzy&&(yt=function(Pt,kt){var Ft={},Dt=["^"];kt||(Pt=Pt.toLowerCase());for(var Gt=Pt.trim().split(""),Vt=0;Vt<Gt.length;Vt++){var fe=Gt[Vt];Ft[fe]=(Ft[fe]||0)+1}for(fe in Ft){for(Dt.push("(?=.*"),Vt=0;Vt<Ft[fe];Vt++)Dt.push(fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),Vt!==Ft[fe]-1&&Dt.push(".*");Dt.push(")")}return Dt.push(".*"),new RegExp(Dt.join(""),kt?void 0:"i")}(xt,et.caseSensitive)),layui.each(Mt,function(){var Pt=i(this),kt=Pt.text(),Ft=F&&Pt.hasClass(A),Dt=(F&&!Ft&&kt===bt&&(pt=!0),et.caseSensitive||(kt=kt.toLowerCase()),et.fuzzy?!yt.test(kt):kt.indexOf(xt)===-1);(xt===""||_t==="blur"?xt!==kt:Dt)&&mt++,_t==="keyup"&&Pt[(F?Dt&&!Ft:Dt)?"addClass":"removeClass"](u)}),_t==="keyup"&&layui.each(ut,function(){var Pt=i(this),kt=Pt.nextUntil("dt").filter("dd");Pt[(kt=F?kt.not("."+A):kt).length==kt.filter("."+u).length?"addClass":"removeClass"](u)}),mt===Mt.length);return vt(Mt,pt),Mt},G&&it.on("input propertychange",layui.debounce(function(xt){var vt=this.value,_t=xt.keyCode;return _t!==9&&_t!==13&&_t!==37&&_t!==38&&_t!==39&&_t!==40&&(z&&xt.target.__ieph?xt.target.__ieph=!1:(rt(vt,function(yt,mt){var pt,bt;F?mt?at.children("."+A).remove():(mt=at.children("."+A))[0]?mt.attr("lay-value",vt).text(vt):(mt=i("<dd>").addClass(A).attr("lay-value",vt).text(vt),bt=(pt=at.children().eq(0)).hasClass("layui-select-tips"),pt[bt?"after":"before"](mt)):yt?at.find("."+T)[0]||at.append('<p class="'+T+'">无匹配项</p>'):at.find("."+T).remove()},"keyup"),vt===""&&(nt.val(""),at.find("."+l).removeClass(l),(nt[0].options[0]||{}).value||at.children("dd:eq(0)").addClass(l),at.find("."+T).remove(),F)&&at.children("."+A).remove(),void K()))},50)).on("blur",function(xt){var vt=nt[0].selectedIndex;dt=i(nt[0].options[vt]).prop("text"),vt===0&&dt===it.attr("placeholder")&&(dt=""),setTimeout(function(){rt(it.val(),function(_t){dt||it.val("")},"blur")},200)}),at.on("click","dd",function(){var xt,vt,_t=i(this),yt=_t.attr("lay-value"),mt=nt.attr("lay-filter");return _t.hasClass(h)||(F&&_t.hasClass(A)&&(vt=(xt=i("<option>").text(_t.text())).prop("text"),xt.attr("value",yt=vt),nt.append(xt),_t.removeClass(A).attr("lay-value",vt).text(vt),at.append(_t)),_t.hasClass("layui-select-tips")?it.val(""):(it.val(_t.text()),_t.addClass(l)),_t.siblings().removeClass(l),nt.val(yt).removeClass("layui-form-danger"),layui.event.call(this,o,"select("+mt+")",{elem:nt[0],value:yt,othis:$}),X(!0)),!1}),at.on("mousedown pointerdown touchstart",function(xt){layui.stope(xt)}),$.find("dl>dt").on("click",function(xt){return!1}),U&&Y.on("_lay-select-destroy",function(){$.remove()}))};i.event.special["_lay-select-destroy"]={remove:function($){$.handler()}},I.each(function($,H){var q=i(this),G=q.next("."+C),F=this.disabled,U=H.value,K=i(H.options[H.selectedIndex]),H=H.options[0];if(q.closest("[lay-ignore]").length)return q.show();var j,et,V=typeof q.attr("lay-search")=="string",tt=typeof q.attr("lay-creatable")=="string"&&V,z=typeof q.attr("lay-append-to")=="string",H=H&&!H.value&&H.text||D,H=(et=i('<div class="'+C+'"></div>'),V||et.addClass("layui-unselect"),F&&et.addClass("layui-select-disabled"),(X=i('<input type="text" class="layui-input">')).prop("placeholder",H),X.val(U?K.prop("text"):""),V&&!F||X.prop("readonly",!0),F&&X.addClass(h),X),X=((K=i('<div class="layui-select-title"></div>')).append(H),K.append('<i class="layui-edge"></i>'),K),K=(H=i('<dl class="layui-anim layui-anim-upbit"></dl>'),q.find("optgroup")[0]&&H.addClass("layui-select-group"),j=[],layui.each(q.find("optgroup,option"),function(rt,nt){var Q=nt.tagName.toLowerCase(),it=i('<dd lay-value=""></dd>');rt!==0||nt.value||Q==="optgroup"?Q==="optgroup"?((rt=i("<dt></dt>")).text(nt.label),j.push(rt.prop("outerHTML"))):(it.attr("lay-value",nt.value),U===nt.value&&it.addClass(l),nt.disabled&&it.addClass(h),it.text(nt.text),j.push(it.prop("outerHTML"))):(it.addClass("layui-select-tips"),it.text(nt.text||D),j.push(it.prop("outerHTML")))}),j.length===0&&j.push('<dd lay-value="" class="'+h+'">None</dd>'),K=j.join(""),H.html(K),H);G[0]&&(z&&(H=G.data(E))&&H.remove(),G.remove()),z?(et.append(X),q.after(et),H=i('<div class="'+C+' layui-select-panel-wrap"></div>').append(K),et.data(E,H),B.call(this,H,X,F,V,tt,z)):(et.append(X).append(K),q.after(et),B.call(this,et,X,F,V,tt,z))})},checkbox:function(C){var D={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],switch:["layui-form-switch","layui-form-onswitch","switch"],SUBTRA:"layui-icon-indeterminate"},C=C||L.find("input[type=checkbox]");C.each(function(T,A){var E=i(this),I=E.attr("lay-skin")||"primary",B=s.escape(i.trim(A.title||(A.title=E.attr("lay-text")||""))),$=this.disabled,Y=D[I]||D.checkbox,q=E.next("."+Y[0]),G=(q[0]&&q.remove(),[]);if(E.next("[lay-checkbox]")[0]&&(q=E.next(),B=q.html()||"",1<q[0].attributes.length)&&layui.each(q[0].attributes,function(F,U){U.name!=="lay-checkbox"&&G.push(U.name+'="'+U.value+'"')}),G=G.join(" "),B=I==="switch"?B.split("|"):[B],E.closest("[lay-ignore]").length)return E.show();f&&(y.call(A,"lay-form-sync-checked",A.checked),A.checked||y.call(A,"lay-form-sync-indeterminate",A.indeterminate)),$=i(['<div class="layui-unselect '+Y[0],A.checked?" "+Y[1]:"",$?" layui-checkbox-disabled "+h:"",'"',' lay-skin="'+I+'"',">",(q={checkbox:[B[0]?"<div "+G+">"+B[0]+"</div>":I==="primary"?"":"<div></div>",'<i class="layui-icon '+(I==="primary"&&!A.checked&&E.get(0).indeterminate?D.SUBTRA:"layui-icon-ok")+'"></i>'].join(""),switch:"<div>"+(!A.checked&&B[1]||B[0]||"")+"</div><i></i>"})[I]||q.checkbox,"</div>"].join("")),E.after($),(function(F,U){var j=i(this),V=j.attr("lay-skin")||"primary",et=V==="switch",V=V==="primary";F.on("click",function(){var tt=j.attr("lay-filter");j[0].disabled||(j[0].indeterminate&&(j[0].indeterminate=!1),j[0].checked=!j[0].checked,layui.event.call(j[0],o,U[2]+"("+tt+")",{elem:j[0],value:j[0].value,othis:F}))}),M.syncAppearanceOnPropChanged(this,"checked",function(){var tt;et&&(tt=(F.next("*[lay-checkbox]")[0]?F.next().html():j.attr("title")||"").split("|"),F.children("div").html(!this.checked&&tt[1]||tt[0])),F.toggleClass(U[1],this.checked)}),V&&M.syncAppearanceOnPropChanged(this,"indeterminate",function(){this.indeterminate?F.children(".layui-icon-ok").removeClass("layui-icon-ok").addClass(D.SUBTRA):F.children("."+D.SUBTRA).removeClass(D.SUBTRA).addClass("layui-icon-ok")})}).call(this,$,Y)})},radio:function(T){var D="layui-form-radio",C=["layui-icon-radio","layui-icon-circle"],T=T||L.find("input[type=radio]");T.each(function(A,E){var I=i(this),Y=I.next("."+D),B=this.disabled,$=I.attr("lay-skin");if(I.closest("[lay-ignore]").length)return I.show();f&&y.call(E,"lay-form-sync-checked",E.checked),Y[0]&&Y.remove();var Y=s.escape(E.title||""),q=[],G=(I.next("[lay-radio]")[0]&&(Y=(G=I.next()).html()||"",1<G[0].attributes.length)&&layui.each(G[0].attributes,function(F,U){U.name!=="lay-radio"&&q.push(U.name+'="'+U.value+'"')}),q=q.join(" "),i(['<div class="layui-unselect '+D,E.checked?" "+D+"ed":"",(B?" layui-radio-disabled "+h:"")+'"',$?' lay-skin="'+$+'"':"",">",'<i class="layui-anim layui-icon '+C[E.checked?0:1]+'"></i>',"<div "+q+">"+Y+"</div>","</div>"].join("")));I.after(G),(function(F){var U=i(this),j="layui-anim-scaleSpring";F.on("click",function(){var et=U.attr("lay-filter");U[0].disabled||(U[0].checked=!0,layui.event.call(U[0],o,"radio("+et+")",{elem:U[0],value:U[0].value,othis:F}))}),M.syncAppearanceOnPropChanged(this,"checked",function(){var et,V=this;V.checked?(F.addClass(D+"ed"),F.children(".layui-icon").addClass(j+" "+C[0]),et=U.parents(c).find("input[name="+V.name.replace(/(\.|#|\[|\])/g,"\\$1")+"]"),layui.each(et,function(){V!==this&&(this.checked=!1)})):(F.removeClass(D+"ed"),F.children(".layui-icon").removeClass(j+" "+C[0]).addClass(C[1]))})}).call(this,G)})}},N=function(){layui.each(P,function(k,D){D()})};return layui.type(v)==="object"?i(v).is(c)?(L=i(v),N()):v.each(function(k,D){var C=i(D);C.closest(c).length&&(D.tagName==="SELECT"?P.select(C):D.tagName==="INPUT"&&((D=D.type)==="checkbox"||D==="radio"?P[D](C):P.input(C)))}):v?P[v]?P[v]():a.error('不支持的 "'+v+'" 表单渲染'):N(),M},g.prototype.syncAppearanceOnPropChanged=f?function(v,S,M){var w=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,S);Object.defineProperty(v,S,lay.extend({},w,{get:function(){return typeof this.getAttribute("lay-form-sync-"+S)=="string"},set:function(L){y.call(this,"lay-form-sync-"+S,L),M.call(this)}}))}:function(v,S,M){var w=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,S);Object.defineProperty(v,S,lay.extend({},w,{get:function(){return w.get.call(this)},set:function(L){w.set.call(this,L),M.call(this)}}))},g.prototype.validate=function(v){var S,M=this.config.verify,w="layui-form-danger";return!(v=i(v))[0]||(v.attr("lay-verify")!==void 0||this.validate(v.find("*[lay-verify]"))!==!1)&&(layui.each(v,function(L,P){var N=i(this),k=(N.attr("lay-verify")||"").split("|"),D=N.attr("lay-vertype"),C=typeof(C=N.val())=="string"?i.trim(C):C;if(N.removeClass(w),layui.each(k,function(T,A){var E="",I=M[A];if(I){var B=typeof I=="function"?E=I(C,P):!I[0].test(C),$=P.tagName.toLowerCase()==="select"||/^(checkbox|radio)$/.test(P.type),E=E||I[1];if(A==="required"&&(E=N.attr("lay-reqtext")||E),B)return D==="tips"?r.tips(E,!N.closest("[lay-ignore]").length&&$?N.next():N,{tips:1}):D==="alert"?r.alert(E,{title:"提示",shadeClose:!0}):/\b(string|number)\b/.test(typeof E)&&r.msg(E,{icon:5,shift:6}),setTimeout(function(){($?N.next().find("input"):P).focus()},7),N.addClass(w),S=!0}}),S)return S}),!S)},g.prototype.submit=function(L,S){var M={},w=i(this),L=typeof L=="string"?L:w.attr("lay-filter"),P=this.getFormElem?this.getFormElem(L):w.parents(c).eq(0),N=P.find("*[lay-verify]");return!!_.validate(N)&&(M=_.getValue(null,P),N={elem:this.getFormElem?window.event&&window.event.target:this,form:(this.getFormElem?P:w.parents("form"))[0],field:M},typeof S=="function"&&S(N),layui.event.call(this,o,"submit("+L+")",N))});function y(v,w){var M=!!w,w=arguments.length===2&&!w;return this.getAttribute(v)!==null?M||(this.removeAttribute(v),!1):!w&&(this.setAttribute(v,""),!0)}var d=["-",".","e","E","+"],_=new g,g=i(document),m=i(window);i(function(){_.render()}),g.on("reset",c,function(){var v=i(this).attr("lay-filter");setTimeout(function(){_.render(null,v)},50)}),g.on("submit",c,x).on("click","*[lay-submit]",x),e(o,_)}),layui.define(["lay","laytpl","laypage","form","util"],function(e){var i=layui.$,r=layui.lay,s=layui.laytpl,a=layui.laypage,o=layui.layer,c=layui.form,l=layui.util,u=layui.hint(),h=layui.device(),p={config:{checkName:"LAY_CHECKED",indexName:"LAY_INDEX",initIndexName:"LAY_INDEX_INIT",numbersName:"LAY_NUM",disabledName:"LAY_DISABLED"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(z){return this.config=i.extend({},this.config,z),this},on:function(z,H){return layui.onevent.call(this,_,z,H)}},f=function(){var z=this,H=z.config,X=H.id||H.index;return{config:H,reload:function(K,rt){z.reload.call(z,K,rt)},reloadData:function(K,rt){p.reloadData(X,K,rt)},setColsWidth:function(){z.setColsWidth.call(z)},resize:function(){z.resize.call(z)}}},x=function(z){var H=f.that[z];return H||u.error(z?"The table instance with ID '"+z+"' not found":"ID argument required"),H||null},y=function(z){var H=f.config[z];return H||u.error(z?"The table instance with ID '"+z+"' not found":"ID argument required"),H||null},d=function(z){var H=this.config||{},X=(z=z||{}).item3,K=z.content;return X.type==="numbers"&&(K=z.tplData[p.config.numbersName]),("escape"in X?X:H).escape&&(K=l.escape(K)),H=z.text&&X.exportTemplet||X.templet||X.toolbar,H&&(K=typeof H=="function"?H.call(X,z.tplData,z.obj):s(function(rt){try{return r(rt).html()}catch{return rt}}(H)||String(K)).render(i.extend({LAY_COL:X},z.tplData))),z.text?i("<div>"+K+"</div>").text():K},_="table",g="lay-"+_+"-id",m=".layui-table",v="layui-hide",S="layui-hide-v",M="layui-none",w="layui-table-view",L=".layui-table-header",P=".layui-table-body",N=".layui-table-fixed-r",k=".layui-table-pageview",D=".layui-table-sort",C="layui-table-checked",T="layui-table-edit",A="layui-table-hover",E="laytable-cell-group",I="layui-table-col-special",B="layui-table-tool-panel",$="layui-table-expanded",Y="layui-table-disabled-transition",q="LAY_TABLE_MOVE_DICT",G=function(z){return['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{=d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{=d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',(z=z||{}).fixed&&z.fixed!=="right"?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':z.fixed==="right"?'{{# if(item2.fixed === "right"){ }}':"","{{# var isSort = !(item2.colGroup) && item2.sort; }}",`<th data-field="{{= item2.field||i2 }}" data-key="{{=d.index}}-{{=i1}}-{{=i2}}" {{# if( item2.parentKey){ }}data-parentkey="{{= item2.parentKey }}"{{# } }} {{# if(item2.minWidth){ }}data-minwidth="{{=item2.minWidth}}"{{# } }} {{# if(item2.maxWidth){ }}data-maxwidth="{{=item2.maxWidth}}"{{# } }} {{# if(item2.style){ }}style="{{=item2.style}}"{{# } }} {{#var colspan = layui.type(item2.colspan2) === 'number' ? item2.colspan2 : item2.colspan; if(colspan){}} colspan="{{=colspan}}"{{#} if(item2.rowspan){}} rowspan="{{=item2.rowspan}}"{{#}}} {{# if(item2.unresize || item2.colGroup){ }}data-unresize="true"{{# } }} class="{{# if(item2.hide){ }}layui-hide{{# } }}{{# if(isSort){ }} layui-unselect{{# } }}{{# if(!item2.field){ }} layui-table-col-special{{# } }}"{{# if(item2.title){ }} title="{{ layui.$('<div>' + item2.title + '</div>').text() }}"{{# } }}>`,'<div class="layui-table-cell laytable-cell-',"{{# if(item2.colGroup){ }}","group","{{# } else { }}","{{=d.index}}-{{=i1}}-{{=i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{= item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{=item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{-item2.title||""}}</span>',"{{# if(isSort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc" title="升序"></i><i class="layui-edge layui-table-sort-desc" title="降序"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",z.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},F=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{=d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{=d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),U=[,"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool">','<div class="layui-table-tool-temp"></div>','<div class="layui-table-tool-self"></div>',"</div>","{{# } }}",'<div class="layui-table-box">',"{{# if(d.data.loading){ }}",'<div class="layui-table-init">','<div class="layui-table-loading-icon">','{{# if(typeof d.data.loading === "string"){ }}',"{{- d.data.loading}}","{{# } else{ }}",'<i class="layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"></i>',"{{# } }}","</div>","</div>","{{# } }}","{{# var left, right; }}",'<div class="layui-table-header">',G(),"</div>",'<div class="layui-table-body layui-table-main">',F,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',G({fixed:!0}),"</div>",'<div class="layui-table-body">',F,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r layui-hide">','<div class="layui-table-header">',G({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',F,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.totalRow){ }}",'<div class="layui-table-total">','<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{=d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{=d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>','<tbody><tr><td><div class="layui-table-cell" style="visibility: hidden;">Total</div></td></tr></tbody>',"</table>","</div>","{{# } }}",'<div class="layui-table-column layui-table-page layui-hide">','<div class="layui-inline layui-table-pageview" id="layui-table-page{{=d.index}}"></div>',"</div>"].join(""),j=i(window),et=i(document),V=function(z){this.index=++p.index,this.config=i.extend({},this.config,p.config,z),this.render()},tt=(V.prototype.config={limit:10,loading:!0,escape:!0,cellMinWidth:60,cellMaxWidth:Number.MAX_VALUE,editTrigger:"click",defaultToolbar:["filter","exports","print"],defaultContextmenu:!0,autoSort:!0,text:{none:"无数据"},cols:[]},V.prototype.render=function(rt){var H=this,X=H.config,nt=(X.elem=i(X.elem),X.where=X.where||{},X.id="id"in X?X.id:X.elem.attr("id")||H.index);if(f.that[nt]=H,(f.config[nt]=X).request=i.extend({pageName:"page",limitName:"limit"},X.request),X.response=i.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",totalRowName:"totalRow",countName:"count"},X.response),X.page!==null&&typeof X.page=="object"&&(X.limit=X.page.limit||X.limit,X.limits=X.page.limits||X.limits,H.page=X.page.curr=X.page.curr||1,delete X.page.elem,delete X.page.jump),!X.elem[0])return H;if(X.elem.attr("lay-filter")||X.elem.attr("lay-filter",X.id),rt==="reloadData")return H.pullData(H.page,{type:"reloadData"});X.index=H.index,H.key=X.id||X.index,H.setInit(),X.height&&/^full-.+$/.test(X.height)?(H.fullHeightGap=X.height.split("-")[1],X.height=j.height()-(parseFloat(H.fullHeightGap)||0)):X.height&&/^#\w+\S*-.+$/.test(X.height)?(nt=X.height.split("-"),H.parentHeightGap=nt.pop(),H.parentDiv=nt.join("-"),X.height=i(H.parentDiv).height()-(parseFloat(H.parentHeightGap)||0)):typeof X.height=="function"&&(H.customHeightFunc=X.height,X.height=H.customHeightFunc());var K,rt=X.elem,nt=rt.next("."+w),Q=H.elem=i("<div></div>");Q.addClass((K=[w,w+"-"+H.index,"layui-form","layui-border-box"],X.className&&K.push(X.className),K.join(" "))).attr(((K={"lay-filter":"LAY-TABLE-FORM-DF-"+H.index,style:(K=[],X.width&&K.push("width:"+X.width+"px;"),K.join(""))})[g]=X.id,K)).html(s(U,{open:"{{",close:"}}",tagStyle:"legacy"}).render({data:X,index:H.index})),H.renderStyle(),nt[0]&&nt.remove(),rt.after(Q),H.layTool=Q.find(".layui-table-tool"),H.layBox=Q.find(".layui-table-box"),H.layHeader=Q.find(L),H.layMain=Q.find(".layui-table-main"),H.layBody=Q.find(P),H.layFixed=Q.find(".layui-table-fixed"),H.layFixLeft=Q.find(".layui-table-fixed-l"),H.layFixRight=Q.find(N),H.layTotal=Q.find(".layui-table-total"),H.layPage=Q.find(".layui-table-page"),H.renderToolbar(),H.renderPagebar(),H.fullSize(),H.setColsWidth({isInit:!0}),H.pullData(H.page),H.events()},V.prototype.initOpts=function(z){this.config,z.checkbox&&(z.type="checkbox"),z.space&&(z.type="space"),z.type||(z.type="normal"),z.type!=="normal"&&(z.unresize=!0,z.width=z.width||{checkbox:50,radio:50,space:30,numbers:60}[z.type])},V.prototype.setInit=function(z){var H,X,K=this,rt=K.config;if(rt.clientWidth=rt.width||(H=function(Q){var it,at;Q=Q||rt.elem.parent(),it=K.getContentWidth(Q);try{at=Q.css("display")==="none"}catch{}var ut=Q.parent();return Q[0]&&ut&&ut[0]&&(!it||at)?H(ut):it})(),z==="width")return rt.clientWidth;rt.height=rt.maxHeight||rt.height,rt.css&&rt.css.indexOf(w)===-1&&(X=rt.css.split("}"),layui.each(X,function(Q,it){it&&(X[Q]="."+w+"-"+K.index+" "+it)}),rt.css=X.join("}"));var nt=function(Q,it,at,ut){var ft,dt;ut?(ut.key=[rt.index,Q,at].join("-"),ut.colspan=ut.colspan||0,ut.rowspan=ut.rowspan||0,K.initOpts(ut),(ft=Q+(parseInt(ut.rowspan)||1))<rt.cols.length?(ut.colGroup=!0,dt=0,layui.each(rt.cols[ft],function(xt,vt){vt.HAS_PARENT||1<=dt&&dt==(ut.colspan||1)||(vt.HAS_PARENT=!0,vt.parentKey=[rt.index,Q,at].join("-"),dt+=parseInt(1<vt.colspan?vt.colspan:1),nt(ft,rt.cols[ft],xt,vt))})):ut.colGroup=!1,ut.hide=ut.hide&&!ut.colGroup||!1):it.splice(at,1)};layui.each(rt.cols,function(Q,it){layui.each(it,function(at,ut){Q?delete ut.HAS_PARENT:nt(Q,it,at,ut)})})},V.prototype.renderStyle=function(){var z,H,X,K,rt=this.config,nt=this.index,Q=[];layui.each(rt.cols,function(it,at){layui.each(at,function(ut,ft){ut=[nt,it,ut].join("-"),ft=["width: ",ft.width||rt.cellMinWidth,"px"].join(""),Q.push(".laytable-cell-"+ut+"{"+ft+"}")})}),(z=rt.lineStyle)&&(H=".layui-table-view-"+nt+" .layui-table-body .layui-table tr",X=z.split(";"),K="none",layui.each(X,function(it,at){if((at=at.split(":"))[0]==="height")return at=parseFloat(at[1]),isNaN(at)||(K=at-1+"px"),!0}),layui.each(["{"+z+"}",".layui-table-cell{height: auto; max-height: "+K+"; white-space: normal; text-overflow: clip;}","> td:hover > .layui-table-cell{overflow: auto;}"].concat(h.ie?[".layui-table-edit{height: "+K+";}","td[data-edit]:hover:after{height: "+K+";}"]:[]),function(it,at){at&&Q.push(H+" "+at)})),rt.css&&Q.push(rt.css),r.style({target:this.elem[0],text:Q.join(""),id:"DF-table-"+nt})},V.prototype.renderToolbar=function(){var z,H=this,X=H.config,K=X.elem.attr("lay-filter"),rt=['<div class="layui-inline" lay-event="add"><i class="layui-icon layui-icon-add-1"></i></div>','<div class="layui-inline" lay-event="update"><i class="layui-icon layui-icon-edit"></i></div>','<div class="layui-inline" lay-event="delete"><i class="layui-icon layui-icon-delete"></i></div>'].join(""),nt=H.layTool.find(".layui-table-tool-temp"),Q=(X.toolbar==="default"?nt.html(rt):typeof X.toolbar=="string"&&(rt=i(X.toolbar).html()||"")&&nt.html(s(rt).render(X)),{filter:{title:"筛选列",layEvent:"LAYTABLE_COLS",icon:"layui-icon-cols",onClick:function(it){var at,ut=it.config;(0,it.openPanel)({list:(at=[],H.eachCols(function(ft,dt){dt.field&&dt.type=="normal"&&at.push('<li><input type="checkbox" name="'+dt.field+'" data-key="'+dt.key+'" data-parentkey="'+(dt.parentKey||"")+'" lay-skin="primary" '+(dt.hide?"":"checked")+' title="'+l.escape(i("<div>"+(dt.fieldTitle||dt.title||dt.field)+"</div>").text())+'" lay-filter="LAY_TABLE_TOOL_COLS"></li>')}),at.join("")),done:function(){c.on("checkbox(LAY_TABLE_TOOL_COLS)",function(yt){var yt=i(yt.elem),dt=this.checked,xt=yt.data("key"),vt=H.col(xt),_t=vt.hide,yt=yt.data("parentkey");vt.key&&(vt.hide=!dt,H.elem.find('*[data-key="'+xt+'"]')[dt?"removeClass":"addClass"](v),_t!=vt.hide&&H.setParentCol(!dt,yt),H.resize(),layui.event.call(this,_,"colToggled("+K+")",{col:vt,config:ut}))})}})}},exports:{title:"导出",layEvent:"LAYTABLE_EXPORT",icon:"layui-icon-export",onClick:function(dt){var at=dt.data,ut=dt.config,ft=dt.openPanel,dt=dt.elem;if(!at.length)return o.tips("当前表格无数据",dt,{tips:3});h.ie?o.tips("导出功能不支持 IE，请用 Chrome 等高级浏览器导出",dt,{tips:3}):ft({list:['<li data-type="csv">导出 CSV 文件</li>'].join(""),done:function(xt,vt){vt.on("click",function(){var _t=i(this).data("type");p.exportFile.call(H,ut.id,null,_t)})}})}},print:{title:"打印",layEvent:"LAYTABLE_PRINT",icon:"layui-icon-print",onClick:function(ut){var at=ut.data,ut=(ut.config,ut.elem);if(!at.length)return o.tips("当前表格无数据",ut,{tips:3});var at=window.open("about:blank","_blank"),ut=["<style>","body{font-size: 12px; color: #5F5F5F;}","table{width: 100%; border-collapse: collapse; border-spacing: 0;}","th,td{line-height: 20px; padding: 9px 15px; border: 1px solid #ccc; text-align: left; font-size: 12px; color: #5F5F5F;}","a{color: #5F5F5F; text-decoration:none;}","img{max-height: 100%;}","*.layui-hide{display: none}","</style>"].join(""),ft=i(H.layHeader.html());ft.append(H.layMain.find("table").html()),ft.append(H.layTotal.find("table").html()),ft.find("th.layui-table-patch").remove(),ft.find("thead>tr>th."+I).filter(function(dt,xt){return!i(xt).children("."+E).length}).remove(),ft.find("tbody>tr>td."+I).remove(),at.document.write(ut+ft.prop("outerHTML")),at.document.close(),layui.device("edg").edg?(at.onafterprint=at.close,at.print()):(at.print(),at.close())}}});typeof X.defaultToolbar=="object"&&(z=[],X.defaultToolbar=i.map(X.defaultToolbar,function(it,at){var ut=typeof it=="string",ft=ut?Q[it]:it;return ft&&(!(ft=ft.name&&Q[ft.name]?i.extend({},Q[ft.name],ft):ft).name&&ut&&(ft.name=it),z.push('<div class="layui-inline" title="'+ft.title+'" lay-event="'+ft.layEvent+'"><i class="layui-icon '+ft.icon+'"></i></div>')),ft}),H.layTool.find(".layui-table-tool-self").html(z.join("")))},V.prototype.renderPagebar=function(){var z,H=this.config,X=this.layPagebar=i('<div class="layui-inline layui-table-pagebar"></div>');H.pagebar&&((z=i(H.pagebar).html()||"")&&X.append(s(z).render(H)),this.layPage.append(X))},V.prototype.setParentCol=function(z,H){var X=this.config,K=this.layHeader.find('th[data-key="'+H+'"]'),rt=parseInt(K.attr("colspan"))||0;K[0]&&(H=H.split("-"),H=X.cols[H[1]][H[2]],z?rt--:rt++,K.attr("colspan",rt),K[rt?"removeClass":"addClass"](v),H.colspan2=rt,H.hide=rt<1,X=K.data("parentkey"))&&this.setParentCol(z,X)},V.prototype.setColsPatch=function(){var z=this,H=z.config;layui.each(H.cols,function(X,K){layui.each(K,function(rt,nt){nt.hide&&z.setParentCol(nt.hide,nt.parentKey)})})},V.prototype.setGroupWidth=function(z){var H,X=this;X.config.cols.length<=1||((H=X.layHeader.find((z?"th[data-key="+z.data("parentkey")+"]>":"")+"."+E)).css("width",0),layui.each(H.get().reverse(),function(){var K=i(this),rt=K.parent().data("key"),nt=0;X.layHeader.eq(0).find("th[data-parentkey="+rt+"]").width(function(Q,it){i(this).hasClass(v)||0<it&&(nt+=it)}),nt&&K.css("max-width",nt-1),z&&K.parent().data("parentkey")&&X.setGroupWidth(K.parent())}),H.css("width","auto"))},V.prototype.setColsWidth=function(_t){var H,X=this,K=X.config,rt=0,nt=0,Q=0,it=0,at=X.setInit("width"),ut=parseFloat(layui.getStyle(X.elem[0],"border-left-width")),ft=X.layHeader.first().children("table"),dt=X.layMain.find("table"),xt=X.layMain.find("tbody").is(":empty"),vt=_t&&_t.isInit,_t=(X.eachCols(function(mt,pt){pt.hide||(rt++,pt.width)||pt.type!=="normal"||(H=pt)}),at=at-(K.skin==="line"||K.skin==="nob"?2:rt+1)*ut-X.getScrollWidth(X.layMain[0]),function(mt){layui.each(K.cols,function(pt,bt){layui.each(bt,function(Mt,Pt){var kt=0,Ft=Pt.minWidth||K.cellMinWidth,Dt=Pt.maxWidth||K.cellMaxWidth;Pt?Pt.colGroup||Pt.hide||(mt?Q&&Q<Ft?(nt--,kt=Ft):Q&&Dt<Q&&(nt--,kt=Dt):(kt=Pt.width||0,/\d+%$/.test(kt)?Dt<(kt=(kt=parseFloat(kt)/100*at)<Ft?Ft:kt)&&(kt=Dt):kt?Pt.type==="normal"&&(kt<Ft&&(Pt.width=kt=Ft),Dt<kt)&&(Pt.width=kt=Dt):(Pt.width=kt=0,nt++)),Pt.hide&&(kt=0),it+=kt):bt.splice(Mt,1)})}),it<at&&0<nt&&(Q=(at-it)/nt)}),yt=(_t(),_t(!0),X.autoColNums=nt=0<nt?nt:0,at);X.eachCols(function(mt,pt){var bt=pt.minWidth||K.cellMinWidth,Mt=pt.maxWidth||K.cellMaxWidth;pt.colGroup||pt.hide||H&&H.key===pt.key||(pt.width===0?X.cssRules(pt.key,function(Pt){var kt=Math.round(Q<bt?bt:Mt<Q?Mt:Q);Pt.style.width=kt+"px",yt-=kt}):/\d+%$/.test(pt.width)?X.cssRules(pt.key,function(Pt){var kt=Math.round(parseFloat(pt.width)/100*at);Pt.style.width=(kt=Mt<(kt=kt<bt?bt:kt)?Mt:kt)+"px",yt-=kt}):X.cssRules(pt.key,function(Pt){Pt.style.width=pt.width+"px",yt-=pt.width}))}),H&&X.cssRules(H.key,function(mt){var pt=H.minWidth||K.cellMinWidth,bt=H.maxWidth||K.cellMaxWidth,bt=Math.max(Math.min(yt,bt),pt);mt.style.width=bt+"px",!vt&&xt&&dt.width(X.getContentWidth(ft)),X.layMain.prop("offsetHeight")>X.layMain.prop("clientHeight")&&(mt.style.width=parseFloat(mt.style.width)-ut+"px")}),!vt&&xt?dt.width(X.getContentWidth(ft)):dt.width("auto"),X.setGroupWidth()},V.prototype.resize=function(){var z=this;z.layMain&&("isConnected"in z.layMain[0]?z.layMain[0].isConnected:i.contains(document.body,z.layMain[0]))&&(z.fullSize(),z.setColsWidth(),z.scrollPatch())},V.prototype.reload=function(z,H,X){var K=this;z=z||{},delete K.haveInit,layui.each(z,function(rt,nt){layui.type(nt)==="array"&&delete K.config[rt]}),K.config=i.extend(H,{},K.config,z),X!=="reloadData"&&(layui.each(K.config.cols,function(rt,nt){layui.each(nt,function(Q,it){delete it.colspan2})}),delete K.config.HAS_SET_COLS_PATCH),K.render(X)},V.prototype.errorView=function(K){var H=this,X=H.layMain.find("."+M),K=i('<div class="'+M+'">'+(K||"Error")+"</div>");X[0]&&(H.layNone.remove(),X.remove()),H.layFixed.addClass(v),H.layMain.find("tbody").html(""),H.layMain.append(H.layNone=K),H.layTotal.addClass(S),H.layPage.find(k).addClass(S),p.cache[H.key]=[],H.syncCheckAll(),H.renderForm(),H.setColsWidth(),H.loading(!1)},V.prototype.page=1,V.prototype.pullData=function(z,H){var X,K,rt=this,nt=rt.config,Q=(nt.HAS_SET_COLS_PATCH||rt.setColsPatch(),nt.HAS_SET_COLS_PATCH=!0,nt.request),it=nt.response,at=function(){typeof nt.initSort=="object"&&rt.sort({field:nt.initSort.field,type:nt.initSort.type,reloadType:H.type})},ut=function(ft,dt){rt.setColsWidth(),rt.loading(!1),typeof nt.done=="function"&&nt.done(ft,z,ft[it.countName],dt)};H=H||{},typeof nt.before=="function"&&nt.before(nt),rt.startTime=new Date().getTime(),H.renderData?((X={})[it.dataName]=p.cache[rt.key],X[it.countName]=nt.url?layui.type(nt.page)==="object"?nt.page.count:X[it.dataName].length:nt.data.length,typeof nt.totalRow=="object"&&(X[it.totalRowName]=i.extend({},rt.totalRow)),rt.renderData({res:X,curr:z,count:X[it.countName],type:H.type,sort:!0}),ut(X,"renderData")):nt.url?(K={},nt.page&&(K[Q.pageName]=z,K[Q.limitName]=nt.limit),Q=i.extend(K,nt.where),nt.contentType&&nt.contentType.indexOf("application/json")==0&&(Q=JSON.stringify(Q)),rt.loading(!0),rt._xhr&&rt._xhr.readyState!==4&&(rt._xhrAbort=!0,rt._xhr.abort()),rt._xhr=i.ajax({type:nt.method||"get",url:nt.url,contentType:nt.contentType,data:Q,dataType:nt.dataType||"json",jsonpCallback:nt.jsonpCallback,headers:nt.headers||{},complete:typeof nt.complete=="function"?nt.complete:void 0,success:function(ft){var dt,xt;(ft=typeof nt.parseData=="function"&&nt.parseData(ft)||ft)[it.statusName]!=it.statusCode?rt.errorView(ft[it.msgName]||'返回的数据不符合规范，正确的成功状态码应为："'+it.statusName+'": '+it.statusCode):(dt=ft[it.countName],(xt=Math.ceil(dt/nt.limit)||1)<z&&(z=xt),rt.totalRow=ft[it.totalRowName],rt.renderData({res:ft,curr:z,count:dt,type:H.type}),at(),nt.time=new Date().getTime()-rt.startTime+" ms"),ut(ft,H.type)},error:function(ft,dt){ft&&ft.status===0&&rt._xhrAbort?rt._xhrAbort=!1:(rt.errorView("请求异常，错误提示："+dt),typeof nt.error=="function"&&nt.error(ft,dt))}})):layui.type(nt.data)==="array"&&(X={},K=z*nt.limit-nt.limit,Q=nt.data.concat(),X[it.dataName]=nt.page?Q.splice(K,nt.limit):Q,X[it.countName]=nt.data.length,typeof nt.totalRow=="object"&&(X[it.totalRowName]=i.extend({},nt.totalRow)),rt.totalRow=X[it.totalRowName],rt.renderData({res:X,curr:z,count:X[it.countName],type:H.type}),at(),ut(X,H.type))},V.prototype.eachCols=function(z){return p.eachCols(null,z,this.config.cols),this},V.prototype.col=function(z){try{return z=z.split("-"),this.config.cols[z[1]][z[2]]||{}}catch(H){return u.error(H),{}}},V.prototype.getTrHtml=function(z,H,X,K){var rt=this,nt=rt.config,Q=K&&K.trs||[],it=K&&K.trs_fixed||[],at=K&&K.trs_fixed_r||[];return X=X||1,layui.each(z,function(ut,ft){var dt=[],xt=[],vt=[],_t=ut+nt.limit*(X-1)+1;if(typeof ft!="object"){z[ut]=ft={LAY_KEY:ft};try{p.cache[rt.key][ut]=ft}catch{}}layui.type(ft)==="array"&&ft.length===0||(ft[p.config.numbersName]=_t,ft[p.config.indexName]=ut,H||(ft[p.config.initIndexName]=ut),rt.eachCols(function(bt,mt){var pt,bt=mt.field||bt,Mt=mt.key,Pt=ft[bt];Pt!=null||(Pt=""),mt.colGroup||(bt=['<td data-field="'+bt+'" data-key="'+Mt+'" '+(bt=[],(pt=typeof mt.edit=="function"?mt.edit(ft):mt.edit)&&bt.push('data-edit="'+pt+'"'),mt.templet&&bt.push('data-content="'+l.escape(Pt)+'"'),mt.toolbar&&bt.push('data-off="true"'),mt.event&&bt.push('lay-event="'+mt.event+'"'),mt.minWidth&&bt.push('data-minwidth="'+mt.minWidth+'"'),mt.maxWidth&&bt.push('data-maxwidth="'+mt.maxWidth+'"'),mt.style&&bt.push('style="'+mt.style+'"'),bt.join(" "))+' class="'+(pt=[],mt.hide&&pt.push(v),mt.field||pt.push(I),pt.join(" "))+'">','<div class="layui-table-cell laytable-cell-'+(mt.type==="normal"?Mt:Mt+" laytable-cell-"+mt.type)+'"'+(mt.align?' align="'+mt.align+'"':"")+">"+function(){var kt,Ft=i.extend(!0,{LAY_COL:mt},ft),Dt=p.config.checkName,Gt=p.config.disabledName;switch(mt.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+(kt=[],mt[Dt]&&(ft[Dt]=mt[Dt],mt[Dt])&&(kt[0]="checked"),Ft[Dt]&&(kt[0]="checked"),Ft[Gt]&&kt.push("disabled"),kt.join(" "))+' lay-type="layTableCheckbox">';case"radio":return'<input type="radio" name="layTableRadio_'+nt.index+'" '+(kt=[],Ft[Dt]&&(kt[0]="checked"),Ft[Gt]&&kt.push("disabled"),kt.join(" "))+' lay-type="layTableRadio">';case"numbers":return _t}return mt.toolbar?s(i(mt.toolbar).html()||"").render(Ft):d.call(rt,{item3:mt,content:Pt,tplData:Ft})}(),"</div></td>"].join(""),dt.push(bt),mt.fixed&&mt.fixed!=="right"&&xt.push(bt),mt.fixed==="right"&&vt.push(bt))}),ut=['data-index="'+ut+'"'],ft[p.config.checkName]&&ut.push('class="'+C+'"'),ut=ut.join(" "),Q.push("<tr "+ut+">"+dt.join("")+"</tr>"),it.push("<tr "+ut+">"+xt.join("")+"</tr>"),at.push("<tr "+ut+">"+vt.join("")+"</tr>"))}),{trs:Q,trs_fixed:it,trs_fixed_r:at}},p.getTrHtml=function(z,H){return z=x(z),z.getTrHtml(H,null,z.page)},V.prototype.renderData=function(z){var H=this,X=H.config,it=z.res,K=z.curr,rt=H.count=z.count,nt=z.sort,Q=it[X.response.dataName]||[],it=it[X.response.totalRowName],at=[],ut=[],ft=[],dt=function(){if(!nt&&H.sortKey)return H.sort({field:H.sortKey.field,type:H.sortKey.sort,pull:!0,reloadType:z.type});H.getTrHtml(Q,nt,K,{trs:at,trs_fixed:ut,trs_fixed_r:ft}),X.scrollPos==="fixed"&&z.type==="reloadData"||H.layBody.scrollTop(0),X.scrollPos==="reset"&&H.layBody.scrollLeft(0),H.layMain.find("."+M).remove(),H.layMain.find("tbody").html(at.join("")),H.layFixLeft.find("tbody").html(ut.join("")),H.layFixRight.find("tbody").html(ft.join("")),H.syncCheckAll(),H.renderForm(),H.fullSize(),H.haveInit?H.scrollPatch():setTimeout(function(){H.scrollPatch()},50),H.haveInit=!0,o.close(H.tipsIndex)};return p.cache[H.key]=Q,H.layTotal[Q.length==0?"addClass":"removeClass"](S),H.layPage[X.page||X.pagebar?"removeClass":"addClass"](v),H.layPage.find(k)[!X.page||rt==0||Q.length===0&&K==1?"addClass":"removeClass"](S),Q.length===0?H.errorView(X.text.none):(H.layFixLeft.removeClass(v),nt?dt():(dt(),H.renderTotal(Q,it),H.layTotal&&H.layTotal.removeClass(v),void(X.page&&(X.page=i.extend({elem:"layui-table-page"+X.index,count:rt,limit:X.limit,limits:X.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(xt,vt){vt||(H.page=xt.curr,X.limit=xt.limit,H.pullData(xt.curr))}},X.page),X.page.count=rt,a.render(X.page)))))},p.renderData=function(z){z=x(z),z&&z.pullData(z.page,{renderData:!0,type:"reloadData"})},V.prototype.renderTotal=function(z,H){var X,K=this,rt=K.config,nt={};rt.totalRow&&(layui.each(z,function(Q,it){layui.type(it)==="array"&&it.length===0||K.eachCols(function(ft,ut){var ft=ut.field||ft,dt=it[ft];ut.totalRow&&(nt[ft]=(nt[ft]||0)+(parseFloat(dt)||0))})}),K.dataTotal=[],X=[],K.eachCols(function(at,it){var at=it.field||at,ut=H&&H[it.field],ft="totalRowDecimals"in it?it.totalRowDecimals:2,ft=nt[at]?parseFloat(nt[at]||0).toFixed(ft):"",ft=(xt=it.totalRowText||"",(dt={LAY_COL:it})[at]=ft,dt=it.totalRow&&d.call(K,{item3:it,content:ft,tplData:dt})||xt,ut||dt),dt=typeof(xt=it.totalRow||rt.totalRow)=="string"?s(xt).render(i.extend({TOTAL_NUMS:ut||nt[at],TOTAL_ROW:H||{},LAY_COL:it},it)):ft,xt=(it.field&&K.dataTotal.push({field:it.field,total:i("<div>"+dt+"</div>").text()}),['<td data-field="'+at+'" data-key="'+it.key+'" '+(xt=[],it.minWidth&&xt.push('data-minwidth="'+it.minWidth+'"'),it.maxWidth&&xt.push('data-maxwidth="'+it.maxWidth+'"'),it.style&&xt.push('style="'+it.style+'"'),xt.join(" "))+' class="'+(ut=[],it.hide&&ut.push(v),it.field||ut.push(I),ut.join(" "))+'">','<div class="layui-table-cell laytable-cell-'+(ft=it.key,it.type==="normal"?ft:ft+" laytable-cell-"+it.type)+'"'+(at=[],it.align&&at.push('align="'+it.align+'"'),at.join(" "))+">"+dt,"</div></td>"].join(""));X.push(xt)}),z=K.layTotal.find(".layui-table-patch"),K.layTotal.find("tbody").html("<tr>"+X.join("")+(z.length?z.get(0).outerHTML:"")+"</tr>"))},V.prototype.getColElem=function(z,H){return z.eq(0).find(".laytable-cell-"+H+":eq(0)")},V.prototype.renderForm=function(z){this.config;var H=this.elem.attr("lay-filter");c.render(z,H)},V.prototype.renderFormByElem=function(z){layui.each(["input","select"],function(H,X){c.render(z.find(X))})},V.prototype.syncCheckAll=function(){var z,H=this,X=H.config,K=H.layHeader.find('input[name="layTableCheckbox"]'),rt=p.checkStatus(H.key);K[0]&&(z=rt.isAll,H.eachCols(function(nt,Q){Q.type==="checkbox"&&(Q[X.checkName]=z)}),K.prop({checked:rt.isAll,indeterminate:!rt.isAll&&rt.data.length}))},V.prototype.setRowActive=function(z,H,X){if(this.config,z=this.layBody.find('tr[data-index="'+z+'"]'),H=H||"layui-table-click",X)return z.removeClass(H);z.addClass(H),z.siblings("tr").removeClass(H)},V.prototype.setRowChecked=function(z){var H,X,K,rt,nt,Q,it,at=this,ut=at.config,ft=z.index==="all",dt=layui.type(z.index)==="array",xt=ft||dt;ut.tree&&ut.tree.view||xt&&(at.layBox.addClass(Y),z.type==="radio")||(dt&&(H={},layui.each(z.index,function(vt,_t){H[_t]=!0}),z.index=H),X=at.layBody.children(".layui-table").children("tbody"),it=xt?"tr":'tr[data-index="'+z.index+'"]',it=X.children(it),X=ft?it:it.filter(dt?function(){var vt=i(this).data("index");return z.index[vt]}:'[data-index="'+z.index+'"]'),z=i.extend({type:"checkbox"},z),K=p.cache[at.key],rt="checked"in z,nt=function(vt){return z.type==="radio"||(rt?z.checked:!vt)},X.each(function(){var vt=i(this),_t=vt.attr("data-index"),yt=K[_t];_t&&layui.type(yt)!=="array"&&!yt[ut.disabledName]&&(yt=yt[ut.checkName]=nt(vt.hasClass(C)),vt.toggleClass(C,!!yt),z.type==="radio")&&(Q=_t,vt.siblings().removeClass(C))}),Q&&layui.each(K,function(vt,_t){Number(Q)!==Number(vt)&&delete _t[ut.checkName]}),it=(dt=(ft=X.children("td").children(".layui-table-cell").children('input[lay-type="'+({radio:"layTableRadio",checkbox:"layTableCheckbox"}[z.type]||"checkbox")+'"]:not(:disabled)')).last()).closest(N),(z.type==="radio"&&it.hasClass(v)?ft.first():ft).prop("checked",nt(dt.prop("checked"))),at.syncCheckAll(),xt&&setTimeout(function(){at.layBox.removeClass(Y)},100))},V.prototype.sort=function(z){var H,X=this,K={},rt=X.config,nt=rt.elem.attr("lay-filter"),Q=p.cache[X.key];typeof(z=z||{}).field=="string"&&(it=z.field,X.layHeader.find("th").each(function(ft,dt){var xt=i(this),vt=xt.data("field");if(vt===z.field)return z.field=xt,it=vt,!1}));try{var it=it||z.field.data("field"),at=z.field.data("key");if(X.sortKey&&!z.pull&&it===X.sortKey.field&&z.type===X.sortKey.sort)return;var ut=X.layHeader.find("th .laytable-cell-"+at).find(D);X.layHeader.find("th").find(D).removeAttr("lay-sort"),ut.attr("lay-sort",z.type||null),X.layFixed.find("th")}catch{u.error("Table modules: sort field '"+it+"' not matched")}X.sortKey={field:it,sort:z.type},rt.autoSort&&(z.type==="asc"?H=layui.sort(Q,it,null,!0):z.type==="desc"?H=layui.sort(Q,it,!0,!0):(H=layui.sort(Q,p.config.initIndexName,null,!0),delete X.sortKey,delete rt.initSort)),K[rt.response.dataName]=H||Q,X.renderData({res:K,curr:X.page,count:X.count,sort:!0,type:z.reloadType}),z.fromEvent&&(rt.initSort={field:it,type:z.type},layui.event.call(z.field,_,"sort("+nt+")",i.extend({config:rt},rt.initSort)))},V.prototype.loading=function(z){this.config.loading&&this.layBox.find(".layui-table-init").toggleClass(v,!z)},V.prototype.cssRules=function(z,H){var X=this.elem.children("style")[0];r.getStyleRules(X,function(K){if(K.selectorText===".laytable-cell-"+z)return H(K),!0})},V.prototype.fullSize=function(){var z,H,X=this,K=X.config,rt=K.height;X.fullHeightGap?(rt=j.height()-X.fullHeightGap)<135&&(rt=135):X.parentDiv&&X.parentHeightGap?(rt=i(X.parentDiv).height()-X.parentHeightGap)<135&&(rt=135):X.customHeightFunc&&(rt=X.customHeightFunc())<135&&(rt=135),1<K.cols.length&&(z=X.layFixed.find(L).find("th"),H=X.layHeader.first(),layui.each(z,function(nt,Q){(Q=i(Q)).height(H.find('th[data-key="'+Q.attr("data-key")+'"]').height()+"px")})),rt&&(z=parseFloat(rt)-(X.layHeader.outerHeight()||39),K.toolbar&&(z-=X.layTool.outerHeight()||51),K.totalRow&&(z-=X.layTotal.outerHeight()||40),(K.page||K.pagebar)&&(z-=X.layPage.outerHeight()||43),K.maxHeight?layui.each({elem:rt,layMain:z},function(nt,Q){X[nt].css({height:"auto",maxHeight:Q+"px"})}):X.layMain.outerHeight(z))},V.prototype.getScrollWidth=function(z){var H;return z?H=z.offsetWidth-z.clientWidth:((z=document.createElement("div")).style.width="100px",z.style.height="100px",z.style.overflowY="scroll",document.body.appendChild(z),H=z.offsetWidth-z.clientWidth,document.body.removeChild(z)),H},V.prototype.scrollPatch=function(){var z=this,H=z.layMain.children("table"),X=z.layMain.width()-z.layMain.prop("clientWidth"),K=z.layMain.height()-z.layMain.prop("clientHeight"),rt=(z.getScrollWidth(z.layMain[0]),H.outerWidth()-z.layMain.width()),nt=function(Q){var it;X&&K?(Q=Q.eq(0)).find(".layui-table-patch")[0]||((it=i('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>')).find("div").css({width:X}),Q.find("tr").append(it)):Q.find(".layui-table-patch").remove()};nt(z.layHeader),nt(z.layTotal),nt=z.layMain.height()-K,z.layFixed.find(P).css("height",H.height()>=nt?nt:"auto").scrollTop(z.layMain.scrollTop()),z.layFixRight[p.cache[z.key]&&p.cache[z.key].length&&0<rt?"removeClass":"addClass"](v),z.layFixRight.css("right",X)},V.prototype.updateRow=function(rt,H){var X=this,K=".layui-table-cell",rt=layui.type(rt)==="array"?rt:[rt],nt=p.cache[X.key]||[];layui.each(rt,function(Q,it){var at,ut,ft,dt,xt;at=it.index,ut=it.data,ft=it.related,dt=nt[at]||{},xt=X.layBody.find('tr[data-index="'+at+'"]'),layui.each(ut,function(vt,_t){dt[vt]=_t,H&&H(vt,_t)}),X.eachCols(function(vt,_t){var yt,mt=String(_t.field||vt);(mt in ut||(typeof ft=="function"?ft(mt,vt):ft)&&(_t.templet||_t.toolbar))&&(mt=(vt=xt.children('td[data-field="'+mt+'"]')).children(K),yt=dt[_t.field],mt.html(d.call(X,{item3:_t,content:yt,tplData:i.extend({LAY_COL:_t},dt)})),vt.data("content",yt),X.renderFormByElem(mt))})})},p.updateRow=function(z,H){return x(z).updateRow(H)},V.prototype.events=function(){var z=this,H=z.config,X=H.elem.attr("lay-filter"),K=z.layHeader.find("th"),rt=".layui-table-cell",nt=i("body"),Q={},it=(z.layTool.on("click","*[lay-event]",function(yt){var mt=i(this),pt=mt.attr("lay-event"),bt=p.cache[H.id],Mt=function(Pt){var kt=i(Pt.list),Ft=i('<ul class="'+B+'"></ul>');Ft.html(kt),H.height&&Ft.css("max-height",H.height-(z.layTool.outerHeight()||50)),mt.find("."+B)[0]||mt.append(Ft),z.renderForm(),Ft.on("click",function(Dt){layui.stope(Dt)}),Pt.done&&Pt.done(Ft,kt)};layui.stope(yt),et.trigger("table.tool.panel.remove"),o.close(z.tipsIndex),layui.each(H.defaultToolbar,function(Pt,kt){if(kt.layEvent===pt)return typeof kt.onClick=="function"&&kt.onClick({data:bt,config:H,openPanel:Mt,elem:mt}),!0}),layui.event.call(this,_,"toolbar("+X+")",i.extend({event:pt,config:H},{}))}),z.layHeader.on("click","*[lay-event]",function(yt){var pt=i(this),mt=pt.attr("lay-event"),pt=pt.closest("th").data("key"),pt=z.col(pt);layui.event.call(this,_,"colTool("+X+")",i.extend({event:mt,config:H,col:pt},{}))}),z.layPagebar.on("click","*[lay-event]",function(yt){var mt=i(this).attr("lay-event");layui.event.call(this,_,"pagebar("+X+")",i.extend({event:mt,config:H},{}))}),K.on("mousemove",function(bt){var mt=i(this),pt=mt.offset().left,bt=bt.clientX-pt;mt.data("unresize")||f.eventMoveElem||(Q.allowResize=mt.width()-bt<=10,nt.css("cursor",Q.allowResize?"col-resize":""))}).on("mouseleave",function(){i(this),f.eventMoveElem||(Q.allowResize=!1,nt.css("cursor",""))}).on("mousedown",function(yt){var mt,pt=i(this);Q.allowResize&&(mt=pt.data("key"),yt.preventDefault(),Q.offset=[yt.clientX,yt.clientY],z.cssRules(mt,function(bt){var Mt=bt.style.width||pt.outerWidth();Q.rule=bt,Q.ruleWidth=parseFloat(Mt),Q.minWidth=pt.data("minwidth")||H.cellMinWidth,Q.maxWidth=pt.data("maxwidth")||H.cellMaxWidth}),pt.data(q,Q),f.eventMoveElem=pt)}),f.docEvent||et.on("mousemove",function(yt){var mt,pt;f.eventMoveElem&&(mt=f.eventMoveElem.data(q)||{},f.eventMoveElem.data("resizing",1),yt.preventDefault(),mt.rule)&&(yt=mt.ruleWidth+yt.clientX-mt.offset[0],pt=f.eventMoveElem.closest("."+w).attr(g),pt=x(pt))&&((yt=yt<mt.minWidth?mt.minWidth:yt)>mt.maxWidth&&(yt=mt.maxWidth),mt.rule.style.width=yt+"px",pt.setGroupWidth(f.eventMoveElem),o.close(z.tipsIndex))}).on("mouseup",function(yt){var mt,pt,bt,Mt,Pt;f.eventMoveElem&&(bt=(mt=f.eventMoveElem).closest("."+w).attr(g),pt=x(bt))&&(bt=mt.data("key"),Mt=pt.col(bt),Pt=pt.config.elem.attr("lay-filter"),Q={},nt.css("cursor",""),pt.scrollPatch(),mt.removeData(q),delete f.eventMoveElem,pt.cssRules(bt,function(kt){Mt.width=parseFloat(kt.style.width),layui.event.call(mt[0],_,"colResized("+Pt+")",{col:Mt,config:pt.config})}))}),f.docEvent=!0,K.on("click",function(yt){var mt=i(this),pt=mt.find(D),bt=pt.attr("lay-sort");if(!pt[0]||mt.data("resizing")===1)return mt.removeData("resizing");z.sort({field:mt,type:bt==="asc"?"desc":bt==="desc"?null:"asc",fromEvent:!0})}).find(D+" .layui-edge ").on("click",function(yt){var pt=i(this),mt=pt.index(),pt=pt.parents("th").eq(0).data("field");layui.stope(yt),mt===0?z.sort({field:pt,type:"asc",fromEvent:!0}):z.sort({field:pt,type:"desc",fromEvent:!0})}),z.commonMember=function(yt){var mt=i(this).parents("tr").eq(0).data("index"),pt=z.layBody.find('tr[data-index="'+mt+'"]'),bt=(p.cache[z.key]||[])[mt]||{},Mt={tr:pt,config:H,data:p.clearCacheKey(bt),dataCache:bt,index:mt,del:function(){p.cache[z.key][mt]=[],pt.remove(),z.scrollPatch()},update:function(Pt,kt){z.updateRow({index:mt,data:Pt=Pt||{},related:kt},function(Ft,Dt){Mt.data[Ft]=Dt})},setRowChecked:function(Pt){z.setRowChecked(i.extend({index:mt},Pt))}};return i.extend(Mt,yt)}),at=(z.elem.on("click",'input[name="layTableCheckbox"]+',function(yt){var pt=i(this),mt=pt.closest("td"),pt=pt.prev(),bt=(z.layBody.find('input[name="layTableCheckbox"]'),pt.parents("tr").eq(0).data("index")),Mt=pt[0].checked,Pt=pt.attr("lay-filter")==="layTableAllChoose";pt[0].disabled||(Pt?z.setRowChecked({index:"all",checked:Mt}):z.setRowChecked({index:bt,checked:Mt}),layui.stope(yt),layui.event.call(pt[0],_,"checkbox("+X+")",it.call(pt[0],{checked:Mt,type:Pt?"all":"one",getCol:function(){return z.col(mt.data("key"))}})))}),z.elem.on("click",'input[lay-type="layTableRadio"]+',function(yt){var pt=i(this),mt=pt.closest("td"),pt=pt.prev(),bt=pt[0].checked,Mt=pt.parents("tr").eq(0).data("index");if(layui.stope(yt),pt[0].disabled)return!1;z.setRowChecked({type:"radio",index:Mt}),layui.event.call(pt[0],_,"radio("+X+")",it.call(pt[0],{checked:bt,getCol:function(){return z.col(mt.data("key"))}}))}),z.layBody.on("mouseenter","tr",function(){var yt=i(this),mt=yt.index();yt.data("off")||z.layBody.find("tr:eq("+mt+")").addClass(A)}).on("mouseleave","tr",function(){var yt=i(this),mt=yt.index();yt.data("off")||z.layBody.find("tr:eq("+mt+")").removeClass(A)}).on("click","tr",function(yt){at.call(this,"row",yt)}).on("dblclick","tr",function(yt){at.call(this,"rowDouble",yt)}).on("contextmenu","tr",function(yt){H.defaultContextmenu||yt.preventDefault(),at.call(this,"rowContextmenu",yt)}),function(yt,mt){var pt=i(this);if(!pt.data("off")){if(yt!=="rowContextmenu"){var bt=[".layui-form-checkbox",".layui-form-switch",".layui-form-radio","[lay-unrow]"].join(",");if(i(mt.target).is(bt)||i(mt.target).closest(bt)[0])return}layui.event.call(this,_,yt+"("+X+")",it.call(pt.children("td")[0],{e:mt}))}}),ut=function(yt,mt){var pt,bt,Mt;(yt=i(yt)).data("off")||(Mt=yt.data("field"),bt=yt.data("key"),bt=z.col(bt),pt=yt.closest("tr").data("index"),pt=p.cache[z.key][pt],yt.children(rt),(bt=typeof bt.edit=="function"?bt.edit(pt):bt.edit)&&((bt=i(bt==="textarea"?'<textarea class="layui-input '+T+'" lay-unrow></textarea>':'<input class="layui-input '+T+'" lay-unrow>'))[0].value=(Mt=yt.data("content")||pt[Mt])===void 0||Mt===null?"":Mt,yt.find("."+T)[0]||yt.append(bt),bt.focus(),mt)&&layui.stope(mt))},ft=(z.layBody.on("change","."+T,function(){var Mt=i(this),yt=Mt.parent(),mt=this.value,pt=Mt.parent().data("field"),Mt=Mt.closest("tr").data("index"),Mt=p.cache[z.key][Mt],bt=it.call(yt[0],{value:mt,field:pt,oldValue:Mt[pt],td:yt,reedit:function(){setTimeout(function(){ut(bt.td);var Pt={};Pt[pt]=bt.oldValue,bt.update(Pt)})},getCol:function(){return z.col(yt.data("key"))}}),Mt={};Mt[pt]=mt,bt.update(Mt),layui.event.call(yt[0],_,"edit("+X+")",bt)}).on("blur","."+T,function(){i(this).remove()}),z.layBody.on(H.editTrigger,"td",function(yt){ut(this,yt)}).on("mouseenter","td",function(){dt.call(this)}).on("mouseleave","td",function(){dt.call(this,"hide")}),z.layTotal.on("mouseenter","td",function(){dt.call(this)}).on("mouseleave","td",function(){dt.call(this,"hide")}),"layui-table-grid-down"),dt=function(yt){var mt=i(this),pt=mt.children(rt);mt.data("off")||mt.parent().hasClass($)||(yt?mt.find(".layui-table-grid-down").remove():!(pt.prop("scrollWidth")>pt.prop("clientWidth")||0<pt.find("br").length)||H.lineStyle||pt.find("."+ft)[0]||mt.append('<div class="'+ft+'"><i class="layui-icon layui-icon-down"></i></div>'))},xt=function(yt,mt){var pt=i(this),Ft=pt.parent(),bt=Ft.data("key"),Mt=z.col(bt),Pt=Ft.parent().data("index"),kt=Ft.children(rt),Ft="layui-table-cell-c",Dt=i('<i class="layui-icon layui-icon-up '+Ft+'">');(mt=mt||Mt.expandedMode||H.cellExpandedMode)==="tips"?z.tipsIndex=o.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(kt.height()+23)+"px;"+(H.size==="sm"?"padding: 4px 15px; font-size: 12px;":H.size==="lg"?"padding: 14px 15px;":"")+'">',kt.html(),"</div>",'<i class="layui-icon layui-table-tips-c layui-icon-close"></i>'].join(""),kt[0],{tips:[3,""],time:-1,anim:-1,maxWidth:h.ios||h.android?300:z.elem.width()/2,isOutAnim:!1,skin:"layui-table-tips",success:function(Gt,Vt){Gt.find(".layui-table-tips-c").on("click",function(){o.close(Vt)})}}):(z.elem.find("."+Ft).trigger("click"),z.cssRules(bt,function(Gt){var Vt=Gt.style.width,fe=Mt.expandedWidth||H.cellExpandedWidth;fe<parseFloat(Vt)&&(fe=parseFloat(Vt)),Dt.data("cell-width",Vt),Gt.style.width=fe+"px",setTimeout(function(){z.scrollPatch()})}),z.setRowActive(Pt,$),kt.next("."+Ft)[0]||kt.after(Dt),Dt.on("click",function(){var Gt=i(this);z.setRowActive(Pt,[$,A].join(" "),!0),z.cssRules(bt,function(Vt){Vt.style.width=Gt.data("cell-width"),setTimeout(function(){z.resize()})}),Gt.remove(),kt.scrollTop(0),kt.scrollLeft(0)})),pt.remove(),layui.stope(yt)},vt=(z.layBody.on("click","."+ft,function(yt){xt.call(this,yt)}),z.layTotal.on("click","."+ft,function(yt){xt.call(this,yt,"tips")}),function(yt){var mt=i(this),pt=mt.closest("td"),bt=mt.parents("tr").eq(0).data("index");z.setRowActive(bt),layui.event.call(this,_,(yt||"tool")+"("+X+")",it.call(this,{event:mt.attr("lay-event"),getCol:function(){return z.col(pt.data("key"))}}))}),_t=(z.layBody.on("click","*[lay-event]",function(yt){vt.call(this),layui.stope(yt)}).on("dblclick","*[lay-event]",function(yt){vt.call(this,"toolDouble"),layui.stope(yt)}),z.layMain.on("scroll",function(){var mt=i(this),yt=mt.scrollLeft(),mt=mt.scrollTop();z.layHeader.scrollLeft(yt),z.layTotal.scrollLeft(yt),z.layFixed.find(P).scrollTop(mt),o.close(z.tipsIndex)}),window.requestAnimationFrame||function(yt){return setTimeout(yt,1e3/60)});z.layFixed.find(P).on("mousewheel DOMMouseScroll",function(yt){var mt=yt.originalEvent.wheelDelta||-yt.originalEvent.detail,pt=z.layMain.scrollTop(),bt=100,Mt=(yt.preventDefault(),function(){0<bt&&(bt-=10,pt+=0<mt?-10:10,z.layMain.scrollTop(pt),_t(Mt))});_t(Mt)})},V.prototype.getElementSize=function(z){if(window.getComputedStyle)return z=window.getComputedStyle(z,null),{height:parseFloat(z.height||"0"),width:parseFloat(z.width||"0"),borderTopWidth:parseFloat(z.borderTopWidth||"0"),borderRightWidth:parseFloat(z.borderRightWidth||"0"),borderBottomWidth:parseFloat(z.borderBottomWidth||"0"),borderLeftWidth:parseFloat(z.borderLeftWidth||"0"),paddingTop:parseFloat(z.paddingTop||"0"),paddingRight:parseFloat(z.paddingRight||"0"),paddingBottom:parseFloat(z.paddingBottom||"0"),paddingLeft:parseFloat(z.paddingLeft||"0"),marginTop:parseFloat(z.marginTop||"0"),marginRight:parseFloat(z.marginRight||"0"),marginBottom:parseFloat(z.marginBottom||"0"),marginLeft:parseFloat(z.marginLeft||"0"),boxSizing:z.boxSizing}},V.prototype.getContentWidth=function(z){var H;return!(z[0].nodeType===9||r.ie&&z.css("box-sizing")==="border-box"||z.css("display")==="none")&&(H=this.getElementSize(z[0]))!==void 0&&H.width?H.boxSizing==="border-box"?H.width-H.paddingLeft-H.paddingRight-H.borderLeftWidth-H.borderRightWidth:H.width:z.width()},j.on("resize",function(){layui.each(f.that,function(){this.resize()})}),et.on("click",function(){et.trigger("table.remove.tool.panel")}),et.on("table.remove.tool.panel",function(){i("."+B).remove()}),p.init=function(z,H){H=H||{};var X=typeof z=="object"?z:i(typeof z=="string"?'table[lay-filter="'+z+'"]':m+"[lay-data], "+m+"[lay-options]"),K="Table element property lay-data configuration item has a syntax error: ";return X.each(function(){var rt,nt=i(this),at=nt.attr("lay-data"),at=r.options(this,{attr:at?"lay-data":null,errorText:K+(at||nt.attr("lay-options"))}),Q=i.extend({elem:this,cols:[],data:[],skin:nt.attr("lay-skin"),size:nt.attr("lay-size"),even:typeof nt.attr("lay-even")=="string"},p.config,H,at),it=(z&&nt.hide(),nt.find("thead>tr").each(function(ut){Q.cols[ut]=[],i(this).children().each(function(ft){var xt=i(this),dt=xt.attr("lay-data"),dt=r.options(this,{attr:dt?"lay-data":null,errorText:K+(dt||xt.attr("lay-options"))}),xt=i.extend({title:xt.text(),colspan:parseInt(xt.attr("colspan"))||1,rowspan:parseInt(xt.attr("rowspan"))||1},dt);Q.cols[ut].push(xt)})}),nt.find("tbody>tr")),at=p.render(Q);!it.length||H.data||at.config.url||(rt=0,p.eachCols(at.config.id,function(ut,ft){it.each(function(dt){Q.data[dt]=Q.data[dt]||{};var xt=i(this),vt=ft.field;Q.data[dt][vt]=xt.children("td").eq(rt).html()}),rt++}),at.reloadData({data:Q.data}))}),this},f.that={},f.config={},function(z,H,X,K){var rt,nt;K.colGroup&&(rt=0,z++,K.CHILD_COLS=[],nt=X+(parseInt(K.rowspan)||1),layui.each(H[nt],function(Q,it){it.parentKey?it.parentKey===K.key&&(it.PARENT_COL_INDEX=z,K.CHILD_COLS.push(it),tt(z,H,nt,it)):it.PARENT_COL_INDEX||1<=rt&&rt==(K.colspan||1)||(it.PARENT_COL_INDEX=z,K.CHILD_COLS.push(it),rt+=parseInt(1<it.colspan?it.colspan:1),tt(z,H,nt,it))}))});p.eachCols=function(K,H,X){var K=f.config[K]||{},rt=[],nt=(X=i.extend(!0,[],X||K.cols),layui.each(X,function(Q,it){if(Q)return!0;layui.each(it,function(at,ut){tt(0,X,Q,ut),ut.PARENT_COL_INDEX||rt.push(ut)})}),function(Q){layui.each(Q||rt,function(it,at){if(at.CHILD_COLS)return nt(at.CHILD_COLS);typeof H=="function"&&H(it,at)})});nt()},p.checkStatus=function(rt){var H=0,X=[],K=[],rt=p.cache[rt]||[];return layui.each(rt,function(nt,Q){layui.type(Q)==="array"||Q[p.config.disabledName]?H++:Q[p.config.checkName]&&(X.push(p.clearCacheKey(Q)),K.push(Q))}),{data:X,dataCache:K,isAll:!(!rt.length||!X.length)&&X.length===rt.length-H}},p.setRowChecked=function(z,H){z=x(z),z&&z.setRowChecked(H)},p.getData=function(X){var H=[],X=p.cache[X]||[];return layui.each(X,function(K,rt){layui.type(rt)!=="array"&&H.push(p.clearCacheKey(rt))}),H},p.resize=function(z){z?y(z)&&x(z).resize():layui.each(f.that,function(){this.resize()})},p.exportFile=function(z,H,X){H=H||p.clearCacheKey(p.cache[z]);var K=(X=typeof X=="object"?X:(K={},X&&(K.type=X),K)).type||"csv",rt=f.that[z],nt=f.config[z]||{},Q={csv:"text/csv",xls:"application/vnd.ms-excel"}[K],it=document.createElement("a");if(h.ie)return u.error("IE_NOT_SUPPORT_EXPORTS");var at,ut,ft,dt,xt=nt.tree&&nt.tree.view;if(xt)try{H=i.extend(!0,[],p.cache[z]),H=function vt(_t){return _t.reduce(function(yt,mt){var pt=mt.children||[];return delete mt.children,yt.concat(mt,vt(pt))},[])}(Array.from(H))}catch{}it.href="data:"+Q+";charset=utf-8,\uFEFF"+encodeURIComponent((at=[],ut=[],ft=[],dt={},layui.each(H,function(vt,_t){var yt=[];typeof z=="object"?(layui.each(z,function(mt,pt){vt==0&&at.push(pt||"")}),layui.each(layui.isArray(_t)?i.extend([],_t):p.clearCacheKey(_t),function(mt,pt){yt.push('"'+(pt||"")+'"')})):p.eachCols(z,function(mt,pt){var bt;pt.ignoreExport===!1||pt.field&&pt.type=="normal"?pt.hide&&pt.ignoreExport!==!1||pt.ignoreExport===!0?vt==0&&(dt[pt.field]=!0):((bt=_t[pt.field])!==void 0&&bt!==null||(bt=""),vt==0&&at.push(pt.fieldTitle||pt.title||pt.field||""),bt=(bt=d.call(rt,{item3:pt,content:bt,tplData:_t,text:"text",obj:{td:function(Mt){return xt&&(vt=_t.LAY_DATA_INDEX),rt.layBody.find('tr[data-index="'+vt+'"]>td').filter('[data-field="'+Mt+'"]')}}})).replace(/"/g,'""'),yt.push(bt='"'+bt+'"')):pt.field&&pt.type!=="normal"&&vt==0&&(dt[pt.field]=!0)}),ut.push(yt.join(","))}),rt&&layui.each(rt.dataTotal,function(vt,_t){dt[_t.field]||ft.push('"'+(_t.total||"")+'"')}),at.join(",")+`\r
`+ut.join(`\r
`)+`\r
`+ft.join(","))),it.download=(X.title||nt.title||"table_"+(nt.index||""))+"."+K,document.body.appendChild(it),it.click(),document.body.removeChild(it)},p.getOptions=y,p.hideCol=function(z,H){var X=x(z);X&&(layui.type(H)==="boolean"?X.eachCols(function(K,it){var nt=it.key,Q=X.col(nt),it=it.parentKey;Q.hide!=H&&(Q=Q.hide=H,X.elem.find('*[data-key="'+nt+'"]')[Q?"addClass":"removeClass"](v),X.setParentCol(Q,it))}):(H=layui.isArray(H)?H:[H],layui.each(H,function(K,rt){X.eachCols(function(nt,Q){var it,at;rt.field===Q.field&&(it=Q.key,at=X.col(it),Q=Q.parentKey,"hide"in rt)&&at.hide!=rt.hide&&(at=at.hide=!!rt.hide,X.elem.find('*[data-key="'+it+'"]')[at?"addClass":"removeClass"](v),X.setParentCol(at,Q))})})),i("."+B).remove(),X.resize())},p.reload=function(z,H,X,K){if(y(z))return(z=x(z)).reload(H,X,K),f.call(z)},p.reloadData=function(){var z=i.extend([],arguments),H=(z[3]="reloadData",new RegExp("^("+["elem","id","cols","width","height","maxHeight","toolbar","defaultToolbar","className","css","pagebar"].join("|")+")$"));return layui.each(z[1],function(X,K){H.test(X)&&delete z[1][X]}),p.reload.apply(null,z)},p.render=function(z){return z=new V(z),f.call(z)},p.clearCacheKey=function(z){return delete(z=i.extend({},z))[p.config.checkName],delete z[p.config.indexName],delete z[p.config.initIndexName],delete z[p.config.numbersName],delete z[p.config.disabledName],z},i(function(){p.init()}),e(_,p)}),layui.define(["table"],function(e){var i=layui.$,r=layui.form,s=layui.table,a=layui.hint(),o={config:{},on:s.on,eachCols:s.eachCols,index:s.index,set:function(G){var F=this;return F.config=i.extend({},F.config,G),F},resize:s.resize,getOptions:s.getOptions,hideCol:s.hideCol,renderData:s.renderData},c=function(){var G=this,F=G.config,U=F.id||F.index;return{config:F,reload:function(j,et){G.reload.call(G,j,et)},reloadData:function(j,et){o.reloadData(U,j,et)}}},l=function(G){var F=c.that[G];return F||a.error(G?"The treeTable instance with ID '"+G+"' not found":"ID argument required"),F||null},u="lay-table-id",h="layui-hide",p=".layui-table-body",f=".layui-table-main",x=".layui-table-fixed-l",y=".layui-table-fixed-r",d="layui-table-checked",_="layui-table-tree",g="LAY_DATA_INDEX",m="LAY_DATA_INDEX_HISTORY",v="LAY_PARENT_INDEX",S="LAY_CHECKBOX_HALF",M="LAY_EXPAND",w="LAY_HAS_EXPANDED",L="LAY_ASYNC_STATUS",P=["all","parent","children","none"],N=/<[^>]+?>/,k=["flexIconClose","flexIconOpen","iconClose","iconOpen","iconLeaf","icon"],D=function(G){var F=this;F.index=++o.index,F.config=i.extend(!0,{},F.config,o.config,G),F.init(),F.render()},C=function(G,F,U){var j=s.cache[G];layui.each(U||j,function(et,V){var tt=V[g]||"";tt.indexOf("-")!==-1&&(j[tt]=V),V[F]&&C(G,F,V[F])})},T=function(G,F,U){var j=l(G),et=(U!=="reloadData"&&(j.status={expand:{}}),i.extend(!0,{},j.getOptions(),F)),V=et.tree,tt=V.customName.children,z=V.customName.id,H=(delete F.hasNumberCol,delete F.hasChecboxCol,delete F.hasRadioCol,s.eachCols(null,function(K,rt){rt.type==="numbers"?F.hasNumberCol=!0:rt.type==="checkbox"?F.hasChecboxCol=!0:rt.type==="radio"&&(F.hasRadioCol=!0)},et.cols),F.parseData),X=F.done;U==="reloadData"&&et.scrollPos==="fixed"&&(j.scrollTopCache=j.config.elem.next().find(p).scrollTop()),et.url?U&&(!H||H.mod)||(F.parseData=function(){var K=this,nt=arguments,rt=nt[0],nt=(layui.type(H)==="function"&&(rt=H.apply(K,nt)||nt[0]),K.response.dataName);return V.data.isSimpleData&&!V.async.enable&&(rt[nt]=j.flatToTree(rt[nt])),$(rt[nt],function(Q){Q[M]=M in Q?Q[M]:Q[z]!==void 0&&j.status.expand[Q[z]]},tt),K.autoSort&&K.initSort&&K.initSort.type&&layui.sort(rt[nt],K.initSort.field,K.initSort.type==="desc",!0),j.initData(rt[nt]),rt},F.parseData.mod=!0):F.data!==void 0&&(F.data=F.data||[],V.data.isSimpleData&&(F.data=j.flatToTree(F.data)),j.initData(F.data)),U&&(!X||X.mod)||(F.done=function(){var K,rt=arguments,nt=rt[3],Q=nt==="renderData",it=(Q||delete j.isExpandAll,this.elem.next()),at=(j.updateStatus(null,{LAY_HAS_EXPANDED:!1}),C(G,tt),it.find('[name="layTableCheckbox"][lay-filter="layTableAllChoose"]'));if(at.length&&(K=o.checkStatus(G),at.prop({checked:K.isAll&&K.data.length,indeterminate:!K.isAll&&K.data.length})),!Q&&et.autoSort&&et.initSort&&et.initSort.type&&o.sort(G),j.renderTreeTable(it),nt==="reloadData"&&this.scrollPos==="fixed"&&it.find(p).scrollTop(j.scrollTopCache),layui.type(X)==="function")return X.apply(this,rt)},F.done.mod=!0),F&&F.tree&&F.tree.view&&layui.each(k,function(K,rt){F.tree.view[rt]!==void 0&&(F.tree.view[rt]=j.normalizedIcon(F.tree.view[rt]))})};D.prototype.init=function(){var G=this.config,F=G.tree.data.cascade,F=(P.indexOf(F)===-1&&(G.tree.data.cascade="all"),s.render(i.extend({},G,{data:[],url:"",done:null}))),U=F.config.id;(c.that[U]=this).tableIns=F,T(U,G)},D.prototype.config={tree:{customName:{children:"children",isParent:"isParent",name:"name",id:"id",pid:"parentId",icon:"icon"},view:{indent:14,flexIconClose:'<i class="layui-icon layui-icon-triangle-r"></i>',flexIconOpen:'<i class="layui-icon layui-icon-triangle-d"></i>',showIcon:!0,icon:"",iconClose:'<i class="layui-icon layui-icon-folder"></i>',iconOpen:'<i class="layui-icon layui-icon-folder-open"></i>',iconLeaf:'<i class="layui-icon layui-icon-leaf"></i>',showFlexIconIfNotParent:!1,dblClickExpand:!0,expandAllDefault:!1},data:{isSimpleData:!1,rootPid:null,cascade:"all"},async:{enable:!1,url:"",type:null,contentType:null,headers:null,where:null,autoParam:[]},callback:{beforeExpand:null,onExpand:null}}},D.prototype.normalizedIcon=function(G){return G?N.test(G)?G:'<i class="'+G+'"></i>':""},D.prototype.getOptions=function(){return this.tableIns?s.getOptions(this.tableIns.config.id):this.config},D.prototype.flatToTree=function(G){var F,U,j,et,V,tt,z,H,rt=this.getOptions(),X=rt.tree,K=X.customName,rt=rt.id;return G=G||s.cache[rt],rt=G,F=K.id,U=K.pid,j=K.children,et=X.data.rootPid,F=F||"id",U=U||"parentId",j=j||"children",z={},H=[],layui.each(rt,function(nt,Q){V=F+Q[F],tt=F+Q[U],z[V]||(z[V]={},z[V][j]=[]);var it={};it[j]=z[V][j],z[V]=i.extend({},Q,it),((et?z[V][U]===et:!z[V][U])?H:(z[tt]||(z[tt]={},z[tt][j]=[]),z[tt][j])).push(z[V])}),H},D.prototype.treeToFlat=function(G,F,U){var j=this,et=j.getOptions().tree.customName,V=et.children,tt=et.pid,z=[];return layui.each(G,function(K,X){var K=(U?U+"-":"")+K,rt=i.extend({},X);rt[tt]=typeof X[tt]<"u"?X[tt]:F,z.push(rt),z=z.concat(j.treeToFlat(X[V],X[et.id],K))}),z},D.prototype.getTreeNode=function(G){var F,U,j=this;return G?(U=(F=j.getOptions()).tree,F.id,U.customName,{data:G,dataIndex:G[g],getParentNode:function(){return j.getNodeByIndex(G[v])}}):a.error("找不到节点数据")},D.prototype.getNodeByIndex=function(G){var F,U,j=this,et=j.getNodeDataByIndex(G);return et?((U=j.getOptions()).tree.customName.parent,F=U.id,(U={data:et,dataIndex:et[g],getParentNode:function(){return j.getNodeByIndex(et[v])},update:function(V){return o.updateNode(F,G,V)},remove:function(){return o.removeNode(F,G)},expand:function(V){return o.expandNode(F,i.extend({},V,{index:G}))},setChecked:function(V){return o.setRowChecked(F,i.extend({},V,{index:G}))}}).dataIndex=G,U):a.error("找不到节点数据")},D.prototype.getNodeById=function(G){var j=this.getOptions(),F=j.tree.customName.id,U="",j=o.getData(j.id,!0);if(layui.each(j,function(et,V){if(V[F]===G)return U=V[g],!0}),U)return this.getNodeByIndex(U)},D.prototype.getNodeDataByIndex=function(G,F,U){var et=this.getOptions(),j=et.tree,et=et.id,et=s.cache[et],V=et[G];if(U!=="delete"&&V)return i.extend(V,U),F?i.extend({},V):V;for(var tt=et,z=String(G).split("-"),H=0,X=j.customName.children;H<z.length;H++){if(U&&H===z.length-1){if(U==="delete")return(H?tt[X]:tt).splice(z[H],1)[0];i.extend((H?tt[X]:tt)[z[H]],U)}tt=(H?tt[X]:tt)[z[H]]}return F?i.extend({},tt):tt},o.getNodeDataByIndex=function(G,F){if(G=l(G),G)return G.getNodeDataByIndex(F,!0)},D.prototype.initData=function(G,F){var U=this.getOptions(),j=U.tree,U=U.id,j=(G=G||this.getTableData(),j.customName),et=j.isParent,V=j.children,tt=function(z,H){layui.each(z,function(X,K){et in K||(K[et]=!(!K[V]||!K[V].length)),K[m]=K[g],K[v]=H=H||"",X=K[g]=(H?H+"-":"")+X,tt(K[V]||[],X)})};return tt(G,F),C(U,V,G),G},A={};var A,E=function(G,F,U){return A[G]||(A[G]=layui.debounce(F,U)),A[G]},I=function(G,F,U,j,et,V){var X=G.trElem,tt=G.tableViewElem||X.closest(".layui-table-view"),z=G.tableId||tt.attr(u),H=G.options||s.getOptions(z),X=G.dataIndex||X.attr("lay-data-index"),K=l(z),rt=H.tree||{},nt=rt.customName||{},Q=nt.isParent,it=K.getNodeDataByIndex(X),at=layui.type(F)!=="boolean",ut=at?!it[M]:F,ft=it[Q]?ut:null;if(et&&ut!=it[M]&&(!it[L]||it[L]==="local")){var dt=rt.callback.beforeExpand;if(layui.type(dt)==="function"&&dt(z,it,F)===!1)return ft}var dt=it[w],xt=tt.find('tr[lay-data-index="'+X+'"]'),vt=xt.find(".layui-table-tree-flexIcon"),_t=(K.updateNodeIcon({scopeEl:xt,isExpand:ut,isParent:it[Q]}),it[M]=ut,it[nt.id]);if(_t!==void 0&&(K.status.expand[_t]=ut),ft!==null){if(_t=it[nt.children]||[],ut)if(dt){if(!_t.length)return;xt.nextAll(_t.map(function(fe,zt,ge){return'tr[lay-data-index="'+fe[g]+'"]'}).join(",")).removeClass(h),layui.each(_t,function(fe,zt){zt[Q]&&(!U||at||zt[M]?zt[M]&&I({dataIndex:zt[g],trElem:tt.find('tr[lay-data-index="'+zt[g]+'"]').first(),tableViewElem:tt,tableId:z,options:H},!0,void 0,void 0,void 0,V):I({dataIndex:zt[g],trElem:tt.find('tr[lay-data-index="'+zt[g]+'"]').first(),tableViewElem:tt,tableId:z,options:H},F,U,j,et,V))})}else{var yt,mt,pt,bt,Mt,Pt,kt,Ft,Dt,Gt,Vt,dt=rt.async||{},xt=dt.url||H.url;if(dt.enable&&it[Q]&&(!it[L]||it[L]==="error"))return it[L]="loading",vt.html('<i class="layui-icon layui-icon-loading layui-anim layui-anim-loop layui-anim-rotate"></i>'),yt=function(ge){it[L]="success",it[nt.children]=ge,K.initData(it[nt.children],it[g]),I(G,!0,!at&&U,j,et,V)},pt=dt.format,layui.type(pt)==="function"?pt(it,H,yt):(mt=i.extend({},dt.where||H.where),pt=dt.autoParam,layui.each(pt,function(ge,Jt){Jt=Jt.split("="),mt[Jt[0].trim()]=it[(Jt[1]||Jt[0]).trim()]}),(pt=dt.contentType||H.contentType)&&pt.indexOf("application/json")==0&&(mt=JSON.stringify(mt)),Dt=dt.method||H.method,bt=dt.dataType||H.dataType,Mt=dt.jsonpCallback||H.jsonpCallback,Pt=dt.headers||H.headers,kt=dt.parseData||H.parseData,Ft=dt.response||H.response,i.ajax({type:Dt||"get",url:xt,contentType:pt,data:mt,dataType:bt||"json",jsonpCallback:Mt,headers:Pt||{},success:function(ge){(ge=typeof kt=="function"&&kt.call(H,ge)||ge)[Ft.statusName]!=Ft.statusCode?(it[L]="error",it[M]=!1,vt.html('<i class="layui-icon layui-icon-refresh"></i>')):yt(ge[Ft.dataName])},error:function(ge,Jt){it[L]="error",it[M]=!1,typeof H.error=="function"&&H.error(ge,Jt)}})),ft;it[w]=!0,_t.length&&(!H.initSort||H.url&&!H.autoSort||((dt=H.initSort).type?layui.sort(_t,dt.field,dt.type==="desc",!0):layui.sort(_t,s.config.indexName,null,!0)),K.initData(it[nt.children],it[g]),Dt=s.getTrHtml(z,_t,null,null,X),Gt={trs:i(Dt.trs.join("")),trs_fixed:i(Dt.trs_fixed.join("")),trs_fixed_r:i(Dt.trs_fixed_r.join(""))},Vt=(X.split("-").length-1||0)+1,layui.each(_t,function(ge,Jt){Gt.trs.eq(ge).attr({"data-index":Jt[g],"lay-data-index":Jt[g],"data-level":Vt}).data("index",Jt[g]),Gt.trs_fixed.eq(ge).attr({"data-index":Jt[g],"lay-data-index":Jt[g],"data-level":Vt}).data("index",Jt[g]),Gt.trs_fixed_r.eq(ge).attr({"data-index":Jt[g],"lay-data-index":Jt[g],"data-level":Vt}).data("index",Jt[g])}),tt.find(f).find('tbody tr[lay-data-index="'+X+'"]').after(Gt.trs),tt.find(x).find('tbody tr[lay-data-index="'+X+'"]').after(Gt.trs_fixed),tt.find(y).find('tbody tr[lay-data-index="'+X+'"]').after(Gt.trs_fixed_r),K.renderTreeTable(Gt.trs,Vt),U)&&!at&&layui.each(_t,function(ge,Jt){I({dataIndex:Jt[g],trElem:tt.find('tr[lay-data-index="'+Jt[g]+'"]').first(),tableViewElem:tt,tableId:z,options:H},F,U,j,et,V)})}else K.isExpandAll=!1,(U&&!at?(layui.each(_t,function(fe,zt){I({dataIndex:zt[g],trElem:tt.find('tr[lay-data-index="'+zt[g]+'"]').first(),tableViewElem:tt,tableId:z,options:H},F,U,j,et,V)}),tt.find(_t.map(function(fe,zt,ge){return'tr[lay-data-index="'+fe[g]+'"]'}).join(","))):(xt=K.treeToFlat(_t,it[nt.id],X),tt.find(xt.map(function(fe,zt,ge){return'tr[lay-data-index="'+fe[g]+'"]'}).join(",")))).addClass(h);E("resize-"+z,function(){o.resize(z)},0)(),et&&it[L]!=="loading"&&(pt=rt.callback.onExpand,layui.type(pt)==="function")&&pt(z,it,ut),layui.type(V)==="function"&&it[L]!=="loading"&&V(z,it,ut)}return ft},B=(o.expandNode=function(tt,F){var U,j,et,V,tt=l(tt);if(tt)return U=(F=F||{}).index,j=F.expandFlag,et=F.inherit,V=F.callbackFlag,tt=tt.getOptions().elem.next(),I({trElem:tt.find('tr[lay-data-index="'+U+'"]').first()},j,et,null,V,F.done)},o.expandAll=function(G,F){if(layui.type(F)!=="boolean")return a.error("expandAll 的展开状态参数只接收true/false");var U=l(G);if(U){U.isExpandAll=F;var j=U.getOptions(),et=j.tree,V=j.elem.next(),tt=et.customName.isParent,z=et.customName.id,H=et.view.showFlexIconIfNotParent;if(F){if(F=o.getData(G,!0),et.async.enable){var X=!0;if(layui.each(F,function(Q,it){if(it[tt]&&!it[L])return!(X=!1)}),!X)return void layui.each(o.getData(G),function(Q,it){o.expandNode(G,{index:it[g],expandFlag:!0,inherit:!0})})}var K=!0;if(layui.each(F,function(Q,it){if(it[tt]&&!it[w])return!(K=!1)}),K)U.updateStatus(null,function(Q){(Q[tt]||H)&&(Q[M]=!0,Q[z]!==void 0)&&(U.status.expand[Q[z]]=!0)}),V.find('tbody tr[data-level!="0"]').removeClass(h),V.find(".layui-table-tree-flexIcon").html(et.view.flexIconOpen),et.view.showIcon&&V.find(".layui-table-tree-nodeIcon:not(.layui-table-tree-iconCustom,.layui-table-tree-iconLeaf)").html(et.view.iconOpen);else{if(U.updateStatus(null,function(it){(it[tt]||H)&&(it[M]=!0,it[w]=!0,it[z]!==void 0)&&(U.status.expand[it[z]]=!0)}),j.initSort&&j.initSort.type&&j.autoSort)return o.sort(G);var rt,j=s.getTrHtml(G,F),nt={trs:i(j.trs.join("")),trs_fixed:i(j.trs_fixed.join("")),trs_fixed_r:i(j.trs_fixed_r.join(""))};layui.each(F,function(it,at){var ut=at[g].split("-").length-1;rt={"data-index":at[g],"lay-data-index":at[g],"data-level":ut},nt.trs.eq(it).attr(rt).data("index",at[g]),nt.trs_fixed.eq(it).attr(rt).data("index",at[g]),nt.trs_fixed_r.eq(it).attr(rt).data("index",at[g])}),layui.each(["main","fixed-l","fixed-r"],function(it,at){V.find(".layui-table-"+at+" tbody").html(nt[["trs","trs_fixed","trs_fixed_r"][it]])}),U.renderTreeTable(V,0,!1)}}else U.updateStatus(null,function(Q){(Q[tt]||H)&&(Q[M]=!1,Q[z]!==void 0)&&(U.status.expand[Q[z]]=!1)}),V.find('.layui-table-box tbody tr[data-level!="0"]').addClass(h),V.find(".layui-table-tree-flexIcon").html(et.view.flexIconClose),et.view.showIcon&&V.find(".layui-table-tree-nodeIcon:not(.layui-table-tree-iconCustom,.layui-table-tree-iconLeaf)").html(et.view.iconClose);o.resize(G)}},D.prototype.updateNodeIcon=function(et){var F=this.getOptions().tree||{},U=et.scopeEl,j=et.isExpand,et=et.isParent;U.find(".layui-table-tree-flexIcon").css("visibility",et||F.view.showFlexIconIfNotParent?"visible":"hidden").html(j?F.view.flexIconOpen:F.view.flexIconClose),F.view.showIcon&&(U=U.find(".layui-table-tree-nodeIcon:not(.layui-table-tree-iconCustom)"),j=et?j?F.view.iconOpen:F.view.iconClose:F.view.iconLeaf,U.toggleClass("layui-table-tree-iconLeaf",!et).html(j))},D.prototype.renderTreeTable=function(G,F,U){var j=this,et=j.getOptions(),V=et.elem.next(),tt=(V.hasClass(_)||V.addClass(_),et.id),z=et.tree||{},H=(z.data,z.view||{}),X=z.customName||{},K=X.isParent,rt=(V.attr("lay-filter"),j),nt=et.data.length,Q=((F=F||0)||(V.find(".layui-table-body tr:not([data-level])").attr("data-level",F),layui.each(s.cache[tt],function(ut,ft){nt&&(ft[g]=String(ut)),ft=ft[g],V.find('.layui-table-main tbody tr[data-level="0"]:eq('+ut+")").attr("lay-data-index",ft),V.find('.layui-table-fixed-l tbody tr[data-level="0"]:eq('+ut+")").attr("lay-data-index",ft),V.find('.layui-table-fixed-r tbody tr[data-level="0"]:eq('+ut+")").attr("lay-data-index",ft)})),null),it=X.name,at=H.indent||14;if(layui.each(G.find('td[data-field="'+it+'"]'),function(ut,_t){var dt,xt,vt=(_t=i(_t)).closest("tr"),_t=_t.children(".layui-table-cell");_t.hasClass("layui-table-tree-item")||(xt=vt.attr("lay-data-index"))&&(vt=V.find('tr[lay-data-index="'+xt+'"]'),(dt=rt.getNodeDataByIndex(xt))[M]&&dt[K]&&((Q=Q||{})[xt]=!0),dt[S]&&vt.find('input[type="checkbox"][name="layTableCheckbox"]').prop("indeterminate",!0),xt=_t.html(),(_t=vt.find('td[data-field="'+it+'"]>div.layui-table-cell')).addClass("layui-table-tree-item"),_t.html(['<div class="layui-inline layui-table-tree-flexIcon" ','style="',"margin-left: "+at*vt.attr("data-level")+"px;",dt[K]||H.showFlexIconIfNotParent?"":" visibility: hidden;",'">',dt[M]?H.flexIconOpen:H.flexIconClose,"</div>",H.showIcon?'<div class="layui-inline layui-table-tree-nodeIcon'+(dt[X.icon]||H.icon?" layui-table-tree-iconCustom":"")+(dt[K]?"":" layui-table-tree-iconLeaf")+'">'+(j.normalizedIcon(dt[X.icon])||H.icon||(dt[K]?dt[M]?H.iconOpen:H.iconClose:H.iconLeaf)||"")+"</div>":"",xt].join("")).find(".layui-table-tree-flexIcon").on("click",function(yt){layui.stope(yt),I({trElem:vt},null,null,null,!0)}))}),!F&&z.view.expandAllDefault&&j.isExpandAll===void 0)return o.expandAll(tt,!0);(U!==!1&&Q?(layui.each(Q,function(ut,ft){ut=V.find('tr[lay-data-index="'+ut+'"]'),ut.find(".layui-table-tree-flexIcon").html(H.flexIconOpen),I({trElem:ut.first()},!0)}),E("renderTreeTable2-"+tt,function(){r.render(i(".layui-table-tree["+u+'="'+tt+'"]'))},0)):E("renderTreeTable-"+tt,function(){et.hasNumberCol&&B(j),r.render(i(".layui-table-tree["+u+'="'+tt+'"]'))},0))()},function(G){var F=G.getOptions(),U=F.elem.next(),j=0,et=U.find(".layui-table-main tbody tr"),V=U.find(".layui-table-fixed-l tbody tr"),tt=U.find(".layui-table-fixed-r tbody tr");layui.each(G.treeToFlat(s.cache[F.id]),function(z,H){H.LAY_HIDE||(G.getNodeDataByIndex(H[g]).LAY_NUM=++j,et.eq(z).find(".laytable-cell-numbers").html(j),V.eq(z).find(".laytable-cell-numbers").html(j),tt.eq(z).find(".laytable-cell-numbers").html(j))})}),$=(D.prototype.render=function(G){var F=this;F.tableIns=s[G==="reloadData"?"reloadData":"reload"](F.tableIns.config.id,i.extend(!0,{},F.config)),F.config=F.tableIns.config},D.prototype.reload=function(G,F,U){var j=this;G=G||{},delete j.haveInit,layui.each(G,function(et,V){layui.type(V)==="array"&&delete j.config[et]}),T(j.getOptions().id,G,U||!0),j.config=i.extend(F,{},j.config,G),j.render(U)},o.reloadData=function(){var G=i.extend(!0,[],arguments);return G[3]="reloadData",o.reload.apply(null,G)},function(G,F,U,j){var et=[];return layui.each(G,function(V,tt){layui.type(F)==="function"?F(tt):i.extend(tt,F),et.push(i.extend({},tt)),j||(et=et.concat($(tt[U],F,U,j)))}),et}),Y=(D.prototype.updateStatus=function(G,F,U){var j=this.getOptions(),et=j.tree;return G=G||s.cache[j.id],$(G,F,et.customName.children,U)},D.prototype.getTableData=function(){var G=this.getOptions();return s.cache[G.id]},o.updateStatus=function(j,F,U){var j=l(j),et=j.getOptions();return U=U||(et.url?s.cache[et.id]:et.data),j.updateStatus(U,F)},o.sort=function(G){var F,U,j,et,V,tt=l(G);tt&&(V=(F=tt.getOptions()).tree,U=o.getData(G),j=V.customName.children,et=function(z,H,X){layui.sort(z,H,X,!0),layui.each(z,function(K,rt){et(rt[j]||[],H,X)})},F.autoSort)&&((V=F.initSort).type?et(U,V.field,V.type==="desc"):et(U,s.config.indexName,null),s.cache[G]=U,tt.initData(U),o.renderData(G))},function(G){var F=G.config.id,U=l(F),j=G.data=o.getNodeDataByIndex(F,G.index),et=j[g],V=(G.dataIndex=et,G.update);G.update=function(){var tt=arguments,z=(i.extend(U.getNodeDataByIndex(et),tt[0]),V.apply(this,tt)),H=G.config.tree.customName.name;return H in tt[0]&&G.tr.find('td[data-field="'+H+'"]').children("div.layui-table-cell").removeClass("layui-table-tree-item"),U.renderTreeTable(G.tr,G.tr.attr("data-level"),!1),z},G.del=function(){o.removeNode(F,j)},G.setRowChecked=function(tt){o.setRowChecked(F,{index:j,checked:tt})}}),q=(o.updateNode=function(G,F,U){var j,et,V,tt,z,H=l(G);H&&((tt=H.getOptions()).tree,tt=(j=tt.elem.next()).find('tr[lay-data-index="'+F+'"]'),et=tt.attr("data-index"),V=tt.attr("data-level"),U)&&(tt=H.getNodeDataByIndex(F,!1,U),z=s.getTrHtml(G,[tt]),layui.each(["main","fixed-l","fixed-r"],function(X,K){j.find(".layui-table-"+K+' tbody tr[lay-data-index="'+F+'"]').replaceWith(i(z[["trs","trs_fixed","trs_fixed_r"][X]].join("")).attr({"data-index":et,"lay-data-index":F,"data-level":V}).data("index",et))}),H.renderTreeTable(j.find('tr[lay-data-index="'+F+'"]'),V))},o.removeNode=function(G,F,U){var j=l(G);if(j){var et,V=j.getOptions(),nt=V.tree,tt=nt.customName.isParent,z=nt.customName.children,H=V.elem.next(),X=[],K=s.cache[G],F=j.getNodeDataByIndex(layui.type(F)==="string"?F:F[g],!1,"delete"),rt=j.getNodeDataByIndex(F[v]),nt=(j.updateCheckStatus(rt),j.treeToFlat([F],F[nt.customName.pid],F[v])),F=(layui.each(nt,function(it,at){at=at[g],X.push('tr[lay-data-index="'+at+'"]'),at.indexOf("-")!==-1&&delete K[at]}),H.find(X.join(",")).remove(),j.initData());for(et in K)et.indexOf("-")!==-1&&et!==K[et][g]&&delete K[et];layui.each(j.treeToFlat(F),function(it,at){at[m]&&at[m]!==at[g]&&H.find('tr[lay-data-index="'+at[m]+'"]').attr({"data-index":at[g],"lay-data-index":at[g]}).data("index",at[g])}),layui.each(K,function(it,at){H.find('tr[data-level="0"][lay-data-index="'+at[g]+'"]').attr("data-index",it).data("index",it)}),V.hasNumberCol&&B(j),rt&&(nt=H.find('tr[lay-data-index="'+rt[g]+'"]'),U||(rt[tt]=!(!rt[z]||!rt[z].length)),j.updateNodeIcon({scopeEl:nt,isExpand:rt[M],isParent:rt[tt]})),o.resize(G)}},o.addNodes=function(G,F){var U=l(G);if(U){var j=U.getOptions(),et=j.tree,V=j.elem.next(),tt=s.config.checkName,z=(F=F||{}).parentIndex,X=F.index,K=F.data,F=F.focus,H=(z=layui.type(z)==="number"?z.toString():z)?U.getNodeDataByIndex(z):null,X=layui.type(X)==="number"?X:-1,K=i.extend(!0,[],layui.isArray(K)?K:[K]);if(layui.each(K,function(dt,xt){tt in xt||!H||(xt[tt]=H[tt])}),U.getTableData(),H){var rt=et.customName.isParent,Q=et.customName.children;H[rt]=!0;var nt=(nt=H[Q])?(it=nt.splice(X===-1?nt.length:X),H[Q]=nt.concat(K,it)):H[Q]=K,Q=(U.updateStatus(nt,function(dt){(dt[rt]||et.view.showFlexIconIfNotParent)&&(dt[w]=!1)}),U.treeToFlat(nt));V.find(Q.map(function(dt){return'tr[lay-data-index="'+dt[g]+'"]'}).join(",")).remove(),U.initData(),H[w]=!1,H[L]="local",I({trElem:V.find('tr[lay-data-index="'+z+'"]')},!0)}else{var it=s.cache[G].splice(X===-1?s.cache[G].length:X);if(s.cache[G]=s.cache[G].concat(K,it),j.url||(j.page?(nt=j.page,j.data.splice.apply(j.data,[nt.limit*(nt.curr-1),nt.limit].concat(s.cache[G]))):j.data=s.cache[G]),U.initData(),V.find(".layui-none").length)return s.renderData(G),K;var at,Q=s.getTrHtml(G,K),ut={trs:i(Q.trs.join("")),trs_fixed:i(Q.trs_fixed.join("")),trs_fixed_r:i(Q.trs_fixed_r.join(""))},z=(layui.each(K,function(yt,mt){at={"data-index":mt[g],"lay-data-index":mt[g],"data-level":"0"},ut.trs.eq(yt).attr(at).data("index",mt[g]),ut.trs_fixed.eq(yt).attr(at).data("index",mt[g]),ut.trs_fixed_r.eq(yt).attr(at).data("index",mt[g])}),parseInt(K[0][g])-1),nt=V.find(f),j=V.find(x),Q=V.find(y);z==-1?nt.find('tr[data-level="0"][data-index="0"]')[0]?(nt.find('tr[data-level="0"][data-index="0"]').before(ut.trs),j.find('tr[data-level="0"][data-index="0"]').before(ut.trs_fixed),Q.find('tr[data-level="0"][data-index="0"]').before(ut.trs_fixed_r)):(nt.find("tbody").prepend(ut.trs),j.find("tbody").prepend(ut.trs_fixed),Q.find("tbody").prepend(ut.trs_fixed_r)):X===-1?(nt.find("tbody").append(ut.trs),j.find("tbody").append(ut.trs_fixed),Q.find("tbody").append(ut.trs_fixed_r)):(z=it[0][m],nt.find('tr[data-level="0"][data-index="'+z+'"]').before(ut.trs),j.find('tr[data-level="0"][data-index="'+z+'"]').before(ut.trs_fixed),Q.find('tr[data-level="0"][data-index="'+z+'"]').before(ut.trs_fixed_r)),layui.each(s.cache[G],function(yt,mt){V.find('tr[data-level="0"][lay-data-index="'+mt[g]+'"]').attr("data-index",yt).data("index",yt)}),U.renderTreeTable(V.find(K.map(function(yt,mt,pt){return'tr[lay-data-index="'+yt[g]+'"]'}).join(",")))}return U.updateCheckStatus(H),H&&(X=V.find('tr[lay-data-index="'+H[g]+'"]'),U.updateNodeIcon({scopeEl:X,isExpand:H[M],isParent:H[rt]})),o.resize(G),F&&V.find(f).find('tr[lay-data-index="'+K[0][g]+'"]').get(0).scrollIntoViewIfNeeded(),K}},o.checkStatus=function(G,F){var U,j,et,V=l(G);if(V)return V=V.getOptions().tree,U=s.config.checkName,j=o.getData(G,!0).filter(function(tt,z,H){return tt[U]||F&&tt[S]}),et=!0,layui.each(V.data.cascade==="all"?s.cache[G]:o.getData(G,!0),function(tt,z){if(!z[U])return!(et=!1)}),{data:j,isAll:et}},o.on("sort",function(U){var U=U.config,F=U.elem.next(),U=U.id;F.hasClass(_)&&o.sort(U)}),o.on("row",function(G){G.config.elem.next().hasClass(_)&&Y(G)}),o.on("rowDouble",function(G){var F=G.config,U=F.elem.next();F.id,U.hasClass(_)&&(Y(G),(F.tree||{}).view.dblClickExpand)&&I({trElem:G.tr.first()},null,null,null,!0)}),o.on("rowContextmenu",function(G){var F=G.config,U=F.elem.next();F.id,U.hasClass(_)&&Y(G)}),o.on("tool",function(G){var F=G.config,U=F.elem.next();F.id,U.hasClass(_)&&Y(G)}),o.on("edit",function(G){var F=G.config,U=F.elem.next();F.id,U.hasClass(_)&&(Y(G),G.field===F.tree.customName.name)&&((U={})[G.field]=G.value,G.update(U))}),o.on("radio",function(G){var U=G.config,F=U.elem.next(),U=U.id;F.hasClass(_)&&(F=l(U),Y(G),q.call(F,G.tr,G.checked))}),D.prototype.setRowCheckedClass=function(G,F){var U=this.getOptions(),j=(G.data("index"),U.elem.next());G[F?"addClass":"removeClass"](d),G.each(function(){var et=i(this).data("index");j.find('.layui-table-fixed-r tbody tr[data-index="'+et+'"]')[F?"addClass":"removeClass"](d)})},D.prototype.updateCheckStatus=function(G,F){var U,j,et,V,tt,z,H,X=this,K=X.getOptions();return!!K.hasChecboxCol&&(U=K.tree,j=K.id,et=K.elem.next(),V=s.config.checkName,(tt=U.data.cascade)!=="all"&&tt!=="parent"||!G||(tt=X.updateParentCheckStatus(G,layui.type(F)==="boolean"?F:null),layui.each(tt,function(rt,nt){var Q=et.find('tr[lay-data-index="'+nt[g]+'"]  input[name="layTableCheckbox"]:not(:disabled)'),it=nt[V];X.setRowCheckedClass(Q.closest("tr"),it),Q.prop({checked:it,indeterminate:nt[S]})})),H=!(z=!0),0<(G=(G=U.data.cascade==="all"?s.cache[j]:o.getData(j,!0)).filter(function(rt){return!rt[K.disabledName]})).length?layui.each(G,function(rt,nt){if((nt[V]||nt[S])&&(H=!0),nt[V]||(z=!1),H&&!z)return!0}):z=!1,H=H&&!z,et.find('input[name="layTableCheckbox"][lay-filter="layTableAllChoose"]').prop({checked:z,indeterminate:H}),z)},D.prototype.updateParentCheckStatus=function(G,F){var U,j=this.getOptions(),V=j.tree,j=j.id,et=s.config.checkName,V=V.customName.children,tt=[];return!(G[S]=!1)===F?G[V].length?layui.each(G[V],function(z,H){if(!H[et])return F=!1,G[S]=!0}):F=!1:F===!1?layui.each(G[V],function(z,H){if(H[et]||H[S])return G[S]=!0}):(F=!1,U=0,layui.each(G[V],function(z,H){H[et]&&U++}),F=G[V].length?G[V].length===U:G[et],G[S]=!F&&0<U),G[et]=F,tt.push(i.extend({},G)),tt=G[v]?tt.concat(this.updateParentCheckStatus(s.cache[j][G[v]],F)):tt},function(G,F,U){var j=this,H=j.getOptions(),et=H.tree,V=H.id,tt=H.elem.next(),z=(G.length?G:tt).find(".laytable-cell-radio, .laytable-cell-checkbox").children("input").last(),H=z.attr("type")==="radio";if(U)U=function(){var rt=function(nt){layui.stope(nt)};z.parent().on("click",rt),z.next().click(),z.parent().off("click",rt)},H?F&&!z.prop("checked")&&U():layui.type(F)==="boolean"&&z.prop("checked")===F||U();else{var X,U=j.getNodeDataByIndex(G.attr("data-index")),K=s.config.checkName;if(!H)return F=layui.type(F)==="boolean"?F:!U[K],H=j.updateStatus(U?[U]:s.cache[V],function(nt){nt[s.config.disabledName]||(nt[K]=F,nt[S]=!1)},U&&["parent","none"].indexOf(et.data.cascade)!==-1),V=tt.find(H.map(function(nt){return'tr[lay-data-index="'+nt[g]+'"] input[name="layTableCheckbox"]:not(:disabled)'}).join(",")),j.setRowCheckedClass(V.closest("tr"),F),V.prop({checked:F,indeterminate:!1}),U&&U[v]&&(X=j.getNodeDataByIndex(U[v])),j.updateCheckStatus(X,F);U&&(j.updateStatus(null,function(nt){var Q;nt[K]&&(Q=tt.find('tr[lay-data-index="'+nt[g]+'"] input[type="radio"][lay-type="layTableRadio"]'),nt[K]=!1,j.setRowCheckedClass(Q.closest("tr"),!1),Q.prop("checked",!1))}),U[K]=F,j.setRowCheckedClass(G,F),j.setRowCheckedClass(G.siblings(),!1),G.find('input[type="radio"][lay-type="layTableRadio"]').prop("checked",F))}});o.on("checkbox",function(G){var U=G.config,F=U.elem.next(),U=U.id;F.hasClass(_)&&(F=l(U),U=G.checked,Y(G),G.isAll=q.call(F,G.tr,U))}),o.setRowChecked=function(G,F){var U,j,et,V,tt,z,H,X=l(G);X&&(U=X.getOptions().elem.next(),et=(F=F||{}).index,j=F.checked,F=F.callbackFlag,et=layui.type(et)==="string"?et:et[g],z=X.getNodeDataByIndex(et))&&(V=function(K){H.push(K),U.find('tr[lay-data-index="'+K+'"]').length||(K=X.getNodeDataByIndex(K)[v])&&V(K)},(tt=U.find('tr[lay-data-index="'+et+'"]')).length||(z=z[v],H=[],V(z),layui.each(H.reverse(),function(K,rt){o.expandNode(G,{index:rt,expandFlag:!0})}),tt=U.find('tr[lay-data-index="'+et+'"]')),q.call(X,tt,j,F))},o.checkAllNodes=function(j,F){var U,j=l(j);j&&(U=j.getOptions().elem.next(),q.call(j,U.find('tr[data-index="NONE"]'),!!F))},o.getData=function(G,F){var U,j=l(G);if(j)return U=[],layui.each(i.extend(!0,[],s.cache[G]||[]),function(et,V){U.push(V)}),F?j.treeToFlat(U):U},o.reloadAsyncNode=function(G,F){var U,j,et=l(G);et&&(U=et.getOptions().tree).async&&U.async.enable&&(j=et.getNodeDataByIndex(F))&&(j[w]=!1,j[M]=!1,j[L]=!1,layui.each(et.treeToFlat(j[U.customName.children]).reverse(),function(V,tt){o.removeNode(G,tt[g],!0)}),o.expandNode(G,{index:F,expandFlag:!0,callbackFlag:!0}))},o.getNodeById=function(G,F){if(G=l(G),G)return G.getNodeById(F)},o.getNodesByFilter=function(G,F,U){var j,et,V,tt=l(G);if(tt)return et=tt.getOptions(),j=(U=U||{}).isSingle,U=(U=U.parentNode)&&U.data,et=tt.treeToFlat(U?U[et.tree.customName.children]||[]:s.cache[G]).filter(F),V=[],layui.each(et,function(z,H){if(V.push(tt.getNodeByIndex(H[g])),j)return!0}),V},c.that={},o.reload=function(G,F,U,j){if(G=l(G),G)return G.reload(F,U,j),c.call(G)},o.render=function(G){return G=new D(G),c.call(G)},e("treeTable",o)}),layui.define("component",function(e){var i=layui.$,r=layui.component({name:"tabs",config:{elem:".layui-tabs",trigger:"click",headerMode:"auto"},CONST:{ELEM:"layui-tabs",HEADER:"layui-tabs-header",CLOSE:"layui-tabs-close",BODY:"layui-tabs-body",ITEM:"layui-tabs-item",CARD:"layui-tabs-card"},render:function(){var o,c,l=this,u=l.config,h=(l.headerElem=["."+r.CONST.HEADER+":eq(0)",">li"],l.bodyElem=["."+r.CONST.BODY+":eq(0)",">."+r.CONST.ITEM],l.getContainer=function(){var p=l.documentElem||u.elem;return{header:{elem:p.find(l.headerElem[0]),items:p.find(l.headerElem.join(""))},body:{elem:p.find(l.bodyElem[0]),items:p.find(l.bodyElem.join(""))}}},layui.type(u.header)==="array"?typeof u.header[0]=="string"?(l.headerElem=u.header.concat(),l.documentElem=i(document)):(l.elemView=i('<div class="layui-tabs"></div>'),u.className&&l.elemView.addClass(u.className),o=i('<ul class="layui-tabs-header"></ul>'),c=i('<div class="layui-tabs-body"></div>'),layui.each(u.header,function(p,f){f=l.renderHeaderItem(f),o.append(f)}),layui.each(u.body,function(p,f){f=l.renderBodyItem(f),c.append(f)}),l.elemView.append(o).append(c),u.elem.html(l.elemView)):l.renderClose(),layui.type(u.body)==="array"&&typeof u.body[0]=="string"&&(l.documentElem=i(document),l.bodyElem=u.body.concat()),l.data());"index"in u&&h.index!=u.index?l.change(l.findHeaderItem(u.index),!0):h.index===-1&&l.change(l.findHeaderItem(0),!0),l.roll("auto"),u.elem.hasClass(r.CONST.CLASS_HIDEV)&&u.elem.removeClass(r.CONST.CLASS_HIDEV),typeof u.afterRender=="function"&&u.afterRender(h),layui.event.call(u.elem[0],r.CONST.MOD_NAME,"afterRender("+u.id+")",h)},events:function(){var o,c=this,u=c.config,l=c.getContainer(),h=r.CONST.MOD_NAME,l=(c.documentElem?l.header:u).elem,u=u.trigger+(".lay_"+h+"_trigger"),h=c.documentElem?c.headerElem[1]:c.headerElem.join("");l.off(u).on(u,h,function(){c.change(i(this))}),s.onresize||(i(window).on("resize",function(){clearTimeout(o),o=setTimeout(function(){layui.each(r.cache.id,function(p){p=r.getInst(p),p&&p.roll("init")})},50)}),s.onresize=!0)}}),s={},a=r.Class;a.prototype.add=function(o){var c,l,u=this,h=(u.config,u.getContainer()),p=u.renderHeaderItem(o),f=u.renderBodyItem(o),x=u.data();o=i.extend({active:!0},o),/(before|after)/.test(o.mode)?(l=(c=o.hasOwnProperty("index"))?u.findHeaderItem(o.index):x.thisHeaderItem,c=c?u.findBodyItem(o.index):x.thisHeaderItem,l[o.mode](p),c[o.mode](f)):(l={prepend:"prepend",append:"append"}[o.mode||"append"]||"append",h.header.elem[l](p),h.body.elem[l](f)),o.active?u.change(p,!0):u.roll("auto"),typeof o.done=="function"&&o.done(i.extend(x,{headerItem:p,bodyItem:f}))},a.prototype.close=function(o,c){if(o&&o[0]){var l=this,u=l.config,h=o.attr("lay-id"),p=o.index();if(o.attr("lay-closable")!=="false"){var f=l.data();if(!c&&layui.event.call(o[0],r.CONST.MOD_NAME,"beforeClose("+u.id+")",i.extend(f,{index:p}))===!1)return;o.hasClass(r.CONST.CLASS_THIS)&&(o.next()[0]?l.change(o.next(),!0):o.prev()[0]&&l.change(o.prev(),!0)),l.findBodyItem(h||p).remove(),o.remove(),l.roll("auto",p),f=l.data(),layui.event.call(f.thisHeaderItem[0],r.CONST.MOD_NAME,"afterClose("+u.id+")",f)}}},a.prototype.closeMult=function(o,c){var l=this,u=l.config,p=l.getContainer(),y=l.data(),h=p.header.items,p=(p.body.items,'[lay-closable="false"]'),f=(c=c===void 0?y.index:c,l.findHeaderItem(c)),x=(l.findBodyItem(c),f.index()),y=(y.thisHeaderItem.attr("lay-closable")!=="false"&&(o!=="all"&&o?c!==y.index&&l.change(f,!0):(c=h.filter(":gt("+y.index+")"+p).eq(0),f=i(h.filter(":lt("+y.index+")"+p).get().reverse()).eq(0),c[0]?l.change(c,!0):f[0]&&l.change(f,!0))),h.each(function(d){var _=i(this),g=_.attr("lay-id"),g=l.findBodyItem(g||d);_.attr("lay-closable")!=="false"&&(o==="other"&&d!==x||o==="right"&&x<d||o==="left"&&d<x||o==="all")&&(_.remove(),g.remove())}),l.roll("auto"),l.data());layui.event.call(y.thisHeaderItem[0],r.CONST.MOD_NAME,"afterClose("+u.id+")",y)},a.prototype.change=function(o,c){if(o&&o[0]){var l=this,u=l.config,h=o.attr("lay-id"),p=o.index(),f=o.find("a"),f=typeof f.attr("href")=="string"&&f.attr("target")==="_blank",x=typeof o.attr("lay-unselect")=="string";if(!f&&!x){if(f=l.data(),!c&&layui.event.call(o[0],r.CONST.MOD_NAME,"beforeChange("+u.id+")",i.extend(f,{from:{index:f.index,headerItem:f.thisHeaderItem},to:{index:p,headerItem:o}}))===!1)return;o.addClass(r.CONST.CLASS_THIS).siblings().removeClass(r.CONST.CLASS_THIS),l.findBodyItem(h||p).addClass(r.CONST.CLASS_SHOW).siblings().removeClass(r.CONST.CLASS_SHOW),l.roll("auto",p),f=l.data(),layui.event.call(f.thisHeaderItem[0],r.CONST.MOD_NAME,"afterChange("+u.id+")",f)}}},a.prototype.renderHeaderItem=function(o){var c=this.config,c=i(o.headerItem||c.headerItem||"<li></li>");return c.html(o.title||"New Tab").attr("lay-id",o.id),this.appendClose(c,o),c},a.prototype.renderBodyItem=function(o){var c=this.config,c=i(o.bodyItem||c.bodyItem||'<div class="'+r.CONST.ITEM+'"></div>');return c.html(o.content||"").attr("lay-id",o.id),c},a.prototype.appendClose=function(o,c){var l=this;l.config.closable&&((c=c||{}).closable==0&&o.attr("lay-closable","false"),o.attr("lay-closable")==="false"||o.find("."+r.CONST.CLOSE)[0]||((c=i('<i class="layui-icon layui-icon-close layui-unselect '+r.CONST.CLOSE+'"></i>')).on("click",function(){return l.close(i(this).parent()),!1}),o.append(c)))},a.prototype.renderClose=function(){var o=this,c=o.config;o.getContainer().header.items.each(function(){var l=i(this);c.closable?o.appendClose(l):l.find("."+r.CONST.CLOSE).remove()})},a.prototype.roll=function(o,c){var l=this,u=l.config,f=l.getContainer(),h=f.header.elem,p=f.header.items,f=h.prop("scrollWidth"),x=Math.ceil(h.outerWidth()),y=h.data("left")||0,d=u.headerMode==="scroll",_="layui-tabs-scroll",g="layui-tabs-bar",m=["layui-icon-prev","layui-icon-next"],v={elem:i('<div class="'+_+' layui-border-box layui-unselect"></div>'),bar:i(['<div class="'+g+'">','<i class="layui-icon '+m[0]+'" lay-mode="prev"></i>','<i class="layui-icon '+m[1]+'" lay-mode="next"></i>',"</div>"].join(""))};if(u.headerMode!=="normal"){var S,M=h.parent("."+_);if(d||!d&&x<f)M[0]||(u.elem.hasClass(r.CONST.CARD)&&v.elem.addClass(r.CONST.CARD),h.wrap(v.elem),h.after(v.bar),v.bar.children().on("click",function(){var w=i(this).attr("lay-mode");i(this).hasClass(r.CONST.CLASS_DISABLED)||w&&l.roll(w)}));else if(!d){if(!M[0])return;M.find("."+g).remove(),h.unwrap().css("left",0).data("left",0)}o!=="init"&&(f=h.prop("scrollWidth"),x=h.outerWidth(),M=h.parent("."+_),o==="prev"?((S=-y-x)<0&&(S=0),p.each(function(w,L){if(L=i(L),L=Math.ceil(L.position().left),S<=L)return h.css("left",-L).data("left",-L),!1})):o==="auto"?function(){c=isNaN(c)?l.data().index:c;var w=p.eq(c);if(w[0]){var L=Math.ceil(w.position().left);if(0<(P=L-(w.prev().outerWidth()||0))&&(P-=1),y+P<0)return y=0<=P?P:0,h.css("left",-y).data("left",-y);var P=L+w.outerWidth()+(w.next().outerWidth()||0)+1;0<y+P-x&&(y=P-x,h.css("left",-y).data("left",-y))}}():p.each(function(w,P){var P=i(P),N=Math.ceil(P.position().left);if(N+P.outerWidth()>=x-y)return h.css("left",-N).data("left",-N),!1}),y=h.data("left")||0,M.find("."+m[0])[y<0?"removeClass":"addClass"](r.CONST.CLASS_DISABLED),M.find("."+m[1])[0<parseFloat(y+f)-x?"removeClass":"addClass"](r.CONST.CLASS_DISABLED))}},a.prototype.findHeaderItem=function(o){var c=this.getContainer().header.items;return typeof o=="string"?c.filter('[lay-id="'+o+'"]'):c.eq(o)},a.prototype.findBodyItem=function(o){var c,l=this.getContainer(),u=l.body.items;return typeof o=="string"?(c=u.filter('[lay-id="'+o+'"]'))[0]?c:(c=l.header.items.filter('[lay-id="'+o+'"]'),u.eq(c.index())):u.eq(o)},a.prototype.data=function(){var o=this.config,c=this.getContainer(),l=c.header.items.filter("."+r.CONST.CLASS_THIS),u=l.index();return{options:o,container:c,thisHeaderItem:l,thisBodyItem:this.findBodyItem(u),index:u,length:c.header.items.length}},i.extend(r,{add:function(o,c){o=r.getInst(o),o&&o.add(c)},close:function(o,c,l){o=r.getInst(o),o&&(c===void 0&&(c=o.data().index),o.close(o.findHeaderItem(c),l))},closeMult:function(o,c,l){o=r.getInst(o),o&&o.closeMult(c,l)},change:function(o,c,l){o=r.getInst(o),o&&o.change(o.findHeaderItem(c),l)},data:function(o){return o=r.getInst(o),o?o.data():{}},getHeaderItem:function(o,c){if(o=r.getInst(o),o)return o.findHeaderItem(c)},getBodyItem:function(o,c){if(o=r.getInst(o),o)return o.findBodyItem(c)},refresh:function(o){o=r.getInst(o),o&&o.roll("auto")}}),i(function(){r.render()}),e(r.CONST.MOD_NAME,r)}),layui.define(["form","util"],function(e){var i=layui.$,r=layui.form,s=layui.layer,a=layui.util,o="tree",c={config:{customName:{id:"id",title:"title",children:"children"}},index:layui[o]?layui[o].index+1e4:0,set:function(P){var N=this;return N.config=i.extend({},N.config,P),N},on:function(P,N){return layui.onevent.call(this,o,P,N)}},l=function(){var P=this,N=P.config,k=N.id||P.index;return l.that[k]=P,{config:l.config[k]=N,reload:function(D){P.reload.call(P,D)},getChecked:function(){return P.getChecked.call(P)},setChecked:function(D){return P.setChecked.call(P,D)}}},u="layui-hide",h="layui-disabled",p="layui-tree-set",f="layui-tree-iconClick",x="layui-icon-addition",y="layui-icon-subtraction",d="layui-tree-entry",_="layui-tree-main",g="layui-tree-txt",m="layui-tree-pack",v="layui-tree-spread",S="layui-tree-setLineShort",M="layui-tree-showLine",w="layui-tree-lineExtend",L=function(P){var N=this;N.index=++c.index,N.config=i.extend({},N.config,c.config,P),N.render()};L.prototype.config={data:[],showCheckbox:!1,showLine:!0,accordion:!1,onlyIconControl:!1,isJump:!1,edit:!1,text:{defaultNodeName:"未命名",none:"无数据"}},L.prototype.reload=function(P){var N=this;layui.each(P,function(k,D){layui.type(D)==="array"&&delete N.config[k]}),N.config=i.extend(!0,{},N.config,P),N.render()},L.prototype.render=function(){var P=this,N=P.config,k=(N.customName=i.extend({},c.config.customName,N.customName),P.checkids=[],i('<div class="layui-tree layui-border-box'+(N.showCheckbox?" layui-form":"")+(N.showLine?" layui-tree-line":"")+'" lay-filter="LAY-tree-'+P.index+'"></div>')),D=(P.tree(k),N.elem=i(N.elem));if(D[0]){if(P.key=N.id||P.index,P.elem=k,P.elemNone=i('<div class="layui-tree-emptyText">'+N.text.none+"</div>"),D.html(P.elem),P.elem.find(".layui-tree-set").length==0)return P.elem.append(P.elemNone);N.showCheckbox&&P.renderForm("checkbox"),P.elem.find(".layui-tree-set").each(function(){var C=i(this);C.parent(".layui-tree-pack")[0]||C.addClass("layui-tree-setHide"),!C.next()[0]&&C.parents(".layui-tree-pack").eq(1).hasClass("layui-tree-lineExtend")&&C.addClass(S),C.next()[0]||C.parents(".layui-tree-set").eq(0).next()[0]||C.addClass(S)}),P.events()}},L.prototype.renderForm=function(P){r.render(P,"LAY-tree-"+this.index)},L.prototype.tree=function(P,T){var k=this,D=k.config,C=D.customName,T=T||D.data;layui.each(T,function(A,E){var I,B,$=E[C.children]&&0<E[C.children].length,Y=i('<div class="layui-tree-pack" '+(E.spread?'style="display: block;"':"")+"></div>"),q=i(['<div data-id="'+E[C.id]+'" class="layui-tree-set'+(E.spread?" layui-tree-spread":"")+(E.checked?" layui-tree-checkedFirst":"")+'">','<div class="layui-tree-entry">','<div class="layui-tree-main">',D.showLine?$?'<span class="layui-tree-iconClick layui-tree-icon"><i class="layui-icon '+(E.spread?"layui-icon-subtraction":"layui-icon-addition")+'"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-icon layui-icon-file"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-tree-iconArrow '+($?"":u)+'"></i></span>',D.showCheckbox?'<input type="checkbox" name="'+(E.field||"layuiTreeCheck_"+E[C.id])+'" same="layuiTreeCheck" lay-skin="primary" '+(E.disabled?"disabled":"")+' value="'+E[C.id]+'">':"",D.isJump&&E.href?'<a href="'+E.href+'" target="_blank" class="'+g+'">'+(E[C.title]||E.label||D.text.defaultNodeName)+"</a>":'<span class="'+g+(E.disabled?" "+h:"")+'">'+(E[C.title]||E.label||D.text.defaultNodeName)+"</span>","</div>",D.edit?(I={add:'<i class="layui-icon layui-icon-add-1"  data-type="add"></i>',update:'<i class="layui-icon layui-icon-edit" data-type="update"></i>',del:'<i class="layui-icon layui-icon-delete" data-type="del"></i>'},B=['<div class="layui-btn-group layui-tree-btnGroup">'],D.edit===!0&&(D.edit=["update","del"]),typeof D.edit=="object"?(layui.each(D.edit,function(G,F){B.push(I[F]||"")}),B.join("")+"</div>"):void 0):"","</div></div>"].join(""));$&&(q.append(Y),k.tree(Y,E[C.children])),P.append(q),q.prev("."+p)[0]&&q.prev().children(".layui-tree-pack").addClass("layui-tree-showLine"),$||q.parent(".layui-tree-pack").addClass("layui-tree-lineExtend"),k.spread(q,E),D.showCheckbox&&(E.checked&&k.checkids.push(E[C.id]),k.checkClick(q,E)),D.edit&&k.operate(q,E)})},L.prototype.spread=function(P,N){var k=this,D=k.config,E=P.children("."+d),C=E.children("."+_),T=C.find('input[same="layuiTreeCheck"]'),A=E.find("."+f),E=E.find("."+g),I=D.onlyIconControl?A:C,B="";I.on("click",function($){var Y=P.children("."+m),q=(I.children(".layui-icon")[0]?I:I.find(".layui-tree-icon")).children(".layui-icon");Y[0]?P.hasClass(v)?(P.removeClass(v),Y.slideUp(200),q.removeClass(y).addClass(x),k.updateFieldValue(N,"spread",!1)):(P.addClass(v),Y.slideDown(200),q.addClass(y).removeClass(x),k.updateFieldValue(N,"spread",!0),D.accordion&&((Y=P.siblings("."+p)).removeClass(v),Y.children("."+m).slideUp(200),Y.find(".layui-tree-icon").children(".layui-icon").removeClass(y).addClass(x))):B="normal"}),E.on("click",function(){i(this).hasClass(h)||(B=P.hasClass(v)?D.onlyIconControl?"open":"close":D.onlyIconControl?"close":"open",T[0]&&k.updateFieldValue(N,"checked",T.prop("checked")),D.click&&D.click({elem:P,state:B,data:N}))})},L.prototype.updateFieldValue=function(P,N,k){N in P&&(P[N]=k)},L.prototype.setCheckbox=function(P,N,k){var D,C=this,T=C.config.customName,A=k.prop("checked");k.prop("disabled")||(typeof N[T.children]!="object"&&!P.find("."+m)[0]||P.find("."+m).find('input[same="layuiTreeCheck"]').each(function(E){this.disabled||((E=N[T.children][E])&&C.updateFieldValue(E,"checked",A),C.updateFieldValue(this,"checked",A))}),(D=function(E){var I,B,$;E.parents("."+p)[0]&&(B=(E=E.parent("."+m)).parent(),$=E.prev().find('input[same="layuiTreeCheck"]'),A?$.prop("checked",A):(E.find('input[same="layuiTreeCheck"]').each(function(){this.checked&&(I=!0)}),I||$.prop("checked",!1)),D(B))})(P),C.renderForm("checkbox"))},L.prototype.checkClick=function(P,N){var k=this,D=k.config;P.children("."+d).children("."+_).on("click",'input[same="layuiTreeCheck"]+',function(T){layui.stope(T);var T=i(this).prev(),A=T.prop("checked");T.prop("disabled")||(k.setCheckbox(P,N,T),k.updateFieldValue(N,"checked",A),D.oncheck&&D.oncheck({elem:P,checked:A,data:N}))})},L.prototype.operate=function(P,N){var k=this,D=k.config,C=D.customName,T=P.children("."+d),A=T.children("."+_);T.children(".layui-tree-btnGroup").on("click",".layui-icon",function(B){layui.stope(B);var I,B=i(this).data("type"),$=P.children("."+m),Y={data:N,type:B,elem:P};if(B=="add"){$[0]||(D.showLine?(A.find("."+f).addClass("layui-tree-icon"),A.find("."+f).children(".layui-icon").addClass(x).removeClass("layui-icon-file")):A.find(".layui-tree-iconArrow").removeClass(u),P.append('<div class="layui-tree-pack"></div>'));var q,G=D.operate&&D.operate(Y),F={};if(F[C.title]=D.text.defaultNodeName,F[C.id]=G,k.tree(P.children("."+m),[F]),D.showLine&&($[0]?($.hasClass(w)||$.addClass(w),P.find("."+m).each(function(){i(this).children("."+p).last().addClass(S)}),($.children("."+p).last().prev().hasClass(S)?$.children("."+p).last().prev():$.children("."+p).last()).removeClass(S),!P.parent("."+m)[0]&&P.next()[0]&&$.children("."+p).last().removeClass(S)):(G=P.siblings("."+p),q=1,F=P.parent("."+m),layui.each(G,function(U,j){i(j).children("."+m)[0]||(q=0)}),(q==1?(G.children("."+m).addClass(M),G.children("."+m).children("."+p).removeClass(S),P.children("."+m).addClass(M),F.removeClass(w),F.children("."+p).last().children("."+m).children("."+p).last()):P.children("."+m).children("."+p)).addClass(S))),!D.showCheckbox)return;A.find('input[same="layuiTreeCheck"]')[0].checked&&(P.children("."+m).children("."+p).last().find('input[same="layuiTreeCheck"]')[0].checked=!0),k.renderForm("checkbox")}else B=="update"?(G=A.children("."+g).html(),A.children("."+g).html(""),A.append('<input type="text" class="layui-tree-editInput">'),A.children(".layui-tree-editInput").val(a.unescape(G)).focus(),I=function(U){var j=a.escape(U.val().trim())||D.text.defaultNodeName;U.remove(),A.children("."+g).html(j),Y.data[C.title]=j,D.operate&&D.operate(Y)},A.children(".layui-tree-editInput").blur(function(){I(i(this))}),A.children(".layui-tree-editInput").on("keydown",function(U){U.keyCode===13&&(U.preventDefault(),I(i(this)))})):s.confirm('确认删除该节点 "<span style="color: #999;">'+(N[C.title]||"")+'</span>" 吗？',function(U){var j,et,V;D.operate&&D.operate(Y),Y.status="remove",s.close(U),P.prev("."+p)[0]||P.next("."+p)[0]||P.parent("."+m)[0]?(P.siblings("."+p).children("."+d)[0]?(D.showCheckbox&&(j=function(tt){var z,H,X,K;tt.parents("."+p)[0]&&(z=tt.siblings("."+p).children("."+d),H=(tt=tt.parent("."+m).prev()).find('input[same="layuiTreeCheck"]')[0],X=1,(K=0)==H.checked)&&(z.each(function(rt,nt){nt=i(nt).find('input[same="layuiTreeCheck"]')[0],nt.checked!=0||nt.disabled||(X=0),nt.disabled||(K=1)}),X==1)&&K==1&&(H.checked=!0,k.renderForm("checkbox"),j(tt.parent("."+p)))})(P),D.showLine&&(U=P.siblings("."+p),et=1,V=P.parent("."+m),layui.each(U,function(tt,z){i(z).children("."+m)[0]||(et=0)}),et==1?($[0]||(V.removeClass(w),U.children("."+m).addClass(M),U.children("."+m).children("."+p).removeClass(S)),(P.next()[0]?V.children("."+p).last():P.prev()).children("."+m).children("."+p).last().addClass(S),P.next()[0]||P.parents("."+p)[1]||P.parents("."+p).eq(0).next()[0]||P.prev("."+p).addClass(S)):!P.next()[0]&&P.hasClass(S)&&P.prev().addClass(S))):(U=P.parent("."+m).prev(),D.showLine?(U.find("."+f).removeClass("layui-tree-icon"),U.find("."+f).children(".layui-icon").removeClass(y).addClass("layui-icon-file"),(V=U.parents("."+m).eq(0)).addClass(w),V.children("."+p).each(function(){i(this).children("."+m).children("."+p).last().addClass(S)})):U.find(".layui-tree-iconArrow").addClass(u),P.parents("."+p).eq(0).removeClass(v),P.parent("."+m).remove()),P.remove()):(P.remove(),k.elem.append(k.elemNone))})})},L.prototype.events=function(){var P=this,N=P.config;P.elem.find(".layui-tree-checkedFirst"),P.setChecked(P.checkids),P.elem.find(".layui-tree-search").on("keyup",function(){var D=i(this),k=D.val(),D=D.nextAll(),C=[];D.find("."+g).each(function(){var T,A=i(this).parents("."+d);i(this).html().indexOf(k)!=-1&&(C.push(i(this).parent()),(T=function(E){E.addClass("layui-tree-searchShow"),E.parent("."+m)[0]&&T(E.parent("."+m).parent("."+p))})(A.parent("."+p)))}),D.find("."+d).each(function(){var T=i(this).parent("."+p);T.hasClass("layui-tree-searchShow")||T.addClass(u)}),D.find(".layui-tree-searchShow").length==0&&P.elem.append(P.elemNone),N.onsearch&&N.onsearch({elem:C})}),P.elem.find(".layui-tree-search").on("keydown",function(){i(this).nextAll().find("."+d).each(function(){i(this).parent("."+p).removeClass("layui-tree-searchShow "+u)}),i(".layui-tree-emptyText")[0]&&i(".layui-tree-emptyText").remove()})},L.prototype.getChecked=function(){var P=this,N=P.config,k=N.customName,D=[],C=[],T=(P.elem.find(".layui-form-checked").each(function(){D.push(i(this).prev()[0].value)}),function(A,E){layui.each(A,function(I,B){layui.each(D,function($,Y){if(B[k.id]==Y)return P.updateFieldValue(B,"checked",!0),delete(Y=i.extend({},B))[k.children],E.push(Y),B[k.children]&&(Y[k.children]=[],T(B[k.children],Y[k.children])),!0})})});return T(i.extend({},N.data),C),C},L.prototype.setChecked=function(P){this.config,this.elem.find("."+p).each(function(N,k){var D=i(this).data("id"),C=i(k).children("."+d).find('input[same="layuiTreeCheck"]'),T=C.next();if(typeof P=="number"){if(D.toString()==P.toString())return C[0].checked||T.click(),!1}else typeof P=="object"&&layui.each(P,function(A,E){if(E.toString()==D.toString()&&!C[0].checked)return T.click(),!0})})},l.that={},l.config={},c.reload=function(P,N){return P=l.that[P],P.reload(N),l.call(P)},c.getChecked=function(P){return l.that[P].getChecked()},c.setChecked=function(P,N){return l.that[P].setChecked(N)},c.render=function(P){return P=new L(P),l.call(P)},e(o,c)}),layui.define(["laytpl","form"],function(e){var i=layui.$,r=layui.laytpl,s=layui.form,a="transfer",o={config:{},index:layui[a]?layui[a].index+1e4:0,set:function(m){var v=this;return v.config=i.extend({},v.config,m),v},on:function(m,v){return layui.onevent.call(this,a,m,v)}},c=function(){var m=this,v=m.config,S=v.id||m.index;return c.that[S]=m,{config:c.config[S]=v,reload:function(M){m.reload.call(m,M)},getData:function(){return m.getData.call(m)}}},l="layui-hide",u="layui-btn-disabled",h="layui-none",p="layui-transfer-box",f="layui-transfer-header",x="layui-transfer-search",y="layui-transfer-data",d=function(m){return['<div class="layui-transfer-box" data-index="'+(m=m||{}).index+'">','<div class="layui-transfer-header">','<input type="checkbox" name="'+m.checkAllName+'" lay-filter="layTransferCheckbox" lay-type="all" lay-skin="primary" title="{{= d.data.title['+m.index+"] || 'list"+(m.index+1)+`' }}">`,"</div>","{{# if(d.data.showSearch){ }}",'<div class="layui-transfer-search">','<i class="layui-icon layui-icon-search"></i>','<input type="text" class="layui-input" placeholder="关键词搜索">',"</div>","{{# } }}",'<ul class="layui-transfer-data"></ul>',"</div>"].join("")},_=['<div class="layui-transfer layui-form layui-border-box" lay-filter="LAY-transfer-{{= d.index }}">',d({index:0,checkAllName:"layTransferLeftCheckAll"}),'<div class="layui-transfer-active">','<button type="button" class="layui-btn layui-btn-sm layui-btn-primary layui-btn-disabled" data-index="0">','<i class="layui-icon layui-icon-next"></i>',"</button>",'<button type="button" class="layui-btn layui-btn-sm layui-btn-primary layui-btn-disabled" data-index="1">','<i class="layui-icon layui-icon-prev"></i>',"</button>","</div>",d({index:1,checkAllName:"layTransferRightCheckAll"}),"</div>"].join(""),g=function(m){var v=this;v.index=++o.index,v.config=i.extend({},v.config,o.config,m),v.render()};g.prototype.config={title:["列表一","列表二"],width:200,height:360,data:[],value:[],showSearch:!1,id:"",text:{none:"无数据",searchNone:"无匹配数据"}},g.prototype.reload=function(m){var v=this;v.config=i.extend({},v.config,m),v.render()},g.prototype.render=function(){var m=this,v=m.config,S=m.elem=i(r(_,{open:"{{",close:"}}",tagStyle:"legacy"}).render({data:v,index:m.index})),M=v.elem=i(v.elem);M[0]&&(v.data=v.data||[],v.value=v.value||[],v.id="id"in v?v.id:elem.attr("id")||m.index,m.key=v.id,M.html(m.elem),m.layBox=m.elem.find("."+p),m.layHeader=m.elem.find("."+f),m.laySearch=m.elem.find("."+x),m.layData=S.find("."+y),m.layBtn=S.find(".layui-transfer-active .layui-btn"),m.layBox.css({width:v.width,height:v.height}),m.layData.css({height:(M=v.height-m.layHeader.outerHeight(),v.showSearch&&(M-=m.laySearch.outerHeight()),M-2)}),m.renderData(),m.events())},g.prototype.renderData=function(){var m=this,v=m.config,S=[{checkName:"layTransferLeftCheck",views:[]},{checkName:"layTransferRightCheck",views:[]}];m.parseData(function(M){var w=M.selected?1:0,L=["<li>",'<input type="checkbox" name="'+S[w].checkName+'" lay-skin="primary" lay-filter="layTransferCheckbox" title="'+M.title+'"'+(M.disabled?" disabled":"")+(M.checked?" checked":"")+' value="'+M.value+'">',"</li>"].join("");w?layui.each(v.value,function(P,N){N==M.value&&M.selected&&(S[w].views[P]=L)}):S[w].views.push(L),delete M.selected}),m.layData.eq(0).html(S[0].views.join("")),m.layData.eq(1).html(S[1].views.join("")),m.renderCheckBtn()},g.prototype.renderForm=function(m){s.render(m,"LAY-transfer-"+this.index)},g.prototype.renderCheckBtn=function(m){var v=this,S=v.config;m=m||{},v.layBox.each(function(M){var L=i(this),w=L.find("."+y),L=L.find("."+f).find('input[type="checkbox"]'),P=w.find('input[type="checkbox"]'),N=0,k=!1;P.each(function(){var D=i(this).data("hide");(this.checked||this.disabled||D)&&N++,this.checked&&!D&&(k=!0)}),L.prop("checked",k&&N===P.length),v.layBtn.eq(M)[k?"removeClass":"addClass"](u),m.stopNone||(P=w.children("li:not(."+l+")").length,v.noneView(w,P?"":S.text.none))}),v.renderForm("checkbox")},g.prototype.noneView=function(m,v){var S=i('<p class="layui-none">'+(v||"")+"</p>");m.find("."+h)[0]&&m.find("."+h).remove(),v.replace(/\s/g,"")&&m.append(S)},g.prototype.setValue=function(){var m=this.config,v=[];return this.layBox.eq(1).find("."+y+' input[type="checkbox"]').each(function(){i(this).data("hide")||v.push(this.value)}),m.value=v,this},g.prototype.parseData=function(m){var v=this.config,S=[];return layui.each(v.data,function(M,w){w=(typeof v.parseData=="function"?v.parseData(w):w)||w,S.push(w=i.extend({},w)),layui.each(v.value,function(L,P){P==w.value&&(w.selected=!0)}),m&&m(w)}),v.data=S,this},g.prototype.getData=function(m){var v=this.config,S=[];return this.setValue(),layui.each(m||v.value,function(M,w){layui.each(v.data,function(L,P){delete P.selected,w==P.value&&S.push(P)})}),S},g.prototype.transfer=function(m,N){var S,M=this,w=M.config,L=M.layBox.eq(m),P=[],N=(N?((S=(N=N).find('input[type="checkbox"]'))[0].checked=!1,L.siblings("."+p).find("."+y).append(N.clone()),N.remove(),P.push(S[0].value),M.setValue()):L.each(function(k){i(this).find("."+y).children("li").each(function(){var D=i(this),C=D.find('input[type="checkbox"]'),T=C.data("hide");C[0].checked&&!T&&(C[0].checked=!1,L.siblings("."+p).find("."+y).append(D.clone()),D.remove(),P.push(C[0].value)),M.setValue()})}),M.renderCheckBtn(),L.siblings("."+p).find("."+x+" input"));N.val()!==""&&N.trigger("keyup"),w.onchange&&w.onchange(M.getData(P),m)},g.prototype.events=function(){var m=this,v=m.config;m.elem.on("click",'input[lay-filter="layTransferCheckbox"]+',function(){var S=i(this).prev(),M=S[0].checked,w=S.parents("."+p).eq(0).find("."+y);S[0].disabled||(S.attr("lay-type")==="all"&&w.find('input[type="checkbox"]').each(function(){this.disabled||(this.checked=M)}),setTimeout(function(){m.renderCheckBtn({stopNone:!0})},0))}),m.elem.on("dblclick","."+y+">li",function(S){var M=i(this),w=M.children('input[type="checkbox"]'),L=M.parent().parent().data("index");w[0].disabled||(typeof v.dblclick=="function"?v.dblclick({elem:M,data:m.getData([w[0].value])[0],index:L}):null)!==!1&&m.transfer(L,M)}),m.layBtn.on("click",function(){var S=i(this),M=S.data("index");S.hasClass(u)||m.transfer(M)}),m.laySearch.find("input").on("keyup",function(){var S=this.value,M=i(this).parents("."+x).eq(0).siblings("."+y),w=M.children("li"),w=(w.each(function(){var L=i(this),P=L.find('input[type="checkbox"]'),N=P[0].title,N=(v.showSearch!=="cs"&&(N=N.toLowerCase(),S=S.toLowerCase()),N.indexOf(S)!==-1);L[N?"removeClass":"addClass"](l),P.data("hide",!N)}),m.renderCheckBtn(),w.length===M.children("li."+l).length);m.noneView(M,w?v.text.searchNone:"")})},c.that={},c.config={},o.reload=function(m,v){return m=c.that[m],m.reload(v),c.call(m)},o.getData=function(m){return c.that[m].getData()},o.render=function(m){return m=new g(m),c.call(m)},e(a,o)}),layui.define(["jquery","lay"],function(e){var i=layui.$,r=layui.lay,s=(layui.hint(),layui.device(),{config:{},set:function(y){var d=this;return d.config=i.extend({},d.config,y),d},on:function(y,d){return layui.onevent.call(this,a,y,d)}}),a="carousel",o="layui-this",c="layui-carousel-left",l="layui-carousel-right",u="layui-carousel-prev",h="layui-carousel-next",p="layui-carousel-arrow",f="layui-carousel-ind",x=function(y){var d=this;d.config=i.extend({},d.config,s.config,y),d.render()};x.prototype.config={width:"600px",height:"280px",full:!1,arrow:"hover",indicator:"inside",autoplay:!0,interval:3e3,anim:"",trigger:"click",index:0},x.prototype.render=function(){var y=this,d=y.config,_=i(d.elem);if(1<_.length)return layui.each(_,function(){s.render(i.extend({},d,{elem:this}))}),y;i.extend(d,r.options(_[0])),d.elem=i(d.elem),d.elem[0]&&(y.elemItem=d.elem.find(">*[carousel-item]>*"),d.index<0&&(d.index=0),d.index>=y.elemItem.length&&(d.index=y.elemItem.length-1),d.interval<800&&(d.interval=800),d.full?d.elem.css({position:"fixed",width:"100%",height:"100%",zIndex:9999}):d.elem.css({width:d.width,height:d.height}),d.elem.attr("lay-anim",d.anim),y.elemItem.eq(d.index).addClass(o),y.indicator(),y.arrow(),y.autoplay(),1<y.elemItem.length)&&y.events()},x.prototype.reload=function(y){var d=this;clearInterval(d.timer),d.config=i.extend({},d.config,y),d.render()},x.prototype.prevIndex=function(){var y=this.config.index-1;return y=y<0?this.elemItem.length-1:y},x.prototype.nextIndex=function(){var y=this.config.index+1;return y=y>=this.elemItem.length?0:y},x.prototype.addIndex=function(y){var d=this.config;d.index=d.index+(y=y||1),d.index>=this.elemItem.length&&(d.index=0)},x.prototype.subIndex=function(y){var d=this.config;d.index=d.index-(y=y||1),d.index<0&&(d.index=this.elemItem.length-1)},x.prototype.autoplay=function(){var y=this,d=y.config,_=y.elemItem.length;d.autoplay&&(clearInterval(y.timer),1<_)&&(y.timer=setInterval(function(){y.slide()},d.interval))},x.prototype.arrow=function(){var y=this,d=y.config,_=y.elemItem.length,g=i(['<button type="button" class="layui-icon '+(d.anim==="updown"?"layui-icon-up":"layui-icon-left")+" "+p+'" lay-type="sub"></button>','<button type="button" class="layui-icon '+(d.anim==="updown"?"layui-icon-down":"layui-icon-right")+" "+p+'" lay-type="add"></button>'].join(""));d.elem.attr("lay-arrow",d.arrow),d.elem.find("."+p)[0]&&d.elem.find("."+p).remove(),1<_?d.elem.append(g):g.remove(),g.on("click",function(){var m=i(this).attr("lay-type");y.slide(m)})},x.prototype.goto=function(y){var d=this,_=d.config;y>_.index?d.slide("add",y-_.index):y<_.index&&d.slide("sub",_.index-y)},x.prototype.indicator=function(){var y,d=this,_=d.config,g=d.elemItem.length,m=d.elemInd=i(['<div class="'+f+'"><ul>',(y=[],layui.each(d.elemItem,function(v){y.push("<li"+(_.index===v?' class="layui-this"':"")+"></li>")}),y.join("")),"</ul></div>"].join(""));_.elem.attr("lay-indicator",_.indicator),_.elem.find("."+f)[0]&&_.elem.find("."+f).remove(),1<g?_.elem.append(m):m.remove(),_.anim==="updown"&&m.css("margin-top",-m.height()/2),m.find("li").on(_.trigger==="hover"?"mouseover":_.trigger,function(){d.goto(i(this).index())})},x.prototype.slide=function(y,d){var _=this,g=_.elemItem,m=g.length,v=_.config,S=v.index,M=v.elem.attr("lay-filter");_.haveSlide||m<=1||(y==="sub"?(_.subIndex(d),g.eq(v.index).addClass(u),setTimeout(function(){g.eq(S).addClass(l),g.eq(v.index).addClass(l)},50)):(_.addIndex(d),g.eq(v.index).addClass(h),setTimeout(function(){g.eq(S).addClass(c),g.eq(v.index).addClass(c)},50)),setTimeout(function(){g.removeClass(o+" "+u+" "+h+" "+c+" "+l),g.eq(v.index).addClass(o),_.haveSlide=!1},350),_.elemInd.find("li").eq(v.index).addClass(o).siblings().removeClass(o),_.haveSlide=!0,m={index:v.index,prevIndex:S,item:g.eq(v.index)},typeof v.change=="function"&&v.change(m),layui.event.call(this,a,"change("+M+")",m))},x.prototype.events=function(){var y,d,_=this,g=_.config;g.elem.data("haveEvents")||(g.elem.on("mouseenter touchstart",function(){_.config.autoplay!=="always"&&clearInterval(_.timer)}).on("mouseleave touchend",function(){_.config.autoplay!=="always"&&_.autoplay()}),y=g.elem,d=g.anim==="updown",r.touchSwipe(y,{onTouchEnd:function(m,M){var S=Date.now()-M.timeStart,M=d?M.distanceY:M.distanceX;(.25<Math.abs(M/S)||Math.abs(M)>y[d?"height":"width"]()/3)&&_.slide(0<M?"":"sub")}}),g.elem.data("haveEvents",!0))},s.render=function(y){return new x(y)},e(a,s)}),layui.define("component",function(e){var i=layui.$,r=layui.lay,s=layui.component({name:"rate",config:{length:5,value:0,half:!1,text:!1,readonly:!1,theme:""},CONST:{ELEM:"layui-rate",ICON_RATE:"layui-icon-rate",ICON_RATE_SOLID:"layui-icon-rate-solid",ICON_RATE_HALF:"layui-icon-rate-half",ICON_SOLID_HALF:"layui-icon-rate-solid layui-icon-rate-half",ICON_SOLID_RATE:"layui-icon-rate-solid layui-icon-rate",ICON_HALF_RATE:"layui-icon-rate layui-icon-rate-half"},render:function(){for(var o=this,c=o.config,l=c.theme?'style="color: '+c.theme+';"':"",u=(c.value>c.length&&(c.value=c.length),parseInt(c.value)===c.value||c.half||(c.value=Math.ceil(c.value)-c.value<.5?Math.ceil(c.value):Math.floor(c.value)),'<ul class="layui-rate" '+(c.readonly?"readonly":"")+">"),h=1;h<=c.length;h++){var p='<li class="layui-inline"><i class="layui-icon '+(h>Math.floor(c.value)?a.ICON_RATE:a.ICON_RATE_SOLID)+'" '+l+"></i></li>";c.half&&parseInt(c.value)!==c.value&&h==Math.ceil(c.value)?u=u+'<li><i class="layui-icon layui-icon-rate-half" '+l+"></i></li>":u+=p}u+="</ul>",c.text&&(u+='<span class="layui-inline">'+c.value+"</span>");var f=c.elem,x=f.next("."+a.ELEM);x[0]&&x.remove(),o.elemTemplate=i(u),c.span=o.elemTemplate.next("span"),c.setText&&c.setText(c.value),f.html(o.elemTemplate),f.addClass("layui-inline"),c.readonly||o.action()},extendsInstance:function(){var o=this,c=o.config;return{setvalue:function(l){c.value=l,o.render()}}}}),a=s.CONST;s.Class.prototype.action=function(){var o=this.config,c=this.elemTemplate,l=c.find("i").width(),u=c.children("li");u.each(function(h){var p=h+1,f=i(this);f.on("click",function(x){o.value=p,o.half&&x.pageX-i(this).offset().left<=l/2&&(o.value=o.value-.5),o.text&&c.next("span").text(o.value),o.choose&&o.choose(o.value),o.setText&&o.setText(o.value)}),f.on("mousemove",function(x){c.find("i").each(function(){i(this).addClass(a.ICON_RATE).removeClass(a.ICON_SOLID_HALF)}),c.find("i:lt("+p+")").each(function(){i(this).addClass(a.ICON_RATE_SOLID).removeClass(a.ICON_HALF_RATE)}),o.half&&x.pageX-i(this).offset().left<=l/2&&f.children("i").addClass(a.ICON_RATE_HALF).removeClass(a.ICON_RATE_SOLID)}),f.on("mouseleave",function(){c.find("i").each(function(){i(this).addClass(a.ICON_RATE).removeClass(a.ICON_SOLID_HALF)}),c.find("i:lt("+Math.floor(o.value)+")").each(function(){i(this).addClass(a.ICON_RATE_SOLID).removeClass(a.ICON_HALF_RATE)}),o.half&&parseInt(o.value)!==o.value&&c.children("li:eq("+Math.floor(o.value)+")").children("i").addClass(a.ICON_RATE_HALF).removeClass(a.ICON_SOLID_RATE)})}),r.touchSwipe(c,{onTouchMove:function(h,p){var f;Date.now()-p.timeStart<=200||(p=h.touches[0].pageX,h=c.width()/o.length,p=(p-c.offset().left)/h,(f=(f=(h=p%1)<=.5&&o.half?.5+(p-h):Math.ceil(p))>o.length?o.length:f)<0&&(f=0),u.each(function(g){var y=i(this).children("i"),d=Math.ceil(f)-g==1,_=Math.ceil(f)>g,g=f-g==.5;_?(y.addClass(a.ICON_RATE_SOLID).removeClass(a.ICON_HALF_RATE),o.half&&g&&y.addClass(a.ICON_RATE_HALF).removeClass(a.ICON_RATE_SOLID)):y.addClass(a.ICON_RATE).removeClass(a.ICON_SOLID_HALF),y.toggleClass("layui-rate-hover",d)}),o.value=f,o.text&&c.next("span").text(o.value),o.setText&&o.setText(o.value))},onTouchEnd:function(h,p){Date.now()-p.timeStart<=200||(c.find("i").removeClass("layui-rate-hover"),o.choose&&o.choose(o.value),o.setText&&o.setText(o.value))}})},e(a.MOD_NAME,s)}),layui.define("jquery",function(e){var i=layui.$,r=function(s){};r.prototype.load=function(s){var a,o,c,l,u,h,p,f,x,y,d,_,g,m,v,S=this,M=0,w=i((s=s||{}).elem);if(w[0])return u=i(s.scrollElem||document),h="mb"in s?s.mb:50,p=!("isAuto"in s)||s.isAuto,f=s.moreText||"加载更多",x=s.end||"没有更多了",y=(s.direction||"bottom")==="top",S._cleanup(w,u),d=s.scrollElem&&s.scrollElem!==document,g=i('<div class="layui-flow-more"><a href="javascript:;">'+(_="<cite>"+f+"</cite>")+"</a></div>"),w.find(".layui-flow-more")[0]||w[y?"prepend":"append"](g),m=function(L,P){var N=d?u.prop("scrollHeight"):document.documentElement.scrollHeight,k=u.scrollTop();L=i(L),g[y?"after":"before"](L),(P=P==0||null)?g.html(x):g.find("a").html(_),o=P,a=null,c&&c(),y&&(L=d?u.prop("scrollHeight"):document.documentElement.scrollHeight,M===1?u.scrollTop(L):1<M&&u.scrollTop(k+(L-N)))},(v=function(){a=!0,g.find("a").html('<i class="layui-anim layui-anim-rotate layui-anim-loop layui-icon ">&#xe63e;</i>'),typeof s.done=="function"&&s.done(++M,m)})(),g.find("a").on("click.flow",function(){i(this),o||a||v()}),s.isLazyimg&&(c=S.lazyimg({elem:s.elem+" img",scrollElem:s.scrollElem,direction:s.direction})),p&&u.on("scroll.flow",function(){var L=i(this),P=L.scrollTop();l&&clearTimeout(l),!o&&w.width()&&(l=setTimeout(function(){var N=(d?L:i(window)).height(),k=d?L.prop("scrollHeight"):document.documentElement.scrollHeight;(y?P<=h:k-P-N<=h)&&!a&&v()},100))}),S},r.prototype.lazyimg=function(s){var a,o=this,c=0,l=i((s=s||{}).scrollElem||document),u=s.elem||"img",h=(s.direction||"bottom")==="top",p=s.scrollElem&&s.scrollElem!==document,f=function(y,m){var _,g=l.scrollTop(),m=g+m,v=p?y.offset().top-l.offset().top+g:y.offset().top;(h?v+y.height():v)>=g&&v<=m&&y.attr("lay-src")&&(_=y.attr("lay-src"),layui.img(_,function(){var S=o.lazyimg.elem.eq(c);y.attr("src",_).removeAttr("lay-src"),S[0]&&x(S),c++},function(){o.lazyimg.elem.eq(c),y.removeAttr("lay-src")}))},x=function(y,d){var _=(p?d||l:i(window)).height(),g=l.scrollTop(),m=g+_;if(o.lazyimg.elem=i(u),y)f(y,_);else for(var v=0;v<o.lazyimg.elem.length;v++){var S=o.lazyimg.elem.eq(v),M=p?S.offset().top-l.offset().top+g:S.offset().top;if(f(S,_),c=v,m<M)break}};return x(),l.on("scroll.lazyimg",function(){var y=i(this);a&&clearTimeout(a),a=setTimeout(function(){x(null,y)},50)}),x},r.prototype._cleanup=function(s,a){a.off("scroll.flow").off("scroll.lazyimg"),s.find(".layui-flow-more").find("a").off("click.flow")},e("flow",new r)}),layui.define(["lay","util","element","tabs","form"],function(e){var i=layui.$,r=layui.util,s=layui.element,a=layui.tabs,o=layui.form,c=layui.layer,l=(layui.hint(),{ELEM_TAB:"layui-tab",ELEM_HEADER:"layui-code-header",ELEM_FULL:"layui-code-full",ELEM_PREVIEW:"layui-code-preview",ELEM_ITEM:"layui-code-item",ELEM_SHOW:"layui-show",ELEM_LINE:"layui-code-line",ELEM_LINE_NUM:"layui-code-line-number",ELEM_LN_MODE:"layui-code-ln-mode",CDDE_DATA_CLASS:"LayuiCodeDataClass",LINE_RAW_WIDTH:45}),u={elem:"",about:"",ln:!0,header:!1,encode:!0,copy:!0,text:{code:r.escape("</>"),preview:"Preview"},wordWrap:!0,lang:"text",highlighter:!1,langMarker:!1},h=layui.code?layui.code.index+1e4:0,p=function(f){return String(f).replace(/\s+$/,"").replace(/^\n|\n$/,"")};e("code",function(f,x){var y,d,_,g,m,v,S,M,w,L,P,N,k,D,C,T,A,E,I,B,$,Y={config:f=i.extend(!0,{},u,f),reload:function(G){layui.code(this.updateOptions(G))},updateOptions:function(G){return delete(G=G||{}).elem,i.extend(!0,f,G)},reloadCode:function(G){layui.code(this.updateOptions(G),"reloadCode")}},q=i(f.elem);return 1<q.length?layui.each(f.obverse?q:q.get().reverse(),function(){layui.code(i.extend({},f,{elem:this}),x)}):(y=f.elem=i(f.elem))[0]&&(i.extend(!0,f,lay.options(y[0]),(d={},layui.each(["title","height","encode","skin","about"],function(G,F){var U=y.attr("lay-"+F);typeof U=="string"&&(d[F]=U)}),d)),f.encode=(f.encode||f.preview)&&!f.codeRender,f.code=f.code||(_=[],y.children("textarea").each(function(){_.push(p(this.value))}),_.length===0&&_.push(p(y.html())),_.join("")),q=function(G){typeof f.codeRender=="function"&&(G=f.codeRender(String(G),f));var F=String(G).split(/\r?\n/g);return{lines:F,html:G=i.map(F,function(U,j){return['<div class="'+l.ELEM_LINE+'">',f.ln?['<div class="'+l.ELEM_LINE_NUM+'">',r.digit(j+1)+".","</div>"].join(""):"",'<div class="layui-code-line-content">',U||" ","</div>","</div>"].join("")})}},g=f.code,m=function(G){return typeof f.codeParse=="function"?f.codeParse(G,f):G},x==="reloadCode"?y.children(".layui-code-wrap").html(q(m(g)).html):(v=layui.code.index=++h,y.attr("lay-code-index",v),(B=l.CDDE_DATA_CLASS in y.data())&&y.attr("class",y.data(l.CDDE_DATA_CLASS)||""),B||y.data(l.CDDE_DATA_CLASS,y.attr("class")),S={copy:{className:"file-b",title:["复制代码"],event:function(G){var F=r.unescape(m(f.code)),U=typeof f.onCopy=="function";lay.clipboard.writeText({text:F,done:function(){U&&f.onCopy(F,!0)===!1||c.msg("已复制",{icon:1})},error:function(){U&&f.onCopy(F,!1)===!1||c.msg("复制失败",{icon:2})}})}}},function G(){var F=y.parent("."+l.ELEM_PREVIEW),U=F.children("."+l.ELEM_TAB),j=F.children("."+l.ELEM_ITEM+"-preview");return U.remove(),j.remove(),F[0]&&y.unwrap(),G}(),f.preview&&(B="LAY-CODE-DF-"+v,D=f.layout||["code","preview"],M=f.preview==="iframe",k=i('<div class="'+l.ELEM_PREVIEW+'">'),$=i('<div class="layui-tab layui-tab-brief">'),w=i('<div class="layui-tab-title">'),I=i('<div class="'+[l.ELEM_ITEM,l.ELEM_ITEM+"-preview","layui-border"].join(" ")+'">'),L=i('<div class="layui-code-tools"></div>'),f.id&&k.attr("id",f.id),k.addClass(f.className),$.attr("lay-filter",B),layui.each(D,function(G,F){var U=i('<li lay-id="'+F+'">');G===0&&U.addClass("layui-this"),U.html(f.text[F]),w.append(U)}),i.extend(S,{full:{className:"screen-full",title:["最大化显示","还原显示"],event:function(F){var F=F.elem,U=F.closest("."+l.ELEM_PREVIEW),j="layui-icon-"+this.className,et="layui-icon-screen-restore",V=this.title,tt=i("html,body"),z="layui-scrollbar-hide";F.hasClass(j)?(U.addClass(l.ELEM_FULL),F.removeClass(j).addClass(et),F.attr("title",V[1]),tt.addClass(z)):(U.removeClass(l.ELEM_FULL),F.removeClass(et).addClass(j),F.attr("title",V[0]),tt.removeClass(z))}},window:{className:"release",title:["在新窗口预览"],event:function(G){r.openWin({content:m(f.code)})}}}),f.copy&&(layui.type(f.tools)==="array"?f.tools.indexOf("copy")===-1&&f.tools.unshift("copy"):f.tools=["copy"]),L.on("click",">i",function(){var F=i(this),G=F.data("type"),F={elem:F,type:G,options:f,rawCode:f.code,finalCode:r.unescape(m(f.code))};S[G]&&typeof S[G].event=="function"&&S[G].event(F),typeof f.toolsEvent=="function"&&f.toolsEvent(F)}),f.addTools&&f.tools&&(f.tools=[].concat(f.tools,f.addTools)),layui.each(f.tools,function(G,F){var V=typeof F=="object",U=V?F:S[F]||{className:F,title:[F]},j=U.className||U.type,et=U.title||[""],V=V?U.type||j:F;V&&(S[V]||((F={})[V]=U,i.extend(S,F)),L.append('<i class="layui-icon layui-icon-'+j+'" data-type="'+V+'" title="'+et[0]+'"></i>'))}),y.addClass(l.ELEM_ITEM).wrap(k),$.append(w),f.tools&&$.append(L),y.before($),M&&I.html('<iframe allowtransparency="true" frameborder="0"></iframe>'),P=function(G){var F=G.children("iframe")[0];M&&F?F.srcdoc=m(f.code):G.html(f.code),setTimeout(function(){typeof f.done=="function"&&f.done({container:G,options:f,render:function(){o.render(G.find(".layui-form")),s.render(),a.render({elem:["."+l.ELEM_PREVIEW,".layui-tabs"].join(" ")})}})},3)},D[0]==="preview"?(I.addClass(l.ELEM_SHOW),y.before(I),P(I)):y.addClass(l.ELEM_SHOW).after(I),f.previewStyle=[f.style,f.previewStyle].join(""),I.attr("style",f.previewStyle),s.on("tab("+B+")",function(j){var F=i(this),U=i(j.elem).closest("."+l.ELEM_PREVIEW).find("."+l.ELEM_ITEM),j=U.eq(j.index);U.removeClass(l.ELEM_SHOW),j.addClass(l.ELEM_SHOW),F.attr("lay-id")==="preview"&&P(j),E()})),N=i('<code class="layui-code-wrap"></code>'),y.addClass((k=["layui-code-view layui-border-box"],f.wordWrap||k.push("layui-code-nowrap"),k.join(" "))),($=f.theme||f.skin)&&(y.removeClass("layui-code-theme-dark layui-code-theme-light"),y.addClass("layui-code-theme-"+$)),f.highlighter&&y.addClass([f.highlighter,"language-"+f.lang,"layui-code-hl"].join(" ")),D=q(f.encode?r.escape(m(g)):g),C=D.lines,y.html(N.html(D.html)),f.ln&&y.append('<div class="layui-code-ln-side"></div>'),f.height&&N.css("max-height",f.height),f.codeStyle=[f.style,f.codeStyle].join(""),f.codeStyle&&N.attr("style",function(G,F){return(F||"")+f.codeStyle}),T=[{selector:">.layui-code-wrap>.layui-code-line{}",setValue:function(G,F){G.style["padding-left"]=F+"px"}},{selector:">.layui-code-wrap>.layui-code-line>.layui-code-line-number{}",setValue:function(G,F){G.style.width=F+"px"}},{selector:">.layui-code-ln-side{}",setValue:function(G,F){G.style.width=F+"px"}}],A=lay.style({target:y[0],id:"DF-code-"+v,text:i.map(i.map(T,function(G){return G.selector}),function(G,F){return['.layui-code-view[lay-code-index="'+v+'"]',G].join(" ")}).join("")}),E=function G(){var F,U;return f.ln&&(F=Math.floor(C.length/100),U=N.children("."+l.ELEM_LINE).last().children("."+l.ELEM_LINE_NUM).outerWidth(),y.addClass(l.ELEM_LN_MODE),F)&&l.LINE_RAW_WIDTH<U&&lay.getStyleRules(A,function(j,et){try{T[et].setValue(j,U)}catch{}}),G}(),f.header&&((I=i('<div class="'+l.ELEM_HEADER+'"></div>')).html(f.title||f.text.code),y.prepend(I)),B=i('<div class="layui-code-fixbar"></div>'),f.copy&&!f.preview&&(($=i(['<span class="layui-code-copy">','<i class="layui-icon layui-icon-file-b" title="复制"></i>',"</span>"].join(""))).on("click",function(){S.copy.event()}),B.append($)),f.langMarker&&B.append('<span class="layui-code-lang-marker">'+f.lang+"</span>"),f.about&&B.append(f.about),y.append(B),f.preview||setTimeout(function(){typeof f.done=="function"&&f.done({})},3),f.elem.length===1+v&&typeof f.allDone=="function"&&f.allDone())),Y})}),layui["layui.all"]||layui.addcss("modules/code.css?v=6","skincodecss")}(Tc)),Tc.exports}X4();function kc(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function V4(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function t0(n){let t,e,i;n.length!==2?(t=kc,e=(o,c)=>kc(n(o),c),i=(o,c)=>n(o)-c):(t=n===kc||n===V4?n:q4,e=n,i=n);function r(o,c,l=0,u=o.length){if(l<u){if(t(c,c)!==0)return u;do{const h=l+u>>>1;e(o[h],c)<0?l=h+1:u=h}while(l<u)}return l}function s(o,c,l=0,u=o.length){if(l<u){if(t(c,c)!==0)return u;do{const h=l+u>>>1;e(o[h],c)<=0?l=h+1:u=h}while(l<u)}return l}function a(o,c,l=0,u=o.length){const h=r(o,c,l,u-1);return h>l&&i(o[h-1],c)>-i(o[h],c)?h-1:h}return{left:r,center:a,right:s}}function q4(){return 0}function K4(n){return n===null?NaN:+n}const a2=t0(kc),e0=a2.right,Z4=a2.left;t0(K4).center;function Q4(n,t){let e=0;for(let i of n)i!=null&&(i=+i)>=i&&++e;return e}function Mc(n,t){let e,i;if(t===void 0)for(const r of n)r!=null&&(e===void 0?r>=r&&(e=i=r):(e>r&&(e=r),i<r&&(i=r)));else{let r=-1;for(let s of n)(s=t(s,++r,n))!=null&&(e===void 0?s>=s&&(e=i=s):(e>s&&(e=s),i<s&&(i=s)))}return[e,i]}class ns{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=e[r],a=t+s,o=Math.abs(t)<Math.abs(s)?t-(a-s):s-(a-t);o&&(e[i++]=o),t=a}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,s,a=0;if(e>0){for(a=t[--e];e>0&&(i=a,r=t[--e],a=i+r,s=r-(a-i),!s););e>0&&(s<0&&t[e-1]<0||s>0&&t[e-1]>0)&&(r=s*2,i=a+r,r==i-a&&(a=i))}return a}}function J4(n){return n}var t6=Array.prototype,e6=t6.slice;function xh(n){return()=>n}const i6=Math.sqrt(50),n6=Math.sqrt(10),r6=Math.sqrt(2);function $c(n,t,e){const i=(t-n)/Math.max(0,e),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=i6?10:s>=n6?5:s>=r6?2:1;let o,c,l;return r<0?(l=Math.pow(10,-r)/a,o=Math.round(n*l),c=Math.round(t*l),o/l<n&&++o,c/l>t&&--c,l=-l):(l=Math.pow(10,r)*a,o=Math.round(n/l),c=Math.round(t/l),o*l<n&&++o,c*l>t&&--c),c<o&&.5<=e&&e<2?$c(n,t,e*2):[o,c,l]}function o2(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const i=t<n,[r,s,a]=i?$c(t,n,e):$c(n,t,e);if(!(s>=r))return[];const o=s-r+1,c=new Array(o);if(i)if(a<0)for(let l=0;l<o;++l)c[l]=(s-l)/-a;else for(let l=0;l<o;++l)c[l]=(s-l)*a;else if(a<0)for(let l=0;l<o;++l)c[l]=(r+l)/-a;else for(let l=0;l<o;++l)c[l]=(r+l)*a;return c}function aa(n,t,e){return t=+t,n=+n,e=+e,$c(n,t,e)[2]}function Wd(n,t,e){t=+t,n=+n,e=+e;const i=t<n,r=i?aa(t,n,e):aa(n,t,e);return(i?-1:1)*(r<0?1/-r:r)}function s6(n,t,e){let i;for(;;){const r=aa(n,t,e);if(r===i||r===0||!isFinite(r))return[n,t];r>0?(n=Math.floor(n/r)*r,t=Math.ceil(t/r)*r):r<0&&(n=Math.ceil(n*r)/r,t=Math.floor(t*r)/r),i=r}}function a6(n){return Math.max(1,Math.ceil(Math.log(Q4(n))/Math.LN2)+1)}function Eu(){var n=J4,t=Mc,e=a6;function i(r){Array.isArray(r)||(r=Array.from(r));var s,a=r.length,o,c,l=new Array(a);for(s=0;s<a;++s)l[s]=n(r[s],s,r);var u=t(l),h=u[0],p=u[1],f=e(l,h,p);if(!Array.isArray(f)){const m=p,v=+f;if(t===Mc&&([h,p]=s6(h,p,v)),f=o2(h,p,v),f[0]<=h&&(c=aa(h,p,v)),f[f.length-1]>=p)if(m>=p&&t===Mc){const S=aa(h,p,v);isFinite(S)&&(S>0?p=(Math.floor(p/S)+1)*S:S<0&&(p=(Math.ceil(p*-S)+1)/-S))}else f.pop()}for(var x=f.length,y=0,d=x;f[y]<=h;)++y;for(;f[d-1]>p;)--d;(y||d<x)&&(f=f.slice(y,d),x=d-y);var _=new Array(x+1),g;for(s=0;s<=x;++s)g=_[s]=[],g.x0=s>0?f[s-1]:h,g.x1=s<x?f[s]:p;if(isFinite(c)){if(c>0)for(s=0;s<a;++s)(o=l[s])!=null&&h<=o&&o<=p&&_[Math.min(x,Math.floor((o-h)/c))].push(r[s]);else if(c<0){for(s=0;s<a;++s)if((o=l[s])!=null&&h<=o&&o<=p){const m=Math.floor((h-o)*c);_[Math.min(x,m+(f[m]<=o))].push(r[s])}}}else for(s=0;s<a;++s)(o=l[s])!=null&&h<=o&&o<=p&&_[e0(f,o,0,x)].push(r[s]);return _}return i.value=function(r){return arguments.length?(n=typeof r=="function"?r:xh(r),i):n},i.domain=function(r){return arguments.length?(t=typeof r=="function"?r:xh([r[0],r[1]]),i):t},i.thresholds=function(r){return arguments.length?(e=typeof r=="function"?r:xh(Array.isArray(r)?e6.call(r):r),i):e},i}function i0(n,t){let e;if(t===void 0)for(const i of n)i!=null&&(e<i||e===void 0&&i>=i)&&(e=i);else{let i=-1;for(let r of n)(r=t(r,++i,n))!=null&&(e<r||e===void 0&&r>=r)&&(e=r)}return e}function*o6(n){for(const t of n)yield*t}function l2(n){return Array.from(o6(n))}function Ta(n,t,e){n=+n,t=+t,e=(r=arguments.length)<2?(t=n,n=0,1):r<3?1:+e;for(var i=-1,r=Math.max(0,Math.ceil((t-n)/e))|0,s=new Array(r);++i<r;)s[i]=n+i*e;return s}var l6={value:()=>{}};function Pl(){for(var n=0,t=arguments.length,e={},i;n<t;++n){if(!(i=arguments[n]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new Ac(e)}function Ac(n){this._=n}function c6(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}Ac.prototype=Pl.prototype={constructor:Ac,on:function(n,t){var e=this._,i=c6(n+"",e),r,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((r=(n=i[s]).type)&&(r=u6(e[r],n.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(r=(n=i[s]).type)e[r]=rp(e[r],n.name,t);else if(t==null)for(r in e)e[r]=rp(e[r],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Ac(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,s;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(t,e)}};function u6(n,t){for(var e=0,i=n.length,r;e<i;++e)if((r=n[e]).name===t)return r.value}function rp(n,t,e){for(var i=0,r=n.length;i<r;++i)if(n[i].name===t){n[i]=l6,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}var $d="http://www.w3.org/1999/xhtml";const sp={svg:"http://www.w3.org/2000/svg",xhtml:$d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pu(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),sp.hasOwnProperty(t)?{space:sp[t],local:n}:n}function h6(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===$d&&t.documentElement.namespaceURI===$d?t.createElement(n):t.createElementNS(e,n)}}function d6(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function c2(n){var t=Pu(n);return(t.local?d6:h6)(t)}function f6(){}function n0(n){return n==null?f6:function(){return this.querySelector(n)}}function p6(n){typeof n!="function"&&(n=n0(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var s=t[r],a=s.length,o=i[r]=new Array(a),c,l,u=0;u<a;++u)(c=s[u])&&(l=n.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),o[u]=l);return new Li(i,this._parents)}function g6(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function m6(){return[]}function u2(n){return n==null?m6:function(){return this.querySelectorAll(n)}}function y6(n){return function(){return g6(n.apply(this,arguments))}}function v6(n){typeof n=="function"?n=y6(n):n=u2(n);for(var t=this._groups,e=t.length,i=[],r=[],s=0;s<e;++s)for(var a=t[s],o=a.length,c,l=0;l<o;++l)(c=a[l])&&(i.push(n.call(c,c.__data__,l,a)),r.push(c));return new Li(i,r)}function h2(n){return function(){return this.matches(n)}}function d2(n){return function(t){return t.matches(n)}}var x6=Array.prototype.find;function _6(n){return function(){return x6.call(this.children,n)}}function b6(){return this.firstElementChild}function w6(n){return this.select(n==null?b6:_6(typeof n=="function"?n:d2(n)))}var C6=Array.prototype.filter;function S6(){return Array.from(this.children)}function T6(n){return function(){return C6.call(this.children,n)}}function k6(n){return this.selectAll(n==null?S6:T6(typeof n=="function"?n:d2(n)))}function M6(n){typeof n!="function"&&(n=h2(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var s=t[r],a=s.length,o=i[r]=[],c,l=0;l<a;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&o.push(c);return new Li(i,this._parents)}function f2(n){return new Array(n.length)}function A6(){return new Li(this._enter||this._groups.map(f2),this._parents)}function Uc(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}Uc.prototype={constructor:Uc,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function E6(n){return function(){return n}}function P6(n,t,e,i,r,s){for(var a=0,o,c=t.length,l=s.length;a<l;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):e[a]=new Uc(n,s[a]);for(;a<c;++a)(o=t[a])&&(r[a]=o)}function D6(n,t,e,i,r,s,a){var o,c,l=new Map,u=t.length,h=s.length,p=new Array(u),f;for(o=0;o<u;++o)(c=t[o])&&(p[o]=f=a.call(c,c.__data__,o,t)+"",l.has(f)?r[o]=c:l.set(f,c));for(o=0;o<h;++o)f=a.call(n,s[o],o,s)+"",(c=l.get(f))?(i[o]=c,c.__data__=s[o],l.delete(f)):e[o]=new Uc(n,s[o]);for(o=0;o<u;++o)(c=t[o])&&l.get(p[o])===c&&(r[o]=c)}function L6(n){return n.__data__}function R6(n,t){if(!arguments.length)return Array.from(this,L6);var e=t?D6:P6,i=this._parents,r=this._groups;typeof n!="function"&&(n=E6(n));for(var s=r.length,a=new Array(s),o=new Array(s),c=new Array(s),l=0;l<s;++l){var u=i[l],h=r[l],p=h.length,f=I6(n.call(u,u&&u.__data__,l,i)),x=f.length,y=o[l]=new Array(x),d=a[l]=new Array(x),_=c[l]=new Array(p);e(u,h,y,d,_,f,t);for(var g=0,m=0,v,S;g<x;++g)if(v=y[g]){for(g>=m&&(m=g+1);!(S=d[m])&&++m<x;);v._next=S||null}}return a=new Li(a,i),a._enter=o,a._exit=c,a}function I6(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function N6(){return new Li(this._exit||this._groups.map(f2),this._parents)}function F6(n,t,e){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),t!=null&&(r=t(r),r&&(r=r.selection())),e==null?s.remove():e(s),i&&r?i.merge(r).order():r}function O6(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,r=e.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var l=e[c],u=i[c],h=l.length,p=o[c]=new Array(h),f,x=0;x<h;++x)(f=l[x]||u[x])&&(p[x]=f);for(;c<r;++c)o[c]=e[c];return new Li(o,this._parents)}function B6(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i=n[t],r=i.length-1,s=i[r],a;--r>=0;)(a=i[r])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function z6(n){n||(n=H6);function t(h,p){return h&&p?n(h.__data__,p.__data__):!h-!p}for(var e=this._groups,i=e.length,r=new Array(i),s=0;s<i;++s){for(var a=e[s],o=a.length,c=r[s]=new Array(o),l,u=0;u<o;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new Li(r,this._parents).order()}function H6(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function G6(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function W6(){return Array.from(this)}function $6(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null}function U6(){let n=0;for(const t of this)++n;return n}function Y6(){return!this.node()}function j6(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var r=t[e],s=0,a=r.length,o;s<a;++s)(o=r[s])&&n.call(o,o.__data__,s,r);return this}function X6(n){return function(){this.removeAttribute(n)}}function V6(n){return function(){this.removeAttributeNS(n.space,n.local)}}function q6(n,t){return function(){this.setAttribute(n,t)}}function K6(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function Z6(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function Q6(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function J6(n,t){var e=Pu(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?V6:X6:typeof t=="function"?e.local?Q6:Z6:e.local?K6:q6)(e,t))}function p2(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function tx(n){return function(){this.style.removeProperty(n)}}function ex(n,t,e){return function(){this.style.setProperty(n,t,e)}}function ix(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function nx(n,t,e){return arguments.length>1?this.each((t==null?tx:typeof t=="function"?ix:ex)(n,t,e??"")):oa(this.node(),n)}function oa(n,t){return n.style.getPropertyValue(t)||p2(n).getComputedStyle(n,null).getPropertyValue(t)}function rx(n){return function(){delete this[n]}}function sx(n,t){return function(){this[n]=t}}function ax(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function ox(n,t){return arguments.length>1?this.each((t==null?rx:typeof t=="function"?ax:sx)(n,t)):this.node()[n]}function g2(n){return n.trim().split(/^|\s+/)}function r0(n){return n.classList||new m2(n)}function m2(n){this._node=n,this._names=g2(n.getAttribute("class")||"")}m2.prototype={add:function(n){var t=this._names.indexOf(n);t<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function y2(n,t){for(var e=r0(n),i=-1,r=t.length;++i<r;)e.add(t[i])}function v2(n,t){for(var e=r0(n),i=-1,r=t.length;++i<r;)e.remove(t[i])}function lx(n){return function(){y2(this,n)}}function cx(n){return function(){v2(this,n)}}function ux(n,t){return function(){(t.apply(this,arguments)?y2:v2)(this,n)}}function hx(n,t){var e=g2(n+"");if(arguments.length<2){for(var i=r0(this.node()),r=-1,s=e.length;++r<s;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof t=="function"?ux:t?lx:cx)(e,t))}function dx(){this.textContent=""}function fx(n){return function(){this.textContent=n}}function px(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function gx(n){return arguments.length?this.each(n==null?dx:(typeof n=="function"?px:fx)(n)):this.node().textContent}function mx(){this.innerHTML=""}function yx(n){return function(){this.innerHTML=n}}function vx(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function xx(n){return arguments.length?this.each(n==null?mx:(typeof n=="function"?vx:yx)(n)):this.node().innerHTML}function _x(){this.nextSibling&&this.parentNode.appendChild(this)}function bx(){return this.each(_x)}function wx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cx(){return this.each(wx)}function Sx(n){var t=typeof n=="function"?n:c2(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tx(){return null}function kx(n,t){var e=typeof n=="function"?n:c2(n),i=t==null?Tx:typeof t=="function"?t:n0(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function Mx(){var n=this.parentNode;n&&n.removeChild(this)}function Ax(){return this.each(Mx)}function Ex(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Px(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Dx(n){return this.select(n?Px:Ex)}function Lx(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Rx(n){return function(t){n.call(this,t,this.__data__)}}function Ix(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function Nx(n){return function(){var t=this.__on;if(t){for(var e=0,i=-1,r=t.length,s;e<r;++e)s=t[e],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function Fx(n,t,e){return function(){var i=this.__on,r,s=Rx(t);if(i){for(var a=0,o=i.length;a<o;++a)if((r=i[a]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=e),r.value=t;return}}this.addEventListener(n.type,s,e),r={type:n.type,name:n.name,value:t,listener:s,options:e},i?i.push(r):this.__on=[r]}}function Ox(n,t,e){var i=Ix(n+""),r,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,l=o.length,u;c<l;++c)for(r=0,u=o[c];r<s;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?Fx:Nx,r=0;r<s;++r)this.each(o(i[r],t,e));return this}function x2(n,t,e){var i=p2(n),r=i.CustomEvent;typeof r=="function"?r=new r(t,e):(r=i.document.createEvent("Event"),e?(r.initEvent(t,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(t,!1,!1)),n.dispatchEvent(r)}function Bx(n,t){return function(){return x2(this,n,t)}}function zx(n,t){return function(){return x2(this,n,t.apply(this,arguments))}}function Hx(n,t){return this.each((typeof t=="function"?zx:Bx)(n,t))}function*Gx(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],r=0,s=i.length,a;r<s;++r)(a=i[r])&&(yield a)}var _2=[null];function Li(n,t){this._groups=n,this._parents=t}function ka(){return new Li([[document.documentElement]],_2)}function Wx(){return this}Li.prototype=ka.prototype={constructor:Li,select:p6,selectAll:v6,selectChild:w6,selectChildren:k6,filter:M6,data:R6,enter:A6,exit:N6,join:F6,merge:O6,selection:Wx,order:B6,sort:z6,call:G6,nodes:W6,node:$6,size:U6,empty:Y6,each:j6,attr:J6,style:nx,property:ox,classed:hx,text:gx,html:xx,raise:bx,lower:Cx,append:Sx,insert:kx,remove:Ax,clone:Dx,datum:Lx,on:Ox,dispatch:Hx,[Symbol.iterator]:Gx};function It(n){return typeof n=="string"?new Li([[document.querySelector(n)]],[document.documentElement]):new Li([[n]],_2)}function $x(n){let t;for(;t=n.sourceEvent;)n=t;return n}function ri(n,t){if(n=$x(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop]}}return[n.pageX,n.pageY]}const Ux={passive:!1},ul={capture:!0,passive:!1};function _h(n){n.stopImmediatePropagation()}function Ks(n){n.preventDefault(),n.stopImmediatePropagation()}function s0(n){var t=n.document.documentElement,e=It(n).on("dragstart.drag",Ks,ul);"onselectstart"in t?e.on("selectstart.drag",Ks,ul):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function a0(n,t){var e=n.document.documentElement,i=It(n).on("dragstart.drag",null);t&&(i.on("click.drag",Ks,ul),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Vl=n=>()=>n;function Ud(n,{sourceEvent:t,subject:e,target:i,identifier:r,active:s,x:a,y:o,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Ud.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function Yx(n){return!n.ctrlKey&&!n.button}function jx(){return this.parentNode}function Xx(n,t){return t??{x:n.x,y:n.y}}function Vx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yc(){var n=Yx,t=jx,e=Xx,i=Vx,r={},s=Pl("start","drag","end"),a=0,o,c,l,u,h=0;function p(v){v.on("mousedown.drag",f).filter(i).on("touchstart.drag",d).on("touchmove.drag",_,Ux).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(v,S){if(!(u||!n.call(this,v,S))){var M=m(this,t.call(this,v,S),v,S,"mouse");M&&(It(v.view).on("mousemove.drag",x,ul).on("mouseup.drag",y,ul),s0(v.view),_h(v),l=!1,o=v.clientX,c=v.clientY,M("start",v))}}function x(v){if(Ks(v),!l){var S=v.clientX-o,M=v.clientY-c;l=S*S+M*M>h}r.mouse("drag",v)}function y(v){It(v.view).on("mousemove.drag mouseup.drag",null),a0(v.view,l),Ks(v),r.mouse("end",v)}function d(v,S){if(n.call(this,v,S)){var M=v.changedTouches,w=t.call(this,v,S),L=M.length,P,N;for(P=0;P<L;++P)(N=m(this,w,v,S,M[P].identifier,M[P]))&&(_h(v),N("start",v,M[P]))}}function _(v){var S=v.changedTouches,M=S.length,w,L;for(w=0;w<M;++w)(L=r[S[w].identifier])&&(Ks(v),L("drag",v,S[w]))}function g(v){var S=v.changedTouches,M=S.length,w,L;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),w=0;w<M;++w)(L=r[S[w].identifier])&&(_h(v),L("end",v,S[w]))}function m(v,S,M,w,L,P){var N=s.copy(),k=ri(P||M,S),D,C,T;if((T=e.call(v,new Ud("beforestart",{sourceEvent:M,target:p,identifier:L,active:a,x:k[0],y:k[1],dx:0,dy:0,dispatch:N}),w))!=null)return D=T.x-k[0]||0,C=T.y-k[1]||0,function A(E,I,B){var $=k,Y;switch(E){case"start":r[L]=A,Y=a++;break;case"end":delete r[L],--a;case"drag":k=ri(B||I,S),Y=a;break}N.call(E,v,new Ud(E,{sourceEvent:I,subject:T,target:p,identifier:L,active:Y,x:k[0]+D,y:k[1]+C,dx:k[0]-$[0],dy:k[1]-$[1],dispatch:N}),w)}}return p.filter=function(v){return arguments.length?(n=typeof v=="function"?v:Vl(!!v),p):n},p.container=function(v){return arguments.length?(t=typeof v=="function"?v:Vl(v),p):t},p.subject=function(v){return arguments.length?(e=typeof v=="function"?v:Vl(v),p):e},p.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Vl(!!v),p):i},p.on=function(){var v=s.on.apply(s,arguments);return v===s?p:v},p.clickDistance=function(v){return arguments.length?(h=(v=+v)*v,p):Math.sqrt(h)},p}function Dl(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function Du(n,t){var e=Object.create(n.prototype);for(var i in t)e[i]=t[i];return e}function cs(){}var hl=.7,jc=1/hl,Zs="\\s*([+-]?\\d+)\\s*",dl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qx=/^#([0-9a-f]{3,8})$/,Kx=new RegExp(`^rgb\\(${Zs},${Zs},${Zs}\\)$`),Zx=new RegExp(`^rgb\\(${Tn},${Tn},${Tn}\\)$`),Qx=new RegExp(`^rgba\\(${Zs},${Zs},${Zs},${dl}\\)$`),Jx=new RegExp(`^rgba\\(${Tn},${Tn},${Tn},${dl}\\)$`),t8=new RegExp(`^hsl\\(${dl},${Tn},${Tn}\\)$`),e8=new RegExp(`^hsla\\(${dl},${Tn},${Tn},${dl}\\)$`),ap={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dl(cs,an,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:op,formatHex:op,formatHex8:i8,formatHsl:n8,formatRgb:lp,toString:lp});function op(){return this.rgb().formatHex()}function i8(){return this.rgb().formatHex8()}function n8(){return w2(this).formatHsl()}function lp(){return this.rgb().formatRgb()}function an(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=qx.exec(n))?(e=t[1].length,t=parseInt(t[1],16),e===6?cp(t):e===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?ql(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?ql(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Kx.exec(n))?new Je(t[1],t[2],t[3],1):(t=Zx.exec(n))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qx.exec(n))?ql(t[1],t[2],t[3],t[4]):(t=Jx.exec(n))?ql(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=t8.exec(n))?dp(t[1],t[2]/100,t[3]/100,1):(t=e8.exec(n))?dp(t[1],t[2]/100,t[3]/100,t[4]):ap.hasOwnProperty(n)?cp(ap[n]):n==="transparent"?new Je(NaN,NaN,NaN,0):null}function cp(n){return new Je(n>>16&255,n>>8&255,n&255,1)}function ql(n,t,e,i){return i<=0&&(n=t=e=NaN),new Je(n,t,e,i)}function b2(n){return n instanceof cs||(n=an(n)),n?(n=n.rgb(),new Je(n.r,n.g,n.b,n.opacity)):new Je}function Yd(n,t,e,i){return arguments.length===1?b2(n):new Je(n,t,e,i??1)}function Je(n,t,e,i){this.r=+n,this.g=+t,this.b=+e,this.opacity=+i}Dl(Je,Yd,Du(cs,{brighter(n){return n=n==null?jc:Math.pow(jc,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?hl:Math.pow(hl,n),new Je(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Je(Zr(this.r),Zr(this.g),Zr(this.b),Xc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:up,formatHex:up,formatHex8:r8,formatRgb:hp,toString:hp}));function up(){return`#${Yr(this.r)}${Yr(this.g)}${Yr(this.b)}`}function r8(){return`#${Yr(this.r)}${Yr(this.g)}${Yr(this.b)}${Yr((isNaN(this.opacity)?1:this.opacity)*255)}`}function hp(){const n=Xc(this.opacity);return`${n===1?"rgb(":"rgba("}${Zr(this.r)}, ${Zr(this.g)}, ${Zr(this.b)}${n===1?")":`, ${n})`}`}function Xc(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Zr(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Yr(n){return n=Zr(n),(n<16?"0":"")+n.toString(16)}function dp(n,t,e,i){return i<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new nn(n,t,e,i)}function w2(n){if(n instanceof nn)return new nn(n.h,n.s,n.l,n.opacity);if(n instanceof cs||(n=an(n)),!n)return new nn;if(n instanceof nn)return n;n=n.rgb();var t=n.r/255,e=n.g/255,i=n.b/255,r=Math.min(t,e,i),s=Math.max(t,e,i),a=NaN,o=s-r,c=(s+r)/2;return o?(t===s?a=(e-i)/o+(e<i)*6:e===s?a=(i-t)/o+2:a=(t-e)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new nn(a,o,c,n.opacity)}function s8(n,t,e,i){return arguments.length===1?w2(n):new nn(n,t,e,i??1)}function nn(n,t,e,i){this.h=+n,this.s=+t,this.l=+e,this.opacity=+i}Dl(nn,s8,Du(cs,{brighter(n){return n=n==null?jc:Math.pow(jc,n),new nn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?hl:Math.pow(hl,n),new nn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*t,r=2*e-i;return new Je(bh(n>=240?n-240:n+120,r,i),bh(n,r,i),bh(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new nn(fp(this.h),Kl(this.s),Kl(this.l),Xc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Xc(this.opacity);return`${n===1?"hsl(":"hsla("}${fp(this.h)}, ${Kl(this.s)*100}%, ${Kl(this.l)*100}%${n===1?")":`, ${n})`}`}}));function fp(n){return n=(n||0)%360,n<0?n+360:n}function Kl(n){return Math.max(0,Math.min(1,n||0))}function bh(n,t,e){return(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)*255}const a8=Math.PI/180,o8=180/Math.PI,Vc=18,C2=.96422,S2=1,T2=.82521,k2=4/29,Qs=6/29,M2=3*Qs*Qs,l8=Qs*Qs*Qs;function A2(n){if(n instanceof kn)return new kn(n.l,n.a,n.b,n.opacity);if(n instanceof Vn)return E2(n);n instanceof Je||(n=b2(n));var t=Th(n.r),e=Th(n.g),i=Th(n.b),r=wh((.2225045*t+.7168786*e+.0606169*i)/S2),s,a;return t===e&&e===i?s=a=r:(s=wh((.4360747*t+.3850649*e+.1430804*i)/C2),a=wh((.0139322*t+.0971045*e+.7141733*i)/T2)),new kn(116*r-16,500*(s-r),200*(r-a),n.opacity)}function c8(n,t,e,i){return arguments.length===1?A2(n):new kn(n,t,e,i??1)}function kn(n,t,e,i){this.l=+n,this.a=+t,this.b=+e,this.opacity=+i}Dl(kn,c8,Du(cs,{brighter(n){return new kn(this.l+Vc*(n??1),this.a,this.b,this.opacity)},darker(n){return new kn(this.l-Vc*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return t=C2*Ch(t),n=S2*Ch(n),e=T2*Ch(e),new Je(Sh(3.1338561*t-1.6168667*n-.4906146*e),Sh(-.9787684*t+1.9161415*n+.033454*e),Sh(.0719453*t-.2289914*n+1.4052427*e),this.opacity)}}));function wh(n){return n>l8?Math.pow(n,1/3):n/M2+k2}function Ch(n){return n>Qs?n*n*n:M2*(n-k2)}function Sh(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Th(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function u8(n){if(n instanceof Vn)return new Vn(n.h,n.c,n.l,n.opacity);if(n instanceof kn||(n=A2(n)),n.a===0&&n.b===0)return new Vn(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*o8;return new Vn(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function jd(n,t,e,i){return arguments.length===1?u8(n):new Vn(n,t,e,i??1)}function Vn(n,t,e,i){this.h=+n,this.c=+t,this.l=+e,this.opacity=+i}function E2(n){if(isNaN(n.h))return new kn(n.l,0,0,n.opacity);var t=n.h*a8;return new kn(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}Dl(Vn,jd,Du(cs,{brighter(n){return new Vn(this.h,this.c,this.l+Vc*(n??1),this.opacity)},darker(n){return new Vn(this.h,this.c,this.l-Vc*(n??1),this.opacity)},rgb(){return E2(this).rgb()}}));const Lu=n=>()=>n;function P2(n,t){return function(e){return n+e*t}}function h8(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(i){return Math.pow(n+i*t,e)}}function d8(n,t){var e=t-n;return e?P2(n,e>180||e<-180?e-360*Math.round(e/360):e):Lu(isNaN(n)?t:n)}function f8(n){return(n=+n)==1?Vo:function(t,e){return e-t?h8(t,e,n):Lu(isNaN(t)?e:t)}}function Vo(n,t){var e=t-n;return e?P2(n,e):Lu(isNaN(n)?t:n)}const qc=function n(t){var e=f8(t);function i(r,s){var a=e((r=Yd(r)).r,(s=Yd(s)).r),o=e(r.g,s.g),c=e(r.b,s.b),l=Vo(r.opacity,s.opacity);return function(u){return r.r=a(u),r.g=o(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=n,i}(1);function p8(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,i=t.slice(),r;return function(s){for(r=0;r<e;++r)i[r]=n[r]*(1-s)+t[r]*s;return i}}function g8(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function m8(n,t){var e=t?t.length:0,i=n?Math.min(e,n.length):0,r=new Array(i),s=new Array(e),a;for(a=0;a<i;++a)r[a]=Ru(n[a],t[a]);for(;a<e;++a)s[a]=t[a];return function(o){for(a=0;a<i;++a)s[a]=r[a](o);return s}}function Xd(n,t){var e=new Date;return n=+n,t=+t,function(i){return e.setTime(n*(1-i)+t*i),e}}function tn(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function y8(n,t){var e={},i={},r;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in n?e[r]=Ru(n[r],t[r]):i[r]=t[r];return function(s){for(r in e)i[r]=e[r](s);return i}}var Vd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kh=new RegExp(Vd.source,"g");function v8(n){return function(){return n}}function x8(n){return function(t){return n(t)+""}}function D2(n,t){var e=Vd.lastIndex=kh.lastIndex=0,i,r,s,a=-1,o=[],c=[];for(n=n+"",t=t+"";(i=Vd.exec(n))&&(r=kh.exec(t));)(s=r.index)>e&&(s=t.slice(e,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,c.push({i:a,x:tn(i,r)})),e=kh.lastIndex;return e<t.length&&(s=t.slice(e),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?x8(c[0].x):v8(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)o[(h=c[u]).i]=h.x(l);return o.join("")})}function Ru(n,t){var e=typeof t,i;return t==null||e==="boolean"?Lu(t):(e==="number"?tn:e==="string"?(i=an(t))?(t=i,qc):D2:t instanceof an?qc:t instanceof Date?Xd:g8(t)?p8:Array.isArray(t)?m8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?y8:tn)(n,t)}function _8(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}var pp=180/Math.PI,qd={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function L2(n,t,e,i,r,s){var a,o,c;return(a=Math.sqrt(n*n+t*t))&&(n/=a,t/=a),(c=n*e+t*i)&&(e-=n*c,i-=t*c),(o=Math.sqrt(e*e+i*i))&&(e/=o,i/=o,c/=o),n*i<t*e&&(n=-n,t=-t,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(t,n)*pp,skewX:Math.atan(c)*pp,scaleX:a,scaleY:o}}var Zl;function b8(n){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return t.isIdentity?qd:L2(t.a,t.b,t.c,t.d,t.e,t.f)}function w8(n){return n==null||(Zl||(Zl=document.createElementNS("http://www.w3.org/2000/svg","g")),Zl.setAttribute("transform",n),!(n=Zl.transform.baseVal.consolidate()))?qd:(n=n.matrix,L2(n.a,n.b,n.c,n.d,n.e,n.f))}function R2(n,t,e,i){function r(l){return l.length?l.pop()+" ":""}function s(l,u,h,p,f,x){if(l!==h||u!==p){var y=f.push("translate(",null,t,null,e);x.push({i:y-4,x:tn(l,h)},{i:y-2,x:tn(u,p)})}else(h||p)&&f.push("translate("+h+t+p+e)}function a(l,u,h,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:tn(l,u)})):u&&h.push(r(h)+"rotate("+u+i)}function o(l,u,h,p){l!==u?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:tn(l,u)}):u&&h.push(r(h)+"skewX("+u+i)}function c(l,u,h,p,f,x){if(l!==h||u!==p){var y=f.push(r(f)+"scale(",null,",",null,")");x.push({i:y-4,x:tn(l,h)},{i:y-2,x:tn(u,p)})}else(h!==1||p!==1)&&f.push(r(f)+"scale("+h+","+p+")")}return function(l,u){var h=[],p=[];return l=n(l),u=n(u),s(l.translateX,l.translateY,u.translateX,u.translateY,h,p),a(l.rotate,u.rotate,h,p),o(l.skewX,u.skewX,h,p),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,p),l=u=null,function(f){for(var x=-1,y=p.length,d;++x<y;)h[(d=p[x]).i]=d.x(f);return h.join("")}}}var C8=R2(b8,"px, ","px)","deg)"),S8=R2(w8,", ",")",")"),T8=1e-12;function gp(n){return((n=Math.exp(n))+1/n)/2}function k8(n){return((n=Math.exp(n))-1/n)/2}function M8(n){return((n=Math.exp(2*n))-1)/(n+1)}const A8=function n(t,e,i){function r(s,a){var o=s[0],c=s[1],l=s[2],u=a[0],h=a[1],p=a[2],f=u-o,x=h-c,y=f*f+x*x,d,_;if(y<T8)_=Math.log(p/l)/t,d=function(w){return[o+w*f,c+w*x,l*Math.exp(t*w*_)]};else{var g=Math.sqrt(y),m=(p*p-l*l+i*y)/(2*l*e*g),v=(p*p-l*l-i*y)/(2*p*e*g),S=Math.log(Math.sqrt(m*m+1)-m),M=Math.log(Math.sqrt(v*v+1)-v);_=(M-S)/t,d=function(w){var L=w*_,P=gp(S),N=l/(e*g)*(P*M8(t*L+S)-k8(S));return[o+N*f,c+N*x,l*P/gp(t*L+S)]}}return d.duration=_*1e3*t/Math.SQRT2,d}return r.rho=function(s){var a=Math.max(.001,+s),o=a*a,c=o*o;return n(a,o,c)},r}(Math.SQRT2,2,4);function E8(n){return function(t,e){var i=n((t=jd(t)).h,(e=jd(e)).h),r=Vo(t.c,e.c),s=Vo(t.l,e.l),a=Vo(t.opacity,e.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=s(o),t.opacity=a(o),t+""}}}const P8=E8(d8);var la=0,No=0,Oa=0,I2=1e3,Kc,Fo,Zc=0,rs=0,Iu=0,fl=typeof performance=="object"&&performance.now?performance:Date,N2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function o0(){return rs||(N2(D8),rs=fl.now()+Iu)}function D8(){rs=0}function Qc(){this._call=this._time=this._next=null}Qc.prototype=F2.prototype={constructor:Qc,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?o0():+e)+(t==null?0:+t),!this._next&&Fo!==this&&(Fo?Fo._next=this:Kc=this,Fo=this),this._call=n,this._time=e,Kd()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kd())}};function F2(n,t,e){var i=new Qc;return i.restart(n,t,e),i}function L8(){o0(),++la;for(var n=Kc,t;n;)(t=rs-n._time)>=0&&n._call.call(void 0,t),n=n._next;--la}function mp(){rs=(Zc=fl.now())+Iu,la=No=0;try{L8()}finally{la=0,I8(),rs=0}}function R8(){var n=fl.now(),t=n-Zc;t>I2&&(Iu-=t,Zc=n)}function I8(){for(var n,t=Kc,e,i=1/0;t;)t._call?(i>t._time&&(i=t._time),n=t,t=t._next):(e=t._next,t._next=null,t=n?n._next=e:Kc=e);Fo=n,Kd(i)}function Kd(n){if(!la){No&&(No=clearTimeout(No));var t=n-rs;t>24?(n<1/0&&(No=setTimeout(mp,n-fl.now()-Iu)),Oa&&(Oa=clearInterval(Oa))):(Oa||(Zc=fl.now(),Oa=setInterval(R8,I2)),la=1,N2(mp))}}function yp(n,t,e){var i=new Qc;return t=t==null?0:+t,i.restart(r=>{i.stop(),n(r+t)},t,e),i}var N8=Pl("start","end","cancel","interrupt"),F8=[],O2=0,vp=1,Zd=2,Ec=3,xp=4,Qd=5,Pc=6;function Nu(n,t,e,i,r,s){var a=n.__transition;if(!a)n.__transition={};else if(e in a)return;O8(n,e,{name:t,index:i,group:r,on:N8,tween:F8,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:O2})}function l0(n,t){var e=ln(n,t);if(e.state>O2)throw new Error("too late; already scheduled");return e}function Dn(n,t){var e=ln(n,t);if(e.state>Ec)throw new Error("too late; already running");return e}function ln(n,t){var e=n.__transition;if(!e||!(e=e[t]))throw new Error("transition not found");return e}function O8(n,t,e){var i=n.__transition,r;i[t]=e,e.timer=F2(s,0,e.time);function s(l){e.state=vp,e.timer.restart(a,e.delay,e.time),e.delay<=l&&a(l-e.delay)}function a(l){var u,h,p,f;if(e.state!==vp)return c();for(u in i)if(f=i[u],f.name===e.name){if(f.state===Ec)return yp(a);f.state===xp?(f.state=Pc,f.timer.stop(),f.on.call("interrupt",n,n.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=Pc,f.timer.stop(),f.on.call("cancel",n,n.__data__,f.index,f.group),delete i[u])}if(yp(function(){e.state===Ec&&(e.state=xp,e.timer.restart(o,e.delay,e.time),o(l))}),e.state=Zd,e.on.call("start",n,n.__data__,e.index,e.group),e.state===Zd){for(e.state=Ec,r=new Array(p=e.tween.length),u=0,h=-1;u<p;++u)(f=e.tween[u].value.call(n,n.__data__,e.index,e.group))&&(r[++h]=f);r.length=h+1}}function o(l){for(var u=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(c),e.state=Qd,1),h=-1,p=r.length;++h<p;)r[h].call(n,u);e.state===Qd&&(e.on.call("end",n,n.__data__,e.index,e.group),c())}function c(){e.state=Pc,e.timer.stop(),delete i[t];for(var l in i)return;delete n.__transition}}function Js(n,t){var e=n.__transition,i,r,s=!0,a;if(e){t=t==null?null:t+"";for(a in e){if((i=e[a]).name!==t){s=!1;continue}r=i.state>Zd&&i.state<Qd,i.state=Pc,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete e[a]}s&&delete n.__transition}}function B8(n){return this.each(function(){Js(this,n)})}function z8(n,t){var e,i;return function(){var r=Dn(this,n),s=r.tween;if(s!==e){i=e=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function H8(n,t,e){var i,r;if(typeof e!="function")throw new Error;return function(){var s=Dn(this,n),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:t,value:e},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=o;break}c===l&&r.push(o)}s.tween=r}}function G8(n,t){var e=this._id;if(n+="",arguments.length<2){for(var i=ln(this.node(),e).tween,r=0,s=i.length,a;r<s;++r)if((a=i[r]).name===n)return a.value;return null}return this.each((t==null?z8:H8)(e,n,t))}function c0(n,t,e){var i=n._id;return n.each(function(){var r=Dn(this,i);(r.value||(r.value={}))[t]=e.apply(this,arguments)}),function(r){return ln(r,i).value[t]}}function B2(n,t){var e;return(typeof t=="number"?tn:t instanceof an?qc:(e=an(t))?(t=e,qc):D2)(n,t)}function W8(n){return function(){this.removeAttribute(n)}}function $8(n){return function(){this.removeAttributeNS(n.space,n.local)}}function U8(n,t,e){var i,r=e+"",s;return function(){var a=this.getAttribute(n);return a===r?null:a===i?s:s=t(i=a,e)}}function Y8(n,t,e){var i,r=e+"",s;return function(){var a=this.getAttributeNS(n.space,n.local);return a===r?null:a===i?s:s=t(i=a,e)}}function j8(n,t,e){var i,r,s;return function(){var a,o=e(this),c;return o==null?void this.removeAttribute(n):(a=this.getAttribute(n),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o)))}}function X8(n,t,e){var i,r,s;return function(){var a,o=e(this),c;return o==null?void this.removeAttributeNS(n.space,n.local):(a=this.getAttributeNS(n.space,n.local),c=o+"",a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o)))}}function V8(n,t){var e=Pu(n),i=e==="transform"?S8:B2;return this.attrTween(n,typeof t=="function"?(e.local?X8:j8)(e,i,c0(this,"attr."+n,t)):t==null?(e.local?$8:W8)(e):(e.local?Y8:U8)(e,i,t))}function q8(n,t){return function(e){this.setAttribute(n,t.call(this,e))}}function K8(n,t){return function(e){this.setAttributeNS(n.space,n.local,t.call(this,e))}}function Z8(n,t){var e,i;function r(){var s=t.apply(this,arguments);return s!==i&&(e=(i=s)&&K8(n,s)),e}return r._value=t,r}function Q8(n,t){var e,i;function r(){var s=t.apply(this,arguments);return s!==i&&(e=(i=s)&&q8(n,s)),e}return r._value=t,r}function J8(n,t){var e="attr."+n;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;var i=Pu(n);return this.tween(e,(i.local?Z8:Q8)(i,t))}function t_(n,t){return function(){l0(this,n).delay=+t.apply(this,arguments)}}function e_(n,t){return t=+t,function(){l0(this,n).delay=t}}function i_(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?t_:e_)(t,n)):ln(this.node(),t).delay}function n_(n,t){return function(){Dn(this,n).duration=+t.apply(this,arguments)}}function r_(n,t){return t=+t,function(){Dn(this,n).duration=t}}function s_(n){var t=this._id;return arguments.length?this.each((typeof n=="function"?n_:r_)(t,n)):ln(this.node(),t).duration}function a_(n,t){if(typeof t!="function")throw new Error;return function(){Dn(this,n).ease=t}}function o_(n){var t=this._id;return arguments.length?this.each(a_(t,n)):ln(this.node(),t).ease}function l_(n,t){return function(){var e=t.apply(this,arguments);if(typeof e!="function")throw new Error;Dn(this,n).ease=e}}function c_(n){if(typeof n!="function")throw new Error;return this.each(l_(this._id,n))}function u_(n){typeof n!="function"&&(n=h2(n));for(var t=this._groups,e=t.length,i=new Array(e),r=0;r<e;++r)for(var s=t[r],a=s.length,o=i[r]=[],c,l=0;l<a;++l)(c=s[l])&&n.call(c,c.__data__,l,s)&&o.push(c);return new er(i,this._parents,this._name,this._id)}function h_(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,e=n._groups,i=t.length,r=e.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var c=t[o],l=e[o],u=c.length,h=a[o]=new Array(u),p,f=0;f<u;++f)(p=c[f]||l[f])&&(h[f]=p);for(;o<i;++o)a[o]=t[o];return new er(a,this._parents,this._name,this._id)}function d_(n){return(n+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||t==="start"})}function f_(n,t,e){var i,r,s=d_(t)?l0:Dn;return function(){var a=s(this,n),o=a.on;o!==i&&(r=(i=o).copy()).on(t,e),a.on=r}}function p_(n,t){var e=this._id;return arguments.length<2?ln(this.node(),e).on.on(n):this.each(f_(e,n,t))}function g_(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}function m_(){return this.on("end.remove",g_(this._id))}function y_(n){var t=this._name,e=this._id;typeof n!="function"&&(n=n0(n));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o=i[a],c=o.length,l=s[a]=new Array(c),u,h,p=0;p<c;++p)(u=o[p])&&(h=n.call(u,u.__data__,p,o))&&("__data__"in u&&(h.__data__=u.__data__),l[p]=h,Nu(l[p],t,e,p,l,ln(u,e)));return new er(s,this._parents,t,e)}function v_(n){var t=this._name,e=this._id;typeof n!="function"&&(n=u2(n));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var c=i[o],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var p=n.call(u,u.__data__,h,c),f,x=ln(u,e),y=0,d=p.length;y<d;++y)(f=p[y])&&Nu(f,t,e,y,p,x);s.push(p),a.push(u)}return new er(s,a,t,e)}var x_=ka.prototype.constructor;function __(){return new x_(this._groups,this._parents)}function b_(n,t){var e,i,r;return function(){var s=oa(this,n),a=(this.style.removeProperty(n),oa(this,n));return s===a?null:s===e&&a===i?r:r=t(e=s,i=a)}}function z2(n){return function(){this.style.removeProperty(n)}}function w_(n,t,e){var i,r=e+"",s;return function(){var a=oa(this,n);return a===r?null:a===i?s:s=t(i=a,e)}}function C_(n,t,e){var i,r,s;return function(){var a=oa(this,n),o=e(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(n),oa(this,n))),a===c?null:a===i&&c===r?s:(r=c,s=t(i=a,o))}}function S_(n,t){var e,i,r,s="style."+t,a="end."+s,o;return function(){var c=Dn(this,n),l=c.on,u=c.value[s]==null?o||(o=z2(t)):void 0;(l!==e||r!==u)&&(i=(e=l).copy()).on(a,r=u),c.on=i}}function T_(n,t,e){var i=(n+="")=="transform"?C8:B2;return t==null?this.styleTween(n,b_(n,i)).on("end.style."+n,z2(n)):typeof t=="function"?this.styleTween(n,C_(n,i,c0(this,"style."+n,t))).each(S_(this._id,n)):this.styleTween(n,w_(n,i,t),e).on("end.style."+n,null)}function k_(n,t,e){return function(i){this.style.setProperty(n,t.call(this,i),e)}}function M_(n,t,e){var i,r;function s(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&k_(n,a,e)),i}return s._value=t,s}function A_(n,t,e){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,M_(n,t,e??""))}function E_(n){return function(){this.textContent=n}}function P_(n){return function(){var t=n(this);this.textContent=t??""}}function D_(n){return this.tween("text",typeof n=="function"?P_(c0(this,"text",n)):E_(n==null?"":n+""))}function L_(n){return function(t){this.textContent=n.call(this,t)}}function R_(n){var t,e;function i(){var r=n.apply(this,arguments);return r!==e&&(t=(e=r)&&L_(r)),t}return i._value=n,i}function I_(n){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;return this.tween(t,R_(n))}function N_(){for(var n=this._name,t=this._id,e=G2(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,l=0;l<o;++l)if(c=a[l]){var u=ln(c,t);Nu(c,n,e,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new er(i,this._parents,n,e)}function F_(){var n,t,e=this,i=e._id,r=e.size();return new Promise(function(s,a){var o={value:a},c={value:function(){--r===0&&s()}};e.each(function(){var l=Dn(this,i),u=l.on;u!==n&&(t=(n=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),l.on=t}),r===0&&s()})}var O_=0;function er(n,t,e,i){this._groups=n,this._parents=t,this._name=e,this._id=i}function H2(n){return ka().transition(n)}function G2(){return++O_}var On=ka.prototype;er.prototype=H2.prototype={constructor:er,select:y_,selectAll:v_,selectChild:On.selectChild,selectChildren:On.selectChildren,filter:u_,merge:h_,selection:__,transition:N_,call:On.call,nodes:On.nodes,node:On.node,size:On.size,empty:On.empty,each:On.each,on:p_,attr:V8,attrTween:J8,style:T_,styleTween:A_,text:D_,textTween:I_,remove:m_,tween:G8,delay:i_,duration:s_,ease:o_,easeVarying:c_,end:F_,[Symbol.iterator]:On[Symbol.iterator]};function B_(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var z_={time:null,delay:0,duration:250,ease:B_};function H_(n,t){for(var e;!(e=n.__transition)||!(e=e[t]);)if(!(n=n.parentNode))throw new Error(`transition ${t} not found`);return e}function G_(n){var t,e;n instanceof er?(t=n._id,n=n._name):(t=G2(),(e=z_).time=o0(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a=i[s],o=a.length,c,l=0;l<o;++l)(c=a[l])&&Nu(c,n,t,l,a,e||H_(c,t));return new er(i,this._parents,n,t)}ka.prototype.interrupt=B8;ka.prototype.transition=G_;const Mh=n=>()=>n;function W_(n,{sourceEvent:t,target:e,selection:i,mode:r,dispatch:s}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function $_(n){n.stopImmediatePropagation()}function Ah(n){n.preventDefault(),n.stopImmediatePropagation()}var _p={name:"drag"},Eh={name:"space"},Ts={name:"handle"},ks={name:"center"};const{abs:bp,max:Ve,min:qe}=Math;function wp(n){return[+n[0],+n[1]]}function Cp(n){return[wp(n[0]),wp(n[1])]}var Dc={name:"x",handles:["w","e"].map(Jd),input:function(n,t){return n==null?null:[[+n[0],t[0][1]],[+n[1],t[1][1]]]},output:function(n){return n&&[n[0][0],n[1][0]]}},Ph={},Bn={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Sp={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Tp={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},U_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Y_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Jd(n){return{type:n}}function j_(n){return!n.ctrlKey&&!n.button}function X_(){var n=this.ownerSVGElement||this;return n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]}function V_(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dh(n){for(;!n.__brush;)if(!(n=n.parentNode))return;return n.__brush}function q_(n){return n[0][0]===n[1][0]||n[0][1]===n[1][1]}function K_(){return Z_(Dc)}function Z_(n){var t=X_,e=j_,i=V_,r=!0,s=Pl("start","brush","end"),a=6,o;function c(d){var _=d.property("__brush",y).selectAll(".overlay").data([Jd("overlay")]);_.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Bn.overlay).merge(_).each(function(){var m=Dh(this).extent;It(this).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1])}),d.selectAll(".selection").data([Jd("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Bn.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var g=d.selectAll(".handle").data(n.handles,function(m){return m.type});g.exit().remove(),g.enter().append("rect").attr("class",function(m){return"handle handle--"+m.type}).attr("cursor",function(m){return Bn[m.type]}),d.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(d,_,g){d.tween?d.on("start.brush",function(m){u(this,arguments).beforestart().start(m)}).on("interrupt.brush end.brush",function(m){u(this,arguments).end(m)}).tween("brush",function(){var m=this,v=m.__brush,S=u(m,arguments),M=v.selection,w=n.input(typeof _=="function"?_.apply(this,arguments):_,v.extent),L=Ru(M,w);function P(N){v.selection=N===1&&w===null?null:L(N),l.call(m),S.brush()}return M!==null&&w!==null?P:P(1)}):d.each(function(){var m=this,v=arguments,S=m.__brush,M=n.input(typeof _=="function"?_.apply(m,v):_,S.extent),w=u(m,v).beforestart();Js(m),S.selection=M===null?null:M,l.call(m),w.start(g).brush(g).end(g)})},c.clear=function(d,_){c.move(d,null,_)};function l(){var d=It(this),_=Dh(this).selection;_?(d.selectAll(".selection").style("display",null).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1]),d.selectAll(".handle").style("display",null).attr("x",function(g){return g.type[g.type.length-1]==="e"?_[1][0]-a/2:_[0][0]-a/2}).attr("y",function(g){return g.type[0]==="s"?_[1][1]-a/2:_[0][1]-a/2}).attr("width",function(g){return g.type==="n"||g.type==="s"?_[1][0]-_[0][0]+a:a}).attr("height",function(g){return g.type==="e"||g.type==="w"?_[1][1]-_[0][1]+a:a})):d.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(d,_,g){var m=d.__brush.emitter;return m&&(!g||!m.clean)?m:new h(d,_,g)}function h(d,_,g){this.that=d,this.args=_,this.state=d.__brush,this.active=0,this.clean=g}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(d,_){return this.starting?(this.starting=!1,this.emit("start",d,_)):this.emit("brush",d),this},brush:function(d,_){return this.emit("brush",d,_),this},end:function(d,_){return--this.active===0&&(delete this.state.emitter,this.emit("end",d,_)),this},emit:function(d,_,g){var m=It(this.that).datum();s.call(d,this.that,new W_(d,{sourceEvent:_,target:c,selection:n.output(this.state.selection),mode:g,dispatch:s}),m)}};function p(d){if(o&&!d.touches||!e.apply(this,arguments))return;var _=this,g=d.target.__data__.type,m=(r&&d.metaKey?g="overlay":g)==="selection"?_p:r&&d.altKey?ks:Ts,v=n===Ph?null:U_[g],S=n===Dc?null:Y_[g],M=Dh(_),w=M.extent,L=M.selection,P=w[0][0],N,k,D=w[0][1],C,T,A=w[1][0],E,I,B=w[1][1],$,Y,q=0,G=0,F,U=v&&S&&r&&d.shiftKey,j,et,V=Array.from(d.touches||[d],at=>{const ut=at.identifier;return at=ri(at,_),at.point0=at.slice(),at.identifier=ut,at});Js(_);var tt=u(_,arguments,!0).beforestart();if(g==="overlay"){L&&(F=!0);const at=[V[0],V[1]||V[0]];M.selection=L=[[N=n===Ph?P:qe(at[0][0],at[1][0]),C=n===Dc?D:qe(at[0][1],at[1][1])],[E=n===Ph?A:Ve(at[0][0],at[1][0]),$=n===Dc?B:Ve(at[0][1],at[1][1])]],V.length>1&&rt(d)}else N=L[0][0],C=L[0][1],E=L[1][0],$=L[1][1];k=N,T=C,I=E,Y=$;var z=It(_).attr("pointer-events","none"),H=z.selectAll(".overlay").attr("cursor",Bn[g]);if(d.touches)tt.moved=K,tt.ended=nt;else{var X=It(d.view).on("mousemove.brush",K,!0).on("mouseup.brush",nt,!0);r&&X.on("keydown.brush",Q,!0).on("keyup.brush",it,!0),s0(d.view)}l.call(_),tt.start(d,m.name);function K(at){for(const ut of at.changedTouches||[at])for(const ft of V)ft.identifier===ut.identifier&&(ft.cur=ri(ut,_));if(U&&!j&&!et&&V.length===1){const ut=V[0];bp(ut.cur[0]-ut[0])>bp(ut.cur[1]-ut[1])?et=!0:j=!0}for(const ut of V)ut.cur&&(ut[0]=ut.cur[0],ut[1]=ut.cur[1]);F=!0,Ah(at),rt(at)}function rt(at){const ut=V[0],ft=ut.point0;var dt;switch(q=ut[0]-ft[0],G=ut[1]-ft[1],m){case Eh:case _p:{v&&(q=Ve(P-N,qe(A-E,q)),k=N+q,I=E+q),S&&(G=Ve(D-C,qe(B-$,G)),T=C+G,Y=$+G);break}case Ts:{V[1]?(v&&(k=Ve(P,qe(A,V[0][0])),I=Ve(P,qe(A,V[1][0])),v=1),S&&(T=Ve(D,qe(B,V[0][1])),Y=Ve(D,qe(B,V[1][1])),S=1)):(v<0?(q=Ve(P-N,qe(A-N,q)),k=N+q,I=E):v>0&&(q=Ve(P-E,qe(A-E,q)),k=N,I=E+q),S<0?(G=Ve(D-C,qe(B-C,G)),T=C+G,Y=$):S>0&&(G=Ve(D-$,qe(B-$,G)),T=C,Y=$+G));break}case ks:{v&&(k=Ve(P,qe(A,N-q*v)),I=Ve(P,qe(A,E+q*v))),S&&(T=Ve(D,qe(B,C-G*S)),Y=Ve(D,qe(B,$+G*S)));break}}I<k&&(v*=-1,dt=N,N=E,E=dt,dt=k,k=I,I=dt,g in Sp&&H.attr("cursor",Bn[g=Sp[g]])),Y<T&&(S*=-1,dt=C,C=$,$=dt,dt=T,T=Y,Y=dt,g in Tp&&H.attr("cursor",Bn[g=Tp[g]])),M.selection&&(L=M.selection),j&&(k=L[0][0],I=L[1][0]),et&&(T=L[0][1],Y=L[1][1]),(L[0][0]!==k||L[0][1]!==T||L[1][0]!==I||L[1][1]!==Y)&&(M.selection=[[k,T],[I,Y]],l.call(_),tt.brush(at,m.name))}function nt(at){if($_(at),at.touches){if(at.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else a0(at.view,F),X.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);z.attr("pointer-events","all"),H.attr("cursor",Bn.overlay),M.selection&&(L=M.selection),q_(L)&&(M.selection=null,l.call(_)),tt.end(at,m.name)}function Q(at){switch(at.keyCode){case 16:{U=v&&S;break}case 18:{m===Ts&&(v&&(E=I-q*v,N=k+q*v),S&&($=Y-G*S,C=T+G*S),m=ks,rt(at));break}case 32:{(m===Ts||m===ks)&&(v<0?E=I-q:v>0&&(N=k-q),S<0?$=Y-G:S>0&&(C=T-G),m=Eh,H.attr("cursor",Bn.selection),rt(at));break}default:return}Ah(at)}function it(at){switch(at.keyCode){case 16:{U&&(j=et=U=!1,rt(at));break}case 18:{m===ks&&(v<0?E=I:v>0&&(N=k),S<0?$=Y:S>0&&(C=T),m=Ts,rt(at));break}case 32:{m===Eh&&(at.altKey?(v&&(E=I-q*v,N=k+q*v),S&&($=Y-G*S,C=T+G*S),m=ks):(v<0?E=I:v>0&&(N=k),S<0?$=Y:S>0&&(C=T),m=Ts),H.attr("cursor",Bn[g]),rt(at));break}default:return}Ah(at)}}function f(d){u(this,arguments).moved(d)}function x(d){u(this,arguments).ended(d)}function y(){var d=this.__brush||{selection:null};return d.extent=Cp(t.apply(this,arguments)),d.dim=n,d}return c.extent=function(d){return arguments.length?(t=typeof d=="function"?d:Mh(Cp(d)),c):t},c.filter=function(d){return arguments.length?(e=typeof d=="function"?d:Mh(!!d),c):e},c.touchable=function(d){return arguments.length?(i=typeof d=="function"?d:Mh(!!d),c):i},c.handleSize=function(d){return arguments.length?(a=+d,c):a},c.keyModifiers=function(d){return arguments.length?(r=!!d,c):r},c.on=function(){var d=s.on.apply(s,arguments);return d===s?c:d},c}function Q_(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function Lc(n,t){return fetch(n,t).then(Q_)}function J_(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Jc(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,i=n.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+n.slice(e+1)]}function ca(n){return n=Jc(Math.abs(n)),n?n[1]:NaN}function tb(n,t){return function(e,i){for(var r=e.length,s=[],a=0,o=n[0],c=0;r>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),s.push(e.substring(r-=o,r+o)),!((c+=o+1)>i));)o=n[a=(a+1)%n.length];return s.reverse().join(t)}}function eb(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var ib=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tu(n){if(!(t=ib.exec(n)))throw new Error("invalid format: "+n);var t;return new u0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tu.prototype=u0.prototype;function u0(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}u0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nb(n){t:for(var t=n.length,e=1,i=-1,r;e<t;++e)switch(n[e]){case".":i=r=e;break;case"0":i===0&&(i=e),r=e;break;default:if(!+n[e])break t;i>0&&(i=0);break}return i>0?n.slice(0,i)+n.slice(r+1):n}var W2;function rb(n,t){var e=Jc(n,t);if(!e)return n+"";var i=e[0],r=e[1],s=r-(W2=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Jc(n,Math.max(0,t+s-1))[0]}function kp(n,t){var e=Jc(n,t);if(!e)return n+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Mp={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:J_,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>kp(n*100,t),r:kp,s:rb,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Ap(n){return n}var Ep=Array.prototype.map,Pp=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function sb(n){var t=n.grouping===void 0||n.thousands===void 0?Ap:tb(Ep.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",r=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?Ap:eb(Ep.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function l(h){h=tu(h);var p=h.fill,f=h.align,x=h.sign,y=h.symbol,d=h.zero,_=h.width,g=h.comma,m=h.precision,v=h.trim,S=h.type;S==="n"?(g=!0,S="g"):Mp[S]||(m===void 0&&(m=12),v=!0,S="g"),(d||p==="0"&&f==="=")&&(d=!0,p="0",f="=");var M=y==="$"?e:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=y==="$"?i:/[%p]/.test(S)?a:"",L=Mp[S],P=/[defgprs%]/.test(S);m=m===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function N(k){var D=M,C=w,T,A,E;if(S==="c")C=L(k)+C,k="";else{k=+k;var I=k<0||1/k<0;if(k=isNaN(k)?c:L(Math.abs(k),m),v&&(k=nb(k)),I&&+k==0&&x!=="+"&&(I=!1),D=(I?x==="("?x:o:x==="-"||x==="("?"":x)+D,C=(S==="s"?Pp[8+W2/3]:"")+C+(I&&x==="("?")":""),P){for(T=-1,A=k.length;++T<A;)if(E=k.charCodeAt(T),48>E||E>57){C=(E===46?r+k.slice(T+1):k.slice(T))+C,k=k.slice(0,T);break}}}g&&!d&&(k=t(k,1/0));var B=D.length+k.length+C.length,$=B<_?new Array(_-B+1).join(p):"";switch(g&&d&&(k=t($+k,$.length?_-C.length:1/0),$=""),f){case"<":k=D+k+C+$;break;case"=":k=D+$+k+C;break;case"^":k=$.slice(0,B=$.length>>1)+D+k+C+$.slice(B);break;default:k=$+D+k+C;break}return s(k)}return N.toString=function(){return h+""},N}function u(h,p){var f=l((h=tu(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(ca(p)/3)))*3,y=Math.pow(10,-x),d=Pp[8+x/3];return function(_){return f(y*_)+d}}return{format:l,formatPrefix:u}}var Ql,$2,U2;ab({thousands:",",grouping:[3],currency:["$",""]});function ab(n){return Ql=sb(n),$2=Ql.format,U2=Ql.formatPrefix,Ql}function ob(n){return Math.max(0,-ca(Math.abs(n)))}function lb(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ca(t)/3)))*3-ca(Math.abs(n)))}function cb(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,ca(t)-ca(n))+1}var de=1e-6,Zt=Math.PI,vi=Zt/2,Dp=Zt/4,Ri=Zt*2,ki=180/Zt,Le=Zt/180,xe=Math.abs,Y2=Math.atan,pl=Math.atan2,Me=Math.cos,ub=Math.exp,hb=Math.log,Ae=Math.sin,db=Math.sign||function(n){return n>0?1:n<0?-1:0},us=Math.sqrt,fb=Math.tan;function pb(n){return n>1?0:n<-1?Zt:Math.acos(n)}function gl(n){return n>1?vi:n<-1?-vi:Math.asin(n)}function Gi(){}function eu(n,t){n&&Rp.hasOwnProperty(n.type)&&Rp[n.type](n,t)}var Lp={Feature:function(n,t){eu(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)eu(e[i].geometry,t)}},Rp={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){tf(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)tf(e[i],t,0)},Polygon:function(n,t){Ip(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Ip(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)eu(e[i],t)}};function tf(n,t,e){var i=-1,r=n.length-e,s;for(t.lineStart();++i<r;)s=n[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function Ip(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)tf(n[e],t,1);t.polygonEnd()}function Fs(n,t){n&&Lp.hasOwnProperty(n.type)?Lp[n.type](n,t):eu(n,t)}function ef(n){return[pl(n[1],n[0]),gl(n[2])]}function ua(n){var t=n[0],e=n[1],i=Me(e);return[i*Me(t),i*Ae(t),Ae(e)]}function Jl(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function iu(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Lh(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function tc(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function nf(n){var t=us(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function rf(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function sf(n,t){return xe(n)>Zt&&(n-=Math.round(n/Ri)*Ri),[n,t]}sf.invert=sf;function j2(n,t,e){return(n%=Ri)?t||e?rf(Fp(n),Op(t,e)):Fp(n):t||e?Op(t,e):sf}function Np(n){return function(t,e){return t+=n,xe(t)>Zt&&(t-=Math.round(t/Ri)*Ri),[t,e]}}function Fp(n){var t=Np(n);return t.invert=Np(-n),t}function Op(n,t){var e=Me(n),i=Ae(n),r=Me(t),s=Ae(t);function a(o,c){var l=Me(c),u=Me(o)*l,h=Ae(o)*l,p=Ae(c),f=p*e+u*i;return[pl(h*r-f*s,u*e-p*i),gl(f*r+h*s)]}return a.invert=function(o,c){var l=Me(c),u=Me(o)*l,h=Ae(o)*l,p=Ae(c),f=p*r-h*s;return[pl(h*r+p*s,u*e+f*i),gl(f*e-u*i)]},a}function gb(n){n=j2(n[0]*Le,n[1]*Le,n.length>2?n[2]*Le:0);function t(e){return e=n(e[0]*Le,e[1]*Le),e[0]*=ki,e[1]*=ki,e}return t.invert=function(e){return e=n.invert(e[0]*Le,e[1]*Le),e[0]*=ki,e[1]*=ki,e},t}function mb(n,t,e,i,r,s){if(e){var a=Me(t),o=Ae(t),c=i*e;r==null?(r=t+i*Ri,s=t-c/2):(r=Bp(a,r),s=Bp(a,s),(i>0?r<s:r>s)&&(r+=i*Ri));for(var l,u=r;i>0?u>s:u<s;u-=c)l=ef([a,-o*Me(u),-o*Ae(u)]),n.point(l[0],l[1])}}function Bp(n,t){t=ua(t),t[0]-=n,nf(t);var e=pb(-t[1]);return((-t[2]<0?-e:e)+Ri-de)%Ri}function X2(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:Gi,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Rc(n,t){return xe(n[0]-t[0])<de&&xe(n[1]-t[1])<de}function ec(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function V2(n,t,e,i,r){var s=[],a=[],o,c;if(n.forEach(function(x){if(!((y=x.length-1)<=0)){var y,d=x[0],_=x[y],g;if(Rc(d,_)){if(!d[2]&&!_[2]){for(r.lineStart(),o=0;o<y;++o)r.point((d=x[o])[0],d[1]);r.lineEnd();return}_[0]+=2*de}s.push(g=new ec(d,x,null,!0)),a.push(g.o=new ec(d,null,g,!1)),s.push(g=new ec(_,x,null,!1)),a.push(g.o=new ec(_,null,g,!0))}}),!!s.length){for(a.sort(t),zp(s),zp(a),o=0,c=a.length;o<c;++o)a[o].e=e=!e;for(var l=s[0],u,h;;){for(var p=l,f=!0;p.v;)if((p=p.n)===l)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,c=u.length;o<c;++o)r.point((h=u[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(u=p.p.z,o=u.length-1;o>=0;--o)r.point((h=u[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,u=p.z,f=!f}while(!p.v);r.lineEnd()}}}function zp(n){if(t=n.length){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Rh(n){return xe(n[0])<=Zt?n[0]:db(n[0])*((xe(n[0])+Zt)%Ri-Zt)}function yb(n,t){var e=Rh(t),i=t[1],r=Ae(i),s=[Ae(e),-Me(e),0],a=0,o=0,c=new ns;r===1?i=vi+de:r===-1&&(i=-vi-de);for(var l=0,u=n.length;l<u;++l)if(p=(h=n[l]).length)for(var h,p,f=h[p-1],x=Rh(f),y=f[1]/2+Dp,d=Ae(y),_=Me(y),g=0;g<p;++g,x=v,d=M,_=w,f=m){var m=h[g],v=Rh(m),S=m[1]/2+Dp,M=Ae(S),w=Me(S),L=v-x,P=L>=0?1:-1,N=P*L,k=N>Zt,D=d*M;if(c.add(pl(D*P*Ae(N),_*w+D*Me(N))),a+=k?L+P*Ri:L,k^x>=e^v>=e){var C=iu(ua(f),ua(m));nf(C);var T=iu(s,C);nf(T);var A=(k^L>=0?-1:1)*gl(T[2]);(i>A||i===A&&(C[0]||C[1]))&&(o+=k^L>=0?1:-1)}}return(a<-1e-6||a<de&&c<-1e-12)^o&1}function q2(n,t,e,i){return function(r){var s=t(r),a=X2(),o=t(a),c=!1,l,u,h,p={point:f,lineStart:y,lineEnd:d,polygonStart:function(){p.point=_,p.lineStart=g,p.lineEnd=m,u=[],l=[]},polygonEnd:function(){p.point=f,p.lineStart=y,p.lineEnd=d,u=l2(u);var v=yb(l,i);u.length?(c||(r.polygonStart(),c=!0),V2(u,xb,v,e,r)):v&&(c||(r.polygonStart(),c=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),u=l=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(v,S){n(v,S)&&r.point(v,S)}function x(v,S){s.point(v,S)}function y(){p.point=x,s.lineStart()}function d(){p.point=f,s.lineEnd()}function _(v,S){h.push([v,S]),o.point(v,S)}function g(){o.lineStart(),h=[]}function m(){_(h[0][0],h[0][1]),o.lineEnd();var v=o.clean(),S=a.result(),M,w=S.length,L,P,N;if(h.pop(),l.push(h),h=null,!!w){if(v&1){if(P=S[0],(L=P.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),M=0;M<L;++M)r.point((N=P[M])[0],N[1]);r.lineEnd()}return}w>1&&v&2&&S.push(S.pop().concat(S.shift())),u.push(S.filter(vb))}}return p}}function vb(n){return n.length>1}function xb(n,t){return((n=n.x)[0]<0?n[1]-vi-de:vi-n[1])-((t=t.x)[0]<0?t[1]-vi-de:vi-t[1])}const Hp=q2(function(){return!0},_b,wb,[-Zt,-vi]);function _b(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,a){var o=s>0?Zt:-Zt,c=xe(s-t);xe(c-Zt)<de?(n.point(t,e=(e+a)/2>0?vi:-vi),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(o,e),n.point(s,e),r=0):i!==o&&c>=Zt&&(xe(t-i)<de&&(t-=i*de),xe(s-o)<de&&(s-=o*de),e=bb(t,e,s,a),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(o,e),r=0),n.point(t=s,e=a),i=o},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function bb(n,t,e,i){var r,s,a=Ae(n-e);return xe(a)>de?Y2((Ae(t)*(s=Me(i))*Ae(e)-Ae(i)*(r=Me(t))*Ae(n))/(r*s*a)):(t+i)/2}function wb(n,t,e,i){var r;if(n==null)r=e*vi,i.point(-Zt,r),i.point(0,r),i.point(Zt,r),i.point(Zt,0),i.point(Zt,-r),i.point(0,-r),i.point(-Zt,-r),i.point(-Zt,0),i.point(-Zt,r);else if(xe(n[0]-t[0])>de){var s=n[0]<t[0]?Zt:-Zt;r=e*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function Cb(n){var t=Me(n),e=2*Le,i=t>0,r=xe(t)>de;function s(u,h,p,f){mb(f,n,e,p,u,h)}function a(u,h){return Me(u)*Me(h)>t}function o(u){var h,p,f,x,y;return{lineStart:function(){x=f=!1,y=1},point:function(d,_){var g=[d,_],m,v=a(d,_),S=i?v?0:l(d,_):v?l(d+(d<0?Zt:-Zt),_):0;if(!h&&(x=f=v)&&u.lineStart(),v!==f&&(m=c(h,g),(!m||Rc(h,m)||Rc(g,m))&&(g[2]=1)),v!==f)y=0,v?(u.lineStart(),m=c(g,h),u.point(m[0],m[1])):(m=c(h,g),u.point(m[0],m[1],2),u.lineEnd()),h=m;else if(r&&h&&i^v){var M;!(S&p)&&(M=c(g,h,!0))&&(y=0,i?(u.lineStart(),u.point(M[0][0],M[0][1]),u.point(M[1][0],M[1][1]),u.lineEnd()):(u.point(M[1][0],M[1][1]),u.lineEnd(),u.lineStart(),u.point(M[0][0],M[0][1],3)))}v&&(!h||!Rc(h,g))&&u.point(g[0],g[1]),h=g,f=v,p=S},lineEnd:function(){f&&u.lineEnd(),h=null},clean:function(){return y|(x&&f)<<1}}}function c(u,h,p){var f=ua(u),x=ua(h),y=[1,0,0],d=iu(f,x),_=Jl(d,d),g=d[0],m=_-g*g;if(!m)return!p&&u;var v=t*_/m,S=-t*g/m,M=iu(y,d),w=tc(y,v),L=tc(d,S);Lh(w,L);var P=M,N=Jl(w,P),k=Jl(P,P),D=N*N-k*(Jl(w,w)-1);if(!(D<0)){var C=us(D),T=tc(P,(-N-C)/k);if(Lh(T,w),T=ef(T),!p)return T;var A=u[0],E=h[0],I=u[1],B=h[1],$;E<A&&($=A,A=E,E=$);var Y=E-A,q=xe(Y-Zt)<de,G=q||Y<de;if(!q&&B<I&&($=I,I=B,B=$),G?q?I+B>0^T[1]<(xe(T[0]-A)<de?I:B):I<=T[1]&&T[1]<=B:Y>Zt^(A<=T[0]&&T[0]<=E)){var F=tc(P,(-N+C)/k);return Lh(F,w),[T,ef(F)]}}}function l(u,h){var p=i?n:Zt-n,f=0;return u<-p?f|=1:u>p&&(f|=2),h<-p?f|=4:h>p&&(f|=8),f}return q2(a,o,s,i?[0,-n]:[-Zt,n-Zt])}function Sb(n,t,e,i,r,s){var a=n[0],o=n[1],c=t[0],l=t[1],u=0,h=1,p=c-a,f=l-o,x;if(x=e-a,!(!p&&x>0)){if(x/=p,p<0){if(x<u)return;x<h&&(h=x)}else if(p>0){if(x>h)return;x>u&&(u=x)}if(x=r-a,!(!p&&x<0)){if(x/=p,p<0){if(x>h)return;x>u&&(u=x)}else if(p>0){if(x<u)return;x<h&&(h=x)}if(x=i-o,!(!f&&x>0)){if(x/=f,f<0){if(x<u)return;x<h&&(h=x)}else if(f>0){if(x>h)return;x>u&&(u=x)}if(x=s-o,!(!f&&x<0)){if(x/=f,f<0){if(x>h)return;x>u&&(u=x)}else if(f>0){if(x<u)return;x<h&&(h=x)}return u>0&&(n[0]=a+u*p,n[1]=o+u*f),h<1&&(t[0]=a+h*p,t[1]=o+h*f),!0}}}}}var ic=1e9,nc=-1e9;function Tb(n,t,e,i){function r(l,u){return n<=l&&l<=e&&t<=u&&u<=i}function s(l,u,h,p){var f=0,x=0;if(l==null||(f=a(l,h))!==(x=a(u,h))||c(l,u)<0^h>0)do p.point(f===0||f===3?n:e,f>1?i:t);while((f=(f+h+4)%4)!==x);else p.point(u[0],u[1])}function a(l,u){return xe(l[0]-n)<de?u>0?0:3:xe(l[0]-e)<de?u>0?2:1:xe(l[1]-t)<de?u>0?1:0:u>0?3:2}function o(l,u){return c(l.x,u.x)}function c(l,u){var h=a(l,1),p=a(u,1);return h!==p?h-p:h===0?u[1]-l[1]:h===1?l[0]-u[0]:h===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,h=X2(),p,f,x,y,d,_,g,m,v,S,M,w={point:L,lineStart:D,lineEnd:C,polygonStart:N,polygonEnd:k};function L(A,E){r(A,E)&&u.point(A,E)}function P(){for(var A=0,E=0,I=f.length;E<I;++E)for(var B=f[E],$=1,Y=B.length,q=B[0],G,F,U=q[0],j=q[1];$<Y;++$)G=U,F=j,q=B[$],U=q[0],j=q[1],F<=i?j>i&&(U-G)*(i-F)>(j-F)*(n-G)&&++A:j<=i&&(U-G)*(i-F)<(j-F)*(n-G)&&--A;return A}function N(){u=h,p=[],f=[],M=!0}function k(){var A=P(),E=M&&A,I=(p=l2(p)).length;(E||I)&&(l.polygonStart(),E&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),I&&V2(p,o,A,s,l),l.polygonEnd()),u=l,p=f=x=null}function D(){w.point=T,f&&f.push(x=[]),S=!0,v=!1,g=m=NaN}function C(){p&&(T(y,d),_&&v&&h.rejoin(),p.push(h.result())),w.point=L,v&&u.lineEnd()}function T(A,E){var I=r(A,E);if(f&&x.push([A,E]),S)y=A,d=E,_=I,S=!1,I&&(u.lineStart(),u.point(A,E));else if(I&&v)u.point(A,E);else{var B=[g=Math.max(nc,Math.min(ic,g)),m=Math.max(nc,Math.min(ic,m))],$=[A=Math.max(nc,Math.min(ic,A)),E=Math.max(nc,Math.min(ic,E))];Sb(B,$,n,t,e,i)?(v||(u.lineStart(),u.point(B[0],B[1])),u.point($[0],$[1]),I||u.lineEnd(),M=!1):I&&(u.lineStart(),u.point(A,E),M=!1)}g=A,m=E,v=I}return w}}const af=n=>n;var Ih=new ns,of=new ns,K2,Z2,lf,cf,jn={point:Gi,lineStart:Gi,lineEnd:Gi,polygonStart:function(){jn.lineStart=kb,jn.lineEnd=Ab},polygonEnd:function(){jn.lineStart=jn.lineEnd=jn.point=Gi,Ih.add(xe(of)),of=new ns},result:function(){var n=Ih/2;return Ih=new ns,n}};function kb(){jn.point=Mb}function Mb(n,t){jn.point=Q2,K2=lf=n,Z2=cf=t}function Q2(n,t){of.add(cf*n-lf*t),lf=n,cf=t}function Ab(){Q2(K2,Z2)}var ha=1/0,nu=ha,ml=-ha,ru=ml,su={point:Eb,lineStart:Gi,lineEnd:Gi,polygonStart:Gi,polygonEnd:Gi,result:function(){var n=[[ha,nu],[ml,ru]];return ml=ru=-(nu=ha=1/0),n}};function Eb(n,t){n<ha&&(ha=n),n>ml&&(ml=n),t<nu&&(nu=t),t>ru&&(ru=t)}var uf=0,hf=0,Oo=0,au=0,ou=0,Ys=0,df=0,ff=0,Bo=0,J2,t3,_n,bn,Hi={point:ss,lineStart:Gp,lineEnd:Wp,polygonStart:function(){Hi.lineStart=Lb,Hi.lineEnd=Rb},polygonEnd:function(){Hi.point=ss,Hi.lineStart=Gp,Hi.lineEnd=Wp},result:function(){var n=Bo?[df/Bo,ff/Bo]:Ys?[au/Ys,ou/Ys]:Oo?[uf/Oo,hf/Oo]:[NaN,NaN];return uf=hf=Oo=au=ou=Ys=df=ff=Bo=0,n}};function ss(n,t){uf+=n,hf+=t,++Oo}function Gp(){Hi.point=Pb}function Pb(n,t){Hi.point=Db,ss(_n=n,bn=t)}function Db(n,t){var e=n-_n,i=t-bn,r=us(e*e+i*i);au+=r*(_n+n)/2,ou+=r*(bn+t)/2,Ys+=r,ss(_n=n,bn=t)}function Wp(){Hi.point=ss}function Lb(){Hi.point=Ib}function Rb(){e3(J2,t3)}function Ib(n,t){Hi.point=e3,ss(J2=_n=n,t3=bn=t)}function e3(n,t){var e=n-_n,i=t-bn,r=us(e*e+i*i);au+=r*(_n+n)/2,ou+=r*(bn+t)/2,Ys+=r,r=bn*n-_n*t,df+=r*(_n+n),ff+=r*(bn+t),Bo+=r*3,ss(_n=n,bn=t)}function i3(n){this._context=n}i3.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,Ri);break}}},result:Gi};var pf=new ns,Nh,n3,r3,zo,Ho,yl={point:Gi,lineStart:function(){yl.point=Nb},lineEnd:function(){Nh&&s3(n3,r3),yl.point=Gi},polygonStart:function(){Nh=!0},polygonEnd:function(){Nh=null},result:function(){var n=+pf;return pf=new ns,n}};function Nb(n,t){yl.point=s3,n3=zo=n,r3=Ho=t}function s3(n,t){zo-=n,Ho-=t,pf.add(us(zo*zo+Ho*Ho)),zo=n,Ho=t}let $p,lu,Up,Yp;class jp{constructor(t){this._append=t==null?a3:Fb(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==Up||this._append!==lu){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Up=i,lu=this._append,Yp=this._,this._=r}this._+=Yp;break}}}result(){const t=this._;return this._="",t.length?t:null}}function a3(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Fb(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return a3;if(t!==$p){const e=10**t;$p=t,lu=function(r){let s=1;this._+=r[0];for(const a=r.length;s<a;++s)this._+=Math.round(arguments[s]*e)/e+r[s]}}return lu}function Ob(n,t){let e=3,i=4.5,r,s;function a(o){return o&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),Fs(o,r(s))),s.result()}return a.area=function(o){return Fs(o,r(jn)),jn.result()},a.measure=function(o){return Fs(o,r(yl)),yl.result()},a.bounds=function(o){return Fs(o,r(su)),su.result()},a.centroid=function(o){return Fs(o,r(Hi)),Hi.result()},a.projection=function(o){return arguments.length?(r=o==null?(n=null,af):(n=o).stream,a):n},a.context=function(o){return arguments.length?(s=o==null?(t=null,new jp(e)):new i3(t=o),typeof i!="function"&&s.pointRadius(i),a):t},a.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(s.pointRadius(+o),+o),a):i},a.digits=function(o){if(!arguments.length)return e;if(o==null)e=null;else{const c=Math.floor(o);if(!(c>=0))throw new RangeError(`invalid digits: ${o}`);e=c}return t===null&&(s=new jp(e)),a},a.projection(n).digits(e).context(t)}function h0(n){return function(t){var e=new gf;for(var i in n)e[i]=n[i];return e.stream=t,e}}function gf(){}gf.prototype={constructor:gf,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function d0(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),Fs(e,n.stream(su)),t(su.result()),i!=null&&n.clipExtent(i),n}function o3(n,t,e){return d0(n,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),o=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(s-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([o,c])},e)}function Bb(n,t,e){return o3(n,[[0,0],t],e)}function zb(n,t,e){return d0(n,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),a=(r-s*(i[1][0]+i[0][0]))/2,o=-s*i[0][1];n.scale(150*s).translate([a,o])},e)}function Hb(n,t,e){return d0(n,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),a=-s*i[0][0],o=(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([a,o])},e)}var Xp=16,Gb=Me(30*Le);function Vp(n,t){return+t?$b(n,t):Wb(n)}function Wb(n){return h0({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function $b(n,t){function e(i,r,s,a,o,c,l,u,h,p,f,x,y,d){var _=l-i,g=u-r,m=_*_+g*g;if(m>4*t&&y--){var v=a+p,S=o+f,M=c+x,w=us(v*v+S*S+M*M),L=gl(M/=w),P=xe(xe(M)-1)<de||xe(s-h)<de?(s+h)/2:pl(S,v),N=n(P,L),k=N[0],D=N[1],C=k-i,T=D-r,A=g*C-_*T;(A*A/m>t||xe((_*C+g*T)/m-.5)>.3||a*p+o*f+c*x<Gb)&&(e(i,r,s,a,o,c,k,D,P,v/=w,S/=w,M,y,d),d.point(k,D),e(k,D,P,v,S,M,l,u,h,p,f,x,y,d))}}return function(i){var r,s,a,o,c,l,u,h,p,f,x,y,d={point:_,lineStart:g,lineEnd:v,polygonStart:function(){i.polygonStart(),d.lineStart=S},polygonEnd:function(){i.polygonEnd(),d.lineStart=g}};function _(L,P){L=n(L,P),i.point(L[0],L[1])}function g(){h=NaN,d.point=m,i.lineStart()}function m(L,P){var N=ua([L,P]),k=n(L,P);e(h,p,u,f,x,y,h=k[0],p=k[1],u=L,f=N[0],x=N[1],y=N[2],Xp,i),i.point(h,p)}function v(){d.point=_,i.lineEnd()}function S(){g(),d.point=M,d.lineEnd=w}function M(L,P){m(r=L,P),s=h,a=p,o=f,c=x,l=y,d.point=m}function w(){e(h,p,u,f,x,y,s,a,r,o,c,l,Xp,i),d.lineEnd=v,v()}return d}}var Ub=h0({point:function(n,t){this.stream.point(n*Le,t*Le)}});function Yb(n){return h0({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function jb(n,t,e,i,r){function s(a,o){return a*=i,o*=r,[t+n*a,e-n*o]}return s.invert=function(a,o){return[(a-t)/n*i,(e-o)/n*r]},s}function qp(n,t,e,i,r,s){if(!s)return jb(n,t,e,i,r);var a=Me(s),o=Ae(s),c=a*n,l=o*n,u=a/n,h=o/n,p=(o*e-a*t)/n,f=(o*t+a*e)/n;function x(y,d){return y*=i,d*=r,[c*y-l*d+t,e-l*y-c*d]}return x.invert=function(y,d){return[i*(u*y-h*d+p),r*(f-h*y-u*d)]},x}function Xb(n){return Vb(function(){return n})()}function Vb(n){var t,e=150,i=480,r=250,s=0,a=0,o=0,c=0,l=0,u,h=0,p=1,f=1,x=null,y=Hp,d=null,_,g,m,v=af,S=.5,M,w,L,P,N;function k(A){return L(A[0]*Le,A[1]*Le)}function D(A){return A=L.invert(A[0],A[1]),A&&[A[0]*ki,A[1]*ki]}k.stream=function(A){return P&&N===A?P:P=Ub(Yb(u)(y(M(v(N=A)))))},k.preclip=function(A){return arguments.length?(y=A,x=void 0,T()):y},k.postclip=function(A){return arguments.length?(v=A,d=_=g=m=null,T()):v},k.clipAngle=function(A){return arguments.length?(y=+A?Cb(x=A*Le):(x=null,Hp),T()):x*ki},k.clipExtent=function(A){return arguments.length?(v=A==null?(d=_=g=m=null,af):Tb(d=+A[0][0],_=+A[0][1],g=+A[1][0],m=+A[1][1]),T()):d==null?null:[[d,_],[g,m]]},k.scale=function(A){return arguments.length?(e=+A,C()):e},k.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],C()):[i,r]},k.center=function(A){return arguments.length?(s=A[0]%360*Le,a=A[1]%360*Le,C()):[s*ki,a*ki]},k.rotate=function(A){return arguments.length?(o=A[0]%360*Le,c=A[1]%360*Le,l=A.length>2?A[2]%360*Le:0,C()):[o*ki,c*ki,l*ki]},k.angle=function(A){return arguments.length?(h=A%360*Le,C()):h*ki},k.reflectX=function(A){return arguments.length?(p=A?-1:1,C()):p<0},k.reflectY=function(A){return arguments.length?(f=A?-1:1,C()):f<0},k.precision=function(A){return arguments.length?(M=Vp(w,S=A*A),T()):us(S)},k.fitExtent=function(A,E){return o3(k,A,E)},k.fitSize=function(A,E){return Bb(k,A,E)},k.fitWidth=function(A,E){return zb(k,A,E)},k.fitHeight=function(A,E){return Hb(k,A,E)};function C(){var A=qp(e,0,0,p,f,h).apply(null,t(s,a)),E=qp(e,i-A[0],r-A[1],p,f,h);return u=j2(o,c,l),w=rf(t,E),L=rf(u,w),M=Vp(w,S),T()}function T(){return P=N=null,k}return function(){return t=n.apply(this,arguments),k.invert=t.invert&&D,C()}}function f0(n,t){return[n,hb(fb((vi+t)/2))]}f0.invert=function(n,t){return[n,2*Y2(ub(t))-vi]};function qb(){return Kb(f0).scale(961/Ri)}function Kb(n){var t=Xb(n),e=t.center,i=t.scale,r=t.translate,s=t.clipExtent,a=null,o,c,l;t.scale=function(h){return arguments.length?(i(h),u()):i()},t.translate=function(h){return arguments.length?(r(h),u()):r()},t.center=function(h){return arguments.length?(e(h),u()):e()},t.clipExtent=function(h){return arguments.length?(h==null?a=o=c=l=null:(a=+h[0][0],o=+h[0][1],c=+h[1][0],l=+h[1][1]),u()):a==null?null:[[a,o],[c,l]]};function u(){var h=Zt*i(),p=t(gb(t.rotate()).invert([0,0]));return s(a==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:n===f0?[[Math.max(p[0]-h,a),o],[Math.min(p[0]+h,c),l]]:[[a,Math.max(p[1]-h,o)],[c,Math.min(p[1]+h,l)]])}return u()}function p0(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function Zb(n){return function(){return n}}function Qb(n){return+n}var Kp=[0,1];function Cn(n){return n}function mf(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:Zb(isNaN(t)?NaN:.5)}function Jb(n,t){var e;return n>t&&(e=n,n=t,t=e),function(i){return Math.max(n,Math.min(t,i))}}function t9(n,t,e){var i=n[0],r=n[1],s=t[0],a=t[1];return r<i?(i=mf(r,i),s=e(a,s)):(i=mf(i,r),s=e(s,a)),function(o){return s(i(o))}}function e9(n,t,e){var i=Math.min(n.length,t.length)-1,r=new Array(i),s=new Array(i),a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=mf(n[a],n[a+1]),s[a]=e(t[a],t[a+1]);return function(o){var c=e0(n,o,1,i)-1;return s[c](r[c](o))}}function g0(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function l3(){var n=Kp,t=Kp,e=Ru,i,r,s,a=Cn,o,c,l;function u(){var p=Math.min(n.length,t.length);return a!==Cn&&(a=Jb(n[0],n[p-1])),o=p>2?e9:t9,c=l=null,h}function h(p){return p==null||isNaN(p=+p)?s:(c||(c=o(n.map(i),t,e)))(i(a(p)))}return h.invert=function(p){return a(r((l||(l=o(t,n.map(i),tn)))(p)))},h.domain=function(p){return arguments.length?(n=Array.from(p,Qb),u()):n.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),e=_8,u()},h.clamp=function(p){return arguments.length?(a=p?!0:Cn,u()):a!==Cn},h.interpolate=function(p){return arguments.length?(e=p,u()):e},h.unknown=function(p){return arguments.length?(s=p,h):s},function(p,f){return i=p,r=f,u()}}function c3(){return l3()(Cn,Cn)}function i9(n,t,e,i){var r=Wd(n,t,e),s;switch(i=tu(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return i.precision==null&&!isNaN(s=lb(r,a))&&(i.precision=s),U2(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=cb(r,Math.max(Math.abs(n),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=ob(r))&&(i.precision=s-(i.type==="%")*2);break}}return $2(i)}function u3(n){var t=n.domain;return n.ticks=function(e){var i=t();return o2(i[0],i[i.length-1],e??10)},n.tickFormat=function(e,i){var r=t();return i9(r[0],r[r.length-1],e??10,i)},n.nice=function(e){e==null&&(e=10);var i=t(),r=0,s=i.length-1,a=i[r],o=i[s],c,l,u=10;for(o<a&&(l=a,a=o,o=l,l=r,r=s,s=l);u-- >0;){if(l=aa(a,o,e),l===c)return i[r]=a,i[s]=o,t(i);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;c=l}return n},n}function ji(){var n=c3();return n.copy=function(){return g0(n,ji())},p0.apply(n,arguments),u3(n)}function n9(n,t){n=n.slice();var e=0,i=n.length-1,r=n[e],s=n[i],a;return s<r&&(a=e,e=i,i=a,a=r,r=s,s=a),n[e]=t.floor(r),n[i]=t.ceil(s),n}function Zp(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function r9(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function s9(n){return n<0?-n*n:n*n}function a9(n){var t=n(Cn,Cn),e=1;function i(){return e===1?n(Cn,Cn):e===.5?n(r9,s9):n(Zp(e),Zp(1/e))}return t.exponent=function(r){return arguments.length?(e=+r,i()):e},u3(t)}function h3(){var n=a9(l3());return n.copy=function(){return g0(n,h3()).exponent(n.exponent())},p0.apply(n,arguments),n}const Fh=new Date,Oh=new Date;function Oe(n,t,e,i){function r(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(n(s=new Date(+s)),s),r.ceil=s=>(n(s=new Date(s-1)),t(s,1),n(s),s),r.round=s=>{const a=r(s),o=r.ceil(s);return s-a<o-s?a:o},r.offset=(s,a)=>(t(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,o)=>{const c=[];if(s=r.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return c;let l;do c.push(l=new Date(+s)),t(s,o),n(s);while(l<s&&s<a);return c},r.filter=s=>Oe(a=>{if(a>=a)for(;n(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););}),e&&(r.count=(s,a)=>(Fh.setTime(+s),Oh.setTime(+a),n(Fh),n(Oh),Math.floor(e(Fh,Oh))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const cu=Oe(()=>{},(n,t)=>{n.setTime(+n+t)},(n,t)=>t-n);cu.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?Oe(t=>{t.setTime(Math.floor(t/n)*n)},(t,e)=>{t.setTime(+t+e*n)},(t,e)=>(e-t)/n):cu);cu.range;const qn=1e3,Wi=qn*60,Kn=Wi*60,ir=Kn*24,m0=ir*7,Qp=ir*30,Bh=ir*365,js=Oe(n=>{n.setTime(n-n.getMilliseconds())},(n,t)=>{n.setTime(+n+t*qn)},(n,t)=>(t-n)/qn,n=>n.getUTCSeconds());js.range;const y0=Oe(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qn)},(n,t)=>{n.setTime(+n+t*Wi)},(n,t)=>(t-n)/Wi,n=>n.getMinutes());y0.range;const o9=Oe(n=>{n.setUTCSeconds(0,0)},(n,t)=>{n.setTime(+n+t*Wi)},(n,t)=>(t-n)/Wi,n=>n.getUTCMinutes());o9.range;const v0=Oe(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*qn-n.getMinutes()*Wi)},(n,t)=>{n.setTime(+n+t*Kn)},(n,t)=>(t-n)/Kn,n=>n.getHours());v0.range;const l9=Oe(n=>{n.setUTCMinutes(0,0,0)},(n,t)=>{n.setTime(+n+t*Kn)},(n,t)=>(t-n)/Kn,n=>n.getUTCHours());l9.range;const Ll=Oe(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Wi)/ir,n=>n.getDate()-1);Ll.range;const x0=Oe(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/ir,n=>n.getUTCDate()-1);x0.range;const c9=Oe(n=>{n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCDate(n.getUTCDate()+t)},(n,t)=>(t-n)/ir,n=>Math.floor(n/ir));c9.range;function hs(n){return Oe(t=>{t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+e*7)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Wi)/m0)}const Fu=hs(0),uu=hs(1),u9=hs(2),h9=hs(3),da=hs(4),d9=hs(5),f9=hs(6);Fu.range;uu.range;u9.range;h9.range;da.range;d9.range;f9.range;function ds(n){return Oe(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e*7)},(t,e)=>(e-t)/m0)}const d3=ds(0),hu=ds(1),p9=ds(2),g9=ds(3),fa=ds(4),m9=ds(5),y9=ds(6);d3.range;hu.range;p9.range;g9.range;fa.range;m9.range;y9.range;const _0=Oe(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,t)=>{n.setMonth(n.getMonth()+t)},(n,t)=>t.getMonth()-n.getMonth()+(t.getFullYear()-n.getFullYear())*12,n=>n.getMonth());_0.range;const v9=Oe(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCMonth(n.getUTCMonth()+t)},(n,t)=>t.getUTCMonth()-n.getUTCMonth()+(t.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());v9.range;const nr=Oe(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,t)=>{n.setFullYear(n.getFullYear()+t)},(n,t)=>t.getFullYear()-n.getFullYear(),n=>n.getFullYear());nr.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Oe(t=>{t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*n)});nr.range;const as=Oe(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,t)=>{n.setUTCFullYear(n.getUTCFullYear()+t)},(n,t)=>t.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());as.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Oe(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*n)});as.range;function x9(n,t,e,i,r,s){const a=[[js,1,qn],[js,5,5*qn],[js,15,15*qn],[js,30,30*qn],[s,1,Wi],[s,5,5*Wi],[s,15,15*Wi],[s,30,30*Wi],[r,1,Kn],[r,3,3*Kn],[r,6,6*Kn],[r,12,12*Kn],[i,1,ir],[i,2,2*ir],[e,1,m0],[t,1,Qp],[t,3,3*Qp],[n,1,Bh]];function o(l,u,h){const p=u<l;p&&([l,u]=[u,l]);const f=h&&typeof h.range=="function"?h:c(l,u,h),x=f?f.range(l,+u+1):[];return p?x.reverse():x}function c(l,u,h){const p=Math.abs(u-l)/h,f=t0(([,,d])=>d).right(a,p);if(f===a.length)return n.every(Wd(l/Bh,u/Bh,h));if(f===0)return cu.every(Math.max(Wd(l,u,h),1));const[x,y]=a[p/a[f-1][2]<a[f][2]/p?f-1:f];return x.every(y)}return[o,c]}const[_9,b9]=x9(nr,_0,Fu,Ll,v0,y0);function zh(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Hh(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Ba(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}function w9(n){var t=n.dateTime,e=n.date,i=n.time,r=n.periods,s=n.days,a=n.shortDays,o=n.months,c=n.shortMonths,l=za(r),u=Ha(r),h=za(s),p=Ha(s),f=za(a),x=Ha(a),y=za(o),d=Ha(o),_=za(c),g=Ha(c),m={a:I,A:B,b:$,B:Y,c:null,d:rg,e:rg,f:Y9,g:e7,G:n7,H:W9,I:$9,j:U9,L:f3,m:j9,M:X9,p:q,q:G,Q:og,s:lg,S:V9,u:q9,U:K9,V:Z9,w:Q9,W:J9,x:null,X:null,y:t7,Y:i7,Z:r7,"%":ag},v={a:F,A:U,b:j,B:et,c:null,d:sg,e:sg,f:l7,g:v7,G:_7,H:s7,I:a7,j:o7,L:g3,m:c7,M:u7,p:V,q:tt,Q:og,s:lg,S:h7,u:d7,U:f7,V:p7,w:g7,W:m7,x:null,X:null,y:y7,Y:x7,Z:b7,"%":ag},S={a:N,A:k,b:D,B:C,c:T,d:ig,e:ig,f:B9,g:eg,G:tg,H:ng,I:ng,j:I9,L:O9,m:R9,M:N9,p:P,q:L9,Q:H9,s:G9,S:F9,u:M9,U:A9,V:E9,w:k9,W:P9,x:A,X:E,y:eg,Y:tg,Z:D9,"%":z9};m.x=M(e,m),m.X=M(i,m),m.c=M(t,m),v.x=M(e,v),v.X=M(i,v),v.c=M(t,v);function M(z,H){return function(X){var K=[],rt=-1,nt=0,Q=z.length,it,at,ut;for(X instanceof Date||(X=new Date(+X));++rt<Q;)z.charCodeAt(rt)===37&&(K.push(z.slice(nt,rt)),(at=Jp[it=z.charAt(++rt)])!=null?it=z.charAt(++rt):at=it==="e"?" ":"0",(ut=H[it])&&(it=ut(X,at)),K.push(it),nt=rt+1);return K.push(z.slice(nt,rt)),K.join("")}}function w(z,H){return function(X){var K=Ba(1900,void 0,1),rt=L(K,z,X+="",0),nt,Q;if(rt!=X.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(H&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(nt=Hh(Ba(K.y,0,1)),Q=nt.getUTCDay(),nt=Q>4||Q===0?hu.ceil(nt):hu(nt),nt=x0.offset(nt,(K.V-1)*7),K.y=nt.getUTCFullYear(),K.m=nt.getUTCMonth(),K.d=nt.getUTCDate()+(K.w+6)%7):(nt=zh(Ba(K.y,0,1)),Q=nt.getDay(),nt=Q>4||Q===0?uu.ceil(nt):uu(nt),nt=Ll.offset(nt,(K.V-1)*7),K.y=nt.getFullYear(),K.m=nt.getMonth(),K.d=nt.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Q="Z"in K?Hh(Ba(K.y,0,1)).getUTCDay():zh(Ba(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Q+5)%7:K.w+K.U*7-(Q+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Hh(K)):zh(K)}}function L(z,H,X,K){for(var rt=0,nt=H.length,Q=X.length,it,at;rt<nt;){if(K>=Q)return-1;if(it=H.charCodeAt(rt++),it===37){if(it=H.charAt(rt++),at=S[it in Jp?H.charAt(rt++):it],!at||(K=at(z,X,K))<0)return-1}else if(it!=X.charCodeAt(K++))return-1}return K}function P(z,H,X){var K=l.exec(H.slice(X));return K?(z.p=u.get(K[0].toLowerCase()),X+K[0].length):-1}function N(z,H,X){var K=f.exec(H.slice(X));return K?(z.w=x.get(K[0].toLowerCase()),X+K[0].length):-1}function k(z,H,X){var K=h.exec(H.slice(X));return K?(z.w=p.get(K[0].toLowerCase()),X+K[0].length):-1}function D(z,H,X){var K=_.exec(H.slice(X));return K?(z.m=g.get(K[0].toLowerCase()),X+K[0].length):-1}function C(z,H,X){var K=y.exec(H.slice(X));return K?(z.m=d.get(K[0].toLowerCase()),X+K[0].length):-1}function T(z,H,X){return L(z,t,H,X)}function A(z,H,X){return L(z,e,H,X)}function E(z,H,X){return L(z,i,H,X)}function I(z){return a[z.getDay()]}function B(z){return s[z.getDay()]}function $(z){return c[z.getMonth()]}function Y(z){return o[z.getMonth()]}function q(z){return r[+(z.getHours()>=12)]}function G(z){return 1+~~(z.getMonth()/3)}function F(z){return a[z.getUTCDay()]}function U(z){return s[z.getUTCDay()]}function j(z){return c[z.getUTCMonth()]}function et(z){return o[z.getUTCMonth()]}function V(z){return r[+(z.getUTCHours()>=12)]}function tt(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var H=M(z+="",m);return H.toString=function(){return z},H},parse:function(z){var H=w(z+="",!1);return H.toString=function(){return z},H},utcFormat:function(z){var H=M(z+="",v);return H.toString=function(){return z},H},utcParse:function(z){var H=w(z+="",!0);return H.toString=function(){return z},H}}}var Jp={"-":"",_:" ",0:"0"},We=/^\s*\d+/,C9=/^%/,S9=/[\\^$*+?|[\]().{}]/g;function ee(n,t,e){var i=n<0?"-":"",r=(i?-n:n)+"",s=r.length;return i+(s<e?new Array(e-s+1).join(t)+r:r)}function T9(n){return n.replace(S9,"\\$&")}function za(n){return new RegExp("^(?:"+n.map(T9).join("|")+")","i")}function Ha(n){return new Map(n.map((t,e)=>[t.toLowerCase(),e]))}function k9(n,t,e){var i=We.exec(t.slice(e,e+1));return i?(n.w=+i[0],e+i[0].length):-1}function M9(n,t,e){var i=We.exec(t.slice(e,e+1));return i?(n.u=+i[0],e+i[0].length):-1}function A9(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.U=+i[0],e+i[0].length):-1}function E9(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.V=+i[0],e+i[0].length):-1}function P9(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.W=+i[0],e+i[0].length):-1}function tg(n,t,e){var i=We.exec(t.slice(e,e+4));return i?(n.y=+i[0],e+i[0].length):-1}function eg(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function D9(n,t,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return i?(n.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function L9(n,t,e){var i=We.exec(t.slice(e,e+1));return i?(n.q=i[0]*3-3,e+i[0].length):-1}function R9(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.m=i[0]-1,e+i[0].length):-1}function ig(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.d=+i[0],e+i[0].length):-1}function I9(n,t,e){var i=We.exec(t.slice(e,e+3));return i?(n.m=0,n.d=+i[0],e+i[0].length):-1}function ng(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.H=+i[0],e+i[0].length):-1}function N9(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.M=+i[0],e+i[0].length):-1}function F9(n,t,e){var i=We.exec(t.slice(e,e+2));return i?(n.S=+i[0],e+i[0].length):-1}function O9(n,t,e){var i=We.exec(t.slice(e,e+3));return i?(n.L=+i[0],e+i[0].length):-1}function B9(n,t,e){var i=We.exec(t.slice(e,e+6));return i?(n.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function z9(n,t,e){var i=C9.exec(t.slice(e,e+1));return i?e+i[0].length:-1}function H9(n,t,e){var i=We.exec(t.slice(e));return i?(n.Q=+i[0],e+i[0].length):-1}function G9(n,t,e){var i=We.exec(t.slice(e));return i?(n.s=+i[0],e+i[0].length):-1}function rg(n,t){return ee(n.getDate(),t,2)}function W9(n,t){return ee(n.getHours(),t,2)}function $9(n,t){return ee(n.getHours()%12||12,t,2)}function U9(n,t){return ee(1+Ll.count(nr(n),n),t,3)}function f3(n,t){return ee(n.getMilliseconds(),t,3)}function Y9(n,t){return f3(n,t)+"000"}function j9(n,t){return ee(n.getMonth()+1,t,2)}function X9(n,t){return ee(n.getMinutes(),t,2)}function V9(n,t){return ee(n.getSeconds(),t,2)}function q9(n){var t=n.getDay();return t===0?7:t}function K9(n,t){return ee(Fu.count(nr(n)-1,n),t,2)}function p3(n){var t=n.getDay();return t>=4||t===0?da(n):da.ceil(n)}function Z9(n,t){return n=p3(n),ee(da.count(nr(n),n)+(nr(n).getDay()===4),t,2)}function Q9(n){return n.getDay()}function J9(n,t){return ee(uu.count(nr(n)-1,n),t,2)}function t7(n,t){return ee(n.getFullYear()%100,t,2)}function e7(n,t){return n=p3(n),ee(n.getFullYear()%100,t,2)}function i7(n,t){return ee(n.getFullYear()%1e4,t,4)}function n7(n,t){var e=n.getDay();return n=e>=4||e===0?da(n):da.ceil(n),ee(n.getFullYear()%1e4,t,4)}function r7(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ee(t/60|0,"0",2)+ee(t%60,"0",2)}function sg(n,t){return ee(n.getUTCDate(),t,2)}function s7(n,t){return ee(n.getUTCHours(),t,2)}function a7(n,t){return ee(n.getUTCHours()%12||12,t,2)}function o7(n,t){return ee(1+x0.count(as(n),n),t,3)}function g3(n,t){return ee(n.getUTCMilliseconds(),t,3)}function l7(n,t){return g3(n,t)+"000"}function c7(n,t){return ee(n.getUTCMonth()+1,t,2)}function u7(n,t){return ee(n.getUTCMinutes(),t,2)}function h7(n,t){return ee(n.getUTCSeconds(),t,2)}function d7(n){var t=n.getUTCDay();return t===0?7:t}function f7(n,t){return ee(d3.count(as(n)-1,n),t,2)}function m3(n){var t=n.getUTCDay();return t>=4||t===0?fa(n):fa.ceil(n)}function p7(n,t){return n=m3(n),ee(fa.count(as(n),n)+(as(n).getUTCDay()===4),t,2)}function g7(n){return n.getUTCDay()}function m7(n,t){return ee(hu.count(as(n)-1,n),t,2)}function y7(n,t){return ee(n.getUTCFullYear()%100,t,2)}function v7(n,t){return n=m3(n),ee(n.getUTCFullYear()%100,t,2)}function x7(n,t){return ee(n.getUTCFullYear()%1e4,t,4)}function _7(n,t){var e=n.getUTCDay();return n=e>=4||e===0?fa(n):fa.ceil(n),ee(n.getUTCFullYear()%1e4,t,4)}function b7(){return"+0000"}function ag(){return"%"}function og(n){return+n}function lg(n){return Math.floor(+n/1e3)}var Ms,b0;w7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function w7(n){return Ms=w9(n),b0=Ms.format,Ms.parse,Ms.utcFormat,Ms.utcParse,Ms}function C7(n){return new Date(n)}function S7(n){return n instanceof Date?+n:+new Date(+n)}function y3(n,t,e,i,r,s,a,o,c,l){var u=c3(),h=u.invert,p=u.domain,f=l(".%L"),x=l(":%S"),y=l("%I:%M"),d=l("%I %p"),_=l("%a %d"),g=l("%b %d"),m=l("%B"),v=l("%Y");function S(M){return(c(M)<M?f:o(M)<M?x:a(M)<M?y:s(M)<M?d:i(M)<M?r(M)<M?_:g:e(M)<M?m:v)(M)}return u.invert=function(M){return new Date(h(M))},u.domain=function(M){return arguments.length?p(Array.from(M,S7)):p().map(C7)},u.ticks=function(M){var w=p();return n(w[0],w[w.length-1],M??10)},u.tickFormat=function(M,w){return w==null?S:l(w)},u.nice=function(M){var w=p();return(!M||typeof M.range!="function")&&(M=t(w[0],w[w.length-1],M??10)),M?p(n9(w,M)):u},u.copy=function(){return g0(u,y3(n,t,e,i,r,s,a,o,c,l))},u}function du(){return p0.apply(y3(_9,b9,nr,_0,Fu,Ll,v0,y0,js,b0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T7(n){for(var t=n.length/6|0,e=new Array(t),i=0;i<t;)e[i]="#"+n.slice(i*6,++i*6);return e}const k7=T7("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),rc=n=>()=>n;function M7(n,{sourceEvent:t,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Zn(n,t,e){this.k=n,this.x=t,this.y=e}Zn.prototype={constructor:Zn,scale:function(n){return n===1?this:new Zn(this.k*n,this.x,this.y)},translate:function(n,t){return n===0&t===0?this:new Zn(this.k,this.x+this.k*n,this.y+this.k*t)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var pa=new Zn(1,0,0);v3.prototype=Zn.prototype;function v3(n){for(;!n.__zoom;)if(!(n=n.parentNode))return pa;return n.__zoom}function Gh(n){n.stopImmediatePropagation()}function Ga(n){n.preventDefault(),n.stopImmediatePropagation()}function A7(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function E7(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function cg(){return this.__zoom||pa}function P7(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function D7(){return navigator.maxTouchPoints||"ontouchstart"in this}function L7(n,t,e){var i=n.invertX(t[0][0])-e[0][0],r=n.invertX(t[1][0])-e[1][0],s=n.invertY(t[0][1])-e[0][1],a=n.invertY(t[1][1])-e[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function R7(){var n=A7,t=E7,e=L7,i=P7,r=D7,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,c=A8,l=Pl("start","zoom","end"),u,h,p,f=500,x=150,y=0,d=10;function _(T){T.property("__zoom",cg).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",N).filter(r).on("touchstart.zoom",k).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(T,A,E,I){var B=T.selection?T.selection():T;B.property("__zoom",cg),T!==B?S(T,A,E,I):B.interrupt().each(function(){M(this,arguments).event(I).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},_.scaleBy=function(T,A,E,I){_.scaleTo(T,function(){var B=this.__zoom.k,$=typeof A=="function"?A.apply(this,arguments):A;return B*$},E,I)},_.scaleTo=function(T,A,E,I){_.transform(T,function(){var B=t.apply(this,arguments),$=this.__zoom,Y=E==null?v(B):typeof E=="function"?E.apply(this,arguments):E,q=$.invert(Y),G=typeof A=="function"?A.apply(this,arguments):A;return e(m(g($,G),Y,q),B,a)},E,I)},_.translateBy=function(T,A,E,I){_.transform(T,function(){return e(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),a)},null,I)},_.translateTo=function(T,A,E,I,B){_.transform(T,function(){var $=t.apply(this,arguments),Y=this.__zoom,q=I==null?v($):typeof I=="function"?I.apply(this,arguments):I;return e(pa.translate(q[0],q[1]).scale(Y.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof E=="function"?-E.apply(this,arguments):-E),$,a)},I,B)};function g(T,A){return A=Math.max(s[0],Math.min(s[1],A)),A===T.k?T:new Zn(A,T.x,T.y)}function m(T,A,E){var I=A[0]-E[0]*T.k,B=A[1]-E[1]*T.k;return I===T.x&&B===T.y?T:new Zn(T.k,I,B)}function v(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function S(T,A,E,I){T.on("start.zoom",function(){M(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(I).end()}).tween("zoom",function(){var B=this,$=arguments,Y=M(B,$).event(I),q=t.apply(B,$),G=E==null?v(q):typeof E=="function"?E.apply(B,$):E,F=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),U=B.__zoom,j=typeof A=="function"?A.apply(B,$):A,et=c(U.invert(G).concat(F/U.k),j.invert(G).concat(F/j.k));return function(V){if(V===1)V=j;else{var tt=et(V),z=F/tt[2];V=new Zn(z,G[0]-tt[0]*z,G[1]-tt[1]*z)}Y.zoom(null,V)}})}function M(T,A,E){return!E&&T.__zooming||new w(T,A)}function w(T,A){this.that=T,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(T,A),this.taps=0}w.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,A){return this.mouse&&T!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var A=It(this.that).datum();l.call(T,this.that,new M7(T,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),A)}};function L(T,...A){if(!n.apply(this,arguments))return;var E=M(this,A).event(T),I=this.__zoom,B=Math.max(s[0],Math.min(s[1],I.k*Math.pow(2,i.apply(this,arguments)))),$=ri(T);if(E.wheel)(E.mouse[0][0]!==$[0]||E.mouse[0][1]!==$[1])&&(E.mouse[1]=I.invert(E.mouse[0]=$)),clearTimeout(E.wheel);else{if(I.k===B)return;E.mouse=[$,I.invert($)],Js(this),E.start()}Ga(T),E.wheel=setTimeout(Y,x),E.zoom("mouse",e(m(g(I,B),E.mouse[0],E.mouse[1]),E.extent,a));function Y(){E.wheel=null,E.end()}}function P(T,...A){if(p||!n.apply(this,arguments))return;var E=T.currentTarget,I=M(this,A,!0).event(T),B=It(T.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",F,!0),$=ri(T,E),Y=T.clientX,q=T.clientY;s0(T.view),Gh(T),I.mouse=[$,this.__zoom.invert($)],Js(this),I.start();function G(U){if(Ga(U),!I.moved){var j=U.clientX-Y,et=U.clientY-q;I.moved=j*j+et*et>y}I.event(U).zoom("mouse",e(m(I.that.__zoom,I.mouse[0]=ri(U,E),I.mouse[1]),I.extent,a))}function F(U){B.on("mousemove.zoom mouseup.zoom",null),a0(U.view,I.moved),Ga(U),I.event(U).end()}}function N(T,...A){if(n.apply(this,arguments)){var E=this.__zoom,I=ri(T.changedTouches?T.changedTouches[0]:T,this),B=E.invert(I),$=E.k*(T.shiftKey?.5:2),Y=e(m(g(E,$),I,B),t.apply(this,A),a);Ga(T),o>0?It(this).transition().duration(o).call(S,Y,I,T):It(this).call(_.transform,Y,I,T)}}function k(T,...A){if(n.apply(this,arguments)){var E=T.touches,I=E.length,B=M(this,A,T.changedTouches.length===I).event(T),$,Y,q,G;for(Gh(T),Y=0;Y<I;++Y)q=E[Y],G=ri(q,this),G=[G,this.__zoom.invert(G),q.identifier],B.touch0?!B.touch1&&B.touch0[2]!==G[2]&&(B.touch1=G,B.taps=0):(B.touch0=G,$=!0,B.taps=1+!!u);u&&(u=clearTimeout(u)),$&&(B.taps<2&&(h=G[0],u=setTimeout(function(){u=null},f)),Js(this),B.start())}}function D(T,...A){if(this.__zooming){var E=M(this,A).event(T),I=T.changedTouches,B=I.length,$,Y,q,G;for(Ga(T),$=0;$<B;++$)Y=I[$],q=ri(Y,this),E.touch0&&E.touch0[2]===Y.identifier?E.touch0[0]=q:E.touch1&&E.touch1[2]===Y.identifier&&(E.touch1[0]=q);if(Y=E.that.__zoom,E.touch1){var F=E.touch0[0],U=E.touch0[1],j=E.touch1[0],et=E.touch1[1],V=(V=j[0]-F[0])*V+(V=j[1]-F[1])*V,tt=(tt=et[0]-U[0])*tt+(tt=et[1]-U[1])*tt;Y=g(Y,Math.sqrt(V/tt)),q=[(F[0]+j[0])/2,(F[1]+j[1])/2],G=[(U[0]+et[0])/2,(U[1]+et[1])/2]}else if(E.touch0)q=E.touch0[0],G=E.touch0[1];else return;E.zoom("touch",e(m(Y,q,G),E.extent,a))}}function C(T,...A){if(this.__zooming){var E=M(this,A).event(T),I=T.changedTouches,B=I.length,$,Y;for(Gh(T),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),$=0;$<B;++$)Y=I[$],E.touch0&&E.touch0[2]===Y.identifier?delete E.touch0:E.touch1&&E.touch1[2]===Y.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(Y=ri(Y,this),Math.hypot(h[0]-Y[0],h[1]-Y[1])<d)){var q=It(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return _.wheelDelta=function(T){return arguments.length?(i=typeof T=="function"?T:rc(+T),_):i},_.filter=function(T){return arguments.length?(n=typeof T=="function"?T:rc(!!T),_):n},_.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:rc(!!T),_):r},_.extent=function(T){return arguments.length?(t=typeof T=="function"?T:rc([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),_):t},_.scaleExtent=function(T){return arguments.length?(s[0]=+T[0],s[1]=+T[1],_):[s[0],s[1]]},_.translateExtent=function(T){return arguments.length?(a[0][0]=+T[0][0],a[1][0]=+T[1][0],a[0][1]=+T[0][1],a[1][1]=+T[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(T){return arguments.length?(e=T,_):e},_.duration=function(T){return arguments.length?(o=+T,_):o},_.interpolate=function(T){return arguments.length?(c=T,_):c},_.on=function(){var T=l.on.apply(l,arguments);return T===l?_:T},_.clickDistance=function(T){return arguments.length?(y=(T=+T)*T,_):Math.sqrt(y)},_.tapDistance=function(T){return arguments.length?(d=+T,_):d},_}function x3(n,t){if(n[0][1]>=t[1][1]||n[1][1]<=t[0][1])return 0;let e=(n[0][0]+n[1][0])/2,i=(t[0][0]+t[1][0])/2,r=Math.abs(n[1][0]-n[0][0]),s=Math.abs(t[1][0]-t[0][0]),a=Math.abs(e-i),o;if(n[2][0]&&t[2][0])o=(r+s)/2>a+1e-6?1/0:0;else if(n[2][0]){let c=1-r/2/a;o=c<=0?1/0:s/2/(c*a)}else if(t[2][0]){let c=1-s/2/a;o=c<=0?1/0:r/2/(c*a)}else o=(r+s)/2/Math.max(Math.abs(e-i),1e-6);return o}const I7="./font/unicode_width.bin",sc="UnicodeWidth";function N7(){return{__dict:null,get dict(){if(this.__dict===null)throw new Error("dict not loaded");return this.__dict},async load(){if(this.__dict!==null)return;const t=await(await fetch(I7)).arrayBuffer();this.__dict=new Float32Array(t),console.log("dict loaded",this.__dict)},charWidth(n,t){if(this.__dict===null)throw new Error("dict not loaded");const e=n.codePointAt(0);return(this.__dict[e]??0)*t/10},stringWidth(n,t){if(this.__dict===null)throw new Error("dict not loaded");let e=0;for(let i=0;i<n.length;i++){const r=n.codePointAt(i);e+=(this.__dict[r]??0)*t/10}return e}}}const F7=(globalThis[sc]===void 0&&(globalThis[sc]=N7(),globalThis[sc].load()),globalThis[sc]),Wh={svg:null};let Ou=class{constructor(t=12,e="FZQINGKBYSJF"){ot(this,"fontSize");ot(this,"fontFamily");ot(this,"ruler");this.fontSize=t,this.fontFamily=e,this.ruler=this.getRuler()}visualWidth(t,e,i){return F7.stringWidth(t,e||this.fontSize)}visualHeight(t,e,i){return this.fontSize}truncate(t,e,i,r,s){if(this.visualWidth(t,r,s)<=e)return t;i=i||"...";const o=this.visualWidth(i,r,s),c=this.truncate_index(t,e-o,r,s);return c===0?o<=e?i:"":t.slice(0,c)+i}wrap(t,e,i,r,s,a){if(i===0)return[];r=r||"...";const o=this.visualWidth(r,s,a);let c=0;const l=[];for(;c<t.length;){const u=t.slice(c);if(l.length===i-1){const h=this.truncate(u,e,r,s,a);l.push(h);break}else{let h=this.truncate_index(u,e,s,a);if(h===0){o<=e&&l.push(r);break}l.push(u.slice(0,h)),c+=h}}return l}lines2svg(t,e){let i=e||this.fontSize*1.2;return t.map((r,s)=>"<tspan x='0' dy='"+i*Math.min(s,1)+"'>"+r+"</tspan>").join("")}getRuler(){const t=Wh.svg||document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","0"),t.setAttribute("height","0"),t.style.position="absolute";const e=document.createElementNS("http://www.w3.org/2000/svg","text");return t.appendChild(e),Wh.svg===null&&(document.body.insertBefore(t,document.body.firstChild),Wh.svg=t),e}setRuler(t,e,i){e=e||this.fontSize,i=i||this.fontFamily,this.ruler.style.fontSize=e.toString(),this.ruler.style.fontFamily=i,this.ruler.innerHTML=t}truncate_index(t,e,i,r){if(e<=0)return 0;if(this.setRuler(t,i,r),this.ruler.getBoundingClientRect().width<=e)return t.length;if(this.ruler.getEndPositionOfChar(0).x>e)return 0;let a=0,o=t.length-1;for(;a<o;){const c=Math.ceil((a+o)/2);this.ruler.getEndPositionOfChar(c).x<=e?a=c:o=c-1}return a+1}};const ug=new Ou,$n=class $n{constructor(){ot(this,"id",$n.counter++);ot(this,"_ticks",null);ot(this,"_every");ot(this,"_filter");ot(this,"_granularity");ot(this,"_values");ot(this,"_tickLength",10);ot(this,"_fontsize",12);ot(this,"_tickFormat",b0("%Y-%m-%d"));ot(this,"tickVisibleK",0);ot(this,"textVisibleK",0)}static create(){return new $n}every(t){return t===void 0?this._every:(this._every=t,this._ticks=null,this)}is(t,e){return this.filter(t).granularity(e)}granularity(t){return t===void 0?this._granularity:(this._parseGranularity(t),this._granularity=t,this._ticks=null,this)}filter(t){return t===void 0?this._filter:(this._filter=t,this._ticks=null,this)}values(t){return t===void 0?this._values:(this._values=t,this._ticks=null,this)}tickLength(t){return t===void 0?this._tickLength:(this._tickLength=t,this)}fontsize(t){return t===void 0?this._fontsize:(this._fontsize=t,this)}tickFormat(t){return t===void 0?this._tickFormat:(this._tickFormat=t,this)}_year2date(t){let e=t<0,i=Math.abs(t).toString(),r=new Date((e?"-":"")+"0".repeat((e?6:4)-i.length).concat(i));return r.setHours(0,0,0,0),r}_updateDomain([t,e],i,r,s="internal"){if(t=new Date(t),e=new Date(e),r.startsWith("y")){t.setHours(0,0,0,0),e.setHours(0,0,0,0);const a=s==="internal"?i*Math.ceil(t.getFullYear()/i):i*Math.floor(t.getFullYear()/i),o=s==="internal"?i*Math.ceil(e.getFullYear()/i):i*Math.floor(e.getFullYear()/i);t=this._year2date(a),e=this._year2date(o)}else if(r.startsWith("m"))t=new Date(t.getFullYear(),t.getMonth()+t.getDate()===1?0:1,1,0,0,0,0),e=new Date(e.getFullYear(),e.getMonth(),1,0,0,0,0);else if(r.startsWith("d"))t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0);else if(r.startsWith("h"))t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),0,0,0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),0,0,0);else if(r.startsWith("M"))t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),0,0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),0,0);else if(r.startsWith("s"))t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0),e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0);else throw`Invalid unit ${r}`;return[t,e]}_parseGranularity(t){let e=/([\.\d]+)([^\d]+)/.exec(t);if(e===null)throw new Error("Code should never reach here");let[i,r,s]=e;if(s=s.toLowerCase(),!Object.keys($n.iterate).includes(s))throw new Error(`Invalid granularity unit: ${s}`);return[Number.parseFloat(r),s]}_visibleThreshold(t,e=[]){let i=this.getTicks(t.domain()),r=[0,0],a=this._tickLength*1.5,o=i.map(h=>{let p=t(h);return[[p,0],[p,a],[!1,!1]]}),c=i.map(h=>{let p=t(h),f=ug.visualWidth(this._tickFormat(h),this._fontsize),x=ug.visualHeight(this._tickFormat(h),this._fontsize);return[[p-f/2,0],[p+f/2,x],[!1,!1]]}),l=o.length===0?1/0:Math.min(...new Array(o.length-1).fill(0).map((h,p)=>o[p+1][0][0]-o[p][0][0]));r[0]=Math.max(this._tickLength*.3,1)/Math.max(l,1e-6);let u=Math.max(...c.map((h,p)=>{let f=e;return p>0&&(f=f.concat([c[p-1]])),p<c.length-1&&(f=f.concat([c[p+1]])),Math.max(...f.map(x=>x3(h,x)))}),0);return r[1]=Math.max(r[0],u),{show:r,existingBoundingBoxes:o.concat(c).concat(e)}}getTicks(t,e="internal"){let[i,r]=t;if(this._ticks!==null)return this._ticks;if(this._values!==void 0){let s=this._values.map(a=>new Date(a)).filter(a=>a>=i&&a<=r);return this._ticks=s}else if(this._filter!==void 0){let s=this._granularity||"1y",[a,o]=this._parseGranularity(s),[c,l]=this._updateDomain(t,a,o,e),u=$n.iterate[o],h=[];for(let p=c;p<=l;u(p,a))this._filter(p)&&h.push(new Date(p));return this._ticks=h}else if(this._every!==void 0){let[s,a]=this._parseGranularity(this._every),[o,c]=this._updateDomain(t,s,a,e),l=$n.iterate[a],u=[];for(let h=o;h<=c;l(h,s))u.push(new Date(h));return this._ticks=u}else throw'One of arguments "every", "filter", "values" must be configured'}static visibleThreshold(t,e){let i=[],r=[],s=0;return t.forEach((a,o)=>{let c=a._visibleThreshold(e,i);for(let l in c.show)c.show[l]=Math.max(c.show[l],s),s=c.show[l],a.tickVisibleK=c.show[0],a.textVisibleK=s;r.push(c.show),i=i.concat(c.existingBoundingBoxes)}),r}};ot($n,"counter",0),ot($n,"iterate",{y:(t,e=1)=>t.setFullYear(t.getFullYear()+e),m:(t,e=1)=>t.setMonth(t.getMonth()+e),d:(t,e=1)=>t.setDate(t.getDate()+e),h:(t,e=1)=>t.setHours(t.getHours()+e),M:(t,e=1)=>t.setMinutes(t.getMinutes()+e),s:(t,e=1)=>t.setSeconds(t.getSeconds()+e)});let pr=$n;class qo{constructor(t,e){ot(this,"value");ot(this,"columnCount");ot(this,"rowCount");if(typeof t=="number"&&typeof e=="number")this.value=new Uint8Array(t*e),this.rowCount=t,this.columnCount=e;else if(t instanceof qo)this.value=t.value.slice(0),this.rowCount=t.rowCount,this.columnCount=t.columnCount;else throw new Error("Invalid arguments")}toArray(){const t=new Array(this.rowCount);for(let e=0;e<this.rowCount;e++){t[e]=new Array(this.columnCount);for(let i=0;i<this.columnCount;i++)t[e][i]=this.value[e*this.columnCount+i]}return t}get(t,e){return this.value[t*this.columnCount+e]}getRow(t){return this.value.slice(t*this.columnCount,(t+1)*this.columnCount)}getColumn(t){const e=new Uint8Array(this.rowCount);for(let i=0;i<this.rowCount;i++)e[i]=this.value[i*this.columnCount+t];return e}set(t,e,i){return this.value[t*this.columnCount+e]=i,this}setRow(t,e){return this.value.set(e,t*this.columnCount),this}setColumn(t,e){for(let i=0;i<this.rowCount;i++)this.value[i*this.columnCount+t]=e[i];return this}slice(t,e,i,r){const s=e-t,a=r-i,o=new qo(s,a);for(let c=0;c<s;c++){const l=(c+t)*this.columnCount;o.value.set(this.value.slice(l+i,l+r),c*a)}return o}pick(t,e){const i=t.length,r=e.length,s=new qo(i,r);for(let a=0;a<i;a++){const o=t[a]*this.columnCount;s.value.set(this.value.slice(o).filter((c,l)=>e.includes(l)),a*r)}return s}sliceRow(t,e){return this.slice(t,e,0,this.columnCount)}sliceColumn(t,e){return this.slice(0,this.rowCount,t,e)}}class Ko{constructor(t,e){ot(this,"value");ot(this,"columnCount");ot(this,"rowCount");if(typeof t=="number"&&typeof e=="number")this.value=new Float64Array(t*e),this.rowCount=t,this.columnCount=e;else if(t instanceof Ko)this.value=t.value.slice(0),this.rowCount=t.rowCount,this.columnCount=t.columnCount;else throw new Error("Invalid arguments")}toArray(){const t=new Array(this.rowCount);for(let e=0;e<this.rowCount;e++){t[e]=new Array(this.columnCount);for(let i=0;i<this.columnCount;i++)t[e][i]=this.value[e*this.columnCount+i]}return t}get(t,e){return this.value[t*this.columnCount+e]}getRow(t){return this.value.slice(t*this.columnCount,(t+1)*this.columnCount)}getColumn(t){const e=new Float64Array(this.rowCount);for(let i=0;i<this.rowCount;i++)e[i]=this.value[i*this.columnCount+t];return e}set(t,e,i){return this.value[t*this.columnCount+e]=i,this}setRow(t,e){return this.value.set(e,t*this.columnCount),this}setColumn(t,e){for(let i=0;i<this.rowCount;i++)this.value[i*this.columnCount+t]=e[i];return this}slice(t,e,i,r){const s=e-t,a=r-i,o=new Ko(s,a);for(let c=0;c<s;c++){const l=(c+t)*this.columnCount;o.value.set(this.value.slice(l+i,l+r),c*a)}return o}pick(t,e){const i=t.length,r=e.length,s=new Ko(i,r);for(let a=0;a<i;a++){const o=t[a]*this.columnCount,c=this.value.slice(o);s.value.set(e.map(l=>c[l]),a*r)}return s}sliceRow(t,e){return this.slice(t,e,0,this.columnCount)}sliceColumn(t,e){return this.slice(0,this.rowCount,t,e)}}class w0{constructor(t){ot(this,"length",0);ot(this,"fa");this.length=t,this.init()}static create(t){return new w0(t)}init(){this.fa=new Int32Array(this.length).fill(0).map((t,e)=>e)}find(t){return this.fa[t]===t?t:this.fa[t]=this.find(this.fa[t])}union(t,e){this.fa[this.find(t)]=this.find(e)}connected(t,e){return this.find(t)===this.find(e)}flatten(){const t=this.fa;for(let e=0;e<t.length;e++)t[e]=this.find(e);return t}}class C0{constructor(){ot(this,"labels",[]);ot(this,"selectedLabels",[]);ot(this,"scale");ot(this,"kRange",[0,1]);ot(this,"debug",!1);ot(this,"borders",[]);ot(this,"weight",t=>t.attr("importance"));ot(this,"layer",()=>0);ot(this,"rows",[0,1]);ot(this,"row",()=>0)}static create(){return new C0}data(t){return t===void 0?this.labels:(this.labels=t.slice(),this)}attr(t,e){return e===void 0?this[t]:(this[t]=e,this)}getRows(t,e,i){let r=0;const[s,a]=t;if(s+a===1){const f=e.map((x,y)=>y);return f.id=r++,f.row=s===1?-1:1,[f]}const o=s+a+1,c=new Array(o).fill(0).map((f,x)=>{const y=[];return y.row=x-s,y.id=r++,y});for(let f=0;f<e.length;++f){const x=e[f];let y=this.row(x);(!Number.isInteger(y)||y<-s||y>a)&&(y=0),c[y+s].push(f)}const l=[...c.slice(0,s),...c.slice(s+1),...c[s].map(f=>{const x=[f];return x.id=r++,x})],u=new Map,h=(f,x)=>{const y=`${f.id}-${x.id}`;let d=u.get(y);if(d!==void 0)return d;d=0;for(let _=0;_<f.length;++_)for(let g=0;g<x.length;++g)d=Math.max(i.get(f[_],x[g]),d);return u.set(y,d),d},p=(f,x)=>f.row!==void 0&&x.row!==void 0?null:f.row!==void 0?(f.push(...x),f.id=r++,[f,0]):x.row!==void 0?(x.push(...f),x.id=r++,[x,1]):(f.push(...x),f.id=r++,[f,0]);for(;l.length>o-1;){let f=null,x=-1,y=-1;for(let _=0;_<l.length;++_){const g=l[_].row!==void 0;for(let m=_+1;m<l.length;++m){const v=l[m].row!==void 0;if(g&&v)continue;const S=h(l[_],l[m]);(f===null||S<f)&&(f=S,x=_,y=m)}}if(x===-1||y===-1)throw new Error("Invalid group");let d=p(l[x],l[y]);if(d===null)throw new Error("Invalid group");d[1]===0?l.splice(y,1):l.splice(x,1)}return l}calculateVisibleThreshold(t,e,i,r){const s=this.kRange;this.debug;const a=[],o=e.map(x=>t[x]);i=i.map(x=>e.findIndex(y=>y===x)).filter(x=>x!==-1),r=r.pick(e,e);const c=new Map;for(let x=0;x<o.length;x++)for(let y=x+1;y<o.length;y++){let d=r.get(x,y),_=c.get(d);_===void 0&&(_=[],c.set(d,_)),_.push([x,y])}const l=Array.from(new Set(r.value)).filter(x=>x>=s[0]&&x<=s[1]);l.find(x=>x===s[0])===void 0&&l.push(s[0]),l.sort((x,y)=>x-y);const u=new qo(o.length,o.length);for(let x=0;x<o.length;x++){u.set(x,x,1);for(let y=x+1;y<o.length;y++){const d=r.get(x,y)>l[0]?1:0;u.set(x,y,d),u.set(y,x,d)}}const h=new Uint8Array(o.length).fill(0);for(let x=0;x<i.length;++x)h[i[x]]=1;const p=new Float64Array(o.length).fill(0).map((x,y)=>this.weight(o[y])),f=new Uint8Array(o.length).fill(0);for(let x=0;x<i.length;++x)f[i[x]]=1;for(let x=0;x<l.length;++x){const y=l[x];if(h.fill(0),x>0){const g=l[x],m=c.get(g);if(m!==void 0)for(let[v,S]of m)u.set(v,S,0),u.set(S,v,0)}const d=w0.create(o.length);for(let g=0;g<o.length;g++)for(let m=g+1;m<o.length;m++)u.get(g,m)===1&&d.union(g,m);const _=[];for(let g=0;g<o.length;g++){if(h[g])continue;h[g]=1;let m=[g];for(let v=g+1;v<o.length;v++)d.connected(g,v)&&(h[v]=1,m.push(v));if(m.length===1)_.push(g);else{const v=this.traverse(m,p,u,m.map(S=>f[S]));_.push(...v)}}_.forEach(g=>{if(f[g]===0){const m=o[g];let v=Math.min(s[1],Math.max(y,m.attr("maxK"))),S=Math.max(y,s[0],m.attr("minK"));if(m.children.length>0)throw new Error("暂不支持children");a[g]=[S,v],f[g]=1}})}return a}calculate(){const t=this.borders,e=t.concat(this.labels),i=this.scale,r=new Ko(e.length,e.length),s=e.map(u=>u.boundingBox(i)),a=new Map;for(let u=0;u<e.length;u++)for(let h=u+1;h<e.length;h++){let p=x3(s[u],s[h]);if(r.set(u,h,p),r.set(h,u,p),p===0)continue;let f=a.get(p);f===void 0&&(f=[],a.set(p,f)),f.push([u,h])}const o=[0,0],c=r.slice(t.length,e.length,t.length,e.length),l=t.map((u,h)=>h);for(e.forEach(u=>u.visibleKList=[]);;){if(o[1]<this.rows[1]){o[1]+=1;const u=this.getRows(o,this.labels,c);u.forEach(h=>{for(let p=0;p<h.length;++p)h[p]+=t.length});for(let h of u){const p=this.calculateVisibleThreshold(e,l.concat(h),l,r).slice(t.length);h.forEach((f,x)=>{e[f].visibleKList.push([h.row,...p[x]])}),o[0]===0&&o[1]===1&&h.forEach((f,x)=>{e[f].visibleK=p[x]})}}if(o[0]<this.rows[0]){o[0]+=1;const u=this.getRows(o,this.labels,c);u.forEach(h=>{for(let p=0;p<h.length;++p)h[p]+=t.length});for(let h of u){const p=this.calculateVisibleThreshold(e,l.concat(h),l,r).slice(t.length);h.forEach((f,x)=>{e[f].visibleKList.push([h.row,...p[x]])})}}if(o[0]>=this.rows[0]&&o[1]>=this.rows[1])break}}traverse(t,e,i,r){const s=this.borders.concat(this.labels);this.debug&&t.find(h=>e[h]===1e3)&&console.log("traverse",t.map(h=>s[h].description));let a=-1/0;const o=new Uint8Array(t.length).fill(0),c=new Uint8Array(t.length).fill(1),l=(h,p)=>{for(let f=0;f<t.length;++f)i.get(h,t[f])===1&&(p[f]=0)},u=(h,p,f)=>{if(h>=t.length){const x=p.reduce((y,d,_)=>y+d*e[t[_]],0);this.debug&&t.find(y=>e[y]===1e3)&&console.log("pick",x,t.filter((y,d)=>p[d]===1).map(y=>s[y].description)),x>a&&(a=x,o.set(p));return}if(f[h]===1&&p[h]===0){p[h]=1;const x=f.slice();l(t[h],f),u(h+1,p,f),p[h]=0,f.set(x)}u(h+1,p,f)};if(r===void 0)r=new Array(t.length).fill(0);else for(let h=0;h<t.length;h++)r[h]===1&&l(t[h],c);return this.debug&&t.find(h=>e[h]===1e3)&&console.log("init",c,r),u(0,r,c),this.debug&&t.find(h=>e[h]===1e3)&&console.log("final",a,t.filter((h,p)=>o[p]===1).map(h=>s[h].description)),t.filter((h,p)=>o[p]===1)}}var Qn;let Bu=(Qn=class{constructor(){ot(this,"id",Qn.counter++);ot(this,"idx");ot(this,"description");ot(this,"scale");ot(this,"time");ot(this,"offsetX",0);ot(this,"offsetY",0);ot(this,"width",0);ot(this,"height",0);ot(this,"alignment","center");ot(this,"paddingX",0);ot(this,"paddingY",0);ot(this,"importance",1);ot(this,"maxK",1/0);ot(this,"minK",0);ot(this,"boundingBox",t=>{let e=this.attr("offsetX"),i=this.attr("offsetY"),r=this.attr("height"),s=this.attr("time"),a;if(s instanceof Array){const o=this.attr("width");if(o===0)a=[[t(s[0])+e,i],[t(s[1])+e,i+r],[!0,!1]];else{let c=t(s[0])+e,l=t(s[1])+e,u=(c+l)*.5;a=[[u-o*.5,i],[u+o*.5,i+r],[!0,!1]]}}else{let o=t(s),c=this.attr("width");switch(this.attr("alignment")){case"center":a=[[o-c*.5+e,i],[o+c*.5+e,i+r],[!1,!1]];break;case"left":a=[[o+e,i],[o+c+e,i+r],[!1,!1]];break;case"right":a=[[o-c+e,i],[o+e,i+r],[!1,!1]];break;default:throw new Error("unknown alignment")}}return a});ot(this,"_tick");ot(this,"_content");ot(this,"children",[]);ot(this,"visibleK",[0,1/0]);ot(this,"visibleKList",[])}get t(){return this.time instanceof Array?new Date((this.time[0].getTime()+this.time[1].getTime())/2):this.time}static create(){return new Qn}attr(t,e){return e===void 0?this[t]:(this[t]=e,this)}tick(t){return t===void 0?this._tick:(this._tick=t,this)}content(t){return t===void 0?this._content:(this._content=t,this)}addChild(...t){return this.children.push(...t),this}addChildren(...t){return this.children.push(...t),this}render(t,e,i){this._content(t,e,this,i)}static visibleThreshold(t,e,i=[],r=[0,1/0]){return Qn._visibleThreshold(t,e,i,r)}static _visibleThreshold(t,e,i=[],r=[0,1/0],s=!1){C0.create().data(t).attr("scale",e).attr("borders",i).attr("kRange",r).calculate()}getBoundingBox(t,e){const i=this.boundingBox(t),[r,s]=i[0],[a,o]=i[1],c={x:r,y:s,width:a-r,height:o-s};if(e===void 0)return c;if(r>=e[0]&&a<=e[1])return Object.assign(c,{truncatedX1:!1,truncatedX2:!1});if(a<e[0]||r>e[1])return Object.assign(c,{truncatedX1:!0,truncatedX2:!0});{const l=r<e[0],u=a>e[1],h=l?e[0]:r,p=u?e[1]-h:a-h;return Object.assign(c,{x:h,width:p,truncatedX1:l,truncatedX2:u})}}},ot(Qn,"counter",0),Qn);class O7{constructor(t,e,i){ot(this,"props");ot(this,"k",1);ot(this,"stopPropagation",!1);ot(this,"zoom",null);ot(this,"emit");ot(this,"ctx",null);ot(this,"context",{});ot(this,"accessor");var r;this.props=Object.assign({name:"",groupId:"",group:{},scale:null,originScale:null,brushDomain:null,translateX:0,translateY:0,width:300,height:80,ticks:[],labels:[],scalable:!0,showBrush:!1,showMask:!0,maskType:"brush",color:"#6f4922",bgcolor:"#ab8c70",baseStrokeWidth:1,brushHeight:6},t),this.emit=e,this.accessor=i,this.context=(r=this.props.init)==null?void 0:r.call(this),this.calculateTicksVisible(),this.calculateLabelsVisible()}get padding(){return this.props.showBrush?this.props.brushHeight*.5:this.props.baseStrokeWidth*.5}get innerWidth(){return this.props.width}get innerHeight(){return this.props.height-this.props.baseStrokeWidth}get brushRange(){return this.props.scale===null?[0,this.innerWidth]:this.props.brushDomain===null?[0,this.innerWidth]:this.props.brushDomain.map(t=>this.props.scale(t))}get brushMaxRange(){return[0,this.innerWidth]}calculateTicksVisible(){let t=this.props.originScale;return t===null?[]:pr.visibleThreshold(this.props.ticks,t)}calculateLabelsVisible(){let t=this.props.originScale;return t===null?[]:this.props.labels.length===0?[]:this.props.labels.map(e=>Bu.visibleThreshold(e,t,[],[1,1/0]))}setContext(t){return this.ctx=t,this}brushEvent(t,e="end"){this.props.brushDomain=t,this.props.showMask&&this.renderMask(),this.emit.brush(this.props.name,t,e)}renderTicks(){const t=this.ctx;if(t===null)return;t.save();const e=this.props.scale;if(e===null)throw new Error("scale is null");if(this.props.ticksRenderer){this.props.ticksRenderer.call(this,t,e),t.restore();return}const i=this.props.ticks;if(i.length===0){t.restore();return}const r=this.k,[s,a]=e.domain();for(let o=0,c=i.length;o<c;o++){const l=i[o];if(!(l.tickVisibleK<=r))continue;const h=l.getTicks(e.domain());let p=0,f=h.length;h.length>0&&(p=Math.max(0,this._binarySearchLeft(h,s)),f=Math.min(h.length,this._binarySearchRight(h,a)));for(let x=p;x<f;x++){const y=h[x],d=l.tickLength(),_=this.props.color,g=this.props.baseStrokeWidth;if(t.save(),t.translate(e(y),0),t.strokeStyle=_,t.lineWidth=g,t.beginPath(),t.moveTo(0,0),t.lineTo(0,d),t.stroke(),t.closePath(),l.textVisibleK<=r&&l.fontsize()>0){const m=l.tickFormat()(y);t.fillStyle=_,t.font=`${l.fontsize()}px Source`,t.textAlign="center",t.textBaseline="hanging",t.fillText(m,0,d)}t.restore()}}t.restore()}renderLabels(){const t=this.ctx;if(t===null)return;t.save();const e=this.props.scale;if(e===null)throw new Error("scale is null");if(this.props.labelsRenderer){this.props.labelsRenderer.call(this,t,e),t.restore();return}const i=this.props.labels,r=this.k;for(let s=0,a=i.length;s<a;s++){const o=i[s];for(let c=0,l=o.length;c<l;c++){const u=o[c],h=u.visibleK,p=u.tick(),f=h[0]<=r&&r<=h[1];p==null||p(t,e,u,{opacity:f?1:.3}),f&&u.render(t,e)}}t.restore()}renderMask(){if(this.props.showMask===!1)return;const t=this.ctx;if(t===null)return;t.save();let e,i;if(this.props.maskType==="brush")[e,i]=this.brushRange;else{const r=this.props.group.timelines.find(a=>a.showMask);if(r===void 0)throw new Error("no timeline with showMask = true");const s=this.accessor.getSingleTimeline(r.name);if(s.props.brushDomain===null){t.restore();return}[e,i]=s.brushRange}t.fillStyle=this.props.bgcolor,t.globalAlpha=.1,t.fillRect(e,0,i-e,this.innerHeight),t.restore()}renderBackground(){const t=this.ctx;t!==null&&(t.save(),t.fillStyle="#fff",t.fillRect(0,0,this.props.width,this.props.height),t.strokeStyle=this.props.color,t.lineWidth=this.props.timelineStrokeWidth||this.props.baseStrokeWidth,t.beginPath(),t.moveTo(0,0),t.lineTo(this.innerWidth,0),t.stroke(),t.restore())}render(t=!0){const e=this.ctx;e!==null&&(e.save(),e.clearRect(0,0,this.props.width,this.props.height),this.renderBackground(),this.renderTicks(),t&&this.renderLabels(),this.props.showMask&&this.renderMask(),e.restore())}updateScale(t){let e=t.domain().map(a=>Number(a)),i=this.props.scale.domain().map(a=>Number(a));if(e[0]===i[0]&&e[1]===i[1])return;this.props.scale=t;let r=this.props.originScale.domain(),s=this.props.scale.domain();this.k=(r[1].getTime()-r[0].getTime())/(s[1].getTime()-s[0].getTime())}_domain2transform(t){let e=t.map(a=>this.props.originScale(a)),i=this.props.originScale.range(),r=(i[1]-i[0])/(e[1]-e[0]),s=(i[0]+i[1]-r*(e[0]+e[1]))/2;return pa.translate(s,0).scale(r)}_binarySearchLeft(t,e){let i=0,r=t.length-1,s=-1;for(;i<=r;){let a=Math.floor((i+r)/2);t[a]<=e?(s=a,i=a+1):r=a-1}return s}_binarySearchRight(t,e){let i=0,r=t.length-1,s=t.length;for(;i<=r;){let a=Math.floor((i+r)/2);t[a]<e?i=a+1:(s=a,r=a-1)}return s}}function Wn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _3(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Di={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ga={duration:.5,overwrite:!1,delay:0},S0,je,pe,Mn=1e8,ti=1/Mn,yf=Math.PI*2,B7=yf/4,z7=0,b3=Math.sqrt,H7=Math.cos,G7=Math.sin,Ge=function(t){return typeof t=="string"},Ce=function(t){return typeof t=="function"},rr=function(t){return typeof t=="number"},T0=function(t){return typeof t>"u"},Pn=function(t){return typeof t=="object"},xi=function(t){return t!==!1},k0=function(){return typeof window<"u"},ac=function(t){return Ce(t)||Ge(t)},w3=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ii=Array.isArray,vf=/(?:-?\.?\d|\.)+/gi,C3=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xs=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,$h=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,S3=/[+-]=-?[.\d]+/,T3=/[^,'"\[\]\s]+/gi,W7=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ye,vn,xf,M0,Ii={},fu={},k3,M3=function(t){return(fu=ma(t,Ii))&&Ci},A0=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},vl=function(t,e){return!e&&console.warn(t)},A3=function(t,e){return t&&(Ii[t]=e)&&fu&&(fu[t]=e)||Ii},xl=function(){return 0},$7={suppressEvents:!0,isStart:!0,kill:!1},Ic={suppressEvents:!0,kill:!1},U7={suppressEvents:!0},E0={},_r=[],_f={},E3,Mi={},Uh={},hg=30,Nc=[],P0="",D0=function(t){var e=t[0],i,r;if(Pn(e)||Ce(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(r=Nc.length;r--&&!Nc[r].targetTest(e););i=Nc[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new J3(t[r],i)))||t.splice(r,1);return t},Qr=function(t){return t._gsap||D0($i(t))[0]._gsap},P3=function(t,e,i){return(i=t[e])&&Ce(i)?t[e]():T0(i)&&t.getAttribute&&t.getAttribute(e)||i},_i=function(t,e){return(t=t.split(",")).forEach(e)||t},ke=function(t){return Math.round(t*1e5)/1e5||0},Ie=function(t){return Math.round(t*1e7)/1e7||0},ta=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+r:i==="-"?t-r:i==="*"?t*r:t/r},Y7=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},pu=function(){var t=_r.length,e=_r.slice(0),i,r;for(_f={},_r.length=0,i=0;i<t;i++)r=e[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},D3=function(t,e,i,r){_r.length&&!je&&pu(),t.render(e,i,je&&e<0&&(t._initted||t._startAt)),_r.length&&!je&&pu()},L3=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(T3).length<2?e:Ge(t)?t.trim():t},R3=function(t){return t},Ni=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},j7=function(t){return function(e,i){for(var r in i)r in e||r==="duration"&&t||r==="ease"||(e[r]=i[r])}},ma=function(t,e){for(var i in e)t[i]=e[i];return t},dg=function n(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=Pn(e[i])?n(t[i]||(t[i]={}),e[i]):e[i]);return t},gu=function(t,e){var i={},r;for(r in t)r in e||(i[r]=t[r]);return i},Zo=function(t){var e=t.parent||ye,i=t.keyframes?j7(ii(t.keyframes)):Ni;if(xi(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},X7=function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0},I3=function(t,e,i,r,s){var a=t[r],o;if(s)for(o=e[s];a&&a[s]>o;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t,e},zu=function(t,e,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var s=e._prev,a=e._next;s?s._next=a:t[i]===e&&(t[i]=a),a?a._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Tr=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Jr=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},V7=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},bf=function(t,e,i,r){return t._startAt&&(je?t._startAt.revert(Ic):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},q7=function n(t){return!t||t._ts&&n(t.parent)},fg=function(t){return t._repeat?ya(t._tTime,t=t.duration()+t._rDelay)*t:0},ya=function(t,e){var i=Math.floor(t=Ie(t/e));return t&&i===t?i-1:i},mu=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Hu=function(t){return t._end=Ie(t._start+(t._tDur/Math.abs(t._ts||t._rts||ti)||0))},Gu=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ie(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Hu(t),i._dirty||Jr(i,t)),t},N3=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=mu(t.rawTime(),e),(!e._dur||Rl(0,e.totalDuration(),i)-e._tTime>ti)&&e.render(i,!0)),Jr(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},wn=function(t,e,i,r){return e.parent&&Tr(e),e._start=Ie((rr(i)?i:i||t!==ye?zi(t,i,e):t._time)+e._delay),e._end=Ie(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),I3(t,e,"_first","_last",t._sort?"_start":0),wf(e)||(t._recent=e),r||N3(t,e),t._ts<0&&Gu(t,t._tTime),t},F3=function(t,e){return(Ii.ScrollTrigger||A0("scrollTrigger",e))&&Ii.ScrollTrigger.create(e,t)},O3=function(t,e,i,r,s){if(R0(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!je&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&E3!==Ai.frame)return _r.push(t),t._lazy=[s,r],1},K7=function n(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||n(e))},wf=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Z7=function(t,e,i,r){var s=t.ratio,a=e<0||!e&&(!t._start&&K7(t)&&!(!t._initted&&wf(t))||(t._ts<0||t._dp._ts<0)&&!wf(t))?0:1,o=t._rDelay,c=0,l,u,h;if(o&&t._repeat&&(c=Rl(0,t._tDur,e),u=ya(c,o),t._yoyo&&u&1&&(a=1-a),u!==ya(t._tTime,o)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==s||je||r||t._zTime===ti||!e&&t._zTime){if(!t._initted&&O3(t,e,r,i,c))return;for(h=t._zTime,t._zTime=e||(i?ti:0),i||(i=e&&!h),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=c,l=t._pt;l;)l.r(a,l.d),l=l._next;e<0&&bf(t,e,i,!0),t._onUpdate&&!i&&Ei(t,"onUpdate"),c&&t._repeat&&!i&&t.parent&&Ei(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&Tr(t,1),!i&&!je&&(Ei(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Q7=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},va=function(t,e,i,r){var s=t._repeat,a=Ie(e)||0,o=t._tTime/t._tDur;return o&&!r&&(t._time*=a/t._dur),t._dur=a,t._tDur=s?s<0?1e10:Ie(a*(s+1)+t._rDelay*s):a,o>0&&!r&&Gu(t,t._tTime=t._tDur*o),t.parent&&Hu(t),i||Jr(t.parent,t),t},pg=function(t){return t instanceof si?Jr(t):va(t,t._dur)},J7={_start:0,endTime:xl,totalDuration:xl},zi=function n(t,e,i){var r=t.labels,s=t._recent||J7,a=t.duration()>=Mn?s.endTime(!1):t._dur,o,c,l;return Ge(e)&&(isNaN(e)||e in r)?(c=e.charAt(0),l=e.substr(-1)==="%",o=e.indexOf("="),c==="<"||c===">"?(o>=0&&(e=e.replace(/=/,"")),(c==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(l?(o<0?s:i).totalDuration()/100:1)):o<0?(e in r||(r[e]=a),r[e]):(c=parseFloat(e.charAt(o-1)+e.substr(o+1)),l&&i&&(c=c/100*(ii(i)?i[0]:i).totalDuration()),o>1?n(t,e.substr(0,o-1),i)+c:a+c)):e==null?a:+e},Qo=function(t,e,i){var r=rr(e[1]),s=(r?2:1)+(t<2?0:1),a=e[s],o,c;if(r&&(a.duration=e[1]),a.parent=i,t){for(o=a,c=i;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=xi(c.vars.inherit)&&c.parent;a.immediateRender=xi(o.immediateRender),t<2?a.runBackwards=1:a.startAt=e[s-1]}return new Re(e[0],a,e[s+1])},Ar=function(t,e){return t||t===0?e(t):e},Rl=function(t,e,i){return i<t?t:i>e?e:i},Qe=function(t,e){return!Ge(t)||!(e=W7.exec(t))?"":e[1]},tw=function(t,e,i){return Ar(i,function(r){return Rl(t,e,r)})},Cf=[].slice,B3=function(t,e){return t&&Pn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Pn(t[0]))&&!t.nodeType&&t!==vn},ew=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(r){var s;return Ge(r)&&!e||B3(r,1)?(s=i).push.apply(s,$i(r)):i.push(r)})||i},$i=function(t,e,i){return pe&&!e&&pe.selector?pe.selector(t):Ge(t)&&!i&&(xf||!xa())?Cf.call((e||M0).querySelectorAll(t),0):ii(t)?ew(t,i):B3(t)?Cf.call(t,0):t?[t]:[]},Sf=function(t){return t=$i(t)[0]||vl("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return $i(e,i.querySelectorAll?i:i===t?vl("Invalid scope")||M0.createElement("div"):t)}},z3=function(t){return t.sort(function(){return .5-Math.random()})},H3=function(t){if(Ce(t))return t;var e=Pn(t)?t:{each:t},i=ts(e.ease),r=e.from||0,s=parseFloat(e.base)||0,a={},o=r>0&&r<1,c=isNaN(r)||o,l=e.axis,u=r,h=r;return Ge(r)?u=h={center:.5,edges:.5,end:1}[r]||0:!o&&c&&(u=r[0],h=r[1]),function(p,f,x){var y=(x||e).length,d=a[y],_,g,m,v,S,M,w,L,P;if(!d){if(P=e.grid==="auto"?0:(e.grid||[1,Mn])[1],!P){for(w=-1e8;w<(w=x[P++].getBoundingClientRect().left)&&P<y;);P<y&&P--}for(d=a[y]=[],_=c?Math.min(P,y)*u-.5:r%P,g=P===Mn?0:c?y*h/P-.5:r/P|0,w=0,L=Mn,M=0;M<y;M++)m=M%P-_,v=g-(M/P|0),d[M]=S=l?Math.abs(l==="y"?v:m):b3(m*m+v*v),S>w&&(w=S),S<L&&(L=S);r==="random"&&z3(d),d.max=w-L,d.min=L,d.v=y=(parseFloat(e.amount)||parseFloat(e.each)*(P>y?y-1:l?l==="y"?y/P:P:Math.max(P,y/P))||0)*(r==="edges"?-1:1),d.b=y<0?s-y:s,d.u=Qe(e.amount||e.each)||0,i=i&&y<0?K3(i):i}return y=(d[p]-d.min)/d.max||0,Ie(d.b+(i?i(y):y)*d.v)+d.u}},Tf=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=Ie(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(rr(i)?0:Qe(i))}},G3=function(t,e){var i=ii(t),r,s;return!i&&Pn(t)&&(r=i=t.radius||Mn,t.values?(t=$i(t.values),(s=!rr(t[0]))&&(r*=r)):t=Tf(t.increment)),Ar(e,i?Ce(t)?function(a){return s=t(a),Math.abs(s-a)<=r?s:a}:function(a){for(var o=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),l=Mn,u=0,h=t.length,p,f;h--;)s?(p=t[h].x-o,f=t[h].y-c,p=p*p+f*f):p=Math.abs(t[h]-o),p<l&&(l=p,u=h);return u=!r||l<=r?t[u]:a,s||u===a||rr(a)?u:u+Qe(a)}:Tf(t))},W3=function(t,e,i,r){return Ar(ii(t)?!e:i===!0?!!(i=0):!r,function(){return ii(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*r)/r})},iw=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(r){return e.reduce(function(s,a){return a(s)},r)}},nw=function(t,e){return function(i){return t(parseFloat(i))+(e||Qe(i))}},rw=function(t,e,i){return U3(t,e,0,1,i)},$3=function(t,e,i){return Ar(i,function(r){return t[~~e(r)]})},sw=function n(t,e,i){var r=e-t;return ii(t)?$3(t,n(0,t.length),e):Ar(i,function(s){return(r+(s-t)%r)%r+t})},aw=function n(t,e,i){var r=e-t,s=r*2;return ii(t)?$3(t,n(0,t.length-1),e):Ar(i,function(a){return a=(s+(a-t)%s)%s||0,t+(a>r?s-a:a)})},_l=function(t){for(var e=0,i="",r,s,a,o;~(r=t.indexOf("random(",e));)a=t.indexOf(")",r),o=t.charAt(r+7)==="[",s=t.substr(r+7,a-r-7).match(o?T3:vf),i+=t.substr(e,r-e)+W3(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),e=a+1;return i+t.substr(e,t.length-e)},U3=function(t,e,i,r,s){var a=e-t,o=r-i;return Ar(s,function(c){return i+((c-t)/a*o||0)})},ow=function n(t,e,i,r){var s=isNaN(t+e)?0:function(f){return(1-f)*t+f*e};if(!s){var a=Ge(t),o={},c,l,u,h,p;if(i===!0&&(r=1)&&(i=null),a)t={p:t},e={p:e};else if(ii(t)&&!ii(e)){for(u=[],h=t.length,p=h-2,l=1;l<h;l++)u.push(n(t[l-1],t[l]));h--,s=function(x){x*=h;var y=Math.min(p,~~x);return u[y](x-y)},i=e}else r||(t=ma(ii(t)?[]:{},t));if(!u){for(c in e)L0.call(o,t,c,"get",e[c]);s=function(x){return F0(x,o)||(a?t.p:t)}}}return Ar(i,s)},gg=function(t,e,i){var r=t.labels,s=Mn,a,o,c;for(a in r)o=r[a]-e,o<0==!!i&&o&&s>(o=Math.abs(o))&&(c=a,s=o);return c},Ei=function(t,e,i){var r=t.vars,s=r[e],a=pe,o=t._ctx,c,l,u;if(s)return c=r[e+"Params"],l=r.callbackScope||t,i&&_r.length&&pu(),o&&(pe=o),u=c?s.apply(l,c):s.call(l),pe=a,u},Go=function(t){return Tr(t),t.scrollTrigger&&t.scrollTrigger.kill(!!je),t.progress()<1&&Ei(t,"onInterrupt"),t},Vs,Y3=[],j3=function(t){if(t)if(t=!t.name&&t.default||t,k0()||t.headless){var e=t.name,i=Ce(t),r=e&&!i&&t.init?function(){this._props=[]}:t,s={init:xl,render:F0,add:L0,kill:Cw,modifier:ww,rawVars:0},a={targetTest:0,get:0,getSetter:N0,aliases:{},register:0};if(xa(),t!==r){if(Mi[e])return;Ni(r,Ni(gu(t,s),a)),ma(r.prototype,ma(s,gu(t,a))),Mi[r.prop=e]=r,t.targetTest&&(Nc.push(r),E0[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}A3(e,r),t.register&&t.register(Ci,r,bi)}else Y3.push(t)},ae=255,Wo={aqua:[0,ae,ae],lime:[0,ae,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ae],navy:[0,0,128],white:[ae,ae,ae],olive:[128,128,0],yellow:[ae,ae,0],orange:[ae,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ae,0,0],pink:[ae,192,203],cyan:[0,ae,ae],transparent:[ae,ae,ae,0]},Yh=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*ae+.5|0},X3=function(t,e,i){var r=t?rr(t)?[t>>16,t>>8&ae,t&ae]:0:Wo.black,s,a,o,c,l,u,h,p,f,x;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Wo[t])r=Wo[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),a=t.charAt(2),o=t.charAt(3),t="#"+s+s+a+a+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&ae,r&ae,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&ae,t&ae]}else if(t.substr(0,3)==="hsl"){if(r=x=t.match(vf),!e)c=+r[0]%360/360,l=+r[1]/100,u=+r[2]/100,a=u<=.5?u*(l+1):u+l-u*l,s=u*2-a,r.length>3&&(r[3]*=1),r[0]=Yh(c+1/3,s,a),r[1]=Yh(c,s,a),r[2]=Yh(c-1/3,s,a);else if(~t.indexOf("="))return r=t.match(C3),i&&r.length<4&&(r[3]=1),r}else r=t.match(vf)||Wo.transparent;r=r.map(Number)}return e&&!x&&(s=r[0]/ae,a=r[1]/ae,o=r[2]/ae,h=Math.max(s,a,o),p=Math.min(s,a,o),u=(h+p)/2,h===p?c=l=0:(f=h-p,l=u>.5?f/(2-h-p):f/(h+p),c=h===s?(a-o)/f+(a<o?6:0):h===a?(o-s)/f+2:(s-a)/f+4,c*=60),r[0]=~~(c+.5),r[1]=~~(l*100+.5),r[2]=~~(u*100+.5)),i&&r.length<4&&(r[3]=1),r},V3=function(t){var e=[],i=[],r=-1;return t.split(br).forEach(function(s){var a=s.match(Xs)||[];e.push.apply(e,a),i.push(r+=a.length+1)}),e.c=i,e},mg=function(t,e,i){var r="",s=(t+r).match(br),a=e?"hsla(":"rgba(",o=0,c,l,u,h;if(!s)return t;if(s=s.map(function(p){return(p=X3(p,e,1))&&a+(e?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),i&&(u=V3(t),c=i.c,c.join(r)!==u.c.join(r)))for(l=t.replace(br,"1").split(Xs),h=l.length-1;o<h;o++)r+=l[o]+(~c.indexOf(o)?s.shift()||a+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(l=t.split(br),h=l.length-1;o<h;o++)r+=l[o]+s[o];return r+l[h]},br=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Wo)n+="|"+t+"\\b";return new RegExp(n+")","gi")}(),lw=/hsl[a]?\(/,q3=function(t){var e=t.join(" "),i;if(br.lastIndex=0,br.test(e))return i=lw.test(e),t[1]=mg(t[1],i),t[0]=mg(t[0],i,V3(t[1])),!0},bl,Ai=function(){var n=Date.now,t=500,e=33,i=n(),r=i,s=1e3/240,a=s,o=[],c,l,u,h,p,f,x=function y(d){var _=n()-r,g=d===!0,m,v,S,M;if((_>t||_<0)&&(i+=_-e),r+=_,S=r-i,m=S-a,(m>0||g)&&(M=++h.frame,p=S-h.time*1e3,h.time=S=S/1e3,a+=m+(m>=s?4:s-m),v=1),g||(c=l(y)),v)for(f=0;f<o.length;f++)o[f](S,p,M,d)};return h={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(d){return p/(1e3/(d||60))},wake:function(){k3&&(!xf&&k0()&&(vn=xf=window,M0=vn.document||{},Ii.gsap=Ci,(vn.gsapVersions||(vn.gsapVersions=[])).push(Ci.version),M3(fu||vn.GreenSockGlobals||!vn.gsap&&vn||{}),Y3.forEach(j3)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&h.sleep(),l=u||function(d){return setTimeout(d,a-h.time*1e3+1|0)},bl=1,x(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(c),bl=0,l=xl},lagSmoothing:function(d,_){t=d||1/0,e=Math.min(_||33,t)},fps:function(d){s=1e3/(d||240),a=h.time*1e3+s},add:function(d,_,g){var m=_?function(v,S,M,w){d(v,S,M,w),h.remove(m)}:d;return h.remove(d),o[g?"unshift":"push"](m),xa(),m},remove:function(d,_){~(_=o.indexOf(d))&&o.splice(_,1)&&f>=_&&f--},_listeners:o},h}(),xa=function(){return!bl&&Ai.wake()},qt={},cw=/^[\d.\-M][\d.\-,\s]/,uw=/["']/g,hw=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),r=i[0],s=1,a=i.length,o,c,l;s<a;s++)c=i[s],o=s!==a-1?c.lastIndexOf(","):c.length,l=c.substr(0,o),e[r]=isNaN(l)?l.replace(uw,"").trim():+l,r=c.substr(o+1).trim();return e},dw=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)},fw=function(t){var e=(t+"").split("("),i=qt[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[hw(e[1])]:dw(t).split(",").map(L3)):qt._CE&&cw.test(t)?qt._CE("",t):i},K3=function(t){return function(e){return 1-t(1-e)}},Z3=function n(t,e){for(var i=t._first,r;i;)i instanceof si?n(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?n(i.timeline,e):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=e)),i=i._next},ts=function(t,e){return t&&(Ce(t)?t:qt[t]||fw(t))||e},fs=function(t,e,i,r){i===void 0&&(i=function(c){return 1-e(1-c)}),r===void 0&&(r=function(c){return c<.5?e(c*2)/2:1-e((1-c)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:r},a;return _i(t,function(o){qt[o]=Ii[o]=s,qt[a=o.toLowerCase()]=i;for(var c in s)qt[a+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=qt[o+"."+c]=s[c]}),s},Q3=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},jh=function n(t,e,i){var r=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),a=s/yf*(Math.asin(1/r)||0),o=function(u){return u===1?1:r*Math.pow(2,-10*u)*G7((u-a)*s)+1},c=t==="out"?o:t==="in"?function(l){return 1-o(1-l)}:Q3(o);return s=yf/s,c.config=function(l,u){return n(t,l,u)},c},Xh=function n(t,e){e===void 0&&(e=1.70158);var i=function(a){return a?--a*a*((e+1)*a+e)+1:0},r=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:Q3(i);return r.config=function(s){return n(t,s)},r};_i("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,t){var e=t<5?t+1:t;fs(n+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});qt.Linear.easeNone=qt.none=qt.Linear.easeIn;fs("Elastic",jh("in"),jh("out"),jh());(function(n,t){var e=1/t,i=2*e,r=2.5*e,s=function(o){return o<e?n*o*o:o<i?n*Math.pow(o-1.5/t,2)+.75:o<r?n*(o-=2.25/t)*o+.9375:n*Math.pow(o-2.625/t,2)+.984375};fs("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);fs("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)});fs("Circ",function(n){return-(b3(1-n*n)-1)});fs("Sine",function(n){return n===1?1:-H7(n*B7)+1});fs("Back",Xh("in"),Xh("out"),Xh());qt.SteppedEase=qt.steps=Ii.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,r=t+(e?0:1),s=e?1:0,a=1-ti;return function(o){return((r*Rl(0,a,o)|0)+s)*i}}};ga.ease=qt["quad.out"];_i("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return P0+=n+","+n+"Params,"});var J3=function(t,e){this.id=z7++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:P3,this.set=e?e.getSetter:N0},wl=function(){function n(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,va(this,+e.duration,1,1),this.data=e.data,pe&&(this._ctx=pe,pe.data.push(this)),bl||Ai.wake()}var t=n.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,va(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,r){if(xa(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Gu(this,i),!s._dp||s.parent||N3(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&wn(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ti||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),D3(this,i,r)),this},t.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+fg(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},t.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+fg(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?ya(this._tTime,s)+1:1},t.timeScale=function(i,r){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?mu(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Rl(-Math.abs(this._delay),this._tDur,s),r!==!1),Hu(this),V7(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(xa(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ti&&(this._tTime-=ti)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&wn(r,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(xi(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?mu(r.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=U7);var r=je;return je=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),je=r,this},t.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,pg(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,pg(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,r){return this.totalTime(zi(this,i),xi(r))},t.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,xi(r)),this._dur||(this._zTime=-1e-8),this},t.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},t.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,r=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-ti)},t.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=r)):delete a[i],this):a[i]},t.then=function(i){var r=this;return new Promise(function(s){var a=Ce(i)?i:R3,o=function(){var l=r.then;r.then=null,Ce(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=l),s(a),r.then=l};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},t.kill=function(){Go(this)},n}();Ni(wl.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var si=function(n){_3(t,n);function t(i,r){var s;return i===void 0&&(i={}),s=n.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=xi(i.sortChildren),ye&&wn(i.parent||ye,Wn(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&F3(Wn(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,a){return Qo(0,arguments,this),this},e.from=function(r,s,a){return Qo(1,arguments,this),this},e.fromTo=function(r,s,a,o){return Qo(2,arguments,this),this},e.set=function(r,s,a){return s.duration=0,s.parent=this,Zo(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Re(r,s,zi(this,a),1),this},e.call=function(r,s,a){return wn(this,Re.delayedCall(0,r,s),a)},e.staggerTo=function(r,s,a,o,c,l,u){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=l,a.onCompleteParams=u,a.parent=this,new Re(r,a,zi(this,c)),this},e.staggerFrom=function(r,s,a,o,c,l,u){return a.runBackwards=1,Zo(a).immediateRender=xi(a.immediateRender),this.staggerTo(r,s,a,o,c,l,u)},e.staggerFromTo=function(r,s,a,o,c,l,u,h){return o.startAt=a,Zo(o).immediateRender=xi(o.immediateRender),this.staggerTo(r,s,o,c,l,u,h)},e.render=function(r,s,a){var o=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:Ie(r),h=this._zTime<0!=r<0&&(this._initted||!l),p,f,x,y,d,_,g,m,v,S,M,w;if(this!==ye&&u>c&&r>=0&&(u=c),u!==this._tTime||a||h){if(o!==this._time&&l&&(u+=this._time-o,r+=this._time-o),p=u,v=this._start,m=this._ts,_=!m,h&&(l||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(M=this._yoyo,d=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(d*100+r,s,a);if(p=Ie(u%d),u===c?(y=this._repeat,p=l):(S=Ie(u/d),y=~~S,y&&y===S&&(p=l,y--),p>l&&(p=l)),S=ya(this._tTime,d),!o&&this._tTime&&S!==y&&this._tTime-S*d-this._dur<=0&&(S=y),M&&y&1&&(p=l-p,w=1),y!==S&&!this._lock){var L=M&&S&1,P=L===(M&&y&1);if(y<S&&(L=!L),o=L?0:u%l?l:u,this._lock=1,this.render(o||(w?0:Ie(y*d)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&Ei(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),o&&o!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,P&&(this._lock=2,o=L?l:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;Z3(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=Q7(this,Ie(o),Ie(p)),g&&(u-=p-(p=g._start))),this._tTime=u,this._time=p,this._act=!m,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&p&&!s&&!y&&(Ei(this,"onStart"),this._tTime!==u))return this;if(p>=o&&r>=0)for(f=this._first;f;){if(x=f._next,(f._act||p>=f._start)&&f._ts&&g!==f){if(f.parent!==this)return this.render(r,s,a);if(f.render(f._ts>0?(p-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(p-f._start)*f._ts,s,a),p!==this._time||!this._ts&&!_){g=0,x&&(u+=this._zTime=-1e-8);break}}f=x}else{f=this._last;for(var N=r<0?r:p;f;){if(x=f._prev,(f._act||N<=f._end)&&f._ts&&g!==f){if(f.parent!==this)return this.render(r,s,a);if(f.render(f._ts>0?(N-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(N-f._start)*f._ts,s,a||je&&(f._initted||f._startAt)),p!==this._time||!this._ts&&!_){g=0,x&&(u+=this._zTime=N?-1e-8:ti);break}}f=x}}if(g&&!s&&(this.pause(),g.render(p>=o?0:-1e-8)._zTime=p>=o?1:-1,this._ts))return this._start=v,Hu(this),this.render(r,s,a);this._onUpdate&&!s&&Ei(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&o)&&(v===this._start||Math.abs(m)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&Tr(this,1),!s&&!(r<0&&!o)&&(u||o||!c)&&(Ei(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var a=this;if(rr(s)||(s=zi(this,s,r)),!(r instanceof wl)){if(ii(r))return r.forEach(function(o){return a.add(o,s)}),this;if(Ge(r))return this.addLabel(r,s);if(Ce(r))r=Re.delayedCall(0,r);else return this}return this!==r?wn(this,r,s):this},e.getChildren=function(r,s,a,o){r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-1e8);for(var c=[],l=this._first;l;)l._start>=o&&(l instanceof Re?s&&c.push(l):(a&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,a)))),l=l._next;return c},e.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},e.remove=function(r){return Ge(r)?this.removeLabel(r):Ce(r)?this.killTweensOf(r):(r.parent===this&&zu(this,r),r===this._recent&&(this._recent=this._last),Jr(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ie(Ai.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=zi(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,a){var o=Re.delayedCall(0,s||xl,a);return o.data="isPause",this._hasPause=1,wn(this,o,zi(this,r))},e.removePause=function(r){var s=this._first;for(r=zi(this,r);s;)s._start===r&&s.data==="isPause"&&Tr(s),s=s._next},e.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),c=o.length;c--;)gr!==o[c]&&o[c].kill(r,s);return this},e.getTweensOf=function(r,s){for(var a=[],o=$i(r),c=this._first,l=rr(s),u;c;)c instanceof Re?Y7(c._targets,o)&&(l?(!gr||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(u=c.getTweensOf(o,s)).length&&a.push.apply(a,u),c=c._next;return a},e.tweenTo=function(r,s){s=s||{};var a=this,o=zi(a,r),c=s,l=c.startAt,u=c.onStart,h=c.onStartParams,p=c.immediateRender,f,x=Re.to(a,Ni({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(l&&"time"in l?l.time:a._time))/a.timeScale())||ti,onStart:function(){if(a.pause(),!f){var d=s.duration||Math.abs((o-(l&&"time"in l?l.time:a._time))/a.timeScale());x._dur!==d&&va(x,d,0,1).render(x._time,!0,!0),f=1}u&&u.apply(x,h||[])}},s));return p?x.render(0):x},e.tweenFromTo=function(r,s,a){return this.tweenTo(s,Ni({startAt:{time:zi(this,r)}},a))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),gg(this,zi(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),gg(this,zi(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ti)},e.shiftChildren=function(r,s,a){a===void 0&&(a=0);for(var o=this._first,c=this.labels,l;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(l in c)c[l]>=a&&(c[l]+=r);return Jr(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Jr(this)},e.totalDuration=function(r){var s=0,a=this,o=a._last,c=Mn,l,u,h;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(h=a.parent;o;)l=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>c&&a._sort&&o._ts&&!a._lock?(a._lock=1,wn(a,o,u-o._delay,1)._lock=0):c=u,u<0&&o._ts&&(s-=u,(!h&&!a._dp||h&&h.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),c=0),o._end>s&&o._ts&&(s=o._end),o=l;va(a,a===ye&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(r){if(ye._ts&&(D3(ye,mu(r,ye)),E3=Ai.frame),Ai.frame>=hg){hg+=Di.autoSleep||120;var s=ye._first;if((!s||!s._ts)&&Di.autoSleep&&Ai._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ai.sleep()}}},t}(wl);Ni(si.prototype,{_lock:0,_hasPause:0,_forcing:0});var pw=function(t,e,i,r,s,a,o){var c=new bi(this._pt,t,e,0,1,s5,null,s),l=0,u=0,h,p,f,x,y,d,_,g;for(c.b=i,c.e=r,i+="",r+="",(_=~r.indexOf("random("))&&(r=_l(r)),a&&(g=[i,r],a(g,t,e),i=g[0],r=g[1]),p=i.match($h)||[];h=$h.exec(r);)x=h[0],y=r.substring(l,h.index),f?f=(f+1)%5:y.substr(-5)==="rgba("&&(f=1),x!==p[u++]&&(d=parseFloat(p[u-1])||0,c._pt={_next:c._pt,p:y||u===1?y:",",s:d,c:x.charAt(1)==="="?ta(d,x)-d:parseFloat(x)-d,m:f&&f<4?Math.round:0},l=$h.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=o,(S3.test(r)||_)&&(c.e=0),this._pt=c,c},L0=function(t,e,i,r,s,a,o,c,l,u){Ce(r)&&(r=r(s||0,t,a));var h=t[e],p=i!=="get"?i:Ce(h)?l?t[e.indexOf("set")||!Ce(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():h,f=Ce(h)?l?xw:n5:I0,x;if(Ge(r)&&(~r.indexOf("random(")&&(r=_l(r)),r.charAt(1)==="="&&(x=ta(p,r)+(Qe(p)||0),(x||x===0)&&(r=x))),!u||p!==r||kf)return!isNaN(p*r)&&r!==""?(x=new bi(this._pt,t,e,+p||0,r-(p||0),typeof h=="boolean"?bw:r5,0,f),l&&(x.fp=l),o&&x.modifier(o,this,t),this._pt=x):(!h&&!(e in t)&&A0(e,r),pw.call(this,t,e,p,r,f,c||Di.stringFilter,l))},gw=function(t,e,i,r,s){if(Ce(t)&&(t=Jo(t,s,e,i,r)),!Pn(t)||t.style&&t.nodeType||ii(t)||w3(t))return Ge(t)?Jo(t,s,e,i,r):t;var a={},o;for(o in t)a[o]=Jo(t[o],s,e,i,r);return a},t5=function(t,e,i,r,s,a){var o,c,l,u;if(Mi[t]&&(o=new Mi[t]).init(s,o.rawVars?e[t]:gw(e[t],r,s,a,i),i,r,a)!==!1&&(i._pt=c=new bi(i._pt,s,t,0,1,o.render,o,0,o.priority),i!==Vs))for(l=i._ptLookup[i._targets.indexOf(s)],u=o._props.length;u--;)l[o._props[u]]=c;return o},gr,kf,R0=function n(t,e,i){var r=t.vars,s=r.ease,a=r.startAt,o=r.immediateRender,c=r.lazy,l=r.onUpdate,u=r.runBackwards,h=r.yoyoEase,p=r.keyframes,f=r.autoRevert,x=t._dur,y=t._startAt,d=t._targets,_=t.parent,g=_&&_.data==="nested"?_.vars.targets:d,m=t._overwrite==="auto"&&!S0,v=t.timeline,S,M,w,L,P,N,k,D,C,T,A,E,I;if(v&&(!p||!s)&&(s="none"),t._ease=ts(s,ga.ease),t._yEase=h?K3(ts(h===!0?s:h,ga.ease)):0,h&&t._yoyo&&!t._repeat&&(h=t._yEase,t._yEase=t._ease,t._ease=h),t._from=!v&&!!r.runBackwards,!v||p&&!r.stagger){if(D=d[0]?Qr(d[0]).harness:0,E=D&&r[D.prop],S=gu(r,E0),y&&(y._zTime<0&&y.progress(1),e<0&&u&&o&&!f?y.render(-1,!0):y.revert(u&&x?Ic:$7),y._lazy=0),a){if(Tr(t._startAt=Re.set(d,Ni({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!y&&xi(c),startAt:null,delay:0,onUpdate:l&&function(){return Ei(t,"onUpdate")},stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(je||!o&&!f)&&t._startAt.revert(Ic),o&&x&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(u&&x&&!y){if(e&&(o=!1),w=Ni({overwrite:!1,data:"isFromStart",lazy:o&&!y&&xi(c),immediateRender:o,stagger:0,parent:_},S),E&&(w[D.prop]=E),Tr(t._startAt=Re.set(d,w)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(je?t._startAt.revert(Ic):t._startAt.render(-1,!0)),t._zTime=e,!o)n(t._startAt,ti,ti);else if(!e)return}for(t._pt=t._ptCache=0,c=x&&xi(c)||c&&!x,M=0;M<d.length;M++){if(P=d[M],k=P._gsap||D0(d)[M]._gsap,t._ptLookup[M]=T={},_f[k.id]&&_r.length&&pu(),A=g===d?M:g.indexOf(P),D&&(C=new D).init(P,E||S,t,A,g)!==!1&&(t._pt=L=new bi(t._pt,P,C.name,0,1,C.render,C,0,C.priority),C._props.forEach(function(B){T[B]=L}),C.priority&&(N=1)),!D||E)for(w in S)Mi[w]&&(C=t5(w,S,t,A,P,g))?C.priority&&(N=1):T[w]=L=L0.call(t,P,w,"get",S[w],A,g,0,r.stringFilter);t._op&&t._op[M]&&t.kill(P,t._op[M]),m&&t._pt&&(gr=t,ye.killTweensOf(P,T,t.globalTime(e)),I=!t.parent,gr=0),t._pt&&c&&(_f[k.id]=1)}N&&a5(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!I,p&&e<=0&&v.render(Mn,!0,!0)},mw=function(t,e,i,r,s,a,o,c){var l=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,h,p,f;if(!l)for(l=t._ptCache[e]=[],p=t._ptLookup,f=t._targets.length;f--;){if(u=p[f][e],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return kf=1,t.vars[e]="+=0",R0(t,o),kf=0,c?vl(e+" not eligible for reset"):1;l.push(u)}for(f=l.length;f--;)h=l[f],u=h._pt||h,u.s=(r||r===0)&&!s?r:u.s+(r||0)+a*u.c,u.c=i-u.s,h.e&&(h.e=ke(i)+Qe(h.e)),h.b&&(h.b=u.s+Qe(h.b))},yw=function(t,e){var i=t[0]?Qr(t[0]).harness:0,r=i&&i.aliases,s,a,o,c;if(!r)return e;s=ma({},e);for(a in r)if(a in s)for(c=r[a].split(","),o=c.length;o--;)s[c[o]]=s[a];return s},vw=function(t,e,i,r){var s=e.ease||r||"power1.inOut",a,o;if(ii(e))o=i[t]||(i[t]=[]),e.forEach(function(c,l){return o.push({t:l/(e.length-1)*100,v:c,e:s})});else for(a in e)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(t),v:e[a],e:s})},Jo=function(t,e,i,r,s){return Ce(t)?t.call(e,i,r,s):Ge(t)&&~t.indexOf("random(")?_l(t):t},e5=P0+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",i5={};_i(e5+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return i5[n]=1});var Re=function(n){_3(t,n);function t(i,r,s,a){var o;typeof r=="number"&&(s.duration=r,r=s,s=null),o=n.call(this,a?r:Zo(r))||this;var c=o.vars,l=c.duration,u=c.delay,h=c.immediateRender,p=c.stagger,f=c.overwrite,x=c.keyframes,y=c.defaults,d=c.scrollTrigger,_=c.yoyoEase,g=r.parent||ye,m=(ii(i)||w3(i)?rr(i[0]):"length"in r)?[i]:$i(i),v,S,M,w,L,P,N,k;if(o._targets=m.length?D0(m):vl("GSAP target "+i+" not found. https://gsap.com",!Di.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=f,x||p||ac(l)||ac(u)){if(r=o.vars,v=o.timeline=new si({data:"nested",defaults:y||{},targets:g&&g.data==="nested"?g.vars.targets:m}),v.kill(),v.parent=v._dp=Wn(o),v._start=0,p||ac(l)||ac(u)){if(w=m.length,N=p&&H3(p),Pn(p))for(L in p)~e5.indexOf(L)&&(k||(k={}),k[L]=p[L]);for(S=0;S<w;S++)M=gu(r,i5),M.stagger=0,_&&(M.yoyoEase=_),k&&ma(M,k),P=m[S],M.duration=+Jo(l,Wn(o),S,P,m),M.delay=(+Jo(u,Wn(o),S,P,m)||0)-o._delay,!p&&w===1&&M.delay&&(o._delay=u=M.delay,o._start+=u,M.delay=0),v.to(P,M,N?N(S,P,m):0),v._ease=qt.none;v.duration()?l=u=0:o.timeline=0}else if(x){Zo(Ni(v.vars.defaults,{ease:"none"})),v._ease=ts(x.ease||r.ease||"none");var D=0,C,T,A;if(ii(x))x.forEach(function(E){return v.to(m,E,">")}),v.duration();else{M={};for(L in x)L==="ease"||L==="easeEach"||vw(L,x[L],M,x.easeEach);for(L in M)for(C=M[L].sort(function(E,I){return E.t-I.t}),D=0,S=0;S<C.length;S++)T=C[S],A={ease:T.e,duration:(T.t-(S?C[S-1].t:0))/100*l},A[L]=T.v,v.to(m,A,D),D+=A.duration;v.duration()<l&&v.to({},{duration:l-v.duration()})}}l||o.duration(l=v.duration())}else o.timeline=0;return f===!0&&!S0&&(gr=Wn(o),ye.killTweensOf(m),gr=0),wn(g,Wn(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(h||!l&&!x&&o._start===Ie(g._time)&&xi(h)&&q7(Wn(o))&&g.data!=="nested")&&(o._tTime=-1e-8,o.render(Math.max(0,-u)||0)),d&&F3(Wn(o),d),o}var e=t.prototype;return e.render=function(r,s,a){var o=this._time,c=this._tDur,l=this._dur,u=r<0,h=r>c-ti&&!u?c:r<ti?0:r,p,f,x,y,d,_,g,m,v;if(!l)Z7(this,r,s,a);else if(h!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(p=h,m=this.timeline,this._repeat){if(y=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(y*100+r,s,a);if(p=Ie(h%y),h===c?(x=this._repeat,p=l):(d=Ie(h/y),x=~~d,x&&x===d?(p=l,x--):p>l&&(p=l)),_=this._yoyo&&x&1,_&&(v=this._yEase,p=l-p),d=ya(this._tTime,y),p===o&&!a&&this._initted&&x===d)return this._tTime=h,this;x!==d&&(m&&this._yEase&&Z3(m,_),this.vars.repeatRefresh&&!_&&!this._lock&&p!==y&&this._initted&&(this._lock=a=1,this.render(Ie(y*x),!0).invalidate()._lock=0))}if(!this._initted){if(O3(this,u?r:p,a,s,h))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&x!==d))return this;if(l!==this._dur)return this.render(r,s,a)}if(this._tTime=h,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(v||this._ease)(p/l),this._from&&(this.ratio=g=1-g),p&&!o&&!s&&!x&&(Ei(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(g,f.d),f=f._next;m&&m.render(r<0?r:m._dur*m._ease(p/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&bf(this,r,s,a),Ei(this,"onUpdate")),this._repeat&&x!==d&&this.vars.onRepeat&&!s&&this.parent&&Ei(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&bf(this,r,!0,!0),(r||!l)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&Tr(this,1),!s&&!(u&&!o)&&(h||o||_)&&(Ei(this,h===c?"onComplete":"onReverseComplete",!0),this._prom&&!(h<c&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,a,o,c){bl||Ai.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||R0(this,l),u=this._ease(l/this._dur),mw(this,r,s,a,o,u,l,c)?this.resetTo(r,s,a,o,1):(Gu(this,0),this.parent||I3(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Go(this):this.scrollTrigger&&this.scrollTrigger.kill(!!je),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,gr&&gr.vars.overwrite!==!0)._first||Go(this),this.parent&&a!==this.timeline.totalDuration()&&va(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,c=r?$i(r):o,l=this._ptLookup,u=this._pt,h,p,f,x,y,d,_;if((!s||s==="all")&&X7(o,c))return s==="all"&&(this._pt=0),Go(this);for(h=this._op=this._op||[],s!=="all"&&(Ge(s)&&(y={},_i(s,function(g){return y[g]=1}),s=y),s=yw(o,s)),_=o.length;_--;)if(~c.indexOf(o[_])){p=l[_],s==="all"?(h[_]=s,x=p,f={}):(f=h[_]=h[_]||{},x=s);for(y in x)d=p&&p[y],d&&((!("kill"in d.d)||d.d.kill(y)===!0)&&zu(this,d,"_pt"),delete p[y]),f!=="all"&&(f[y]=1)}return this._initted&&!this._pt&&u&&Go(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Qo(1,arguments)},t.delayedCall=function(r,s,a,o){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},t.fromTo=function(r,s,a){return Qo(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,a){return ye.killTweensOf(r,s,a)},t}(wl);Ni(Re.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_i("staggerTo,staggerFrom,staggerFromTo",function(n){Re[n]=function(){var t=new si,e=Cf.call(arguments,0);return e.splice(n==="staggerFromTo"?5:4,0,0),t[n].apply(t,e)}});var I0=function(t,e,i){return t[e]=i},n5=function(t,e,i){return t[e](i)},xw=function(t,e,i,r){return t[e](r.fp,i)},_w=function(t,e,i){return t.setAttribute(e,i)},N0=function(t,e){return Ce(t[e])?n5:T0(t[e])&&t.setAttribute?_w:I0},r5=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},bw=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},s5=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},F0=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ww=function(t,e,i,r){for(var s=this._pt,a;s;)a=s._next,s.p===r&&s.modifier(t,e,i),s=a},Cw=function(t){for(var e=this._pt,i,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?zu(this,e,"_pt"):e.dep||(i=1),e=r;return!i},Sw=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},a5=function(t){for(var e=t._pt,i,r,s,a;e;){for(i=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:a)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:a=e,e=i}t._pt=s},bi=function(){function n(e,i,r,s,a,o,c,l,u){this.t=i,this.s=s,this.c=a,this.p=r,this.r=o||r5,this.d=c||this,this.set=l||I0,this.pr=u||0,this._next=e,e&&(e._prev=this)}var t=n.prototype;return t.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Sw,this.m=i,this.mt=s,this.tween=r},n}();_i(P0+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return E0[n]=1});Ii.TweenMax=Ii.TweenLite=Re;Ii.TimelineLite=Ii.TimelineMax=si;ye=new si({sortChildren:!1,defaults:ga,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Di.stringFilter=q3;var es=[],Fc={},Tw=[],yg=0,kw=0,Vh=function(t){return(Fc[t]||Tw).map(function(e){return e()})},Mf=function(){var t=Date.now(),e=[];t-yg>2&&(Vh("matchMediaInit"),es.forEach(function(i){var r=i.queries,s=i.conditions,a,o,c,l;for(o in r)a=vn.matchMedia(r[o]).matches,a&&(c=1),a!==s[o]&&(s[o]=a,l=1);l&&(i.revert(),c&&e.push(i))}),Vh("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),yg=t,Vh("matchMedia"))},o5=function(){function n(e,i){this.selector=i&&Sf(i),this.data=[],this._r=[],this.isReverted=!1,this.id=kw++,e&&this.add(e)}var t=n.prototype;return t.add=function(i,r,s){Ce(i)&&(s=r,r=i,i=Ce);var a=this,o=function(){var l=pe,u=a.selector,h;return l&&l!==a&&l.data.push(a),s&&(a.selector=Sf(s)),pe=a,h=r.apply(a,arguments),Ce(h)&&a._r.push(h),pe=l,a.selector=u,a.isReverted=!1,h};return a.last=o,i===Ce?o(a,function(c){return a.add(null,c)}):i?a[i]=o:o},t.ignore=function(i){var r=pe;pe=null,i(this),pe=r},t.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof Re&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,r){var s=this;if(i?function(){for(var o=s.getTweens(),c=s.data.length,l;c--;)l=s.data[c],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}));for(o.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),c=s.data.length;c--;)l=s.data[c],l instanceof si?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof Re)&&l.revert&&l.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),r)for(var a=es.length;a--;)es[a].id===this.id&&es.splice(a,1)},t.revert=function(i){this.kill(i||{})},n}(),Mw=function(){function n(e){this.contexts=[],this.scope=e,pe&&pe.data.push(this)}var t=n.prototype;return t.add=function(i,r,s){Pn(i)||(i={matches:i});var a=new o5(0,s||this.scope),o=a.conditions={},c,l,u;pe&&!a.selector&&(a.selector=pe.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i;for(l in i)l==="all"?u=1:(c=vn.matchMedia(i[l]),c&&(es.indexOf(a)<0&&es.push(a),(o[l]=c.matches)&&(u=1),c.addListener?c.addListener(Mf):c.addEventListener("change",Mf)));return u&&r(a,function(h){return a.add(null,h)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),yu={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(r){return j3(r)})},timeline:function(t){return new si(t)},getTweensOf:function(t,e){return ye.getTweensOf(t,e)},getProperty:function(t,e,i,r){Ge(t)&&(t=$i(t)[0]);var s=Qr(t||{}).get,a=i?R3:L3;return i==="native"&&(i=""),t&&(e?a((Mi[e]&&Mi[e].get||s)(t,e,i,r)):function(o,c,l){return a((Mi[o]&&Mi[o].get||s)(t,o,c,l))})},quickSetter:function(t,e,i){if(t=$i(t),t.length>1){var r=t.map(function(u){return Ci.quickSetter(u,e,i)}),s=r.length;return function(u){for(var h=s;h--;)r[h](u)}}t=t[0]||{};var a=Mi[e],o=Qr(t),c=o.harness&&(o.harness.aliases||{})[e]||e,l=a?function(u){var h=new a;Vs._pt=0,h.init(t,i?u+i:u,Vs,0,[t]),h.render(1,h),Vs._pt&&F0(1,Vs)}:o.set(t,c);return a?l:function(u){return l(t,c,i?u+i:u,o,1)}},quickTo:function(t,e,i){var r,s=Ci.to(t,Ni((r={},r[e]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),a=function(c,l,u){return s.resetTo(e,c,l,u)};return a.tween=s,a},isTweening:function(t){return ye.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=ts(t.ease,ga.ease)),dg(ga,t||{})},config:function(t){return dg(Di,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,s=t.defaults,a=t.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!Mi[o]&&!Ii[o]&&vl(e+" effect requires "+o+" plugin.")}),Uh[e]=function(o,c,l){return i($i(o),Ni(c||{},s),l)},a&&(si.prototype[e]=function(o,c,l){return this.add(Uh[e](o,Pn(c)?c:(l=c)&&{},this),l)})},registerEase:function(t,e){qt[t]=ts(e)},parseEase:function(t,e){return arguments.length?ts(t,e):qt},getById:function(t){return ye.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new si(t),r,s;for(i.smoothChildTiming=xi(t.smoothChildTiming),ye.remove(i),i._dp=0,i._time=i._tTime=ye._time,r=ye._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Re&&r.vars.onComplete===r._targets[0]))&&wn(i,r,r._start-r._delay),r=s;return wn(ye,i,0),i},context:function(t,e){return t?new o5(t,e):pe},matchMedia:function(t){return new Mw(t)},matchMediaRefresh:function(){return es.forEach(function(t){var e=t.conditions,i,r;for(r in e)e[r]&&(e[r]=!1,i=1);i&&t.revert()})||Mf()},addEventListener:function(t,e){var i=Fc[t]||(Fc[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Fc[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:sw,wrapYoyo:aw,distribute:H3,random:W3,snap:G3,normalize:rw,getUnit:Qe,clamp:tw,splitColor:X3,toArray:$i,selector:Sf,mapRange:U3,pipe:iw,unitize:nw,interpolate:ow,shuffle:z3},install:M3,effects:Uh,ticker:Ai,updateRoot:si.updateRoot,plugins:Mi,globalTimeline:ye,core:{PropTween:bi,globals:A3,Tween:Re,Timeline:si,Animation:wl,getCache:Qr,_removeLinkedListItem:zu,reverting:function(){return je},context:function(t){return t&&pe&&(pe.data.push(t),t._ctx=pe),pe},suppressOverwrites:function(t){return S0=t}}};_i("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return yu[n]=Re[n]});Ai.add(si.updateRoot);Vs=yu.to({},{duration:0});var Aw=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Ew=function(t,e){var i=t._targets,r,s,a;for(r in e)for(s=i.length;s--;)a=t._ptLookup[s][r],a&&(a=a.d)&&(a._pt&&(a=Aw(a,r)),a&&a.modifier&&a.modifier(e[r],t,i[s],r))},qh=function(t,e){return{name:t,rawVars:1,init:function(r,s,a){a._onInit=function(o){var c,l;if(Ge(s)&&(c={},_i(s,function(u){return c[u]=1}),s=c),e){c={};for(l in s)c[l]=e(s[l]);s=c}Ew(o,s)}}}},Ci=yu.registerPlugin({name:"attr",init:function(t,e,i,r,s){var a,o,c;this.tween=i;for(a in e)c=t.getAttribute(a)||"",o=this.add(t,"setAttribute",(c||0)+"",e[a],r,s,0,0,a),o.op=a,o.b=c,this._props.push(a)},render:function(t,e){for(var i=e._pt;i;)je?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},qh("roundProps",Tf),qh("modifiers"),qh("snap",G3))||yu;Re.version=si.version=Ci.version="3.12.7";k3=1;k0()&&xa();qt.Power0;qt.Power1;qt.Power2;qt.Power3;qt.Power4;qt.Linear;qt.Quad;qt.Cubic;qt.Quart;qt.Quint;qt.Strong;qt.Elastic;qt.Back;qt.SteppedEase;qt.Bounce;qt.Sine;qt.Expo;qt.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var vg,mr,ea,O0,jr,xg,B0,Pw=function(){return typeof window<"u"},sr={},zr=180/Math.PI,ia=Math.PI/180,As=Math.atan2,_g=1e8,z0=/([A-Z])/g,Dw=/(left|right|width|margin|padding|x)/i,Lw=/[\s,\(]\S/,Sn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Af=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Rw=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Iw=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Nw=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},l5=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},c5=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Fw=function(t,e,i){return t.style[e]=i},Ow=function(t,e,i){return t.style.setProperty(e,i)},Bw=function(t,e,i){return t._gsap[e]=i},zw=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Hw=function(t,e,i,r,s){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},Gw=function(t,e,i,r,s){var a=t._gsap;a[e]=i,a.renderTransform(s,a)},ve="transform",wi=ve+"Origin",Ww=function n(t,e){var i=this,r=this.target,s=r.style,a=r._gsap;if(t in sr&&s){if(this.tfm=this.tfm||{},t!=="transform")t=Sn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(o){return i.tfm[o]=Un(r,o)}):this.tfm[t]=a.x?a[t]:Un(r,t),t===wi&&(this.tfm.zOrigin=a.zOrigin);else return Sn.transform.split(",").forEach(function(o){return n.call(i,o,e)});if(this.props.indexOf(ve)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(wi,e,"")),t=ve}(s||e)&&this.props.push(t,e,s[t])},u5=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},$w=function(){var t=this.props,e=this.target,i=e.style,r=e._gsap,s,a;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(z0,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=B0(),(!s||!s.isStart)&&!i[ve]&&(u5(i),r.zOrigin&&i[wi]&&(i[wi]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},h5=function(t,e){var i={target:t,props:[],revert:$w,save:Ww};return t._gsap||Ci.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(r){return i.save(r)}),i},d5,Ef=function(t,e){var i=mr.createElementNS?mr.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):mr.createElement(t);return i&&i.style?i:mr.createElement(t)},An=function n(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(z0,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&n(t,_a(e)||e,1)||""},bg="O,Moz,ms,Ms,Webkit".split(","),_a=function(t,e,i){var r=e||jr,s=r.style,a=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(bg[a]+t in s););return a<0?null:(a===3?"ms":a>=0?bg[a]:"")+t},Pf=function(){Pw()&&window.document&&(vg=window,mr=vg.document,ea=mr.documentElement,jr=Ef("div")||{style:{}},Ef("div"),ve=_a(ve),wi=ve+"Origin",jr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",d5=!!_a("perspective"),B0=Ci.core.reverting,O0=1)},wg=function(t){var e=t.ownerSVGElement,i=Ef("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0),s;r.style.display="block",i.appendChild(r),ea.appendChild(i);try{s=r.getBBox()}catch{}return i.removeChild(r),ea.removeChild(i),s},Cg=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},f5=function(t){var e,i;try{e=t.getBBox()}catch{e=wg(t),i=1}return e&&(e.width||e.height)||i||(e=wg(t)),e&&!e.width&&!e.x&&!e.y?{x:+Cg(t,["x","cx","x1"])||0,y:+Cg(t,["y","cy","y1"])||0,width:0,height:0}:e},p5=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&f5(t))},os=function(t,e){if(e){var i=t.style,r;e in sr&&e!==wi&&(e=ve),i.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(r==="--"?e:e.replace(z0,"-$1").toLowerCase())):i.removeAttribute(e)}},yr=function(t,e,i,r,s,a){var o=new bi(t._pt,e,i,0,1,a?c5:l5);return t._pt=o,o.b=r,o.e=s,t._props.push(i),o},Sg={deg:1,rad:1,turn:1},Uw={grid:1,flex:1},kr=function n(t,e,i,r){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=jr.style,c=Dw.test(e),l=t.tagName.toLowerCase()==="svg",u=(l?"client":"offset")+(c?"Width":"Height"),h=100,p=r==="px",f=r==="%",x,y,d,_;if(r===a||!s||Sg[r]||Sg[a])return s;if(a!=="px"&&!p&&(s=n(t,e,i,"px")),_=t.getCTM&&p5(t),(f||a==="%")&&(sr[e]||~e.indexOf("adius")))return x=_?t.getBBox()[c?"width":"height"]:t[u],ke(f?s/x*h:s/100*x);if(o[c?"width":"height"]=h+(p?a:r),y=r!=="rem"&&~e.indexOf("adius")||r==="em"&&t.appendChild&&!l?t:t.parentNode,_&&(y=(t.ownerSVGElement||{}).parentNode),(!y||y===mr||!y.appendChild)&&(y=mr.body),d=y._gsap,d&&f&&d.width&&c&&d.time===Ai.time&&!d.uncache)return ke(s/d.width*h);if(f&&(e==="height"||e==="width")){var g=t.style[e];t.style[e]=h+r,x=t[u],g?t.style[e]=g:os(t,e)}else(f||a==="%")&&!Uw[An(y,"display")]&&(o.position=An(t,"position")),y===t&&(o.position="static"),y.appendChild(jr),x=jr[u],y.removeChild(jr),o.position="absolute";return c&&f&&(d=Qr(y),d.time=Ai.time,d.width=y[u]),ke(p?x*s/h:x&&s?h/x*s:0)},Un=function(t,e,i,r){var s;return O0||Pf(),e in Sn&&e!=="transform"&&(e=Sn[e],~e.indexOf(",")&&(e=e.split(",")[0])),sr[e]&&e!=="transform"?(s=Sl(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:xu(An(t,wi))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=vu[e]&&vu[e](t,e,i)||An(t,e)||P3(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?kr(t,e,s,i)+i:s},Yw=function(t,e,i,r){if(!i||i==="none"){var s=_a(e,t,1),a=s&&An(t,s,1);a&&a!==i?(e=s,i=a):e==="borderColor"&&(i=An(t,"borderTopColor"))}var o=new bi(this._pt,t.style,e,0,1,s5),c=0,l=0,u,h,p,f,x,y,d,_,g,m,v,S;if(o.b=i,o.e=r,i+="",r+="",r==="auto"&&(y=t.style[e],t.style[e]=r,r=An(t,e)||r,y?t.style[e]=y:os(t,e)),u=[i,r],q3(u),i=u[0],r=u[1],p=i.match(Xs)||[],S=r.match(Xs)||[],S.length){for(;h=Xs.exec(r);)d=h[0],g=r.substring(c,h.index),x?x=(x+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(x=1),d!==(y=p[l++]||"")&&(f=parseFloat(y)||0,v=y.substr((f+"").length),d.charAt(1)==="="&&(d=ta(f,d)+v),_=parseFloat(d),m=d.substr((_+"").length),c=Xs.lastIndex-m.length,m||(m=m||Di.units[e]||v,c===r.length&&(r+=m,o.e+=m)),v!==m&&(f=kr(t,e,y,m)||0),o._pt={_next:o._pt,p:g||l===1?g:",",s:f,c:_-f,m:x&&x<4||e==="zIndex"?Math.round:0});o.c=c<r.length?r.substring(c,r.length):""}else o.r=e==="display"&&r==="none"?c5:l5;return S3.test(r)&&(o.e=0),this._pt=o,o},Tg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},jw=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(t=i,i=r,r=t),e[0]=Tg[i]||i,e[1]=Tg[r]||r,e.join(" ")},Xw=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,r=i.style,s=e.u,a=i._gsap,o,c,l;if(s==="all"||s===!0)r.cssText="",c=1;else for(s=s.split(","),l=s.length;--l>-1;)o=s[l],sr[o]&&(c=1,o=o==="transformOrigin"?wi:ve),os(i,o);c&&(os(i,ve),a&&(a.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Sl(i,1),a.uncache=1,u5(r)))}},vu={clearProps:function(t,e,i,r,s){if(s.data!=="isFromStart"){var a=t._pt=new bi(t._pt,e,i,0,0,Xw);return a.u=r,a.pr=-10,a.tween=s,t._props.push(i),1}}},Cl=[1,0,0,1,0,0],g5={},m5=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},kg=function(t){var e=An(t,ve);return m5(e)?Cl:e.substr(7).match(C3).map(ke)},H0=function(t,e){var i=t._gsap||Qr(t),r=t.style,s=kg(t),a,o,c,l;return i.svg&&t.getAttribute("transform")?(c=t.transform.baseVal.consolidate().matrix,s=[c.a,c.b,c.c,c.d,c.e,c.f],s.join(",")==="1,0,0,1,0,0"?Cl:s):(s===Cl&&!t.offsetParent&&t!==ea&&!i.svg&&(c=r.display,r.display="block",a=t.parentNode,(!a||!t.offsetParent&&!t.getBoundingClientRect().width)&&(l=1,o=t.nextElementSibling,ea.appendChild(t)),s=kg(t),c?r.display=c:os(t,"display"),l&&(o?a.insertBefore(t,o):a?a.appendChild(t):ea.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Df=function(t,e,i,r,s,a){var o=t._gsap,c=s||H0(t,!0),l=o.xOrigin||0,u=o.yOrigin||0,h=o.xOffset||0,p=o.yOffset||0,f=c[0],x=c[1],y=c[2],d=c[3],_=c[4],g=c[5],m=e.split(" "),v=parseFloat(m[0])||0,S=parseFloat(m[1])||0,M,w,L,P;i?c!==Cl&&(w=f*d-x*y)&&(L=v*(d/w)+S*(-y/w)+(y*g-d*_)/w,P=v*(-x/w)+S*(f/w)-(f*g-x*_)/w,v=L,S=P):(M=f5(t),v=M.x+(~m[0].indexOf("%")?v/100*M.width:v),S=M.y+(~(m[1]||m[0]).indexOf("%")?S/100*M.height:S)),r||r!==!1&&o.smooth?(_=v-l,g=S-u,o.xOffset=h+(_*f+g*y)-_,o.yOffset=p+(_*x+g*d)-g):o.xOffset=o.yOffset=0,o.xOrigin=v,o.yOrigin=S,o.smooth=!!r,o.origin=e,o.originIsAbsolute=!!i,t.style[wi]="0px 0px",a&&(yr(a,o,"xOrigin",l,v),yr(a,o,"yOrigin",u,S),yr(a,o,"xOffset",h,o.xOffset),yr(a,o,"yOffset",p,o.yOffset)),t.setAttribute("data-svg-origin",v+" "+S)},Sl=function(t,e){var i=t._gsap||new J3(t);if("x"in i&&!e&&!i.uncache)return i;var r=t.style,s=i.scaleX<0,a="px",o="deg",c=getComputedStyle(t),l=An(t,wi)||"0",u,h,p,f,x,y,d,_,g,m,v,S,M,w,L,P,N,k,D,C,T,A,E,I,B,$,Y,q,G,F,U,j;return u=h=p=y=d=_=g=m=v=0,f=x=1,i.svg=!!(t.getCTM&&p5(t)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[ve]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[ve]!=="none"?c[ve]:"")),r.scale=r.rotate=r.translate="none"),w=H0(t,i.svg),i.svg&&(i.uncache?(B=t.getBBox(),l=i.xOrigin-B.x+"px "+(i.yOrigin-B.y)+"px",I=""):I=!e&&t.getAttribute("data-svg-origin"),Df(t,I||l,!!I||i.originIsAbsolute,i.smooth!==!1,w)),S=i.xOrigin||0,M=i.yOrigin||0,w!==Cl&&(k=w[0],D=w[1],C=w[2],T=w[3],u=A=w[4],h=E=w[5],w.length===6?(f=Math.sqrt(k*k+D*D),x=Math.sqrt(T*T+C*C),y=k||D?As(D,k)*zr:0,g=C||T?As(C,T)*zr+y:0,g&&(x*=Math.abs(Math.cos(g*ia))),i.svg&&(u-=S-(S*k+M*C),h-=M-(S*D+M*T))):(j=w[6],F=w[7],Y=w[8],q=w[9],G=w[10],U=w[11],u=w[12],h=w[13],p=w[14],L=As(j,G),d=L*zr,L&&(P=Math.cos(-L),N=Math.sin(-L),I=A*P+Y*N,B=E*P+q*N,$=j*P+G*N,Y=A*-N+Y*P,q=E*-N+q*P,G=j*-N+G*P,U=F*-N+U*P,A=I,E=B,j=$),L=As(-C,G),_=L*zr,L&&(P=Math.cos(-L),N=Math.sin(-L),I=k*P-Y*N,B=D*P-q*N,$=C*P-G*N,U=T*N+U*P,k=I,D=B,C=$),L=As(D,k),y=L*zr,L&&(P=Math.cos(L),N=Math.sin(L),I=k*P+D*N,B=A*P+E*N,D=D*P-k*N,E=E*P-A*N,k=I,A=B),d&&Math.abs(d)+Math.abs(y)>359.9&&(d=y=0,_=180-_),f=ke(Math.sqrt(k*k+D*D+C*C)),x=ke(Math.sqrt(E*E+j*j)),L=As(A,E),g=Math.abs(L)>2e-4?L*zr:0,v=U?1/(U<0?-U:U):0),i.svg&&(I=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!m5(An(t,ve)),I&&t.setAttribute("transform",I))),Math.abs(g)>90&&Math.abs(g)<270&&(s?(f*=-1,g+=y<=0?180:-180,y+=y<=0?180:-180):(x*=-1,g+=g<=0?180:-180)),e=e||i.uncache,i.x=u-((i.xPercent=u&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+a,i.y=h-((i.yPercent=h&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-h)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+a,i.z=p+a,i.scaleX=ke(f),i.scaleY=ke(x),i.rotation=ke(y)+o,i.rotationX=ke(d)+o,i.rotationY=ke(_)+o,i.skewX=g+o,i.skewY=m+o,i.transformPerspective=v+a,(i.zOrigin=parseFloat(l.split(" ")[2])||!e&&i.zOrigin||0)&&(r[wi]=xu(l)),i.xOffset=i.yOffset=0,i.force3D=Di.force3D,i.renderTransform=i.svg?qw:d5?y5:Vw,i.uncache=0,i},xu=function(t){return(t=t.split(" "))[0]+" "+t[1]},Kh=function(t,e,i){var r=Qe(e);return ke(parseFloat(e)+parseFloat(kr(t,"x",i+"px",r)))+r},Vw=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,y5(t,e)},Ir="0deg",Wa="0px",Nr=") ",y5=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.z,l=i.rotation,u=i.rotationY,h=i.rotationX,p=i.skewX,f=i.skewY,x=i.scaleX,y=i.scaleY,d=i.transformPerspective,_=i.force3D,g=i.target,m=i.zOrigin,v="",S=_==="auto"&&t&&t!==1||_===!0;if(m&&(h!==Ir||u!==Ir)){var M=parseFloat(u)*ia,w=Math.sin(M),L=Math.cos(M),P;M=parseFloat(h)*ia,P=Math.cos(M),a=Kh(g,a,w*P*-m),o=Kh(g,o,-Math.sin(M)*-m),c=Kh(g,c,L*P*-m+m)}d!==Wa&&(v+="perspective("+d+Nr),(r||s)&&(v+="translate("+r+"%, "+s+"%) "),(S||a!==Wa||o!==Wa||c!==Wa)&&(v+=c!==Wa||S?"translate3d("+a+", "+o+", "+c+") ":"translate("+a+", "+o+Nr),l!==Ir&&(v+="rotate("+l+Nr),u!==Ir&&(v+="rotateY("+u+Nr),h!==Ir&&(v+="rotateX("+h+Nr),(p!==Ir||f!==Ir)&&(v+="skew("+p+", "+f+Nr),(x!==1||y!==1)&&(v+="scale("+x+", "+y+Nr),g.style[ve]=v||"translate(0, 0)"},qw=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.rotation,l=i.skewX,u=i.skewY,h=i.scaleX,p=i.scaleY,f=i.target,x=i.xOrigin,y=i.yOrigin,d=i.xOffset,_=i.yOffset,g=i.forceCSS,m=parseFloat(a),v=parseFloat(o),S,M,w,L,P;c=parseFloat(c),l=parseFloat(l),u=parseFloat(u),u&&(u=parseFloat(u),l+=u,c+=u),c||l?(c*=ia,l*=ia,S=Math.cos(c)*h,M=Math.sin(c)*h,w=Math.sin(c-l)*-p,L=Math.cos(c-l)*p,l&&(u*=ia,P=Math.tan(l-u),P=Math.sqrt(1+P*P),w*=P,L*=P,u&&(P=Math.tan(u),P=Math.sqrt(1+P*P),S*=P,M*=P)),S=ke(S),M=ke(M),w=ke(w),L=ke(L)):(S=h,L=p,M=w=0),(m&&!~(a+"").indexOf("px")||v&&!~(o+"").indexOf("px"))&&(m=kr(f,"x",a,"px"),v=kr(f,"y",o,"px")),(x||y||d||_)&&(m=ke(m+x-(x*S+y*w)+d),v=ke(v+y-(x*M+y*L)+_)),(r||s)&&(P=f.getBBox(),m=ke(m+r/100*P.width),v=ke(v+s/100*P.height)),P="matrix("+S+","+M+","+w+","+L+","+m+","+v+")",f.setAttribute("transform",P),g&&(f.style[ve]=P)},Kw=function(t,e,i,r,s){var a=360,o=Ge(s),c=parseFloat(s)*(o&&~s.indexOf("rad")?zr:1),l=c-r,u=r+l+"deg",h,p;return o&&(h=s.split("_")[1],h==="short"&&(l%=a,l!==l%(a/2)&&(l+=l<0?a:-360)),h==="cw"&&l<0?l=(l+a*_g)%a-~~(l/a)*a:h==="ccw"&&l>0&&(l=(l-a*_g)%a-~~(l/a)*a)),t._pt=p=new bi(t._pt,e,i,r,l,Rw),p.e=u,p.u="deg",t._props.push(i),p},Mg=function(t,e){for(var i in e)t[i]=e[i];return t},Zw=function(t,e,i){var r=Mg({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,c,l,u,h,p,f,x;r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),a[ve]=e,o=Sl(i,1),os(i,ve),i.setAttribute("transform",l)):(l=getComputedStyle(i)[ve],a[ve]=e,o=Sl(i,1),a[ve]=l);for(c in sr)l=r[c],u=o[c],l!==u&&s.indexOf(c)<0&&(f=Qe(l),x=Qe(u),h=f!==x?kr(i,c,l,x):parseFloat(l),p=parseFloat(u),t._pt=new bi(t._pt,o,c,h,p-h,Af),t._pt.u=x||0,t._props.push(c));Mg(o,r)};_i("padding,margin,Width,Radius",function(n,t){var e="Top",i="Right",r="Bottom",s="Left",a=(t<3?[e,i,r,s]:[e+s,e+i,r+i,r+s]).map(function(o){return t<2?n+o:"border"+o+n});vu[t>1?"border"+n:n]=function(o,c,l,u,h){var p,f;if(arguments.length<4)return p=a.map(function(x){return Un(o,x,l)}),f=p.join(" "),f.split(p[0]).length===5?p[0]:f;p=(u+"").split(" "),f={},a.forEach(function(x,y){return f[x]=p[y]=p[y]||p[(y-1)/2|0]}),o.init(c,f,h)}});var v5={name:"css",register:Pf,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,s){var a=this._props,o=t.style,c=i.vars.startAt,l,u,h,p,f,x,y,d,_,g,m,v,S,M,w,L;O0||Pf(),this.styles=this.styles||h5(t),L=this.styles.props,this.tween=i;for(y in e)if(y!=="autoRound"&&(u=e[y],!(Mi[y]&&t5(y,e,i,r,t,s)))){if(f=typeof u,x=vu[y],f==="function"&&(u=u.call(i,r,t,s),f=typeof u),f==="string"&&~u.indexOf("random(")&&(u=_l(u)),x)x(this,t,y,u,i)&&(w=1);else if(y.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(y)+"").trim(),u+="",br.lastIndex=0,br.test(l)||(d=Qe(l),_=Qe(u)),_?d!==_&&(l=kr(t,y,l,_)+_):d&&(u+=d),this.add(o,"setProperty",l,u,r,s,0,0,y),a.push(y),L.push(y,0,o[y]);else if(f!=="undefined"){if(c&&y in c?(l=typeof c[y]=="function"?c[y].call(i,r,t,s):c[y],Ge(l)&&~l.indexOf("random(")&&(l=_l(l)),Qe(l+"")||l==="auto"||(l+=Di.units[y]||Qe(Un(t,y))||""),(l+"").charAt(1)==="="&&(l=Un(t,y))):l=Un(t,y),p=parseFloat(l),g=f==="string"&&u.charAt(1)==="="&&u.substr(0,2),g&&(u=u.substr(2)),h=parseFloat(u),y in Sn&&(y==="autoAlpha"&&(p===1&&Un(t,"visibility")==="hidden"&&h&&(p=0),L.push("visibility",0,o.visibility),yr(this,o,"visibility",p?"inherit":"hidden",h?"inherit":"hidden",!h)),y!=="scale"&&y!=="transform"&&(y=Sn[y],~y.indexOf(",")&&(y=y.split(",")[0]))),m=y in sr,m){if(this.styles.save(y),v||(S=t._gsap,S.renderTransform&&!e.parseTransform||Sl(t,e.parseTransform),M=e.smoothOrigin!==!1&&S.smooth,v=this._pt=new bi(this._pt,o,ve,0,1,S.renderTransform,S,0,-1),v.dep=1),y==="scale")this._pt=new bi(this._pt,S,"scaleY",S.scaleY,(g?ta(S.scaleY,g+h):h)-S.scaleY||0,Af),this._pt.u=0,a.push("scaleY",y),y+="X";else if(y==="transformOrigin"){L.push(wi,0,o[wi]),u=jw(u),S.svg?Df(t,u,0,M,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==S.zOrigin&&yr(this,S,"zOrigin",S.zOrigin,_),yr(this,o,y,xu(l),xu(u)));continue}else if(y==="svgOrigin"){Df(t,u,1,M,0,this);continue}else if(y in g5){Kw(this,S,y,p,g?ta(p,g+u):u);continue}else if(y==="smoothOrigin"){yr(this,S,"smooth",S.smooth,u);continue}else if(y==="force3D"){S[y]=u;continue}else if(y==="transform"){Zw(this,u,t);continue}}else y in o||(y=_a(y)||y);if(m||(h||h===0)&&(p||p===0)&&!Lw.test(u)&&y in o)d=(l+"").substr((p+"").length),h||(h=0),_=Qe(u)||(y in Di.units?Di.units[y]:d),d!==_&&(p=kr(t,y,l,_)),this._pt=new bi(this._pt,m?S:o,y,p,(g?ta(p,g+h):h)-p,!m&&(_==="px"||y==="zIndex")&&e.autoRound!==!1?Nw:Af),this._pt.u=_||0,d!==_&&_!=="%"&&(this._pt.b=l,this._pt.r=Iw);else if(y in o)Yw.call(this,t,y,l,g?g+u:u);else if(y in t)this.add(t,y,l||t[y],g?g+u:u,r,s);else if(y!=="parseTransform"){A0(y,u);continue}m||(y in o?L.push(y,0,o[y]):typeof t[y]=="function"?L.push(y,2,t[y]()):L.push(y,1,l||t[y])),a.push(y)}}w&&a5(this)},render:function(t,e){if(e.tween._time||!B0())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Un,aliases:Sn,getSetter:function(t,e,i){var r=Sn[e];return r&&r.indexOf(",")<0&&(e=r),e in sr&&e!==wi&&(t._gsap.x||Un(t,"x"))?i&&xg===i?e==="scale"?zw:Bw:(xg=i||{})&&(e==="scale"?Hw:Gw):t.style&&!T0(t.style[e])?Fw:~e.indexOf("-")?Ow:N0(t,e)},core:{_removeProperty:os,_getMatrix:H0}};Ci.utils.checkPrefix=_a;Ci.core.getStyleSaver=h5;(function(n,t,e,i){var r=_i(n+","+t+","+e,function(s){sr[s]=1});_i(t,function(s){Di.units[s]="deg",g5[s]=1}),Sn[r[13]]=n+","+t,_i(i,function(s){var a=s.split(":");Sn[a[1]]=r[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_i("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Di.units[n]="px"});Ci.registerPlugin(v5);var tl=Ci.registerPlugin(v5)||Ci;tl.core.Tween;const di=class di{constructor(t,e){ot(this,"longitude");ot(this,"latitude");this.longitude=t,this.latitude=e}distanceTo(t){const e=this.latitude*di.DEGREE_TO_RADIAN,i=t.latitude*di.DEGREE_TO_RADIAN,r=e-i,s=(this.longitude-t.longitude)*di.DEGREE_TO_RADIAN;return 2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(e)*Math.cos(i)*Math.pow(Math.sin(s/2),2)))*di.EARTH_RADIUS}bearingTo(t){const e=this.latitude*di.DEGREE_TO_RADIAN,i=t.latitude*di.DEGREE_TO_RADIAN,r=this.longitude*di.DEGREE_TO_RADIAN,s=t.longitude*di.DEGREE_TO_RADIAN,a=Math.sin(s-r)*Math.cos(i),o=Math.cos(e)*Math.sin(i)-Math.sin(e)*Math.cos(i)*Math.cos(s-r);return(Math.atan2(a,o)*di.RADIAN_TO_DEGREE+360)%360*Math.PI/180}static distanceBetween(t,e){return t.distanceTo(e)}static bearingBetween(t,e){return t.bearingTo(e)}};ot(di,"EARTH_RADIUS",6371.004),ot(di,"DEGREE_TO_RADIAN",Math.PI/180),ot(di,"RADIAN_TO_DEGREE",180/Math.PI);let Pi=di;const Qw="./font/unicode_width.bin",oc="UnicodeWidth";function Jw(){return{__dict:null,get dict(){if(this.__dict===null)throw new Error("dict not loaded");return this.__dict},async load(){if(this.__dict!==null)return;const t=await(await fetch(Qw)).arrayBuffer();this.__dict=new Float32Array(t),console.log("dict loaded",this.__dict)},charWidth(n,t){if(this.__dict===null)throw new Error("dict not loaded");const e=n.codePointAt(0);return(this.__dict[e]??0)*t/10},stringWidth(n,t){if(this.__dict===null)throw new Error("dict not loaded");let e=0;for(let i=0;i<n.length;i++){const r=n.codePointAt(i);e+=(this.__dict[r]??0)*t/10}return e}}}const tC=(globalThis[oc]===void 0&&(globalThis[oc]=Jw(),globalThis[oc].load()),globalThis[oc]),Zh={svg:null};class ba{constructor(t=12,e="sans-serif"){ot(this,"fontSize");ot(this,"fontFamily");ot(this,"ruler");this.fontSize=t,this.fontFamily=e,this.ruler=this.getRuler()}visualWidth(t,e,i){return tC.stringWidth(t,e||this.fontSize)}visualHeight(t,e,i){return this.fontSize}truncate(t,e,i,r,s){if(this.visualWidth(t,r,s)<=e)return t;i=i||"...";const o=this.visualWidth(i,r,s),c=this.truncate_index(t,e-o,r,s);return c===0?o<=e?i:"":t.slice(0,c)+i}wrap(t,e,i,r,s,a){if(i===0)return[];r=r||"...";const o=this.visualWidth(r,s,a);let c=0;const l=[];for(;c<t.length;){const u=t.slice(c);if(l.length===i-1){const h=this.truncate(u,e,r,s,a);l.push(h);break}else{let h=this.truncate_index(u,e,s,a);if(h===0){o<=e&&l.push(r);break}l.push(u.slice(0,h)),c+=h}}return l}lines2svg(t,e){let i=e||this.fontSize*1.2;return t.map((r,s)=>"<tspan x='0' dy='"+i*Math.min(s,1)+"'>"+r+"</tspan>").join("")}getRuler(){const t=Zh.svg||document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width","0"),t.setAttribute("height","0"),t.style.position="absolute";const e=document.createElementNS("http://www.w3.org/2000/svg","text");return t.appendChild(e),Zh.svg===null&&(document.body.insertBefore(t,document.body.firstChild),Zh.svg=t),e}setRuler(t,e,i){e=e||this.fontSize,i=i||this.fontFamily,this.ruler.style.fontSize=e.toString(),this.ruler.style.fontFamily=i,this.ruler.innerHTML=t}truncate_index(t,e,i,r){if(e<=0)return 0;if(this.setRuler(t,i,r),this.ruler.getBoundingClientRect().width<=e)return t.length;if(this.ruler.getEndPositionOfChar(0).x>e)return 0;let a=0,o=t.length-1;for(;a<o;){const c=Math.ceil((a+o)/2);this.ruler.getEndPositionOfChar(c).x<=e?a=c:o=c-1}return a+1}}const gn="GROUP_LABEL",Lt="#6f4922",fi="#ab8c70",En="#e6dcd4",Yi=[new Date("0900-01-01"),new Date("1290-01-01")],x5=[0,1];new ba;const eC=1.2,Lf=Object.assign([{id:11027,name:"開封府",en:"Kaifeng Prefecture",time:null,start:new Date("1053"),end:new Date("1119"),coordinate:new Pi(114.34333,34.785477),parents:[{id:11026,name:"京畿路"},{id:10989,name:"宋朝"}]},{id:100658,name:"開封",en:"Kaifeng",time:null,start:new Date("960"),end:new Date("1119"),coordinate:new Pi(114.34333,34.785477),parents:[{id:11027,name:"開封府"},{id:11026,name:"京畿路"},{id:10989,name:"宋朝"}]},{id:12671,name:"臨安府",en:"Lin'an Prefecture",time:null,start:new Date("1129"),end:new Date("1279"),coordinate:new Pi(120.168625,30.294125),parents:[{id:12669,name:"兩浙西路"},{id:10989,name:"宋朝"}]},{id:100512,name:"臨安",en:"Lin'an",time:null,start:new Date("980"),end:new Date("1279"),coordinate:new Pi(119.71658,30.318827),parents:[{id:101088,name:"杭州"},{id:12669,name:"兩浙西路"},{id:10989,name:"宋朝"}]}],{maxDate:new Date("1279"),minDate:new Date("960"),getCurrent:function(n,t){return t||(t=n),n=new Date(Math.min(this.maxDate.getTime(),Math.max(this.minDate.getTime(),n.getTime()))),t=new Date(Math.min(this.maxDate.getTime(),Math.max(this.minDate.getTime(),t.getTime()))),this.find(i=>i.start<=t&&i.end>=n)}}),rn={defaultAddress:{id:-1,name:"[Capital]",en:"[Capital]",time:null,coordinate:new Pi(0,0),parents:[]},maxDistance:2e3,range:["#f15447","#606060"]},iC=()=>({id:-2,name:"",en:"",time:null,coordinate:null,parents:[]}),Os=k7,_5=new Map([[2,"#AF1F28"],[1,"#E97A66"],[0,"#a1a1a1"],[-1,"#A3C0E0"],[-2,"#083F75"]]),nC={time:"Time",locations:"Location",posts:"Post",relations:"Relation",weight:"Weight",TimeScape:"TimeScape","enter figure name":"Enter figure name",unknown:"Unknown",birth:"Birth",been:"Been","[Capital]":"[Capital]",皇帝:"Emperor",文官:"Official",武將:"General",宗室:"Royalty",后妃:"Consort",學者:"Scholar",宦官:"Eunuch",僧道:"Monk",布衣:"Commoner",其他:"Other",请输入关键词:"Enter keywords",default:"Default",byLocation:"Location",byTime:"Time",layout:"Layout",bookmarks:"Bookmarks","data filters":"Data Filters","context info":"Context Info","selected figure info":"Selected Figure Info"},rC={time:"时间",locations:"地点",posts:"官职",relations:"关系",weight:"权重",TimeScape:"宋代人物时间线","enter figure name":"请输入人名",unknown:"未知",birth:"籍贯",been:"驻所","[Capital]":"[都城]",皇帝:"皇帝",文官:"文官",武將:"武將",宗室:"宗室",后妃:"后妃",學者:"學者",宦官:"宦官",僧道:"僧道",布衣:"布衣",其他:"其他",请输入关键词:"请输入关键词",default:"默认",byLocation:"按地点",byTime:"按时间",layout:"布局",bookmarks:"书签","data filters":"数据筛选","context info":"上下文信息","selected figure info":"选中人物信息"};let Ki=[],ur=0;const lc=4;let Oc=0,ne=n=>{let t=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(i){return e.lc=t.push(i),()=>{for(let s=ur+lc;s<Ki.length;)Ki[s]===i?Ki.splice(s,lc):s+=lc;let r=t.indexOf(i);~r&&(t.splice(r,1),--e.lc||e.off())}},notify(i,r){Oc++;let s=!Ki.length;for(let a of t)Ki.push(a,e.value,i,r);if(s){for(ur=0;ur<Ki.length;ur+=lc)Ki[ur](Ki[ur+1],Ki[ur+2],Ki[ur+3]);Ki.length=0}},off(){},set(i){let r=e.value;r!==i&&(e.value=i,e.notify(r))},subscribe(i){let r=e.listen(i);return i(e.value),r},value:n};return e};const sC=5,cc=6,uc=10;let aC=(n,t,e,i)=>(n.events=n.events||{},n.events[e+uc]||(n.events[e+uc]=i(r=>{n.events[e].reduceRight((s,a)=>(a(s),s),{shared:{},...r})})),n.events[e]=n.events[e]||[],n.events[e].push(t),()=>{let r=n.events[e],s=r.indexOf(t);r.splice(s,1),r.length||(delete n.events[e],n.events[e+uc](),delete n.events[e+uc])}),oC=1e3,lC=(n,t)=>aC(n,i=>{let r=t(i);r&&n.events[cc].push(r)},sC,i=>{let r=n.listen;n.listen=(...a)=>(!n.lc&&!n.active&&(n.active=!0,i()),r(...a));let s=n.off;return n.events[cc]=[],n.off=()=>{s(),setTimeout(()=>{if(n.active&&!n.lc){n.active=!1;for(let a of n.events[cc])a();n.events[cc]=[]}},oC)},()=>{n.listen=r,n.off=s}}),cC=(n,t,e)=>{Array.isArray(n)||(n=[n]);let i,r,s=()=>{if(r===Oc)return;r=Oc;let l=n.map(u=>u.get());if(!i||l.some((u,h)=>u!==i[h])){i=l;let u=t(...l);u&&u.then&&u.t?u.then(h=>{i===l&&a.set(h)}):(a.set(u),r=Oc)}},a=ne(void 0),o=a.get;a.get=()=>(s(),o());let c=s;return lC(a,()=>{let l=n.map(u=>u.listen(c));return s(),()=>{for(let u of l)u()}}),a},ue=(n,t)=>cC(n,t);const xn=ne(null);function uC(n,t){const e={parent:null,value:{},count:0,figCount:0,figFilteredCount:0,children:[]},i=[],r=new Set(t.map(a=>a.id));for(const a of n){const o=new Set,c=r.has(a.id);a.posts.forEach(l=>{let u=e;u.count++,o.has(u)||(o.add(u),u.figCount++,c&&u.figFilteredCount++);const h=l.institutions;for(let f=h.length-1;f>=0;--f){const x=h[f];let y=u.children.find(d=>"id"in d.value&&d.value.id===x.id);y||(y={parent:u,value:x,count:0,figCount:0,figFilteredCount:0,children:[]},i.push(y),u.children.push(y)),u=y,u.count++,o.has(u)||(o.add(u),u.figCount++,c&&u.figFilteredCount++)}let p=u.children.find(f=>f.value.id===l.id);p||(p={parent:u,value:l,count:0,figCount:0,figFilteredCount:0},i.push(p),u.children.push(p)),p.count++,o.has(p)||(o.add(p),p.figCount++,c&&p.figFilteredCount++)})}const s=a=>{a.children.sort((o,c)=>"children"in o&&"children"in c?c.figCount-o.figCount:"children"in o?-1:"children"in c?1:c.figCount-o.figCount),a.children.forEach(o=>{"children"in o&&s(o)})};return s(e),[e,i]}const De=ne({location:rn.defaultAddress,mode:"birth",distance:2e3});function hC(n,t){return t.location.id===-1?Lf.getCurrent(n.time[0],n.time[1]):t.location}function dC(n,t,e,i){if(e.mode==="been"){const[r,s]=i||Yi;if(n.time[1]<r||n.time[0]>s)return null;let a=n.locations.filter(l=>!(l.time===null||l.time<r||l.time>s));if(n.time[0]>r&&n.time[1]<s&&n.birthplace!==null&&a.push(n.birthplace),a.length===0)return null;const o=a.map(l=>Pi.distanceBetween(l.coordinate,t)),c=o.indexOf(Math.min(...o));return c!==-1?a[c]:null}else return n.birthplace??null}function fC(n,t,e){const i=hC(n,e),r=dC(n,i.coordinate,e,t),s=i.coordinate,a=(()=>{if(r===null)return null;const o=r.coordinate;return o.latitude===0&&o.longitude===0?null:o})();return{center:s,locate:a}}function pC(n){const t=[],e=new Set;for(const i of n)i.locations.forEach(r=>{e.has(r.id)||(e.add(r.id),t.push(r))});return t.sort((i,r)=>i.name.localeCompare(r.name))}const al=class al{static rank(t){let e=al.ranks,i=t.institutions.length-2;for(;i>=0;--i){const r=t.institutions[i];if(e=e[r.__name__]??e.default,typeof e=="number"||typeof e=="function"){--i;break}}if(typeof e=="function"){const r=i<0?t.__name__:t.institutions[i].__name__;return e(r)}return typeof e!="number"&&(e=e.default),e}};ot(al,"ranks",{地方官類:{"地方官類(路官)":{轉運使司門:t=>t.includes("轉運使")||t.includes("轉運副使")?6:t.includes("司判官")?5:4,提點刑獄司門:t=>/提點.*?公事/.test(t)?5:4,提舉茶馬司門:t=>5,提舉常平司門:t=>5,安撫使司門:t=>/安撫使.*?[官|監]/.test(t)||t.includes("安撫使")||t.includes("安撫大使")||t.includes("安撫副使")?6:5,發運使司門:t=>t.includes("發運使")||t.includes("提舉公觀")?6:4,default:t=>/提[點|舉].*?[官|公事]/.test(t)?6:4},"地方官類(郡縣官)":{縣鎮官門:t=>/知.*?[縣]/.test(t)?2:(t.includes("縣丞"),1),州府軍監門:t=>3,default:t=>2}},中樞機構類:()=>8,軍事統帥機構與地方治安機構類:()=>6,宰執官類:9,階官類:1,章服類:1,祠祿官類:1,皇宮京城禁衛與侍奉機構類:()=>10,宮廷制度類:{帝后門:{皇帝:14,default:13},default:9},default:1}),ot(al,"postColorMap",["#888888","#74B293","#199666","#017767","#75BBDD","#1A6FB2","#085B8D","#C1A1D0","#8A5F9D","#6D337A","#B76D2D","#8E5C2A","#6F553A","#B60613"]);let gi=al;const Xr=365*24*60*60*1e3;function gC(n,t,e){const i=G0(n,t,e),r=n.totalHistoricalContextWeight,s=r===0?1:i.weight/r;return Object.assign(i,{r:s,_w:Math.pow(n.weight,.7)})}function G0(n,t,e){var _,g;e=e??Vr.get();const[i,r]=t??Yi,[s,a]=n.time,o=a.getTime()-s.getTime();let c=0;const l=new Date(Math.max(i.getTime(),s.getTime())),u=new Date(Math.min(r.getTime(),a.getTime())),h=Math.max(0,u.getTime()-l.getTime()),p=h/o;if(c+=p*e.time,h===0)return{weight:0,time:{weight:0,time:[l,u]},posts:{weight:0,posts:[]},relations:{weight:0,relations:[]}};let f=0,x=[];for(let m=0;m<n.posts.length;++m){const v=n.posts[m];let S=v.time===null?null:Math.max(s.getTime(),v.time.getTime()),M=Math.min(a.getTime(),(v.endTime!==null?v.endTime.getTime():(g=(_=n.posts[m+1])==null?void 0:_.time)==null?void 0:g.getTime())??n.time[1].getTime()),w,L=0;if(S===null?(S=s.getTime(),L=1,w=(M-S)/o):(L=(M-S)/Xr,w=1),S>M)continue;const P=gi.rank(v);f+=w*L*P,x.push({post:v,time:[new Date(S),new Date(M)],probability:w})}c+=f*e.posts;let y=0,d=[];for(let m=0;m<n.relations.length;++m){const v=n.relations[m];if(v.time===null){let S=h/o;d.push({relation:v,time:null,probability:S}),y+=S}else if(v.time>=l&&v.time<=u){let S=1;d.push({relation:v,time:v.time,probability:S}),y+=S}}return c+=y*e.relations,{weight:c,time:{weight:p,time:[l,u]},posts:{weight:f,posts:x},relations:{weight:y,relations:d}}}function b5(n,t,e,i){const[r,s]=n.time,a=s.getTime()-r.getTime(),o=[];for(let c=0;c<t.length;++c){const l=t[c],[u,h]=e.get(l.id)??Yi,[p,f]=l.time,x=f.getTime()-p.getTime();let y=0;const d=new Date(Math.max(u.getTime(),r.getTime(),p.getTime())),_=new Date(Math.min(h.getTime(),s.getTime(),f.getTime())),g=Math.max(0,_.getTime()-d.getTime())/Xr,m=g;if(n.id!==l.id&&(y+=m*i.time),g===0||n.id===l.id){o.push({weight:y,time:{weight:0,time:[d,_]},locations:{weight:0,locations:[]},posts:{weight:0,posts:[]},relations:{weight:0,relations:[]},events:[]});continue}const v=Ag(n.locations,a,l.locations,x,E=>E.time,(E,I)=>E.id===I.id,[d,_]);let S=0,M=[];for(const[E,I,B,$,Y,q]of v)S+=q*Y,M.push({location:n.locations[E],time:[B,$],probability:q});y+=S*i.locations;const w=Ag(n.posts,a,l.posts,x,E=>E.time,(E,I)=>{const B=E.institutions.at(-1),$=I.institutions.at(-1);return B===void 0||$===void 0?E.name===I.name:B.name==="宋朝"||B.name==="Song Dynasty"?!1:B.id===$.id},[d,_]);let L=0,P=[];for(const[E,I,B,$,Y,q]of w)L+=q*Y,P.push({post:n.posts[E].institutions.at(-1)??n.posts[E],postSelected:l.posts[I].institutions.at(-1)??l.posts[I],time:[B,$],probability:q});y+=L*i.posts;let N=0;const k=new Date(Math.max(r.getTime(),p.getTime())),C=(new Date(Math.min(s.getTime(),f.getTime())).getTime()-k.getTime())/Xr,T=[];for(const E of n.relations)if(E.id===l.id){let I=0;E.time===null?I=g/C:E.time>=d&&E.time<=_&&(I=1),I&&(N+=I,T.push({relation:E,time:E.time,probability:I}))}for(const E of l.relations)if(E.id===n.id){let I=0;E.time===null?I=g/C:E.time>=d&&E.time<=_&&(I=1),I&&(N+=I,T.push({relation:E,time:E.time,probability:I}))}y+=N*i.relations;const A=[];if(S>0)for(const E of M){const I=A.find(B=>B.time.getTime()===E.time[0].getTime());I===void 0?A.push({time:E.time[0],timeRange:E.time,probability:E.probability,locations:[E.location],posts:[],relations:[]}):I.locations.push(E.location)}if(L>0)for(const E of P){const I=A.find(B=>B.time.getTime()===E.time[0].getTime());I===void 0?A.push({time:E.time[0],timeRange:E.time,probability:E.probability,locations:[],posts:[[E.post,E.postSelected]],relations:[]}):I.posts.push([E.post,E.postSelected])}if(N>0)for(const E of T){if(!E.time)continue;const I=A.find(B=>B.time.getTime()===E.time.getTime());I===void 0?A.push({time:E.time,timeRange:[E.time,E.time],probability:E.probability,locations:[],posts:[],relations:[E.relation]}):I.relations.push(E.relation)}o.push({weight:y,time:{weight:m,time:[d,_]},locations:{weight:S,locations:M},posts:{weight:L,posts:P},relations:{weight:N,relations:T},events:A})}return o.weight=o.reduce((c,l)=>c+l.weight,0),o}function Ag(n,t,e,i,r,s,a){let o,c,l,u,h,p;l=n.findIndex(_=>r(_)===null),l===-1&&(l=n.length);let f;for(f=0;f<l&&!(r(n[f])>=a[0]);f++);for(o=Math.max(0,f-1);f<l&&!(r(n[f])>a[1]);f++);for(c=f,p=e.findIndex(_=>r(_)===null),p===-1&&(p=e.length),f=0;f<p&&!(r(e[f])>=a[0]);f++);for(u=Math.max(0,f-1);f<p&&!(r(e[f])>a[1]);f++);h=f;let x=o,y=u;const d=[];for(;x<c&&y<h;){const _=r(n[x]),g=r(e[y]);if(_<g){const m=x===c-1?a[1]:r(n[x+1]);m>g&&s(n[x],e[y])&&d.push([x,y,g,m,(m.getTime()-g.getTime())/Xr,1]),x++}else if(_>g){const m=y===h-1?a[1]:r(e[y+1]);m>_&&s(n[x],e[y])&&d.push([x,y,_,m,(m.getTime()-_.getTime())/Xr,1]),y++}else{const m=x===c-1?a[1]:r(n[x+1]),v=y===h-1?a[1]:r(e[y+1]),S=new Date(Math.min(m.getTime(),v.getTime()));s(n[x],e[y])&&d.push([x,y,_,S,(S.getTime()-_.getTime())/Xr,1]),x++,y++}}for(let _=l;_<n.length;_++)for(let g=u;g<h;g++)if(s(n[_],e[g])){const m=r(e[g]),v=g===h-1?a[1]:r(e[g+1]);d.push([_,g,m,v,1,(v.getTime()-m.getTime())/i])}for(let _=p;_<e.length;_++)for(let g=o;g<c;g++)if(s(n[g],e[_])){const m=r(n[g]),v=g===c-1?a[1]:r(n[g+1]);d.push([g,_,m,v,1,(v.getTime()-m.getTime())/t])}for(let _=l;_<n.length;_++)for(let g=p;g<e.length;g++)if(s(n[_],e[g])){const m=(a[1].getTime()-a[0].getTime())/t*Xr/i;d.push([_,g,a[0],a[1],1,m])}return d}const Vr=ne({time:.02,posts:.08,relations:.9}),vr=ne({time:0,posts:.06,locations:.06,relations:.88});vr.listen(n=>{console.log("figureContextWeights",n)});function mC(n,t,e){t===null&&(t=Yi);const i=n.map(a=>gC(a,t,e));let r=-1/0,s=1/0;return i.forEach((a,o)=>{a!==null&&(a.weight=a.r*a._w)}),i.forEach(a=>{a!==null&&(r=Math.max(r,a.weight),s=Math.min(s,a.weight))}),i.maxWeight=r,i.minWeight=s,i._maxW=Math.max(...i.map(a=>a._w)),i.maxWs={time:Math.max(...i.map(a=>a.time.weight)),posts:Math.max(...i.map(a=>a.posts.weight)),relations:Math.max(...i.map(a=>a.relations.weight))},i}function yC(n,t,e,i){if(t.length===0)return null;const r=n.map(o=>b5(o,t,e,i));let s=-1/0,a=1/0;return r.forEach(o=>{o!==null&&(s=Math.max(s,o.weight),a=Math.min(a,o.weight))}),r.maxWeight=s,r.minWeight=a,r.maxWs={time:Math.max(...r.map(o=>(o==null?void 0:o.reduce((c,l)=>c+l.time.weight,0))??0),1),posts:Math.max(...r.map(o=>(o==null?void 0:o.reduce((c,l)=>c+l.posts.weight,0))??0),1),locations:Math.max(...r.map(o=>(o==null?void 0:o.reduce((c,l)=>c+l.locations.weight,0))??0),1),relations:Math.max(...r.map(o=>(o==null?void 0:o.reduce((c,l)=>c+l.relations.weight,0))??0),1)},r}const is=ne(null),Wt=ne([]),re=ue([is,Wt],(n,t)=>n===null?t:t.findIndex(i=>i.id===n.id)===-1?[...t,n]:t);function vC(n,t,e,i,r,s,a,o,c,l,u,h){let p=n.filter((f,x)=>{if(r&&f.type!==r||i&&(f.weight<i[0]||f.weight>i[1])||s&&!f.posts.some(m=>{const v=[m.name,...m.institutions.map(w=>w.name)],S=v.findIndex(w=>w===s.value.name);if(S===-1)return!1;let M=s;for(let w=S-1;w>=0;--w){if(!("children"in M))return!1;const L=M.children.find(P=>P.value.name===v[w]);if(L===void 0)return!1;M=L}return!0}))return!1;const{distance:y}=a,{center:d,locate:_}=h.get(f.id);if(_===null){if(y<rn.maxDistance)return!1}else if(d.distanceTo(_)>y)return!1;return!(o.length&&!u.has(f.id))});if(l==="focused"){if(t.length===0)throw new Error("No figures clicked");const f=new Set(t.map(d=>d.id)),x=re.get(),y=t.map(d=>x.findIndex(_=>_.id===d.id));p=p.filter((d,_)=>{if(f.has(d.id))return!0;const g=b5(d,t,e,c);for(const m of y)if(g[m].weight>0)return!0;return!1})}return p}function xC(n){const t=this??new Map,e=new Set(t.values());for(const i of t.keys())n.findIndex(r=>r.id===i)===-1&&(e.delete(t.get(i)),t.delete(i));for(const i of n){if(t.has(i.id))continue;let r=0;for(;e.has(Os[r])&&r<Os.length;)r++;r>=Os.length&&(r=0),t.set(i.id,Os[r]),e.add(Os[r])}return t}const hc=ne(Yi),Qh=ne(x5),Wu=ne(null),wr=ne(new Map);function _C(n){let t=!1;const e=wr.get();for(let[i,r]of e)n.find(s=>s.id===i)||(e.delete(i),t=!0);t&&wr.set(e)}class bC{constructor(t){this.data=t}search(t){return this.data.filter(e=>this.match(t,e)>0)}searchMany(t){return t.length===0?this.data:this.data.filter(e=>t.every(i=>this.match(i,e)>0))}match(t,e){const i=t.split("|");return e.events.some(r=>i.some(s=>r.description.includes(s)))?1:0}}const Ji=ne([]);function wC(n,t){const i=new bC(n).searchMany(t);return new Set(i.map(r=>r.id))}const W0=new URL(window.location.href),CC=W0.searchParams.get("lang")==="en"?"en":"zh-cn",SC=W0.searchParams.get("status-icon")==="location"?"location":"status",TC=W0.searchParams.get("location-line")==="icon"?"icon":"areachart",Er=ne(CC),mi=ue([Er],n=>n==="zh-cn"?rC:nC),Tl=ne({width:document.getElementById("app").clientWidth,height:document.getElementById("app").clientHeight});window.addEventListener("resize",()=>{Tl.set({width:document.getElementById("app").clientWidth,height:document.getElementById("app").clientHeight})});const w5=ne(null),Eg=ne(SC),kC=ne(TC),Bs=ne(null),Xn=ne(null),qs=class qs{constructor(t=0,e=0,i=1,r=1){ot(this,"x",0);ot(this,"y",0);ot(this,"kx",1);ot(this,"ky",1);this.x=t,this.y=e,this.kx=i,this.ky=r}get k(){if(this.kx!==this.ky)throw new Error("kx and ky are not equal");return this.kx}scale(t,e){return e===void 0&&(e=t),new qs(this.x,this.y,this.kx*t,this.ky*e)}translate(t=0,e=0){return new qs(this.x+t,this.y+e,this.kx,this.ky)}rescaleX(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))}rescaleY(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))}toString(){return`translate(${this.x},${this.y}) scale(${this.kx},${this.ky})`}apply(t){return[this.applyX(t[0]),this.applyY(t[1])]}applyX(t){return this.kx*t+this.x}applyY(t){return this.ky*t+this.y}invert(t){return[this.invertX(t[0]),this.invertY(t[1])]}invertX(t){return(t-this.x)/this.kx}invertY(t){return(t-this.y)/this.ky}};ot(qs,"identity",new qs);let Mr=qs;const MC=new Mr,Ze=ne("global"),na=ne(["default",null]),Es=ne([]),C5=ne(new Mr),Bc=ne(null);function AC(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(r){r(e)}),(i=n.get("*"))&&i.slice().map(function(r){r(t,e)})}}}const $0=AC(),Si=ne([]);Wt.listen(n=>{_C(n)});const $u=ue([Si,Wu,De],(n,t,e)=>{const i=new Map;for(const r of n)i.set(r.id,fC(r,t,e));return i}),S5=ue([Si,Ji],(n,t)=>wC(n,t)),ce=ue([Si,Wt,wr,Bc,Bs,xn,De,Ji,vr,Ze],(n,t,e,i,r,s,a,o,c,l)=>{const u=S5.get(),h=$u.get();return vC(n,t,e,i,r,s,a,o,c,l,u,h)}),_u=ue([Si,ce],(n,t)=>uC(n,t)),dr=ue([ce],n=>{const t=new Map;return n.forEach((e,i)=>{t.set(e.id,i)}),t}),EC=ue([ce],n=>pC(n)),ra=ue([re],n=>xC.call(ra.value,n)),bu=ue([ce,Wu,Vr],(n,t,e)=>mC(n,t,e)),Te=ue([ce,re,wr,vr],(n,t,e,i)=>yC(n,t,e,i));class PC{constructor(t){ot(this,"props");ot(this,"emit",null);ot(this,"root",null);ot(this,"canvas",null);ot(this,"svg",null);ot(this,"subTimelines",[]);ot(this,"groupDict",{});ot(this,"stopPropagation",!1);ot(this,"zoomObj",null);this.props=Object.assign({title:"",subtitle:"",totalWidth:600,totalHeight:600,showName:!1,timelines:[],groups:[],color:"#6f4922",bgcolor:"#ab8c70",x:0,y:0,nameListWidth:0,nameListInterval:0},t),this.initialize()}get height(){return this.props.timelines.map(t=>t.height).reduce((t,e)=>t+e,0)}get baseStrokeWidth(){return 1}get padding(){return this.baseStrokeWidth*6}get nameListBottom(){let t=this.props.timelines[this.props.timelines.length-1];return t===void 0?0:t.name===null?this.getY(this.props.timelines.length-1)+1+(t.showBrush?this.padding*.5:0):this.getY(this.props.timelines.length)+(t.showBrush?this.padding*.5:0)}get timelineX(){return this.props.showName?this.props.nameListWidth+this.props.nameListInterval:0}get timelineWidth(){return this.props.totalWidth-(this.props.showName?this.props.nameListWidth+this.props.nameListInterval:0)}setRoot(t){this.root=t;let e=this.root.querySelector("canvas");e===null&&(e=document.createElement("canvas"),e.style.position="absolute",this.root.appendChild(e)),this.canvas=e;let i=this.root.querySelector("svg");return i===null&&(i=document.createElementNS("http://www.w3.org/2000/svg","svg"),i.style.position="absolute",this.root.appendChild(i)),this.svg=i,this.listenZoom(),this}setEmit(t){return this.emit=t,this}zoomEvent(t,e=0){let i;if(t instanceof Array?i=t:i=this._transform2domain(t),e===0)this._scaleEvent(i);else{let r=this.props.groups.find(a=>a.effect===gn);if(r===void 0)return;let s=r.scale.domain();H2().duration(e).tween("zoom",()=>{let a=Xd(s[0],i[0]),o=Xd(s[1],i[1]);return c=>{this._scaleEvent([a(c),o(c)])}})}}zoom(t){this.stopPropagation=!0,this.zoomObj.transform(It(this.root),t instanceof Array?this._domain2transform(t):t)}listenZoom(){const t=this.props.totalWidth,e=this.props.totalHeight;this.zoomObj=R7().scaleExtent([1,1/0]).extent([[0,0],[t,e]]).translateExtent([[0,0],[t,e]]).on("zoom",i=>{var r;this.zoomEvent(i.transform),this.stopPropagation||(r=this.emit)==null||r.zoom(this._transform2domain(i.transform)),this.stopPropagation=!1}),It(this.root).call(this.zoomObj),$0.on("book-mark",i=>{const r=pa.translate(i.x,i.y).scale(i.kx),s=v3(this.root),a=tl.timeline(),o=this;a.to(s,{...r,duration:.8,onUpdate(){const c=o._transform2domain(s);o._scaleEvent(c)}})})}initialize(){this._initializeState(),this._initializeSubTimelines(),this._initializeGroupDict()}updateContainer(){const t=this.root,e=this.canvas,i=this.svg,r=2;t.style.transform=`translate(${this.props.x}px, ${this.props.y}px)`,e.width=this.props.totalWidth*r,e.height=this.props.totalHeight*r,e.style.width=`${this.props.totalWidth}px`,e.style.height=`${this.props.totalHeight}px`;const s=Math.max(8,this.props.totalHeight*.007);i.style.top=this.getY(0)-s*.5+"px",i.style.width=`${this.props.totalWidth}px`,i.style.height=`${s}px`;const a=e.getContext("2d");a.setTransform(r,0,0,r,0,0),a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high"}renderSubTimeline(t,e){e.setContext(t).render()}render(){const t=this.canvas;if(t===null)return;const e=t.getContext("2d");this.updateContainer();const i=this.subTimelines;e.clearRect(0,0,t.width,t.height);for(let r=0,s=i.length;r<s;++r){const a=i[r],o=a.props;e.save(),e.translate(o.translateX,o.translateY),this.renderSubTimeline(e,a),e.restore()}}renderBrush(){const t=It(this.svg),e=Wu.get(),i=this.props.groups.find(p=>p.effect===gn).scale,r=Math.max(8,this.props.totalHeight*.007);t.style("cursor","crosshair");let s=t.select("g.brush-container");s.empty()&&(s=t.append("g").attr("class","brush-container")),s.selectAll("*").remove();let a,o;const c=Yc().on("drag",(p,f)=>{console.log("drag",f);const x=u(p);f===0?a=x:o=x,l([a,o])}).on("end",(p,f)=>{const x=u(p);if(f===0?a=x:o=x,l([a,o]),a>o){const d=a;a=o,o=d}const y=[a,o].map(d=>i.invert(d));this.emit.brush(y,"end")}),l=p=>{const f=this.props.groups.find(d=>d.effect===gn),x=p?p.map(d=>i.invert(d)):null;f.brushDomain=x;for(let d of f.timelines){const _=this.subTimelines[d.idx];_.props.showMask=p!==void 0,_.props.brushDomain=x}if(this.render(),p===void 0)return s.selectAll("*").remove(),null;let y=s.select("rect.brush-rect");return y.empty()&&(y=s.append("rect").attr("class","brush-rect"),y.attr("fill",fi)),y.attr("x",Math.min(p[0],p[1])).attr("y",0).attr("width",Math.abs(p[1]-p[0])).attr("height",r),s.selectAll("circle.brush-handle").data([0,1]).join("circle").attr("class","brush-handle").attr("fill","#fff").attr("stroke",fi).attr("stroke-width","1").attr("r","4").attr("cx",d=>p[d]).attr("cy",r/2).style("cursor","pointer").call(c)};e!==null&&(a=i(e[0]),o=i(e[1]),l([a,o]));const u=p=>Math.min(Math.max(0,p.x),this.timelineWidth),h=Yc().on("start",p=>{a=o=u(p)}).on("drag",p=>{o=u(p),l([a,o])}).on("end",p=>{if(o=u(p),a===o){l(void 0),this.emit.brush(null,"end");return}if(l([a,o]),a>o){const x=a;a=o,o=x}const f=[i.invert(a),i.invert(o)];this.emit.brush(f,"end")});t.call(h)}getX(t){return this.timelineX}getY(t){return this.props.timelines[t].side==="top"?this.props.timelines.slice(0,t).filter(i=>i.side==="top").map(i=>i.height).reduce((i,r)=>i+r,0):this.props.totalHeight-this.props.timelines.slice(t).filter(i=>i.side==="bottom").map(i=>i.height).reduce((i,r)=>i+r,0)}_brushEvent(t,e,i){let r=this.props.timelines.find(a=>a.name===t);if(r===void 0)return;const s=r.g;s.brushDomain=e,s.timelines.forEach(a=>{this.subTimelines[a.idx].renderMask()}),s.effect===gn&&this.emit.brush(e,i)}_zoomEvent(t,e){let i=this.props.timelines.find(a=>a.name===t);if(i===void 0)return;let r=i.g,s=e.rescaleX(r.originScale).domain();r.scale=r.scale.copy().domain(s),i.g.timelines.forEach(a=>{this.subTimelines[a.idx].updateScale(r.scale)}),r.effect===gn&&this.emit.zoom(s)}_scaleEvent(t){let e=this.props.groups.find(r=>r.effect===gn);e.scale=e.scale.copy().domain(t);let i=this.props.groups.find(r=>r.effect===e.id);i!==void 0&&(i.brushDomain=t),e.timelines.forEach((r,s)=>{this.subTimelines[r.idx].updateScale(e.scale)}),this.render(),this.renderBrush()}_transform2domain(t,e){return e=e||this.props.groups.find(i=>i.effect===gn),e===void 0?null:t.rescaleX(e.originScale).domain()}_domain2transform(t,e){if(e=e||this.props.groups.find(o=>o.effect===gn),e===void 0)return null;let i=t.map(o=>e.originScale(o)),r=e.originScale.range(),s=(r[1]-r[0])/(i[1]-i[0]),a=(r[0]+r[1]-s*(i[0]+i[1]))/2;return pa.translate(a,0).scale(s)}_initializeState(){this.props.groups.forEach((t,e)=>{let[i,r]=t.scale.domain(),[s,a]=t.domain;if(i.getTime()!==s.getTime()||r.getTime()!==a.getTime()){t.scale=t.scale.copy().domain(t.domain);let o=this.props.groups.find(c=>c.effect===t.id);o&&(o.brushDomain=t.domain),t.effect===gn&&this.emit.zoom(t.domain)}})}_initializeSubTimelines(){const t=this;this.subTimelines=this.props.timelines.map((e,i)=>{const r={name:e.name,groupId:e.groupId,group:e.group,scale:e.g.scale,originScale:e.g.originScale,brushDomain:e.g.brushDomain,width:this.timelineWidth,height:e.height,init:e.init,ticks:e.ticks,ticksRenderer:e.ticksRenderer,labels:e.labels,labelsRenderer:e.labelsRenderer,scalable:e.g.scalable,showBrush:e.showBrush&&e.g.brush,showMask:!1,maskType:"brush",translateX:this.getX(i),translateY:this.getY(i),color:this.props.color,bgcolor:this.props.bgcolor,baseStrokeWidth:this.baseStrokeWidth,brushHeight:this.padding,brushWidth:this.padding};return new O7(r,{brush(s,a,o){t._brushEvent.call(t,s,a,o)}},{getSingleTimeline(s){return t.subTimelines.find(a=>a.props.name===s)}})})}_initializeGroupDict(){this.props.groups.forEach((t,e)=>{this.groupDict[t.id]=e})}}function DC(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function LC(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function RC(n,t,e){const i=Math.max(t[1][0]-e[1][0]*n.kx,Math.min(t[0][0]-e[0][0]*n.kx,n.x)),r=Math.max(t[1][1]-e[1][1]*n.ky,Math.min(t[0][1]-e[0][1]*n.ky,n.y));return new Mr(i,r,n.kx,n.ky)}function IC(){let n=DC,t,e=RC,i=LC,r=[0,1/0],s=[0,1/0],a=["x","y"],o,c=!0,l=150,u=1,h=1,p=!1,f=null,x=MC,y=0,d=0,_=null,g={},m=.18,v=1;const S=function(Q){_=Q,Q.attr("transform",x).property("__zoom",x).on("wheel.zoom",G,{passive:!1}).on("mousedown.zoom",F).on("mousemove.zoom",j).on("mouseup.zoom",U).on("dblclick.zoom",nt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")};function M(Q){x=Q,_&&_.property("__zoom",x)}S.setTransform=M;function w(){return new Mr().scale(x.kx,x.ky).translate(x.x,x.y)}S.getTransform=w;function L(Q){return Q===void 0?u:(u=Q,S)}S.scaleX=L;function P(Q){return Q===void 0?h:(h=Q,S)}S.scaleY=P;function N(Q){return Q===void 0?t:(t=Q,S)}S.extent=N;function k(Q){return Q===void 0?r:(r=Q,S)}S.scaleExtentX=k;function D(Q){return Q===void 0?s:(s=Q,S)}S.scaleExtentY=D;function C(Q){return Q===void 0?o:(o=Q,S)}S.translateExtent=C;function T(Q){return Q===void 0?e:(e=Q,S)}S.constrain=T;function A(Q){return Q===void 0?a:(a=Q,S)}S.axis=A;function E(Q){return Q===void 0?c:(c=Q,c?K():rt(),S)}S.key=E;function I(Q){return Q===void 0?n:(n=Q,S)}S.filter=I;function B(Q,it){return it===void 0?g[Q]:(g[Q]=it,S)}S.on=B;function $(Q,it){_.property("__zoom",x),g.start&&g.start.call(_.node(),{...it,transform:x,sourceEvent:Q})}function Y(Q,it){_.property("__zoom",x),g.zoom&&g.zoom.call(_.node(),{...it,transform:x,sourceEvent:Q})}function q(Q,it){_.property("__zoom",x),g.end&&g.end.call(_.node(),{...it,transform:x,sourceEvent:Q})}function G(Q){if(!n(Q))return;Q.preventDefault();let it=i(Q),at=1+it*m,ut=1+it*v,ft=x.kx*at,dt=x.ky*ut,xt=Q.offsetX*u,vt=Q.offsetY*h;ft=et()?Math.max(r[0],Math.min(r[1],ft)):x.kx,dt=V()?Math.max(s[0],Math.min(s[1],dt)):x.ky;let _t=xt-ft*x.invertX(xt),yt=vt-dt*x.invertY(vt);x=new Mr(_t,yt,ft,dt),x=e(x,t,o),f?(clearTimeout(f),Y(Q,{eventType:"wheel"})):$(Q,{eventType:"wheel"}),f=setTimeout(()=>{q(Q,{eventType:"wheel"}),f=null},l)}function F(Q){y=Q.offsetX*u,d=Q.offsetY*h,$(Q,{eventType:"drag"}),p=!0}function U(Q){p=!1,q(Q,{eventType:"drag"})}function j(Q){if(!p||!n(Q))return;Q.preventDefault();const it=Q.offsetX*u,at=Q.offsetY*h;let ut=et()?it-y:0,ft=V()?at-d:0;x=x.translate(ut,ft),x=e(x,t,o),y=it,d=at,Y(Q,{eventType:"drag",dx:ut,dy:ft})}function et(Q){return a.includes("x")?c?tt.size===0||["ArrowLeft","ArrowRight","a","d","h"].some(it=>tt.has(it)):!0:!1}function V(Q){return a.includes("y")?c?tt.size===0||["ArrowUp","ArrowDown","w","s","v"].some(it=>tt.has(it)):!0:!1}const tt=new Set,z=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","w","s","a","d","h","v"]),H=Q=>{tt.has(Q.key)||z.has(Q.key)&&tt.add(Q.key)},X=Q=>{z.has(Q.key)&&tt.delete(Q.key)};function K(){window.addEventListener("keydown",H),window.addEventListener("keyup",X)}function rt(){window.removeEventListener("keydown",H),window.removeEventListener("keyup",X)}c?K():rt();function nt(Q){}return S}const T5={default:()=>({order:(n,t,e,i)=>n.datum.layout.importance-e.datum.layout.importance,lineNumber:n=>Math.round(1/Math.log(1+n.datum.weight))}),byLocation:()=>({order:(n,t,e,i)=>{var r,s;return(((r=n.datum.birthplace)==null?void 0:r.coordinate.latitude)??100)-(((s=e.datum.birthplace)==null?void 0:s.coordinate.latitude)??100)},lineNumber:n=>1}),byTime:()=>({order:(n,t,e,i)=>n.datum.time[0].getTime()-e.datum.time[0].getTime(),lineNumber:n=>1})},Pg=[0,1],NC="modulepreload",FC=function(n,t){return new URL(n,t).href},Dg={},wu=function(t,e,i){let r=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(e.map(l=>{if(l=FC(l,i),l in Dg)return;Dg[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!i)for(let x=a.length-1;x>=0;x--){const y=a[x];if(y.href===l&&(!u||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":NC,u||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((x,y)=>{f.addEventListener("load",x),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};var se=(n=>(n.Application="application",n.WebGLPipes="webgl-pipes",n.WebGLPipesAdaptor="webgl-pipes-adaptor",n.WebGLSystem="webgl-system",n.WebGPUPipes="webgpu-pipes",n.WebGPUPipesAdaptor="webgpu-pipes-adaptor",n.WebGPUSystem="webgpu-system",n.CanvasSystem="canvas-system",n.CanvasPipesAdaptor="canvas-pipes-adaptor",n.CanvasPipes="canvas-pipes",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n.MaskEffect="mask-effect",n.BlendMode="blend-mode",n.TextureSource="texture-source",n.Environment="environment",n.ShapeBuilder="shape-builder",n.Batcher="batcher",n))(se||{});const Rf=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},dc=(n,t)=>Rf(n).priority??t,Xi={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(Rf).forEach(t=>{t.type.forEach(e=>{var i,r;return(r=(i=this._removeHandlers)[e])==null?void 0:r.call(i,t)})}),this},add(...n){return n.map(Rf).forEach(t=>{t.type.forEach(e=>{var s,a;const i=this._addHandlers,r=this._queue;i[e]?(a=i[e])==null||a.call(i,t):(r[e]=r[e]||[],(s=r[e])==null||s.push(t))})}),this},handle(n,t,e){var a;const i=this._addHandlers,r=this._removeHandlers;if(i[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=t,r[n]=e;const s=this._queue;return s[n]&&((a=s[n])==null||a.forEach(o=>t(o)),delete s[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(n,t,e=-1){return this.handle(n,i=>{t.findIndex(s=>s.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((s,a)=>dc(a.value,e)-dc(s.value,e)))},i=>{const r=t.findIndex(s=>s.name===i.name);r!==-1&&t.splice(r,1)})},handleByList(n,t,e=-1){return this.handle(n,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((r,s)=>dc(s,e)-dc(r,e)))},i=>{const r=t.indexOf(i.ref);r!==-1&&t.splice(r,1)})},mixin(n,...t){for(const e of t)Object.defineProperties(n.prototype,Object.getOwnPropertyDescriptors(e))}},OC={extension:{type:se.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await wu(()=>import("./browserAll-KvKAY8Mr.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)}},BC={extension:{type:se.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await wu(()=>import("./webworkerAll-CSkpf5C_.js"),__vite__mapDeps([1,2,3]),import.meta.url)}};class pi{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new pi(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Jh={exports:{}},Lg;function zC(){return Lg||(Lg=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function r(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,h,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,h||c,p),x=e?e+l:l;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],f]:c._events[x].push(f):(c._events[x]=f,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new i:delete c._events[l]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],u,h;if(this._eventsCount===0)return l;for(h in u=this._events)t.call(u,h)&&l.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},o.prototype.listeners=function(l){var u=e?e+l:l,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,f=h.length,x=new Array(f);p<f;p++)x[p]=h[p].fn;return x},o.prototype.listenerCount=function(l){var u=e?e+l:l,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(l,u,h,p,f,x){var y=e?e+l:l;if(!this._events[y])return!1;var d=this._events[y],_=arguments.length,g,m;if(d.fn){switch(d.once&&this.removeListener(l,d.fn,void 0,!0),_){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,u),!0;case 3:return d.fn.call(d.context,u,h),!0;case 4:return d.fn.call(d.context,u,h,p),!0;case 5:return d.fn.call(d.context,u,h,p,f),!0;case 6:return d.fn.call(d.context,u,h,p,f,x),!0}for(m=1,g=new Array(_-1);m<_;m++)g[m-1]=arguments[m];d.fn.apply(d.context,g)}else{var v=d.length,S;for(m=0;m<v;m++)switch(d[m].once&&this.removeListener(l,d[m].fn,void 0,!0),_){case 1:d[m].fn.call(d[m].context);break;case 2:d[m].fn.call(d[m].context,u);break;case 3:d[m].fn.call(d[m].context,u,h);break;case 4:d[m].fn.call(d[m].context,u,h,p);break;default:if(!g)for(S=1,g=new Array(_-1);S<_;S++)g[S-1]=arguments[S];d[m].fn.apply(d[m].context,g)}}return!0},o.prototype.on=function(l,u,h){return s(this,l,u,h,!1)},o.prototype.once=function(l,u,h){return s(this,l,u,h,!0)},o.prototype.removeListener=function(l,u,h,p){var f=e?e+l:l;if(!this._events[f])return this;if(!u)return a(this,f),this;var x=this._events[f];if(x.fn)x.fn===u&&(!p||x.once)&&(!h||x.context===h)&&a(this,f);else{for(var y=0,d=[],_=x.length;y<_;y++)(x[y].fn!==u||p&&!x[y].once||h&&x[y].context!==h)&&d.push(x[y]);d.length?this._events[f]=d.length===1?d[0]:d:a(this,f)}return this},o.prototype.removeAllListeners=function(l){var u;return l?(u=e?e+l:l,this._events[u]&&a(this,u)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,n.exports=o}(Jh)),Jh.exports}var HC=zC();const Ln=Au(HC),GC=Math.PI*2,WC=180/Math.PI,$C=Math.PI/180;class ei{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new ei(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return td.x=0,td.y=0,td}}const td=new ei;class Qt{constructor(t=1,e=0,i=0,r=1,s=0,a=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=s,this.ty=a}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,s,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=s,this.ty=a,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new ei;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new ei;const i=this.a,r=this.b,s=this.c,a=this.d,o=this.tx,c=this.ty,l=1/(i*a+s*-r),u=t.x,h=t.y;return e.x=a*l*u+-s*l*h+(c*s-o*a)*l,e.y=i*l*h+-r*l*u+(-c*i+o*r)*l,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,s=this.c,a=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,s=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}appendFrom(t,e){const i=t.a,r=t.b,s=t.c,a=t.d,o=t.tx,c=t.ty,l=e.a,u=e.b,h=e.c,p=e.d;return this.a=i*l+r*h,this.b=i*u+r*p,this.c=s*l+a*h,this.d=s*u+a*p,this.tx=o*l+c*h+e.tx,this.ty=o*u+c*p+e.ty,this}setTransform(t,e,i,r,s,a,o,c,l){return this.a=Math.cos(o+l)*s,this.b=Math.sin(o+l)*s,this.c=-Math.sin(o-c)*a,this.d=Math.cos(o-c)*a,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,r=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-r,s),c=Math.atan2(i,e),l=Math.abs(o+c);return l<1e-5||Math.abs(GC-l)<1e-5?(t.rotation=c,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=c),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(a.x*e+a.y*r),t.position.y=this.ty+(a.x*i+a.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,s=this.tx,a=t*r-e*i;return this.a=r/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-r*s)/a,this.ty=-(t*this.ty-e*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Qt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return YC.identity()}static get shared(){return UC.identity()}}const UC=new Qt,YC=new Qt,Hr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Gr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Wr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$r=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],If=[],k5=[],fc=Math.sign;function jC(){for(let n=0;n<16;n++){const t=[];If.push(t);for(let e=0;e<16;e++){const i=fc(Hr[n]*Hr[e]+Wr[n]*Gr[e]),r=fc(Gr[n]*Hr[e]+$r[n]*Gr[e]),s=fc(Hr[n]*Wr[e]+Wr[n]*$r[e]),a=fc(Gr[n]*Wr[e]+$r[n]*$r[e]);for(let o=0;o<16;o++)if(Hr[o]===i&&Gr[o]===r&&Wr[o]===s&&$r[o]===a){t.push(o);break}}}for(let n=0;n<16;n++){const t=new Qt;t.set(Hr[n],Gr[n],Wr[n],$r[n],0,0),k5.push(t)}}jC();const me={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Hr[n],uY:n=>Gr[n],vX:n=>Wr[n],vY:n=>$r[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>If[n][t],sub:(n,t)=>If[n][me.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?me.S:me.N:Math.abs(t)*2<=Math.abs(n)?n>0?me.E:me.W:t>0?n>0?me.SE:me.SW:n>0?me.NE:me.NW,matrixAppendRotationInv:(n,t,e=0,i=0)=>{const r=k5[me.inv(t)];r.tx=e,r.ty=i,n.append(r)}},pc=[new ei,new ei,new ei,new ei];class He{constructor(t=0,e=0,i=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new He(0,0,0,0)}clone(){return new He(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,r=.5){const{width:s,height:a}=this;if(s<=0||a<=0)return!1;const o=this.x,c=this.y,l=i*(1-r),u=i-l,h=o-l,p=o+s+l,f=c-l,x=c+a+l,y=o+u,d=o+s-u,_=c+u,g=c+a-u;return t>=h&&t<=p&&e>=f&&e<=x&&!(t>y&&t<d&&e>_&&e<g)}intersects(t,e){if(!e){const L=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=L)return!1;const N=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>N}const i=this.left,r=this.right,s=this.top,a=this.bottom;if(r<=i||a<=s)return!1;const o=pc[0].set(t.left,t.top),c=pc[1].set(t.left,t.bottom),l=pc[2].set(t.right,t.top),u=pc[3].set(t.right,t.bottom);if(l.x<=o.x||c.y<=o.y)return!1;const h=Math.sign(e.a*e.d-e.b*e.c);if(h===0||(e.apply(o,o),e.apply(c,c),e.apply(l,l),e.apply(u,u),Math.max(o.x,c.x,l.x,u.x)<=i||Math.min(o.x,c.x,l.x,u.x)>=r||Math.max(o.y,c.y,l.y,u.y)<=s||Math.min(o.y,c.y,l.y,u.y)>=a))return!1;const p=h*(c.y-o.y),f=h*(o.x-c.x),x=p*i+f*s,y=p*r+f*s,d=p*i+f*a,_=p*r+f*a;if(Math.max(x,y,d,_)<=p*o.x+f*o.y||Math.min(x,y,d,_)>=p*u.x+f*u.y)return!1;const g=h*(o.y-l.y),m=h*(l.x-o.x),v=g*i+m*s,S=g*r+m*s,M=g*i+m*a,w=g*r+m*a;return!(Math.max(v,S,M,w)<=g*o.x+m*o.y||Math.min(v,S,M,w)>=g*u.x+m*u.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=s-r,this}getBounds(t){return t||(t=new He),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,i=t.y,r=t.x+t.width,s=t.y+t.height;return e>=this.x&&e<this.x+this.width&&i>=this.y&&i<this.y+this.height&&r>=this.x&&r<this.x+this.width&&s>=this.y&&s<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ed={default:-1};function Ne(n="default"){return ed[n]===void 0&&(ed[n]=-1),++ed[n]}const Rg={},we="8.0.0",XC="8.3.4";function le(n,t,e=3){if(Rg[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(i))),Rg[t]=!0}const M5=()=>{};function Ig(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function Ng(n){return!(n&n-1)&&!!n}function A5(n){const t={};for(const e in n)n[e]!==void 0&&(t[e]=n[e]);return t}const Fg=Object.create(null);function VC(n){const t=Fg[n];return t===void 0&&(Fg[n]=Ne("resource")),t}const E5=class P5 extends Ln{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...P5.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){le(we,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=VC(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};E5.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let qC=E5;const D5=class L5 extends Ln{constructor(t={}){super(),this.options=t,this.uid=Ne("textureSource"),this._resourceType="textureSource",this._resourceId=Ne("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...L5.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new qC(A5(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,i;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Ne("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const r=Math.round(t*i),s=Math.round(e*i);return this.width=r/i,this.height=s/i,this._resolution=i,this.pixelWidth===r&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Ne("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Ng(this.pixelWidth)&&Ng(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};D5.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let cn=D5;class U0 extends cn{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(e instanceof Float32Array?i="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?i="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?i="rgba16uint":(e instanceof Int8Array,i="bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}U0.extension=se.TextureSource;const Og=new Qt;class KC{constructor(t,e){this.mapCoord=new Qt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const s=t[r],a=t[r+1];e[r]=s*i.a+a*i.c+i.tx,e[r+1]=s*i.b+a*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,r=t.trim;r&&(Og.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Og));const s=t.source,a=this.uClampFrame,o=this.clampMargin/s._resolution,c=this.clampOffset/s._resolution;return a[0]=(t.frame.x+o+c)/s.width,a[1]=(t.frame.y+o+c)/s.height,a[2]=(t.frame.x+t.frame.width-o+c)/s.width,a[3]=(t.frame.y+t.frame.height-o+c)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=t.frame.width===s.width&&t.frame.height===s.height&&t.rotate===0,!0}}class te extends Ln{constructor({source:t,label:e,frame:i,orig:r,trim:s,defaultAnchor:a,defaultBorders:o,rotate:c,dynamic:l}={}){if(super(),this.uid=Ne("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new He,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new cn,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:u,height:h}=this._source;this.frame.width=u,this.frame.height=h}this.orig=r||this.frame,this.trim=s,this.rotate=c??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new KC(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:r}=this._source,s=e.x/i,a=e.y/r,o=e.width/i,c=e.height/r;let l=this.rotate;if(l){const u=o/2,h=c/2,p=s+u,f=a+h;l=me.add(l,me.NW),t.x0=p+u*me.uX(l),t.y0=f+h*me.uY(l),l=me.add(l,2),t.x1=p+u*me.uX(l),t.y1=f+h*me.uY(l),l=me.add(l,2),t.x2=p+u*me.uX(l),t.y2=f+h*me.uY(l),l=me.add(l,2),t.x3=p+u*me.uX(l),t.y3=f+h*me.uY(l)}else t.x0=s,t.y0=a,t.x1=s+o,t.y1=a,t.x2=s+o,t.y2=a+c,t.x3=s,t.y3=a+c}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return le(we,"Texture.baseTexture is now Texture.source"),this._source}}te.EMPTY=new te({label:"EMPTY",source:new cn({label:"EMPTY"})});te.EMPTY.destroy=M5;te.WHITE=new te({source:new U0({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});te.WHITE.destroy=M5;function ZC(n,t,e){const{width:i,height:r}=e.orig,s=e.trim;if(s){const a=s.width,o=s.height;n.minX=s.x-t._x*i,n.maxX=n.minX+a,n.minY=s.y-t._y*r,n.maxY=n.minY+o}else n.minX=-t._x*i,n.maxX=n.minX+i,n.minY=-t._y*r,n.maxY=n.minY+r}const Bg=new Qt;class on{constructor(t=1/0,e=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Bg,this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new He);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Bg,this}set(t,e,i,r){this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}addFrame(t,e,i,r,s){s||(s=this.matrix);const a=s.a,o=s.b,c=s.c,l=s.d,u=s.tx,h=s.ty;let p=this.minX,f=this.minY,x=this.maxX,y=this.maxY,d=a*t+c*e+u,_=o*t+l*e+h;d<p&&(p=d),_<f&&(f=_),d>x&&(x=d),_>y&&(y=_),d=a*i+c*e+u,_=o*i+l*e+h,d<p&&(p=d),_<f&&(f=_),d>x&&(x=d),_>y&&(y=_),d=a*t+c*r+u,_=o*t+l*r+h,d<p&&(p=d),_<f&&(f=_),d>x&&(x=d),_>y&&(y=_),d=a*i+c*r+u,_=o*i+l*r+h,d<p&&(p=d),_<f&&(f=_),d>x&&(x=d),_>y&&(y=_),this.minX=p,this.minY=f,this.maxX=x,this.maxY=y}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,r=this.maxX,s=this.maxY,{a,b:o,c,d:l,tx:u,ty:h}=t;let p=a*e+c*i+u,f=o*e+l*i+h;this.minX=p,this.minY=f,this.maxX=p,this.maxY=f,p=a*r+c*i+u,f=o*r+l*i+h,this.minX=p<this.minX?p:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=p>this.maxX?p:this.maxX,this.maxY=f>this.maxY?f:this.maxY,p=a*e+c*s+u,f=o*e+l*s+h,this.minX=p<this.minX?p:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=p>this.maxX?p:this.maxX,this.maxY=f>this.maxY?f:this.maxY,p=a*r+c*s+u,f=o*r+l*s+h,this.minX=p<this.minX?p:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=p>this.maxX?p:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,r){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new on(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,r){let s=this.minX,a=this.minY,o=this.maxX,c=this.maxY;r||(r=this.matrix);const l=r.a,u=r.b,h=r.c,p=r.d,f=r.tx,x=r.ty;for(let y=e;y<i;y+=2){const d=t[y],_=t[y+1],g=l*d+h*_+f,m=u*d+p*_+x;s=g<s?g:s,a=m<a?m:a,o=g>o?g:o,c=m>c?m:c}this.minX=s,this.minY=a,this.maxX=o,this.maxY=c}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var QC={grad:.9,turn:360,rad:360/(2*Math.PI)},zn=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ze=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},Ui=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},R5=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},zg=function(n){return{r:Ui(n.r,0,255),g:Ui(n.g,0,255),b:Ui(n.b,0,255),a:Ui(n.a)}},id=function(n){return{r:ze(n.r),g:ze(n.g),b:ze(n.b),a:ze(n.a,3)}},JC=/^#([0-9a-f]{3,8})$/i,gc=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},I5=function(n){var t=n.r,e=n.g,i=n.b,r=n.a,s=Math.max(t,e,i),a=s-Math.min(t,e,i),o=a?s===t?(e-i)/a:s===e?2+(i-t)/a:4+(t-e)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:r}},N5=function(n){var t=n.h,e=n.s,i=n.v,r=n.a;t=t/360*6,e/=100,i/=100;var s=Math.floor(t),a=i*(1-e),o=i*(1-(t-s)*e),c=i*(1-(1-t+s)*e),l=s%6;return{r:255*[i,o,a,a,c,i][l],g:255*[c,i,i,o,a,a][l],b:255*[a,a,c,i,i,o][l],a:r}},Hg=function(n){return{h:R5(n.h),s:Ui(n.s,0,100),l:Ui(n.l,0,100),a:Ui(n.a)}},Gg=function(n){return{h:ze(n.h),s:ze(n.s),l:ze(n.l),a:ze(n.a,3)}},Wg=function(n){return N5((e=(t=n).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},el=function(n){return{h:(t=I5(n)).h,s:(r=(200-(e=t.s))*(i=t.v)/100)>0&&r<200?e*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,i,r},tS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,iS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Nf={string:[[function(n){var t=JC.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ze(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ze(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=iS.exec(n)||nS.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:zg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=tS.exec(n)||eS.exec(n);if(!t)return null;var e,i,r=Hg({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(QC[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Wg(r)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return zn(t)&&zn(e)&&zn(i)?zg({r:Number(t),g:Number(e),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var t=n.h,e=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!zn(t)||!zn(e)||!zn(i))return null;var a=Hg({h:Number(t),s:Number(e),l:Number(i),a:Number(s)});return Wg(a)},"hsl"],[function(n){var t=n.h,e=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!zn(t)||!zn(e)||!zn(i))return null;var a=function(o){return{h:R5(o.h),s:Ui(o.s,0,100),v:Ui(o.v,0,100),a:Ui(o.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(s)});return N5(a)},"hsv"]]},$g=function(n,t){for(var e=0;e<t.length;e++){var i=t[e][0](n);if(i)return[i,t[e][1]]}return[null,void 0]},rS=function(n){return typeof n=="string"?$g(n.trim(),Nf.string):typeof n=="object"&&n!==null?$g(n,Nf.object):[null,void 0]},nd=function(n,t){var e=el(n);return{h:e.h,s:Ui(e.s+100*t,0,100),l:e.l,a:e.a}},rd=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Ug=function(n,t){var e=el(n);return{h:e.h,s:e.s,l:Ui(e.l+100*t,0,100),a:e.a}},Ff=function(){function n(t){this.parsed=rS(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ze(rd(this.rgba),2)},n.prototype.isDark=function(){return rd(this.rgba)<.5},n.prototype.isLight=function(){return rd(this.rgba)>=.5},n.prototype.toHex=function(){return t=id(this.rgba),e=t.r,i=t.g,r=t.b,a=(s=t.a)<1?gc(ze(255*s)):"","#"+gc(e)+gc(i)+gc(r)+a;var t,e,i,r,s,a},n.prototype.toRgb=function(){return id(this.rgba)},n.prototype.toRgbString=function(){return t=id(this.rgba),e=t.r,i=t.g,r=t.b,(s=t.a)<1?"rgba("+e+", "+i+", "+r+", "+s+")":"rgb("+e+", "+i+", "+r+")";var t,e,i,r,s},n.prototype.toHsl=function(){return Gg(el(this.rgba))},n.prototype.toHslString=function(){return t=Gg(el(this.rgba)),e=t.h,i=t.s,r=t.l,(s=t.a)<1?"hsla("+e+", "+i+"%, "+r+"%, "+s+")":"hsl("+e+", "+i+"%, "+r+"%)";var t,e,i,r,s},n.prototype.toHsv=function(){return t=I5(this.rgba),{h:ze(t.h),s:ze(t.s),v:ze(t.v),a:ze(t.a,3)};var t},n.prototype.invert=function(){return mn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),mn(nd(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),mn(nd(this.rgba,-t))},n.prototype.grayscale=function(){return mn(nd(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),mn(Ug(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),mn(Ug(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?mn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):ze(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=el(this.rgba);return typeof t=="number"?mn({h:t,s:e.s,l:e.l,a:e.a}):ze(e.h)},n.prototype.isEqual=function(t){return this.toHex()===mn(t).toHex()},n}(),mn=function(n){return n instanceof Ff?n:new Ff(n)},Yg=[],sS=function(n){n.forEach(function(t){Yg.indexOf(t)<0&&(t(Ff,Nf),Yg.push(t))})};function aS(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in e)i[e[r]]=r;var s={};n.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,c,l=i[this.toHex()];if(l)return l;if(a!=null&&a.closest){var u=this.toRgb(),h=1/0,p="black";if(!s.length)for(var f in e)s[f]=new n(e[f]).toRgb();for(var x in e){var y=(o=u,c=s[x],Math.pow(o.r-c.r,2)+Math.pow(o.g-c.g,2)+Math.pow(o.b-c.b,2));y<h&&(h=y,p=x)}return p}},t.string.push([function(a){var o=a.toLowerCase(),c=o==="transparent"?"#0000":e[o];return c?new n(c).toRgb():null},"name"])}sS([aS]);const wa=class $o{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof $o)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,a)=>s===e[a]);if(t!==null&&e!==null){const s=Object.keys(t),a=Object.keys(e);return s.length!==a.length?!1:s.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,r]=this._components;return{r:t,g:e,b:i,a:r}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(r*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,r,s]=this._components;return t[0]=e,t[1]=i,t[2]=r,t[3]=s,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,r]=this._components;return t[0]=e,t[1]=i,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,r,s]=$o._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=r,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return e&&(i=i*t+.5|0,r=r*t+.5|0,s=s*t+.5|0),(t*255<<24)+(i<<16)+(r<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,i,r,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const a=t;e=(a>>16&255)/255,i=(a>>8&255)/255,r=(a&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,r,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,r,s=255]=t,e/=255,i/=255,r/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=$o.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const a=mn(t);a.isValid()&&({r:e,g:i,b:r,a:s}=a.rgba,e/=255,i/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=r,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((r,s)=>{t[s]=Math.min(Math.max(r,e),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof $o||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};wa.shared=new wa;wa._temp=new wa;wa.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ee=wa;const oS={cullArea:null,cullable:!1,cullableChildren:!0};class Y0{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(i=e.init)==null||i.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class lS{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Y0(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const Jn=new lS,cS={get isCachedAsTexture(){var n;return!!((n=this.renderGroup)!=null&&n.isCachedAsTexture)},cacheAsTexture(n){typeof n=="boolean"&&n===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(n===!0?{}:n))},updateCacheTexture(){var n;(n=this.renderGroup)==null||n.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(n){le("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(n)}};function uS(n,t,e){const i=n.length;let r;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(r=t;r<s;++r)n[r]=n[r+e];n.length=s}const hS={allowChildren:!0,removeChildren(n=0,t){const e=t??this.children.length,i=e-n,r=[];if(i>0&&i<=e){for(let a=e-1;a>=n;a--){const o=this.children[a];o&&(r.push(o),o.parent=null)}uS(this.children,n,e);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(r);for(let a=0;a<r.length;++a)this.emit("childRemoved",r[a],this,a),r[a].emit("removed",this);return r.length>0&&this._didViewChangeTick++,r}else if(i===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(n){const t=this.getChildAt(n);return this.removeChild(t)},getChildAt(n){if(n<0||n>=this.children.length)throw new Error(`getChildAt: Index (${n}) does not exist.`);return this.children[n]},setChildIndex(n,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(n),this.addChildAt(n,t)},getChildIndex(n){const t=this.children.indexOf(n);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(n,t){this.allowChildren||le(we,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${n}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(n.parent){const r=n.parent.children.indexOf(n);if(n.parent===this&&r===t)return n;r!==-1&&n.parent.children.splice(r,1)}t===e.length?e.push(n):e.splice(t,0,n),n.parent=this,n.didChange=!0,n._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(n),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",n,this,t),n.emit("added",this),n},swapChildren(n,t){if(n===t)return;const e=this.getChildIndex(n),i=this.getChildIndex(t);this.children[e]=t,this.children[i]=n;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var n;(n=this.parent)==null||n.removeChild(this)},reparentChild(...n){return n.length===1?this.reparentChildAt(n[0],this.children.length):(n.forEach(t=>this.reparentChildAt(t,this.children.length)),n[0])},reparentChildAt(n,t){if(n.parent===this)return this.setChildIndex(n,t),n;const e=n.worldTransform.clone();n.removeFromParent(),this.addChildAt(n,t);const i=this.worldTransform.clone();return i.invert(),e.prepend(i),n.setFromMatrix(e),n}},dS={collectRenderables(n,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(n,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,n):this.collectRenderablesWithEffects(n,t,e))},collectRenderablesSimple(n,t,e){const i=this.children,r=i.length;for(let s=0;s<r;s++)i[s].collectRenderables(n,t,e)},collectRenderablesWithEffects(n,t,e){const{renderPipes:i}=t;for(let r=0;r<this.effects.length;r++){const s=this.effects[r];i[s.pipe].push(s,this,n)}this.collectRenderablesSimple(n,t,e);for(let r=this.effects.length-1;r>=0;r--){const s=this.effects[r];i[s.pipe].pop(s,this,n)}}};class jg{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class fS{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return Jn.get(i.maskClass,t)}return t}returnMaskEffect(t){Jn.return(t)}}const Of=new fS;Xi.handleByList(se.MaskEffect,Of._effectClasses);const pS={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0)},addEffect(n){this.effects.indexOf(n)===-1&&(this.effects.push(n),this.effects.sort((e,i)=>e.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(n){const t=this.effects.indexOf(n);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(n){const t=this._maskEffect;(t==null?void 0:t.mask)!==n&&(t&&(this.removeEffect(t),Of.returnMaskEffect(t),this._maskEffect=null),n!=null&&(this._maskEffect=Of.getMaskEffect(n),this.addEffect(this._maskEffect)))},setMask(n){this._maskOptions={...this._maskOptions,...n},n.mask&&(this.mask=n.mask),this._markStructureAsChanged()},get mask(){var n;return(n=this._maskEffect)==null?void 0:n.mask},set filters(n){var s;!Array.isArray(n)&&n&&(n=[n]);const t=this._filterEffect||(this._filterEffect=new jg);n=n;const e=(n==null?void 0:n.length)>0,i=((s=t.filters)==null?void 0:s.length)>0,r=e!==i;n=Array.isArray(n)?n.slice(0):n,t.filters=Object.freeze(n),r&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=n??null))},get filters(){var n;return(n=this._filterEffect)==null?void 0:n.filters},set filterArea(n){this._filterEffect||(this._filterEffect=new jg),this._filterEffect.filterArea=n},get filterArea(){var n;return(n=this._filterEffect)==null?void 0:n.filterArea}},gS={label:null,get name(){return le(we,"Container.name property has been removed, use Container.label instead"),this.label},set name(n){le(we,"Container.name property has been removed, use Container.label instead"),this.label=n},getChildByName(n,t=!1){return this.getChildByLabel(n,t)},getChildByLabel(n,t=!1){const e=this.children;for(let i=0;i<e.length;i++){const r=e[i];if(r.label===n||n instanceof RegExp&&n.test(r.label))return r}if(t)for(let i=0;i<e.length;i++){const s=e[i].getChildByLabel(n,!0);if(s)return s}return null},getChildrenByLabel(n,t=!1,e=[]){const i=this.children;for(let r=0;r<i.length;r++){const s=i[r];(s.label===n||n instanceof RegExp&&n.test(s.label))&&e.push(s)}if(t)for(let r=0;r<i.length;r++)i[r].getChildrenByLabel(n,!0,e);return e}},ai=new Y0(Qt),tr=new Y0(on),mS=new Qt,yS={getFastGlobalBounds(n,t){t||(t=new on),t.clear(),this._getGlobalBoundsRecursive(!!n,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(n,t,e){let i=t;if(n&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(i=tr.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;i.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(n,i,e)}if(r){let s=!1;const a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(s||(s=!0,i.applyMatrix(a.worldTransform)),this.effects[o].addBounds(i,!0));s&&(i.applyMatrix(a.worldTransform.copyTo(mS).invert()),t.addBounds(i,this.relativeGroupTransform)),t.addBounds(i),tr.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),tr.return(i))}};function F5(n,t,e){e.clear();let i,r;return n.parent?t?i=n.parent.worldTransform:(r=ai.get().identity(),i=j0(n,r)):i=Qt.IDENTITY,O5(n,e,i,t),r&&ai.return(r),e.isValid||e.set(0,0,0,0),e}function O5(n,t,e,i){var o,c;if(!n.visible||!n.measurable)return;let r;i?r=n.worldTransform:(n.updateLocalTransform(),r=ai.get(),r.appendFrom(n.localTransform,e));const s=t,a=!!n.effects.length;if(a&&(t=tr.get().clear()),n.boundsArea)t.addRect(n.boundsArea,r);else{n.bounds&&(t.matrix=r,t.addBounds(n.bounds));for(let l=0;l<n.children.length;l++)O5(n.children[l],t,r,i)}if(a){for(let l=0;l<n.effects.length;l++)(c=(o=n.effects[l]).addBounds)==null||c.call(o,t);s.addBounds(t,Qt.IDENTITY),tr.return(t)}i||ai.return(r)}function j0(n,t){const e=n.parent;return e&&(j0(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function B5(n,t){if(n===16777215||!t)return t;if(t===16777215||!n)return n;const e=n>>16&255,i=n>>8&255,r=n&255,s=t>>16&255,a=t>>8&255,o=t&255,c=e*s/255|0,l=i*a/255|0,u=r*o/255|0;return(c<<16)+(l<<8)+u}const Xg=16777215;function Vg(n,t){return n===Xg?t:t===Xg?n:B5(n,t)}function zc(n){return((n&255)<<16)+(n&65280)+(n>>16&255)}const vS={getGlobalAlpha(n){if(n)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(n,t){if(t)return n.copyFrom(this.worldTransform);this.updateLocalTransform();const e=j0(this,ai.get().identity());return n.appendFrom(this.localTransform,e),ai.return(e),n},getGlobalTint(n){if(n)return this.renderGroup?zc(this.renderGroup.worldColor):this.parentRenderGroup?zc(Vg(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=Vg(t,e.localColor),e=e.parent;return zc(t)}};let sd=0;const qg=500;function oi(...n){sd!==qg&&(sd++,sd===qg?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...n))}function z5(n,t,e){return t.clear(),e||(e=Qt.IDENTITY),H5(n,t,e,n,!0),t.isValid||t.set(0,0,0,0),t}function H5(n,t,e,i,r){var c,l;let s;if(r)s=ai.get(),s=e.copyTo(s);else{if(!n.visible||!n.measurable)return;n.updateLocalTransform();const u=n.localTransform;s=ai.get(),s.appendFrom(u,e)}const a=t,o=!!n.effects.length;if(o&&(t=tr.get().clear()),n.boundsArea)t.addRect(n.boundsArea,s);else{n.renderPipeId&&(t.matrix=s,t.addBounds(n.bounds));const u=n.children;for(let h=0;h<u.length;h++)H5(u[h],t,s,i,!1)}if(o){for(let u=0;u<n.effects.length;u++)(l=(c=n.effects[u]).addLocalBounds)==null||l.call(c,t,i);a.addBounds(t,Qt.IDENTITY),tr.return(t)}ai.return(s)}function G5(n,t){const e=n.children;for(let i=0;i<e.length;i++){const r=e[i],s=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,o=t.index;(t.data[o]!==s||t.data[o+1]!==a)&&(t.data[t.index]=s,t.data[t.index+1]=a,t.didChange=!0),t.index=o+2,r.children.length&&G5(r,t)}return t.didChange}const xS=new Qt,_S={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(n,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=n/t*e:this.scale.x=e},_setHeight(n,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=n/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new on});const n=this._localBoundsCacheData;return n.index=1,n.didChange=!1,n.data[0]!==this._didViewChangeTick&&(n.didChange=!0,n.data[0]=this._didViewChangeTick),G5(this,n),n.didChange&&z5(this,n.localBounds,xS),n.localBounds},getBounds(n,t){return F5(this,n,t||new on)}},bS={_onRender:null,set onRender(n){const t=this.renderGroup||this.parentRenderGroup;if(!n){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=n},get onRender(){return this._onRender}},wS={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(n){this._zIndex!==n&&(this._zIndex=n,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(CS))}};function CS(n,t){return n._zIndex-t._zIndex}const SS={getGlobalPosition(n=new ei,t=!1){return this.parent?this.parent.toGlobal(this._position,n,t):(n.x=this._position.x,n.y=this._position.y),n},toGlobal(n,t,e=!1){const i=this.getGlobalTransform(ai.get(),e);return t=i.apply(n,t),ai.return(i),t},toLocal(n,t,e,i){t&&(n=t.toGlobal(n,e,i));const r=this.getGlobalTransform(ai.get(),i);return e=r.applyInverse(n,e),ai.return(r),e}};class W5{constructor(){this.uid=Ne("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let TS=0;class kS{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){const r=new cn({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new te({source:r,label:`texturePool_${TS++}`})}getOptimalTexture(t,e,i=1,r){let s=Math.ceil(t*i-1e-6),a=Math.ceil(e*i-1e-6);s=Ig(s),a=Ig(a);const o=(s<<17)+(a<<1)+(r?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let c=this._texturePool[o].pop();return c||(c=this.createTexture(s,a,r)),c.source._resolution=i,c.source.width=s/i,c.source.height=a/i,c.source.pixelWidth=s,c.source.pixelHeight=a,c.frame.x=0,c.frame.y=0,c.frame.width=t,c.frame.height=e,c.updateUvs(),this._poolKeyHash[c.uid]=o,c}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const i=this._texturePool[e];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this._texturePool={}}}const MS=new kS;class AS{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Qt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new W5,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(MS.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let i=0;i<e.length;i++)this.addChild(e[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let i=0;i<e.length;i++)this.removeChild(e[i])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let r=0;r<i.length;r++)this._getChildren(i[r],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Qt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Qt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Qt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function ES(n,t,e={}){for(const i in t)!e[i]&&t[i]!==void 0&&(n[i]=t[i])}const ad=new pi(null),od=new pi(null),ld=new pi(null,1,1),Kg=1,PS=2,cd=4;let Ue=class $5 extends Ln{constructor(t={}){var e,i;super(),this.uid=Ne("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Qt,this.relativeGroupTransform=new Qt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new pi(this,0,0),this._scale=ld,this._pivot=od,this._skew=ad,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],ES(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(r=>this.addChild(r)),(i=t.parent)==null||i.addChild(this)}static mixin(t){le("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Xi.mixin($5,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||le(we,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let r=0;r<t.length;r++)this.addChild(t[r]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=Jn.get(AS,this),this.groupTransform=Qt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),Jn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Qt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*WC}set angle(t){this.rotation=t*$C}get pivot(){return this._pivot===od&&(this._pivot=new pi(this,0,0)),this._pivot}set pivot(t){this._pivot===od&&(this._pivot=new pi(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===ad&&(this._skew=new pi(this,0,0)),this._skew}set skew(t){this._skew===ad&&(this._skew=new pi(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===ld&&(this._scale=new pi(this,1,1)),this._scale}set scale(t){this._scale===ld&&(this._scale=new pi(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,i.width),e!==void 0&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,r=this._pivot,s=this._position,a=i._x,o=i._y,c=r._x,l=r._y;e.a=this._cx*a,e.b=this._sx*a,e.c=this._cy*o,e.d=this._sy*o,e.tx=s._x-(c*e.a+l*e.c),e.ty=s._y-(c*e.b+l*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Kg,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=Ee.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Kg,this._onUpdate())}get tint(){return zc(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=PS,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=cd,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=cd,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=cd,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var r;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let s=0;s<e.length;++s)e[s].destroy(t);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}};Xi.mixin(Ue,hS,yS,SS,bS,_S,pS,gS,wS,oS,cS,vS,dS);class X0 extends Ue{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new on(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:r}=t;return i>=e.minX&&i<=e.maxX&&r>=e.minY&&r<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){const{renderPipes:r,renderableGC:s}=e;r.blendMode.setBlendMode(this,this.groupBlendMode,t),r[this.renderPipeId].addRenderable(this,t),s.addRenderable(this),this.didViewUpdate=!1;const o=this.children,c=o.length;for(let l=0;l<c;l++)o[l].collectRenderables(t,e,i)}}let Cr=class Bf extends X0{constructor(t=te.EMPTY){t instanceof te&&(t={texture:t});const{texture:e=te.EMPTY,anchor:i,roundPixels:r,width:s,height:a,...o}=t;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new pi({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=r??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(t,e=!1){return t instanceof te?new Bf(t):new Bf(te.from(t,e))}set texture(t){t||(t=te.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return ZC(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return le("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:r,height:s}=e.orig;i.minX=-t._x*r,i.maxX=i.minX+r,i.minY=-t._y*s,i.maxY=i.minY+s}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}};const DS=new on;function U5(n,t,e){const i=DS;n.measurable=!0,F5(n,e,i),t.addBoundsMask(i),n.measurable=!1}function Y5(n,t,e){const i=tr.get();n.measurable=!0;const r=ai.get().identity(),s=j5(n,e,r);z5(n,i,s),n.measurable=!1,t.addBoundsMask(i),ai.return(r),tr.return(i)}function j5(n,t,e){return n?(n!==t&&(j5(n.parent,t,e),n.updateLocalTransform(),e.append(n.localTransform)),e):(oi("Mask bounds, renderable is not inside the root container"),e)}class X5{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Cr),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||U5(this.mask,t,e)}addLocalBounds(t,e){Y5(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Cr}}X5.extension=se.MaskEffect;class V5{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}V5.extension=se.MaskEffect;class q5{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){U5(this.mask,t,e)}addLocalBounds(t,e){Y5(this.mask,t,e)}containsPoint(t,e){const i=this.mask;return e(i,t)}destroy(){this.reset()}static test(t){return t instanceof Ue}}q5.extension=se.MaskEffect;const LS={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")};let Zg=LS;const sn={get(){return Zg},set(n){Zg=n}};class K5 extends cn{constructor(t){t.resource||(t.resource=sn.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const r=super.resize(t,e,i);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}K5.extension=se.TextureSource;class Cu extends cn{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=sn.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,oi("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Cu.extension=se.TextureSource;var zf=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(zf||{});class ud{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Z5=class Ti{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ud(null,null,1/0),this.deltaMS=1/Ti.targetFPMS,this.elapsedMS=1/Ti.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=zf.NORMAL){return this._addListener(new ud(t,e,i))}addOnce(t,e,i=zf.NORMAL){return this._addListener(new ud(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ti.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Ti.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Ti._shared){const t=Ti._shared=new Ti;t.autoStart=!0,t._protected=!0}return Ti._shared}static get system(){if(!Ti._system){const t=Ti._system=new Ti;t.autoStart=!0,t._protected=!0}return Ti._system}};Z5.targetFPMS=.06;let mc=Z5,hd;async function RS(){return hd??(hd=(async()=>{var a;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(o=>{const c=document.createElement("video");c.onloadeddata=()=>o(c),c.onerror=()=>o(null),c.autoplay=!1,c.crossOrigin="anonymous",c.preload="auto",c.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",c.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(r),t.deleteTexture(i),(a=t.getExtension("WEBGL_lose_context"))==null||a.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),hd}const Uu=class Q5 extends cn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Q5.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=mc.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await RS(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(mc.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(mc.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(mc.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Uu.extension=se.TextureSource;Uu.defaultOptions={...cn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Uu.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let IS=Uu;const zs=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(i=>typeof i=="string"||e?t(i):i):n);class NS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||oi(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=zs(t);let r;for(let c=0;c<this.parsers.length;c++){const l=this.parsers[c];if(l.test(e)){r=l.getCacheableAssets(i,e);break}}const s=new Map(Object.entries(r||{}));r||i.forEach(c=>{s.set(c,e)});const a=[...s.keys()],o={cacheKeys:a,keys:i};i.forEach(c=>{this._cacheMap.set(c,o)}),a.forEach(c=>{const l=r?r[c]:e;this._cache.has(c)&&this._cache.get(c)!==l&&oi("[Cache] already has key:",c),this._cache.set(c,s.get(c))})}remove(t){if(!this._cacheMap.has(t)){oi(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Hs=new NS,Hf=[];Xi.handleByList(se.TextureSource,Hf);function J5(n={}){const t=n&&n.resource,e=t?n.resource:n,i=t?n:{resource:n};for(let r=0;r<Hf.length;r++){const s=Hf[r];if(s.test(e))return new s(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function FS(n={},t=!1){const e=n&&n.resource,i=e?n.resource:n,r=e?n:{resource:n};if(!t&&Hs.has(i))return Hs.get(i);const s=new te({source:J5(r)});return s.on("destroy",()=>{Hs.has(i)&&Hs.remove(i)}),t||Hs.set(i,s),s}function OS(n,t=!1){return typeof n=="string"?Hs.get(n):n instanceof cn?new te({source:n}):FS(n,t)}te.from=OS;cn.from=J5;Xi.add(X5,V5,q5,IS,Cu,K5,U0);var tv=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(tv||{});function Zi(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function $a(n){return n.split("?")[0].split("#")[0]}function BS(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zS(n,t,e){return n.replace(new RegExp(BS(t),"g"),e)}function HS(n,t){let e="",i=0,r=-1,s=0,a=-1;for(let o=0;o<=n.length;++o){if(o<n.length)a=n.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const c=e.lastIndexOf("/");if(c!==e.length-1){c===-1?(e="",i=0):(e=e.slice(0,c),i=e.length-1-e.lastIndexOf("/")),r=o,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,r=o,s=0;continue}}}else e.length>0?e+=`/${n.slice(r+1,o)}`:e=n.slice(r+1,o),i=o-r-1;r=o,s=0}else a===46&&s!==-1?++s:s=-1}return e}const kl={toPosix(n){return zS(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Zi(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(Zi(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const i=$a(this.toPosix(t??sn.get().getBaseUrl())),r=$a(this.toPosix(e??this.rootname(i)));return n=this.toPosix(n),n.startsWith("/")?kl.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(Zi(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const i=n.endsWith("/");return n=HS(n),n.length>0&&i&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return Zi(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const i=n[e];if(Zi(i),i.length>0)if(t===void 0)t=i;else{const r=n[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(Zi(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let i=-1,r=!0;const s=this.getProtocol(n),a=n;n=n.slice(s.length);for(let o=n.length-1;o>=1;--o)if(t=n.charCodeAt(o),t===47){if(!r){i=o;break}}else r=!1;return i===-1?e?"/":this.isUrl(a)?s+n:s:e&&i===1?"//":s+n.slice(0,i)},rootname(n){Zi(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){Zi(n),t&&Zi(t),n=$a(this.toPosix(n));let e=0,i=-1,r=!0,s;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let a=t.length-1,o=-1;for(s=n.length-1;s>=0;--s){const c=n.charCodeAt(s);if(c===47){if(!r){e=s+1;break}}else o===-1&&(r=!1,o=s+1),a>=0&&(c===t.charCodeAt(a)?--a===-1&&(i=s):(a=-1,i=o))}return e===i?i=o:i===-1&&(i=n.length),n.slice(e,i)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!r){e=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":n.slice(e,i)},extname(n){Zi(n),n=$a(this.toPosix(n));let t=-1,e=0,i=-1,r=!0,s=0;for(let a=n.length-1;a>=0;--a){const o=n.charCodeAt(a);if(o===47){if(!r){e=a+1;break}continue}i===-1&&(r=!1,i=a+1),o===46?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":n.slice(t,i)},parse(n){Zi(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=$a(this.toPosix(n));let e=n.charCodeAt(0);const i=this.isAbsolute(n);let r;t.root=this.rootname(n),i||this.hasProtocol(n)?r=1:r=0;let s=-1,a=0,o=-1,c=!0,l=n.length-1,u=0;for(;l>=r;--l){if(e=n.charCodeAt(l),e===47){if(!c){a=l+1;break}continue}o===-1&&(c=!1,o=l+1),e===46?s===-1?s=l:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||o===-1||u===0||u===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&i?t.base=t.name=n.slice(1,o):t.base=t.name=n.slice(a,o)):(a===0&&i?(t.name=n.slice(1,s),t.base=n.slice(1,o)):(t.name=n.slice(a,s),t.base=n.slice(a,o)),t.ext=n.slice(s,o)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function ev(n,t,e,i,r){const s=t[e];for(let a=0;a<s.length;a++){const o=s[a];e<t.length-1?ev(n.replace(i[e],o),t,e+1,i,r):r.push(n.replace(i[e],o))}}function GS(n){const t=/\{(.*?)\}/g,e=n.match(t),i=[];if(e){const r=[];e.forEach(s=>{const a=s.substring(1,s.length-1).split(",");r.push(a)}),ev(n,r,0,e,i)}else i.push(n);return i}const Qg=n=>!Array.isArray(n);class iv{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return zs(e||i,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>(a==null?void 0:a.src)??a):s!=null&&s.src?s.src:s,!0)}addManifest(t){this._manifest&&oi("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];let r=e;Array.isArray(e)||(r=Object.entries(e).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),r.forEach(s=>{const a=s.src,o=s.alias;let c;if(typeof o=="string"){const l=this._createBundleAssetId(t,o);i.push(l),c=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(t,u));i.push(...l),c=[...o,...l]}this.add({...s,alias:c,src:a})}),this._bundles[t]=i}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let i;i=s=>{this.hasKey(s)&&oi(`[Resolver] already has key: ${s} overwriting`)},zs(e).forEach(s=>{const{src:a}=s;let{data:o,format:c,loadParser:l}=s;const u=zs(a).map(f=>typeof f=="string"?GS(f):Array.isArray(f)?f:[f]),h=this.getAlias(s);Array.isArray(h)?h.forEach(i):i(h);const p=[];u.forEach(f=>{f.forEach(x=>{let y={};if(typeof x!="object"){y.src=x;for(let d=0;d<this._parsers.length;d++){const _=this._parsers[d];if(_.test(x)){y=_.parse(x);break}}}else o=x.data??o,c=x.format??c,l=x.loadParser??l,y={...y,...x};if(!h)throw new Error(`[Resolver] alias is undefined for this asset: ${y.src}`);y=this._buildResolvedAsset(y,{aliases:h,data:o,format:c,loadParser:l}),p.push(y)})}),h.forEach(f=>{this._assetMap[f]=p})})}resolveBundle(t){const e=Qg(t);t=zs(t);const i={};return t.forEach(r=>{const s=this._bundles[r];if(s){const a=this.resolve(s),o={};for(const c in a){const l=a[c];o[this._extractAssetIdFromBundle(r,c)]=l}i[r]=o}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const r in e)i[r]=e[r].src;return i}return e.src}resolve(t){const e=Qg(t);t=zs(t);const i={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const a=this._getPreferredOrder(s);a==null||a.priority.forEach(o=>{a.params[o].forEach(c=>{const l=s.filter(u=>u[o]?u[o]===c:!1);l.length&&(s=l)})}),this._resolverHash[r]=s[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});i[r]=this._resolverHash[r]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:i,data:r,loadParser:s,format:a}=e;return(this._basePath||this._rootPath)&&(t.src=kl.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=s??t.loadParser,t.format=a??t.format??WS(t.src),t}}iv.RETINA_PREFIX=/@([0-9\.]+)x/;function WS(n){return n.split(".").pop().split("?").shift().split("#").shift()}const Jg=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n},nv=class Uo{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof te?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Uo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=Uo.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const r=this._frameKeys[e],s=this._frames[r],a=s.frame;if(a){let o=null,c=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new He(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?o=new He(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new He(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(c=new He(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new te({source:this.textureSource,frame:o,orig:u,trim:c,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:r.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Uo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Uo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};nv.BATCH_SIZE=1e3;let tm=nv;const $S=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function rv(n,t,e){const i={};if(n.forEach(r=>{i[r]=t}),Object.keys(t.textures).forEach(r=>{i[r]=t.textures[r]}),!e){const r=kl.dirname(n[0]);t.linkedSheets.forEach((s,a)=>{const o=rv([`${r}/${t.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(i,o)})}return i}const US={extension:se.Asset,cache:{test:n=>n instanceof tm,getCacheableAssets:(n,t)=>rv(n,t,!1)},resolver:{extension:{type:se.ResolveParser,name:"resolveSpritesheet"},test:n=>{const e=n.split("?")[0].split("."),i=e.pop(),r=e.pop();return i==="json"&&$S.includes(r)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=iv.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:se.LoadParser,priority:tv.Normal,name:"spritesheetLoader"},async testParse(n,t){return kl.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var u,h;const{texture:i,imageFilename:r,textureOptions:s}=(t==null?void 0:t.data)??{};let a=kl.dirname(t.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let o;if(i instanceof te)o=i;else{const p=Jg(a+(r??n.meta.image),t.src);o=(await e.load([{src:p,data:s}]))[p]}const c=new tm(o.source,n);await c.parse();const l=(u=n==null?void 0:n.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(l)){const p=[];for(const x of l){if(typeof x!="string")continue;let y=a+x;(h=t.data)!=null&&h.ignoreMultiPack||(y=Jg(y,t.src),p.push(e.load({src:y,data:{textureOptions:s,ignoreMultiPack:!0}})))}const f=await Promise.all(p);c.linkedSheets=f,f.forEach(x=>{x.linkedSheets=[c].concat(c.linkedSheets.filter(y=>y!==x))})}return c},async unload(n,t,e){await e.unload(n.textureSource._sourceOrigin),n.destroy(!1)}}};Xi.add(US);const dd=Object.create(null),em=Object.create(null);function V0(n,t){let e=em[n];return e===void 0&&(dd[t]===void 0&&(dd[t]=1),em[n]=e=dd[t]++),e}let Ps;function sv(){return(!Ps||Ps!=null&&Ps.isContextLost())&&(Ps=sn.get().createCanvas().getContext("webgl",{})),Ps}let yc;function YS(){if(!yc){yc="mediump";const n=sv();n&&n.getShaderPrecisionFormat&&(yc=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?"highp":"mediump")}return yc}function jS(n,t,e){return t?n:e?(n=n.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${n}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${n}
        `}function XS(n,t,e){const i=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(n.substring(0,9)!=="precision"){let r=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return r==="highp"&&i!=="highp"&&(r="mediump"),`precision ${r} float;
${n}`}else if(i!=="highp"&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}function VS(n,t){return t?`#version 300 es
${n}`:n}const qS={},KS={};function ZS(n,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const i=e?qS:KS;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,n.indexOf("#define SHADER_NAME")!==-1?n:`${`#define SHADER_NAME ${t}`}
${n}`}function QS(n,t){return t?n.replace("#version 300 es",""):n}const fd={stripVersion:QS,ensurePrecision:XS,addProgramDefines:jS,setProgramName:ZS,insertVersion:VS},pd=Object.create(null),av=class Gf{constructor(t){t={...Gf.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:YS()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let r=t.fragment,s=t.vertex;Object.keys(fd).forEach(a=>{const o=i[a];r=fd[a](r,o,!0),s=fd[a](s,o,!1)}),this.fragment=r,this.vertex=s,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=V0(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return pd[e]||(pd[e]=new Gf(t)),pd[e]}};av.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let ov=av;const im={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function JS(n){return im[n]??im.float32}const tT={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function eT({source:n,entryPoint:t}){const e={},i=n.indexOf(`fn ${t}`);if(i!==-1){const r=n.indexOf("->",i);if(r!==-1){const s=n.substring(i,r),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(s))!==null;){const c=tT[o[3]]??"float32";e[o[2]]={location:parseInt(o[1],10),format:c,stride:JS(c).stride,offset:0,instance:!1,start:0}}}}return e}function gd(n){var h,p;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,l=(h=n.match(t))==null?void 0:h.map(f=>({group:parseInt(f.match(e)[1],10),binding:parseInt(f.match(i)[1],10),name:f.match(r)[2],isUniform:f.match(r)[1]==="<uniform>",type:f.match(s)[1]}));if(!l)return{groups:[],structs:[]};const u=((p=n.match(a))==null?void 0:p.map(f=>{const x=f.match(c)[1],y=f.match(o).reduce((d,_)=>{const[g,m]=_.split(":");return d[g.trim()]=m.trim(),d},{});return y?{name:x,members:y}:null}).filter(({name:f})=>l.some(x=>x.type===f)))??[];return{groups:l,structs:u}}var Yo=(n=>(n[n.VERTEX=1]="VERTEX",n[n.FRAGMENT=2]="FRAGMENT",n[n.COMPUTE=4]="COMPUTE",n))(Yo||{});function iT({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:Yo.VERTEX|Yo.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:Yo.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:Yo.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function nT({groups:n}){const t=[];for(let e=0;e<n.length;e++){const i=n[e];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function rT(n,t){const e=new Set,i=new Set,r=[...n.structs,...t.structs].filter(a=>e.has(a.name)?!1:(e.add(a.name),!0)),s=[...n.groups,...t.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return i.has(o)?!1:(i.add(o),!0)});return{structs:r,groups:s}}const md=Object.create(null);class Yu{constructor(t){var o,c;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:r,gpuLayout:s,name:a}=t;if(this.name=a,this.fragment=e,this.vertex=i,e.source===i.source){const l=gd(e.source);this.structsAndGroups=l}else{const l=gd(i.source),u=gd(e.source);this.structsAndGroups=rT(l,u)}this.layout=r??nT(this.structsAndGroups),this.gpuLayout=s??iT(this.structsAndGroups),this.autoAssignGlobalUniforms=((o=this.layout[0])==null?void 0:o.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((c=this.layout[1])==null?void 0:c.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=V0(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=eT(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return md[e]||(md[e]=new Yu(t)),md[e]}}const lv=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],sT=lv.reduce((n,t)=>(n[t]=!0,n),{});function aT(n,t){switch(n){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const cv=class uv{constructor(t,e){this._touched=0,this.uid=Ne("uniform"),this._resourceType="uniformGroup",this._resourceId=Ne("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...uv.defaultOptions,...e},this.uniformStructures=t;const i={};for(const r in t){const s=t[r];if(s.name=r,s.size=s.size??1,!sT[s.type])throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${lv.join(", ")}`);s.value??(s.value=aT(s.type,s.size)),i[r]=s.value}this.uniforms=i,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=V0(Object.keys(i).map(r=>`${r}-${t[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};cv.defaultOptions={ubo:!1,isStatic:!1};let hv=cv;class Hc{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const r=t[i];this.setResource(r,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){var r,s;const i=this.resources[e];t!==i&&(i&&((r=t.off)==null||r.call(t,"change",this.onResourceChange,this)),(s=t.on)==null||s.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){var e;const t=this.resources;for(const i in t){const r=t[i];(e=r.off)==null||e.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}var Wf=(n=>(n[n.WEBGL=1]="WEBGL",n[n.WEBGPU=2]="WEBGPU",n[n.BOTH=3]="BOTH",n))(Wf||{});class q0 extends Ln{constructor(t){super(),this.uid=Ne("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:r,resources:s,compatibleRenderers:a,groupMap:o}=t;this.gpuProgram=e,this.glProgram=i,a===void 0&&(a=0,e&&(a|=Wf.WEBGPU),i&&(a|=Wf.WEBGL)),this.compatibleRenderers=a;const c={};if(!s&&!r&&(s={}),s&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&r&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&r&&o)for(const l in o)for(const u in o[l]){const h=o[l][u];c[h]={group:l,binding:u,name:h}}else if(e&&r&&!o){const l=e.structsAndGroups.groups;o={},l.forEach(u=>{o[u.group]=o[u.group]||{},o[u.group][u.binding]=u.name,c[u.name]=u})}else if(s){r={},o={},e&&e.structsAndGroups.groups.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,c[h.name]=h});let l=0;for(const u in s)c[u]||(r[99]||(r[99]=new Hc,this._ownedBindGroups.push(r[99])),c[u]={group:99,binding:l,name:u},o[99]=o[99]||{},o[99][l]=u,l++);for(const u in s){const h=u;let p=s[u];!p.source&&!p._resourceType&&(p=new hv(p));const f=c[h];f&&(r[f.group]||(r[f.group]=new Hc,this._ownedBindGroups.push(r[f.group])),r[f.group].setResource(p,f.binding))}}this.groups=r,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(r,c)}addResource(t,e,i){var r,s;(r=this._uniformBindMap)[e]||(r[e]={}),(s=this._uniformBindMap[e])[i]||(s[i]=t),this.groups[e]||(this.groups[e]=new Hc,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const r in e){const s=e[r];Object.defineProperty(i,s.name,{get(){return t[s.group].getResource(s.binding)},set(a){t[s.group].setResource(a,s.binding)}})}return i}destroy(t=!1){var e,i;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...r}=t;let s,a;return e&&(s=Yu.from(e)),i&&(a=ov.from(i)),new q0({gpuProgram:s,glProgram:a,...r})}}const $f=[];Xi.handleByNamedList(se.Environment,$f);async function oT(n){if(!n)for(let t=0;t<$f.length;t++){const e=$f[t];if(e.value.test()){await e.value.load();return}}}let Ua;function lT(){if(typeof Ua=="boolean")return Ua;try{Ua=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ua=!1}return Ua}var vc={exports:{}},nm;function cT(){if(nm)return vc.exports;nm=1,vc.exports=n,vc.exports.default=n;function n(E,I,B){B=B||2;var $=I&&I.length,Y=$?I[0]*B:E.length,q=t(E,0,Y,B,!0),G=[];if(!q||q.next===q.prev)return G;var F,U,j,et,V,tt,z;if($&&(q=c(E,I,q,B)),E.length>80*B){F=j=E[0],U=et=E[1];for(var H=B;H<Y;H+=B)V=E[H],tt=E[H+1],V<F&&(F=V),tt<U&&(U=tt),V>j&&(j=V),tt>et&&(et=tt);z=Math.max(j-F,et-U),z=z!==0?32767/z:0}return i(q,G,B,F,U,z,0),G}function t(E,I,B,$,Y){var q,G;if(Y===A(E,I,B,$)>0)for(q=I;q<B;q+=$)G=D(q,E[q],E[q+1],G);else for(q=B-$;q>=I;q-=$)G=D(q,E[q],E[q+1],G);return G&&v(G,G.next)&&(C(G),G=G.next),G}function e(E,I){if(!E)return E;I||(I=E);var B=E,$;do if($=!1,!B.steiner&&(v(B,B.next)||m(B.prev,B,B.next)===0)){if(C(B),B=I=B.prev,B===B.next)break;$=!0}else B=B.next;while($||B!==I);return I}function i(E,I,B,$,Y,q,G){if(E){!G&&q&&f(E,$,Y,q);for(var F=E,U,j;E.prev!==E.next;){if(U=E.prev,j=E.next,q?s(E,$,Y,q):r(E)){I.push(U.i/B|0),I.push(E.i/B|0),I.push(j.i/B|0),C(E),E=j.next,F=j.next;continue}if(E=j,E===F){G?G===1?(E=a(e(E),I,B),i(E,I,B,$,Y,q,2)):G===2&&o(E,I,B,$,Y,q):i(e(E),I,B,$,Y,q,1);break}}}}function r(E){var I=E.prev,B=E,$=E.next;if(m(I,B,$)>=0)return!1;for(var Y=I.x,q=B.x,G=$.x,F=I.y,U=B.y,j=$.y,et=Y<q?Y<G?Y:G:q<G?q:G,V=F<U?F<j?F:j:U<j?U:j,tt=Y>q?Y>G?Y:G:q>G?q:G,z=F>U?F>j?F:j:U>j?U:j,H=$.next;H!==I;){if(H.x>=et&&H.x<=tt&&H.y>=V&&H.y<=z&&_(Y,F,q,U,G,j,H.x,H.y)&&m(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function s(E,I,B,$){var Y=E.prev,q=E,G=E.next;if(m(Y,q,G)>=0)return!1;for(var F=Y.x,U=q.x,j=G.x,et=Y.y,V=q.y,tt=G.y,z=F<U?F<j?F:j:U<j?U:j,H=et<V?et<tt?et:tt:V<tt?V:tt,X=F>U?F>j?F:j:U>j?U:j,K=et>V?et>tt?et:tt:V>tt?V:tt,rt=y(z,H,I,B,$),nt=y(X,K,I,B,$),Q=E.prevZ,it=E.nextZ;Q&&Q.z>=rt&&it&&it.z<=nt;){if(Q.x>=z&&Q.x<=X&&Q.y>=H&&Q.y<=K&&Q!==Y&&Q!==G&&_(F,et,U,V,j,tt,Q.x,Q.y)&&m(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,it.x>=z&&it.x<=X&&it.y>=H&&it.y<=K&&it!==Y&&it!==G&&_(F,et,U,V,j,tt,it.x,it.y)&&m(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;Q&&Q.z>=rt;){if(Q.x>=z&&Q.x<=X&&Q.y>=H&&Q.y<=K&&Q!==Y&&Q!==G&&_(F,et,U,V,j,tt,Q.x,Q.y)&&m(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;it&&it.z<=nt;){if(it.x>=z&&it.x<=X&&it.y>=H&&it.y<=K&&it!==Y&&it!==G&&_(F,et,U,V,j,tt,it.x,it.y)&&m(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function a(E,I,B){var $=E;do{var Y=$.prev,q=$.next.next;!v(Y,q)&&S(Y,$,$.next,q)&&P(Y,q)&&P(q,Y)&&(I.push(Y.i/B|0),I.push($.i/B|0),I.push(q.i/B|0),C($),C($.next),$=E=q),$=$.next}while($!==E);return e($)}function o(E,I,B,$,Y,q){var G=E;do{for(var F=G.next.next;F!==G.prev;){if(G.i!==F.i&&g(G,F)){var U=k(G,F);G=e(G,G.next),U=e(U,U.next),i(G,I,B,$,Y,q,0),i(U,I,B,$,Y,q,0);return}F=F.next}G=G.next}while(G!==E)}function c(E,I,B,$){var Y=[],q,G,F,U,j;for(q=0,G=I.length;q<G;q++)F=I[q]*$,U=q<G-1?I[q+1]*$:E.length,j=t(E,F,U,$,!1),j===j.next&&(j.steiner=!0),Y.push(d(j));for(Y.sort(l),q=0;q<Y.length;q++)B=u(Y[q],B);return B}function l(E,I){return E.x-I.x}function u(E,I){var B=h(E,I);if(!B)return I;var $=k(B,E);return e($,$.next),e(B,B.next)}function h(E,I){var B=I,$=E.x,Y=E.y,q=-1/0,G;do{if(Y<=B.y&&Y>=B.next.y&&B.next.y!==B.y){var F=B.x+(Y-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(F<=$&&F>q&&(q=F,G=B.x<B.next.x?B:B.next,F===$))return G}B=B.next}while(B!==I);if(!G)return null;var U=G,j=G.x,et=G.y,V=1/0,tt;B=G;do $>=B.x&&B.x>=j&&$!==B.x&&_(Y<et?$:q,Y,j,et,Y<et?q:$,Y,B.x,B.y)&&(tt=Math.abs(Y-B.y)/($-B.x),P(B,E)&&(tt<V||tt===V&&(B.x>G.x||B.x===G.x&&p(G,B)))&&(G=B,V=tt)),B=B.next;while(B!==U);return G}function p(E,I){return m(E.prev,E,I.prev)<0&&m(I.next,E,E.next)<0}function f(E,I,B,$){var Y=E;do Y.z===0&&(Y.z=y(Y.x,Y.y,I,B,$)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==E);Y.prevZ.nextZ=null,Y.prevZ=null,x(Y)}function x(E){var I,B,$,Y,q,G,F,U,j=1;do{for(B=E,E=null,q=null,G=0;B;){for(G++,$=B,F=0,I=0;I<j&&(F++,$=$.nextZ,!!$);I++);for(U=j;F>0||U>0&&$;)F!==0&&(U===0||!$||B.z<=$.z)?(Y=B,B=B.nextZ,F--):(Y=$,$=$.nextZ,U--),q?q.nextZ=Y:E=Y,Y.prevZ=q,q=Y;B=$}q.nextZ=null,j*=2}while(G>1);return E}function y(E,I,B,$,Y){return E=(E-B)*Y|0,I=(I-$)*Y|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,E|I<<1}function d(E){var I=E,B=E;do(I.x<B.x||I.x===B.x&&I.y<B.y)&&(B=I),I=I.next;while(I!==E);return B}function _(E,I,B,$,Y,q,G,F){return(Y-G)*(I-F)>=(E-G)*(q-F)&&(E-G)*($-F)>=(B-G)*(I-F)&&(B-G)*(q-F)>=(Y-G)*($-F)}function g(E,I){return E.next.i!==I.i&&E.prev.i!==I.i&&!L(E,I)&&(P(E,I)&&P(I,E)&&N(E,I)&&(m(E.prev,E,I.prev)||m(E,I.prev,I))||v(E,I)&&m(E.prev,E,E.next)>0&&m(I.prev,I,I.next)>0)}function m(E,I,B){return(I.y-E.y)*(B.x-I.x)-(I.x-E.x)*(B.y-I.y)}function v(E,I){return E.x===I.x&&E.y===I.y}function S(E,I,B,$){var Y=w(m(E,I,B)),q=w(m(E,I,$)),G=w(m(B,$,E)),F=w(m(B,$,I));return!!(Y!==q&&G!==F||Y===0&&M(E,B,I)||q===0&&M(E,$,I)||G===0&&M(B,E,$)||F===0&&M(B,I,$))}function M(E,I,B){return I.x<=Math.max(E.x,B.x)&&I.x>=Math.min(E.x,B.x)&&I.y<=Math.max(E.y,B.y)&&I.y>=Math.min(E.y,B.y)}function w(E){return E>0?1:E<0?-1:0}function L(E,I){var B=E;do{if(B.i!==E.i&&B.next.i!==E.i&&B.i!==I.i&&B.next.i!==I.i&&S(B,B.next,E,I))return!0;B=B.next}while(B!==E);return!1}function P(E,I){return m(E.prev,E,E.next)<0?m(E,I,E.next)>=0&&m(E,E.prev,I)>=0:m(E,I,E.prev)<0||m(E,E.next,I)<0}function N(E,I){var B=E,$=!1,Y=(E.x+I.x)/2,q=(E.y+I.y)/2;do B.y>q!=B.next.y>q&&B.next.y!==B.y&&Y<(B.next.x-B.x)*(q-B.y)/(B.next.y-B.y)+B.x&&($=!$),B=B.next;while(B!==E);return $}function k(E,I){var B=new T(E.i,E.x,E.y),$=new T(I.i,I.x,I.y),Y=E.next,q=I.prev;return E.next=I,I.prev=E,B.next=Y,Y.prev=B,$.next=B,B.prev=$,q.next=$,$.prev=q,$}function D(E,I,B,$){var Y=new T(E,I,B);return $?(Y.next=$.next,Y.prev=$,$.next.prev=Y,$.next=Y):(Y.prev=Y,Y.next=Y),Y}function C(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function T(E,I,B){this.i=E,this.x=I,this.y=B,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(E,I,B,$){var Y=I&&I.length,q=Y?I[0]*B:E.length,G=Math.abs(A(E,0,q,B));if(Y)for(var F=0,U=I.length;F<U;F++){var j=I[F]*B,et=F<U-1?I[F+1]*B:E.length;G-=Math.abs(A(E,j,et,B))}var V=0;for(F=0;F<$.length;F+=3){var tt=$[F]*B,z=$[F+1]*B,H=$[F+2]*B;V+=Math.abs((E[tt]-E[H])*(E[z+1]-E[tt+1])-(E[tt]-E[z])*(E[H+1]-E[tt+1]))}return G===0&&V===0?0:Math.abs((V-G)/G)};function A(E,I,B,$){for(var Y=0,q=I,G=B-$;q<B;q+=$)Y+=(E[G]-E[q])*(E[q+1]+E[G+1]),G=q;return Y}return n.flatten=function(E){for(var I=E[0][0].length,B={vertices:[],holes:[],dimensions:I},$=0,Y=0;Y<E.length;Y++){for(var q=0;q<E[Y].length;q++)for(var G=0;G<I;G++)B.vertices.push(E[Y][q][G]);Y>0&&($+=E[Y-1].length,B.holes.push($))}return B},vc.exports}var uT=cT();const hT=Au(uT);var dv=(n=>(n[n.NONE=0]="NONE",n[n.COLOR=16384]="COLOR",n[n.STENCIL=1024]="STENCIL",n[n.DEPTH=256]="DEPTH",n[n.COLOR_DEPTH=16640]="COLOR_DEPTH",n[n.COLOR_STENCIL=17408]="COLOR_STENCIL",n[n.DEPTH_STENCIL=1280]="DEPTH_STENCIL",n[n.ALL=17664]="ALL",n))(dv||{});class dT{constructor(t){this.items=[],this._name=t}emit(t,e,i,r,s,a,o,c){const{name:l,items:u}=this;for(let h=0,p=u.length;h<p;h++)u[h][l](t,e,i,r,s,a,o,c);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const fT=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],fv=class pv extends Ln{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...fT,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await oT(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...pv.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,e){let i=t;if(i instanceof Ue&&(i={container:i},e&&(le(we,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const r=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=r?i.clearColor:Ee.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const r=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==r&&this.runners.resolutionChange.emit(i)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=dv.ALL);const{clear:i,clearColor:r,target:s}=t;Ee.shared.setValue(r??this.background.colorRgba),e.renderTarget.clear(s,i,Ee.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new dT(e)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const r in this.runners)this.runners[r].add(i);return this}_addPipes(t,e){const i=e.reduce((r,s)=>(r[s.name]=s.value,r),{});t.forEach(r=>{const s=r.value,a=r.name,o=i[a];this.renderPipes[a]=new s(this,o?new o:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!lT())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};fv.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let gv=fv,xc;function pT(n){return xc!==void 0||(xc=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:n??gv.defaultOptions.failIfMajorPerformanceCaveat};try{if(!sn.get().getWebGLRenderingContext())return!1;let r=sn.get().createCanvas().getContext("webgl",t);const s=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const a=r.getExtension("WEBGL_lose_context");a&&a.loseContext()}return r=null,s}catch{return!1}})()),xc}let _c;async function gT(n={}){return _c!==void 0||(_c=await(async()=>{const t=sn.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(n)).requestDevice(),!0}catch{return!1}})()),_c}const rm=["webgl","webgpu","canvas"];async function mT(n){let t=[];n.preference?(t.push(n.preference),rm.forEach(s=>{s!==n.preference&&t.push(s)})):t=rm.slice();let e,i={};for(let s=0;s<t.length;s++){const a=t[s];if(a==="webgpu"&&await gT()){const{WebGPURenderer:o}=await wu(async()=>{const{WebGPURenderer:c}=await import("./WebGPURenderer-BFiCowuc.js");return{WebGPURenderer:c}},__vite__mapDeps([4,2,5,3]),import.meta.url);e=o,i={...n,...n.webgpu};break}else if(a==="webgl"&&pT(n.failIfMajorPerformanceCaveat??gv.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await wu(async()=>{const{WebGLRenderer:c}=await import("./WebGLRenderer-Bb4WvEDC.js");return{WebGLRenderer:c}},__vite__mapDeps([6,2,5]),import.meta.url);e=o,i={...n,...n.webgl};break}else if(a==="canvas")throw i={...n},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!e)throw new Error("No available renderer for the current environment");const r=new e;return await r.init(i),r}const mv="8.8.1";class yv{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,mv)}static destroy(){}}yv.extension=se.Application;class yT{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,mv)}destroy(){this._renderer=null}}yT.extension={type:[se.WebGLSystem,se.WebGPUSystem],name:"initHook",priority:-10};const vv=class Uf{constructor(...t){this.stage=new Ue,t[0]!==void 0&&le(we,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await mT(t),Uf._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return le(we,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const i=Uf._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};vv._plugins=[];let xv=vv;Xi.handleByList(se.Application,xv._plugins);Xi.add(yv);const sm=[{offset:0,color:"white"},{offset:1,color:"black"}],K0=class Yf{constructor(...t){this.uid=Ne("fillGradient"),this.type="linear",this.colorStops=[];let e=vT(t);e={...e.type==="radial"?Yf.defaultRadialOptions:Yf.defaultLinearOptions,...A5(e)},this._textureSize=e.textureSize,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Ee.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:sm,e=this._textureSize,{canvas:i,context:r}=om(e,1),s=r.createLinearGradient(0,0,this._textureSize,0);am(s,t),r.fillStyle=s,r.fillRect(0,0,e,1),this.texture=new te({source:new Cu({resource:i})});const{x:a,y:o}=this.start,{x:c,y:l}=this.end,u=new Qt,h=c-a,p=l-o,f=Math.sqrt(h*h+p*p),x=Math.atan2(p,h);u.scale(f/e,1),u.rotate(x),u.translate(a,o),this.textureSpace==="local"&&u.scale(e,e),this.transform=u}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:sm,e=this._textureSize,{canvas:i,context:r}=om(e,e),{x:s,y:a}=this.center,{x:o,y:c}=this.outerCenter,l=this.innerRadius,u=this.outerRadius,h=o-u,p=c-u,f=e/(u*2),x=(s-h)*f,y=(a-p)*f,d=r.createRadialGradient(x,y,l*f,(o-h)*f,(c-p)*f,u*f);am(d,t),r.fillStyle=t[t.length-1].color,r.fillRect(0,0,e,e),r.fillStyle=d,r.translate(x,y),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-x,-y),r.fillRect(0,0,e,e),this.texture=new te({source:new Cu({resource:i,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const _=new Qt;_.scale(1/f,1/f),_.translate(h,p),this.textureSpace==="local"&&_.scale(e,e),this.transform=_}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};K0.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};K0.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let ls=K0;function am(n,t){for(let e=0;e<t.length;e++){const i=t[e];n.addColorStop(i.offset,i.color)}}function om(n,t){const e=sn.get().createCanvas(n,t),i=e.getContext("2d");return{canvas:e,context:i}}function vT(n){let t=n[0]??{};return(typeof t=="number"||n[1])&&(le("8.5.2","use options object instead"),t={type:"linear",start:{x:n[0],y:n[1]},end:{x:n[2],y:n[3]},textureSpace:n[4],textureSize:n[5]??ls.defaultLinearOptions.textureSize}),t}const lm={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Z0{constructor(t,e){this.uid=Ne("fillPattern"),this.transform=new Qt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=lm[e].addressModeU,t.source.style.addressModeV=lm[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var yd,cm;function xT(){if(cm)return yd;cm=1,yd=e;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(s){var a=[];return s.replace(t,function(o,c,l){var u=c.toLowerCase();for(l=r(l),u=="m"&&l.length>2&&(a.push([c].concat(l.splice(0,2))),u="l",c=c=="m"?"l":"L");;){if(l.length==n[u])return l.unshift(c),a.push(l);if(l.length<n[u])throw new Error("malformed path data");a.push([c].concat(l.splice(0,n[u])))}}),a}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function r(s){var a=s.match(i);return a?a.map(Number):[]}return yd}var _T=xT();const bT=Au(_T);function wT(n,t){const e=bT(n),i=[];let r=null,s=0,a=0;for(let o=0;o<e.length;o++){const c=e[o],l=c[0],u=c;switch(l){case"M":s=u[1],a=u[2],t.moveTo(s,a);break;case"m":s+=u[1],a+=u[2],t.moveTo(s,a);break;case"H":s=u[1],t.lineTo(s,a);break;case"h":s+=u[1],t.lineTo(s,a);break;case"V":a=u[1],t.lineTo(s,a);break;case"v":a+=u[1],t.lineTo(s,a);break;case"L":s=u[1],a=u[2],t.lineTo(s,a);break;case"l":s+=u[1],a+=u[2],t.lineTo(s,a);break;case"C":s=u[5],a=u[6],t.bezierCurveTo(u[1],u[2],u[3],u[4],s,a);break;case"c":t.bezierCurveTo(s+u[1],a+u[2],s+u[3],a+u[4],s+u[5],a+u[6]),s+=u[5],a+=u[6];break;case"S":s=u[3],a=u[4],t.bezierCurveToShort(u[1],u[2],s,a);break;case"s":t.bezierCurveToShort(s+u[1],a+u[2],s+u[3],a+u[4]),s+=u[3],a+=u[4];break;case"Q":s=u[3],a=u[4],t.quadraticCurveTo(u[1],u[2],s,a);break;case"q":t.quadraticCurveTo(s+u[1],a+u[2],s+u[3],a+u[4]),s+=u[3],a+=u[4];break;case"T":s=u[1],a=u[2],t.quadraticCurveToShort(s,a);break;case"t":s+=u[1],a+=u[2],t.quadraticCurveToShort(s,a);break;case"A":s=u[6],a=u[7],t.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,a);break;case"a":s+=u[6],a+=u[7],t.arcToSvg(u[1],u[2],u[3],u[4],u[5],s,a);break;case"Z":case"z":t.closePath(),i.length>0&&(r=i.pop(),r?(s=r.startX,a=r.startY):(s=0,a=0)),r=null;break;default:oi(`Unknown SVG path command: ${l}`)}l!=="Z"&&l!=="z"&&r===null&&(r={startX:s,startY:a},i.push(r))}return t}let CT=class _v{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new _v(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,s=this.y-e;return r*=r,s*=s,r+s<=i}strokeContains(t,e,i,r=.5){if(this.radius===0)return!1;const s=this.x-t,a=this.y-e,o=this.radius,c=(1-r)*i,l=Math.sqrt(s*s+a*a);return l<=o+c&&l>o-(i-c)}getBounds(t){return t||(t=new He),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},ST=class bv{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new bv(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i,r=.5){const{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;const o=i*(1-r),c=i-o,l=s-c,u=a-c,h=s+o,p=a+o,f=t-this.x,x=e-this.y,y=f*f/(l*l)+x*x/(u*u),d=f*f/(h*h)+x*x/(p*p);return y>1&&d<=1}getBounds(t){return t||(t=new He),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};function TT(n,t,e,i,r,s){const a=n-e,o=t-i,c=r-e,l=s-i,u=a*c+o*l,h=c*c+l*l;let p=-1;h!==0&&(p=u/h);let f,x;p<0?(f=e,x=i):p>1?(f=r,x=s):(f=e+p*c,x=i+p*l);const y=n-f,d=t-x;return y*y+d*d}let kT,MT;class il{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let r=0,s=e.length;r<s;r++)i.push(e[r].x,e[r].y);e=i}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,i=e.length;for(let r=0;r<i;r+=2){const s=e[r],a=e[r+1],o=e[(r+2)%i],c=e[(r+3)%i];t+=(o-s)*(c+a)}return t<0}containsPolygon(t){const e=this.getBounds(kT),i=t.getBounds(MT);if(!e.containsRect(i))return!1;const r=t.points;for(let s=0;s<r.length;s+=2){const a=r[s],o=r[s+1];if(!this.contains(a,o))return!1}return!0}clone(){const t=this.points.slice(),e=new il(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const r=this.points.length/2;for(let s=0,a=r-1;s<r;a=s++){const o=this.points[s*2],c=this.points[s*2+1],l=this.points[a*2],u=this.points[a*2+1];c>e!=u>e&&t<(l-o)*((e-c)/(u-c))+o&&(i=!i)}return i}strokeContains(t,e,i,r=.5){const s=i*i,a=s*(1-r),o=s-a,{points:c}=this,l=c.length-(this.closePath?0:2);for(let u=0;u<l;u+=2){const h=c[u],p=c[u+1],f=c[(u+2)%c.length],x=c[(u+3)%c.length],y=TT(t,e,h,p,f,x),d=Math.sign((f-h)*(e-p)-(x-p)*(t-h));if(y<=(d<0?o:a))return!0}return!1}getBounds(t){t||(t=new He);const e=this.points;let i=1/0,r=-1/0,s=1/0,a=-1/0;for(let o=0,c=e.length;o<c;o+=2){const l=e[o],u=e[o+1];i=l<i?l:i,r=l>r?l:r,s=u<s?u:s,a=u>a?u:a}return t.x=i,t.width=r-i,t.y=s,t.height=a-s,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const bc=(n,t,e,i,r,s,a)=>{const o=n-e,c=t-i,l=Math.sqrt(o*o+c*c);return l>=r-s&&l<=r+a};class Q0{constructor(t=0,e=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s}getBounds(t){return t||(t=new He),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Q0(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),s=e-(this.y+i);const a=i*i;if(r*r+s*s<=a||(r=t-(this.x+this.width-i),r*r+s*s<=a)||(s=e-(this.y+this.height-i),r*r+s*s<=a)||(r=t-(this.x+i),r*r+s*s<=a))return!0}return!1}strokeContains(t,e,i,r=.5){const{x:s,y:a,width:o,height:c,radius:l}=this,u=i*(1-r),h=i-u,p=s+l,f=a+l,x=o-l*2,y=c-l*2,d=s+o,_=a+c;return(t>=s-u&&t<=s+h||t>=d-h&&t<=d+u)&&e>=f&&e<=f+y||(e>=a-u&&e<=a+h||e>=_-h&&e<=_+u)&&t>=p&&t<=p+x?!0:t<p&&e<f&&bc(t,e,p,f,l,h,u)||t>d-l&&e<f&&bc(t,e,d-l,f,l,h,u)||t>d-l&&e>_-l&&bc(t,e,d-l,_-l,l,h,u)||t<p&&e>_-l&&bc(t,e,p,_-l,l,h,u)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const AT=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function ET(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function PT(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=AT.replace(/%forloop%/gi,ET(n));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}}finally{t.deleteShader(e)}return n}let Ds=null;function wv(){var t;if(Ds)return Ds;const n=sv();return Ds=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),Ds=PT(Ds,n),(t=n.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Ds}const Cv={};function DT(n,t){let e=2166136261;for(let i=0;i<t;i++)e^=n[i].uid,e=Math.imul(e,16777619),e>>>=0;return Cv[e]||LT(n,t,e)}let vd=0;function LT(n,t,e){const i={};let r=0;vd||(vd=wv());for(let a=0;a<vd;a++){const o=a<t?n[a]:te.EMPTY.source;i[r++]=o.source,i[r++]=o.style}const s=new Hc(i);return Cv[e]=s,s}class um{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function hm(n,t){const e=n.byteLength/8|0,i=new Float64Array(n,0,e);new Float64Array(t,0,e).set(i);const s=n.byteLength-e*8;if(s>0){const a=new Uint8Array(n,e*8,s);new Uint8Array(t,e*8,s).set(a)}}const RT={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var IT=(n=>(n[n.DISABLED=0]="DISABLED",n[n.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",n[n.MASK_ACTIVE=2]="MASK_ACTIVE",n[n.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",n[n.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",n[n.NONE=5]="NONE",n))(IT||{});function dm(n,t){return t.alphaMode==="no-premultiply-alpha"&&RT[n]||n}class NT{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class FT{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new NT,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Sv=[];let jf=0;function fm(){return jf>0?Sv[--jf]:new FT}function pm(n){Sv[jf++]=n}let Ya=0;const Tv=class Gc{constructor(t={}){this.uid=Ne("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],Gc.defaultOptions.maxTextures=Gc.defaultOptions.maxTextures??wv(),t={...Gc.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:i,indicesInitialSize:r}=t;this.attributeBuffer=new um(i*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)pm(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=fm(),r=i.textures;r.clear();const s=e[this.elementStart];let a=dm(s.blendMode,s.texture._source),o=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const c=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer;let h=this._batchIndexSize,p=this._batchIndexStart,f="startBatch";const x=this.maxTextures;for(let y=this.elementStart;y<this.elementSize;++y){const d=e[y];e[y]=null;const g=d.texture._source,m=dm(d.blendMode,g),v=a!==m||o!==d.topology;if(g._batchTick===Ya&&!v){d._textureId=g._textureBindLocation,h+=d.indexSize,d.packAsQuad?(this.packQuadAttributes(d,c,l,d._attributeStart,d._textureId),this.packQuadIndex(u,d._indexStart,d._attributeStart/this.vertexSize)):(this.packAttributes(d,c,l,d._attributeStart,d._textureId),this.packIndex(d,u,d._indexStart,d._attributeStart/this.vertexSize)),d._batch=i;continue}g._batchTick=Ya,(r.count>=x||v)&&(this._finishBatch(i,p,h-p,r,a,o,t,f),f="renderBatch",p=h,a=m,o=d.topology,i=fm(),r=i.textures,r.clear(),++Ya),d._textureId=g._textureBindLocation=r.count,r.ids[g.uid]=r.count,r.textures[r.count++]=g,d._batch=i,h+=d.indexSize,d.packAsQuad?(this.packQuadAttributes(d,c,l,d._attributeStart,d._textureId),this.packQuadIndex(u,d._indexStart,d._attributeStart/this.vertexSize)):(this.packAttributes(d,c,l,d._attributeStart,d._textureId),this.packIndex(d,u,d._indexStart,d._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(i,p,h-p,r,a,o,t,f),p=h,++Ya),this.elementStart=this.elementSize,this._batchIndexStart=p,this._batchIndexSize=h}_finishBatch(t,e,i,r,s,a,o,c){t.gpuBindGroup=null,t.bindGroup=null,t.action=c,t.batcher=this,t.textures=r,t.blendMode=s,t.topology=a,t.start=e,t.size=i,++Ya,this.batches[this.batchIndex++]=t,o.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),i=new um(e);hm(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,e.length*1.5);i+=i%2;const r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let s=0;s<e.length;s++)r[s]=e[s];else hm(e.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,r){const s=t.indices,a=t.indexSize,o=t.indexOffset,c=t.attributeOffset;for(let l=0;l<a;l++)e[i++]=r+s[l+o]-c}destroy(){for(let t=0;t<this.batches.length;t++)pm(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Tv.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let OT=Tv;var yi=(n=>(n[n.MAP_READ=1]="MAP_READ",n[n.MAP_WRITE=2]="MAP_WRITE",n[n.COPY_SRC=4]="COPY_SRC",n[n.COPY_DST=8]="COPY_DST",n[n.INDEX=16]="INDEX",n[n.VERTEX=32]="VERTEX",n[n.UNIFORM=64]="UNIFORM",n[n.STORAGE=128]="STORAGE",n[n.INDIRECT=256]="INDIRECT",n[n.QUERY_RESOLVE=512]="QUERY_RESOLVE",n[n.STATIC=1024]="STATIC",n))(yi||{});class Ml extends Ln{constructor(t){let{data:e,size:i}=t;const{usage:r,label:s,shrinkToFit:a}=t;super(),this.uid=Ne("buffer"),this._resourceType="buffer",this._resourceId=Ne("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e==null?void 0:e.byteLength);const o=!!e;this.descriptor={size:i,usage:r,mappedAtCreation:o,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&yi.STATIC)}set static(t){t?this.descriptor.usage|=yi.STATIC:this.descriptor.usage&=~yi.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const r=this._data;if(this._data=t,this._dataInt32=null,!r||r.length!==t.length){!this.shrinkToFit&&r&&t.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Ne("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function kv(n,t){if(!(n instanceof Ml)){let e=t?yi.INDEX:yi.VERTEX;n instanceof Array&&(t?(n=new Uint32Array(n),e=yi.INDEX|yi.COPY_DST):(n=new Float32Array(n),e=yi.VERTEX|yi.COPY_DST)),n=new Ml({data:n,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return n}function BT(n,t,e){const i=n.getAttribute(t);if(!i)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const r=i.buffer.data;let s=1/0,a=1/0,o=-1/0,c=-1/0;const l=r.BYTES_PER_ELEMENT,u=(i.offset||0)/l,h=(i.stride||2*4)/l;for(let p=u;p<r.length;p+=h){const f=r[p],x=r[p+1];f>o&&(o=f),x>c&&(c=x),f<s&&(s=f),x<a&&(a=x)}return e.minX=s,e.minY=a,e.maxX=o,e.maxY=c,e}function zT(n){return(n instanceof Ml||Array.isArray(n)||n.BYTES_PER_ELEMENT)&&(n={buffer:n}),n.buffer=kv(n.buffer,!1),n}class HT extends Ln{constructor(t={}){super(),this.uid=Ne("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new on,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:r}=t;if(this.buffers=[],this.attributes={},e)for(const s in e)this.addAttribute(s,e[s]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=zT(e);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=kv(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,BT(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const GT=new Float32Array(1),WT=new Uint32Array(1);class $T extends HT{constructor(){const e=new Ml({data:GT,label:"attribute-batch-buffer",usage:yi.VERTEX|yi.COPY_DST,shrinkToFit:!1}),i=new Ml({data:WT,label:"index-batch-buffer",usage:yi.INDEX|yi.COPY_DST,shrinkToFit:!1}),r=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:r,offset:0},aUV:{buffer:e,format:"float32x2",stride:r,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:r,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:r,offset:5*4}},indexBuffer:i})}}function gm(n,t,e){if(n)for(const i in n){const r=i.toLocaleLowerCase(),s=t[r];if(s){let a=n[i];i==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&s.push(`//----${e}----//`),s.push(a)}else oi(`${i} placement hook does not exist in shader`)}}const UT=/\{\{(.*?)\}\}/g;function mm(n){var i;const t={};return(((i=n.match(UT))==null?void 0:i.map(r=>r.replace(/[{()}]/g,"")))??[]).forEach(r=>{t[r]=[]}),t}function ym(n,t){let e;const i=/@in\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function vm(n,t,e=!1){const i=[];ym(t,i),n.forEach(o=>{o.header&&ym(o.header,i)});const r=i;e&&r.sort();const s=r.map((o,c)=>`       @location(${c}) ${o},`).join(`
`);let a=t.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}function xm(n,t){let e;const i=/@out\s+([^;]+);/g;for(;(e=i.exec(n))!==null;)t.push(e[1])}function YT(n){const e=/\b(\w+)\s*:/g.exec(n);return e?e[1]:""}function jT(n){const t=/@.*?\s+/g;return n.replace(t,"")}function XT(n,t){const e=[];xm(t,e),n.forEach(c=>{c.header&&xm(c.header,e)});let i=0;const r=e.sort().map(c=>c.indexOf("builtin")>-1?c:`@location(${i++}) ${c}`).join(`,
`),s=e.sort().map(c=>`       var ${jT(c)};`).join(`
`),a=`return VSOutput(
            ${e.sort().map(c=>` ${YT(c)}`).join(`,
`)});`;let o=t.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${r}
`),o=o.replace("{{start}}",`
${s}
`),o=o.replace("{{return}}",`
${a}
`),o}function _m(n,t){let e=n;for(const i in t){const r=t[i];r.join(`
`).length?e=e.replace(`{{${i}}}`,`//-----${i} START-----//
${r.join(`
`)}
//----${i} FINISH----//`):e=e.replace(`{{${i}}}`,"")}return e}const xr=Object.create(null),xd=new Map;let VT=0;function qT({template:n,bits:t}){const e=Mv(n,t);if(xr[e])return xr[e];const{vertex:i,fragment:r}=ZT(n,t);return xr[e]=Av(i,r,t),xr[e]}function KT({template:n,bits:t}){const e=Mv(n,t);return xr[e]||(xr[e]=Av(n.vertex,n.fragment,t)),xr[e]}function ZT(n,t){const e=t.map(a=>a.vertex).filter(a=>!!a),i=t.map(a=>a.fragment).filter(a=>!!a);let r=vm(e,n.vertex,!0);r=XT(e,r);const s=vm(i,n.fragment,!0);return{vertex:r,fragment:s}}function Mv(n,t){return t.map(e=>(xd.has(e)||xd.set(e,VT++),xd.get(e))).sort((e,i)=>e-i).join("-")+n.vertex+n.fragment}function Av(n,t,e){const i=mm(n),r=mm(t);return e.forEach(s=>{gm(s.vertex,i,s.name),gm(s.fragment,r,s.name)}),{vertex:_m(n,i),fragment:_m(t,r)}}const QT=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,JT=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,tk=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,ek=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,ik={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},nk={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function rk({bits:n,name:t}){const e=qT({template:{fragment:JT,vertex:QT},bits:[ik,...n]});return Yu.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function sk({bits:n,name:t}){return new ov({name:t,...KT({template:{vertex:tk,fragment:ek},bits:[nk,...n]})})}const ak={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},ok={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},_d={};function lk(n){const t=[];if(n===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let i=0;i<n;i++)t.push(`@group(1) @binding(${e++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function ck(n){const t=[];if(n===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<n;e++)e===n-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function uk(n){return _d[n]||(_d[n]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${lk(n)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${ck(n)}
            `}}),_d[n]}const bd={};function hk(n){const t=[];for(let e=0;e<n;e++)e>0&&t.push("else"),e<n-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function dk(n){return bd[n]||(bd[n]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${n}];

            `,main:`

                ${hk(n)}
            `}}),bd[n]}const fk={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},pk={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},bm={};function gk(n){let t=bm[n];if(t)return t;const e=new Int32Array(n);for(let i=0;i<n;i++)e[i]=i;return t=bm[n]=new hv({uTextures:{value:e,type:"i32",size:n}},{isStatic:!0}),t}class mk extends q0{constructor(t){const e=sk({name:"batch",bits:[ok,dk(t),pk]}),i=rk({name:"batch",bits:[ak,uk(t),fk]});super({glProgram:e,gpuProgram:i,resources:{batchSamplers:gk(t)}})}}let wm=null;const Ev=class Pv extends OT{constructor(){super(...arguments),this.geometry=new $T,this.shader=wm||(wm=new mk(this.maxTextures)),this.name=Pv.extension.name,this.vertexSize=6}packAttributes(t,e,i,r,s){const a=s<<16|t.roundPixels&65535,o=t.transform,c=o.a,l=o.b,u=o.c,h=o.d,p=o.tx,f=o.ty,{positions:x,uvs:y}=t,d=t.color,_=t.attributeOffset,g=_+t.attributeSize;for(let m=_;m<g;m++){const v=m*2,S=x[v],M=x[v+1];e[r++]=c*S+u*M+p,e[r++]=h*M+l*S+f,e[r++]=y[v],e[r++]=y[v+1],i[r++]=d,i[r++]=a}}packQuadAttributes(t,e,i,r,s){const a=t.texture,o=t.transform,c=o.a,l=o.b,u=o.c,h=o.d,p=o.tx,f=o.ty,x=t.bounds,y=x.maxX,d=x.minX,_=x.maxY,g=x.minY,m=a.uvs,v=t.color,S=s<<16|t.roundPixels&65535;e[r+0]=c*d+u*g+p,e[r+1]=h*g+l*d+f,e[r+2]=m.x0,e[r+3]=m.y0,i[r+4]=v,i[r+5]=S,e[r+6]=c*y+u*g+p,e[r+7]=h*g+l*y+f,e[r+8]=m.x1,e[r+9]=m.y1,i[r+10]=v,i[r+11]=S,e[r+12]=c*y+u*_+p,e[r+13]=h*_+l*y+f,e[r+14]=m.x2,e[r+15]=m.y2,i[r+16]=v,i[r+17]=S,e[r+18]=c*d+u*_+p,e[r+19]=h*_+l*d+f,e[r+20]=m.x3,e[r+21]=m.y3,i[r+22]=v,i[r+23]=S}};Ev.extension={type:[se.Batcher],name:"default"};let yk=Ev;function vk(n,t,e,i,r,s,a,o=null){let c=0;e*=t,r*=s;const l=o.a,u=o.b,h=o.c,p=o.d,f=o.tx,x=o.ty;for(;c<a;){const y=n[e],d=n[e+1];i[r]=l*y+h*d+f,i[r+1]=u*y+p*d+x,r+=s,e+=t,c++}}function xk(n,t,e,i){let r=0;for(t*=e;r<i;)n[t]=0,n[t+1]=0,t+=e,r++}function Dv(n,t,e,i,r){const s=t.a,a=t.b,o=t.c,c=t.d,l=t.tx,u=t.ty;e||(e=0),i||(i=2),r||(r=n.length/i-e);let h=e*i;for(let p=0;p<r;p++){const f=n[h],x=n[h+1];n[h]=s*f+o*x+l,n[h+1]=a*f+c*x+u,h+=i}}const _k=new Qt;class Lv{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?B5(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||_k}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Al={extension:{type:se.ShapeBuilder,name:"circle"},build(n,t){let e,i,r,s,a,o;if(n.type==="circle"){const v=n;e=v.x,i=v.y,a=o=v.radius,r=s=0}else if(n.type==="ellipse"){const v=n;e=v.x,i=v.y,a=v.halfWidth,o=v.halfHeight,r=s=0}else{const v=n,S=v.width/2,M=v.height/2;e=v.x+S,i=v.y+M,a=o=Math.max(0,Math.min(v.radius,Math.min(S,M))),r=S-a,s=M-o}if(!(a>=0&&o>=0&&r>=0&&s>=0))return t;const c=Math.ceil(2.3*Math.sqrt(a+o)),l=c*8+(r?4:0)+(s?4:0);if(l===0)return t;if(c===0)return t[0]=t[6]=e+r,t[1]=t[3]=i+s,t[2]=t[4]=e-r,t[5]=t[7]=i-s,t;let u=0,h=c*4+(r?2:0)+2,p=h,f=l,x=r+a,y=s,d=e+x,_=e-x,g=i+y;if(t[u++]=d,t[u++]=g,t[--h]=g,t[--h]=_,s){const v=i-y;t[p++]=_,t[p++]=v,t[--f]=v,t[--f]=d}for(let v=1;v<c;v++){const S=Math.PI/2*(v/c),M=r+Math.cos(S)*a,w=s+Math.sin(S)*o,L=e+M,P=e-M,N=i+w,k=i-w;t[u++]=L,t[u++]=N,t[--h]=N,t[--h]=P,t[p++]=P,t[p++]=k,t[--f]=k,t[--f]=L}x=r,y=s+o,d=e+x,_=e-x,g=i+y;const m=i-y;return t[u++]=d,t[u++]=g,t[--f]=m,t[--f]=d,r&&(t[u++]=_,t[u++]=g,t[--f]=m,t[--f]=_),t},triangulate(n,t,e,i,r,s){if(n.length===0)return;let a=0,o=0;for(let u=0;u<n.length;u+=2)a+=n[u],o+=n[u+1];a/=n.length/2,o/=n.length/2;let c=i;t[c*e]=a,t[c*e+1]=o;const l=c++;for(let u=0;u<n.length;u+=2)t[c*e]=n[u],t[c*e+1]=n[u+1],u>0&&(r[s++]=c,r[s++]=l,r[s++]=c-1),c++;r[s++]=l+1,r[s++]=l,r[s++]=c-1}},bk={...Al,extension:{...Al.extension,name:"ellipse"}},wk={...Al,extension:{...Al.extension,name:"roundedRectangle"}},Rv=1e-4,Cm=1e-4;function Ck(n){const t=n.length;if(t<6)return 1;let e=0;for(let i=0,r=n[t-2],s=n[t-1];i<t;i+=2){const a=n[i],o=n[i+1];e+=(a-r)*(o+s),r=a,s=o}return e<0?-1:1}function Sm(n,t,e,i,r,s,a,o){const c=n-e*r,l=t-i*r,u=n+e*s,h=t+i*s;let p,f;a?(p=i,f=-e):(p=-i,f=e);const x=c+p,y=l+f,d=u+p,_=h+f;return o.push(x,y),o.push(d,_),2}function Fr(n,t,e,i,r,s,a,o){const c=e-n,l=i-t;let u=Math.atan2(c,l),h=Math.atan2(r-n,s-t);o&&u<h?u+=Math.PI*2:!o&&u>h&&(h+=Math.PI*2);let p=u;const f=h-u,x=Math.abs(f),y=Math.sqrt(c*c+l*l),d=(15*x*Math.sqrt(y)/Math.PI>>0)+1,_=f/d;if(p+=_,o){a.push(n,t),a.push(e,i);for(let g=1,m=p;g<d;g++,m+=_)a.push(n,t),a.push(n+Math.sin(m)*y,t+Math.cos(m)*y);a.push(n,t),a.push(r,s)}else{a.push(e,i),a.push(n,t);for(let g=1,m=p;g<d;g++,m+=_)a.push(n+Math.sin(m)*y,t+Math.cos(m)*y),a.push(n,t);a.push(r,s),a.push(n,t)}return d*2}function Sk(n,t,e,i,r,s){const a=Rv;if(n.length===0)return;const o=t;let c=o.alignment;if(t.alignment!==.5){let $=Ck(n);c=(c-.5)*$+.5}const l=new ei(n[0],n[1]),u=new ei(n[n.length-2],n[n.length-1]),h=i,p=Math.abs(l.x-u.x)<a&&Math.abs(l.y-u.y)<a;if(h){n=n.slice(),p&&(n.pop(),n.pop(),u.set(n[n.length-2],n[n.length-1]));const $=(l.x+u.x)*.5,Y=(u.y+l.y)*.5;n.unshift($,Y),n.push($,Y)}const f=r,x=n.length/2;let y=n.length;const d=f.length/2,_=o.width/2,g=_*_,m=o.miterLimit*o.miterLimit;let v=n[0],S=n[1],M=n[2],w=n[3],L=0,P=0,N=-(S-w),k=v-M,D=0,C=0,T=Math.sqrt(N*N+k*k);N/=T,k/=T,N*=_,k*=_;const A=c,E=(1-A)*2,I=A*2;h||(o.cap==="round"?y+=Fr(v-N*(E-I)*.5,S-k*(E-I)*.5,v-N*E,S-k*E,v+N*I,S+k*I,f,!0)+2:o.cap==="square"&&(y+=Sm(v,S,N,k,E,I,!0,f))),f.push(v-N*E,S-k*E),f.push(v+N*I,S+k*I);for(let $=1;$<x-1;++$){v=n[($-1)*2],S=n[($-1)*2+1],M=n[$*2],w=n[$*2+1],L=n[($+1)*2],P=n[($+1)*2+1],N=-(S-w),k=v-M,T=Math.sqrt(N*N+k*k),N/=T,k/=T,N*=_,k*=_,D=-(w-P),C=M-L,T=Math.sqrt(D*D+C*C),D/=T,C/=T,D*=_,C*=_;const Y=M-v,q=S-w,G=M-L,F=P-w,U=Y*G+q*F,j=q*G-F*Y,et=j<0;if(Math.abs(j)<.001*Math.abs(U)){f.push(M-N*E,w-k*E),f.push(M+N*I,w+k*I),U>=0&&(o.join==="round"?y+=Fr(M,w,M-N*E,w-k*E,M-D*E,w-C*E,f,!1)+4:y+=2,f.push(M-D*I,w-C*I),f.push(M+D*E,w+C*E));continue}const V=(-N+v)*(-k+w)-(-N+M)*(-k+S),tt=(-D+L)*(-C+w)-(-D+M)*(-C+P),z=(Y*tt-G*V)/j,H=(F*V-q*tt)/j,X=(z-M)*(z-M)+(H-w)*(H-w),K=M+(z-M)*E,rt=w+(H-w)*E,nt=M-(z-M)*I,Q=w-(H-w)*I,it=Math.min(Y*Y+q*q,G*G+F*F),at=et?E:I,ut=it+at*at*g;X<=ut?o.join==="bevel"||X/g>m?(et?(f.push(K,rt),f.push(M+N*I,w+k*I),f.push(K,rt),f.push(M+D*I,w+C*I)):(f.push(M-N*E,w-k*E),f.push(nt,Q),f.push(M-D*E,w-C*E),f.push(nt,Q)),y+=2):o.join==="round"?et?(f.push(K,rt),f.push(M+N*I,w+k*I),y+=Fr(M,w,M+N*I,w+k*I,M+D*I,w+C*I,f,!0)+4,f.push(K,rt),f.push(M+D*I,w+C*I)):(f.push(M-N*E,w-k*E),f.push(nt,Q),y+=Fr(M,w,M-N*E,w-k*E,M-D*E,w-C*E,f,!1)+4,f.push(M-D*E,w-C*E),f.push(nt,Q)):(f.push(K,rt),f.push(nt,Q)):(f.push(M-N*E,w-k*E),f.push(M+N*I,w+k*I),o.join==="round"?et?y+=Fr(M,w,M+N*I,w+k*I,M+D*I,w+C*I,f,!0)+2:y+=Fr(M,w,M-N*E,w-k*E,M-D*E,w-C*E,f,!1)+2:o.join==="miter"&&X/g<=m&&(et?(f.push(nt,Q),f.push(nt,Q)):(f.push(K,rt),f.push(K,rt)),y+=2),f.push(M-D*E,w-C*E),f.push(M+D*I,w+C*I),y+=2)}v=n[(x-2)*2],S=n[(x-2)*2+1],M=n[(x-1)*2],w=n[(x-1)*2+1],N=-(S-w),k=v-M,T=Math.sqrt(N*N+k*k),N/=T,k/=T,N*=_,k*=_,f.push(M-N*E,w-k*E),f.push(M+N*I,w+k*I),h||(o.cap==="round"?y+=Fr(M-N*(E-I)*.5,w-k*(E-I)*.5,M-N*E,w-k*E,M+N*I,w+k*I,f,!1)+2:o.cap==="square"&&(y+=Sm(M,w,N,k,E,I,!1,f)));const B=Cm*Cm;for(let $=d;$<y+d-2;++$)v=f[$*2],S=f[$*2+1],M=f[($+1)*2],w=f[($+1)*2+1],L=f[($+2)*2],P=f[($+2)*2+1],!(Math.abs(v*(w-P)+M*(P-S)+L*(S-w))<B)&&s.push($,$+1,$+2)}function Tk(n,t,e,i){const r=Rv;if(n.length===0)return;const s=n[0],a=n[1],o=n[n.length-2],c=n[n.length-1],l=t||Math.abs(s-o)<r&&Math.abs(a-c)<r,u=e,h=n.length/2,p=u.length/2;for(let f=0;f<h;f++)u.push(n[f*2]),u.push(n[f*2+1]);for(let f=0;f<h-1;f++)i.push(p+f,p+f+1);l&&i.push(p+h-1,p)}function Iv(n,t,e,i,r,s,a){const o=hT(n,t,2);if(!o)return;for(let l=0;l<o.length;l+=3)s[a++]=o[l]+r,s[a++]=o[l+1]+r,s[a++]=o[l+2]+r;let c=r*i;for(let l=0;l<n.length;l+=2)e[c]=n[l],e[c+1]=n[l+1],c+=i}const kk=[],Mk={extension:{type:se.ShapeBuilder,name:"polygon"},build(n,t){for(let e=0;e<n.points.length;e++)t[e]=n.points[e];return t},triangulate(n,t,e,i,r,s){Iv(n,kk,t,e,i,r,s)}},Ak={extension:{type:se.ShapeBuilder,name:"rectangle"},build(n,t){const e=n,i=e.x,r=e.y,s=e.width,a=e.height;return s>=0&&a>=0&&(t[0]=i,t[1]=r,t[2]=i+s,t[3]=r,t[4]=i+s,t[5]=r+a,t[6]=i,t[7]=r+a),t},triangulate(n,t,e,i,r,s){let a=0;i*=e,t[i+a]=n[0],t[i+a+1]=n[1],a+=e,t[i+a]=n[2],t[i+a+1]=n[3],a+=e,t[i+a]=n[6],t[i+a+1]=n[7],a+=e,t[i+a]=n[4],t[i+a+1]=n[5],a+=e;const o=i/e;r[s++]=o,r[s++]=o+1,r[s++]=o+2,r[s++]=o+1,r[s++]=o+3,r[s++]=o+2}},Ek={extension:{type:se.ShapeBuilder,name:"triangle"},build(n,t){return t[0]=n.x,t[1]=n.y,t[2]=n.x2,t[3]=n.y2,t[4]=n.x3,t[5]=n.y3,t},triangulate(n,t,e,i,r,s){let a=0;i*=e,t[i+a]=n[0],t[i+a+1]=n[1],a+=e,t[i+a]=n[2],t[i+a+1]=n[3],a+=e,t[i+a]=n[4],t[i+a+1]=n[5];const o=i/e;r[s++]=o,r[s++]=o+1,r[s++]=o+2}},Pk=new Qt,Dk=new He;function Lk(n,t,e,i){const r=t.matrix?n.copyFrom(t.matrix).invert():n.identity();if(t.textureSpace==="local"){const s=e.getBounds(Dk);r.translate(-s.x,-s.y),r.scale(1/s.width,1/s.height)}else{r.translate(t.texture.frame.x,t.texture.frame.y),r.scale(1/t.texture.source.width,1/t.texture.source.height);const s=t.texture.source.style;s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update())}return i&&r.append(Pk.copyFrom(i).invert()),r}const ju={};Xi.handleByMap(se.ShapeBuilder,ju);Xi.add(Ak,Mk,Ek,Al,bk,wk);const Rk=new He,Ik=new Qt;function Nk(n,t){const{geometryData:e,batches:i}=t;i.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let r=0;r<n.instructions.length;r++){const s=n.instructions[r];if(s.action==="texture")Fk(s.data,i,e);else if(s.action==="fill"||s.action==="stroke"){const a=s.action==="stroke",o=s.data.path.shapePath,c=s.data.style,l=s.data.hole;a&&l&&Tm(l.shapePath,c,!0,i,e),l&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=l.shapePath.shapePrimitives),Tm(o,c,a,i,e)}}}function Fk(n,t,e){const{vertices:i,uvs:r,indices:s}=e,a=s.length,o=i.length/2,c=[],l=ju.rectangle,u=Rk,h=n.image;u.x=n.dx,u.y=n.dy,u.width=n.dw,u.height=n.dh;const p=n.transform;l.build(u,c),p&&Dv(c,p),l.triangulate(c,i,2,o,s,a);const f=h.uvs;r.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);const x=Jn.get(Lv);x.indexOffset=a,x.indexSize=s.length-a,x.attributeOffset=o,x.attributeSize=i.length/2-o,x.baseColor=n.style,x.alpha=n.alpha,x.texture=h,x.geometryData=e,t.push(x)}function Tm(n,t,e,i,r){const{vertices:s,uvs:a,indices:o}=r;n.shapePrimitives.forEach(({shape:c,transform:l,holes:u})=>{const h=o.length,p=s.length/2,f=[],x=ju[c.type];let y="triangle-list";if(x.build(c,f),l&&Dv(f,l),e){const m=c.closePath??!0,v=t;v.pixelLine?(Tk(f,m,s,o),y="line-list"):Sk(f,v,!1,m,s,o)}else if(u){const m=[],v=f.slice();Ok(u).forEach(M=>{m.push(v.length/2),v.push(...M)}),Iv(v,m,s,2,p,o,h)}else x.triangulate(f,s,2,p,o,h);const d=a.length/2,_=t.texture;if(_!==te.WHITE){const m=Lk(Ik,t,c,l);vk(s,2,p,a,d,2,s.length/2-p,m)}else xk(a,d,2,s.length/2-p);const g=Jn.get(Lv);g.indexOffset=h,g.indexSize=o.length-h,g.attributeOffset=p,g.attributeSize=s.length/2-p,g.baseColor=t.color,g.alpha=t.alpha,g.texture=_,g.geometryData=r,g.topology=y,i.push(g)})}function Ok(n){const t=[];for(let e=0;e<n.length;e++){const i=n[e].shape,r=[];ju[i.type].build(i,r),t.push(r)}return t}class Bk{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class zk{constructor(){this.batcher=new yk,this.instructions=new W5}init(){this.instructions.reset()}get geometry(){return le(XC,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const J0=class Xf{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Xf.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??Xf.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),Nk(t,e);const i=t.batchMode;t.customShader||i==="no-batch"?e.isBatchable=!1:i==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=Jn.get(zk),{batches:i,geometryData:r}=this._gpuContextHash[t.uid],s=r.vertices.length,a=r.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;const o=e.batcher;o.ensureAttributeBuffer(s),o.ensureIndexBuffer(a),o.begin();for(let u=0;u<i.length;u++){const h=i[u];o.add(h)}o.finish(e.instructions);const c=o.geometry;c.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),c.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const l=o.batches;for(let u=0;u<l.length;u++){const h=l[u];h.bindGroup=DT(h.textures.textures,h.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new Bk;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Jn.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(i=>{Jn.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};J0.extension={type:[se.WebGLSystem,se.WebGPUSystem,se.CanvasSystem],name:"graphicsContext"};J0.defaultOptions={bezierSmoothness:.5};let Nv=J0;const Hk=8,wc=11920929e-14,Gk=1;function Fv(n,t,e,i,r,s,a,o,c,l){const h=Math.min(.99,Math.max(0,l??Nv.defaultOptions.bezierSmoothness));let p=(Gk-h)/1;return p*=p,Wk(t,e,i,r,s,a,o,c,n,p),n}function Wk(n,t,e,i,r,s,a,o,c,l){Vf(n,t,e,i,r,s,a,o,c,l,0),c.push(a,o)}function Vf(n,t,e,i,r,s,a,o,c,l,u){if(u>Hk)return;const h=(n+e)/2,p=(t+i)/2,f=(e+r)/2,x=(i+s)/2,y=(r+a)/2,d=(s+o)/2,_=(h+f)/2,g=(p+x)/2,m=(f+y)/2,v=(x+d)/2,S=(_+m)/2,M=(g+v)/2;if(u>0){let w=a-n,L=o-t;const P=Math.abs((e-a)*L-(i-o)*w),N=Math.abs((r-a)*L-(s-o)*w);if(P>wc&&N>wc){if((P+N)*(P+N)<=l*(w*w+L*L)){c.push(S,M);return}}else if(P>wc){if(P*P<=l*(w*w+L*L)){c.push(S,M);return}}else if(N>wc){if(N*N<=l*(w*w+L*L)){c.push(S,M);return}}else if(w=S-(n+a)/2,L=M-(t+o)/2,w*w+L*L<=l){c.push(S,M);return}}Vf(n,t,h,p,_,g,S,M,c,l,u+1),Vf(S,M,m,v,y,d,a,o,c,l,u+1)}const $k=8,Uk=11920929e-14,Yk=1;function jk(n,t,e,i,r,s,a,o){const l=Math.min(.99,Math.max(0,o??Nv.defaultOptions.bezierSmoothness));let u=(Yk-l)/1;return u*=u,Xk(t,e,i,r,s,a,n,u),n}function Xk(n,t,e,i,r,s,a,o){qf(a,n,t,e,i,r,s,o,0),a.push(r,s)}function qf(n,t,e,i,r,s,a,o,c){if(c>$k)return;const l=(t+i)/2,u=(e+r)/2,h=(i+s)/2,p=(r+a)/2,f=(l+h)/2,x=(u+p)/2;let y=s-t,d=a-e;const _=Math.abs((i-s)*d-(r-a)*y);if(_>Uk){if(_*_<=o*(y*y+d*d)){n.push(f,x);return}}else if(y=f-(t+s)/2,d=x-(e+a)/2,y*y+d*d<=o){n.push(f,x);return}qf(n,t,e,l,u,f,x,o,c+1),qf(n,f,x,h,p,s,a,o,c+1)}function Ov(n,t,e,i,r,s,a,o){let c=Math.abs(r-s);(!a&&r>s||a&&s>r)&&(c=2*Math.PI-c),o||(o=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(c/Math.PI)))),o=Math.max(o,3);let l=c/o,u=r;l*=a?-1:1;for(let h=0;h<o+1;h++){const p=Math.cos(u),f=Math.sin(u),x=t+p*i,y=e+f*i;n.push(x,y),u+=l}}function Vk(n,t,e,i,r,s){const a=n[n.length-2],c=n[n.length-1]-e,l=a-t,u=r-e,h=i-t,p=Math.abs(c*h-l*u);if(p<1e-8||s===0){(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);return}const f=c*c+l*l,x=u*u+h*h,y=c*u+l*h,d=s*Math.sqrt(f)/p,_=s*Math.sqrt(x)/p,g=d*y/f,m=_*y/x,v=d*h+_*l,S=d*u+_*c,M=l*(_+g),w=c*(_+g),L=h*(d+m),P=u*(d+m),N=Math.atan2(w-S,M-v),k=Math.atan2(P-S,L-v);Ov(n,v+t,S+e,s,N,k,l*u>h*c)}const nl=Math.PI*2,wd={centerX:0,centerY:0,ang1:0,ang2:0},Cd=({x:n,y:t},e,i,r,s,a,o,c)=>{n*=e,t*=i;const l=r*n-s*t,u=s*n+r*t;return c.x=l+a,c.y=u+o,c};function qk(n,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:e,r=Math.cos(n),s=Math.sin(n),a=Math.cos(n+t),o=Math.sin(n+t);return[{x:r-s*i,y:s+r*i},{x:a+o*i,y:o-a*i},{x:a,y:o}]}const km=(n,t,e,i)=>{const r=n*i-t*e<0?-1:1;let s=n*e+t*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)},Kk=(n,t,e,i,r,s,a,o,c,l,u,h,p)=>{const f=Math.pow(r,2),x=Math.pow(s,2),y=Math.pow(u,2),d=Math.pow(h,2);let _=f*x-f*d-x*y;_<0&&(_=0),_/=f*d+x*y,_=Math.sqrt(_)*(a===o?-1:1);const g=_*r/s*h,m=_*-s/r*u,v=l*g-c*m+(n+e)/2,S=c*g+l*m+(t+i)/2,M=(u-g)/r,w=(h-m)/s,L=(-u-g)/r,P=(-h-m)/s,N=km(1,0,M,w);let k=km(M,w,L,P);o===0&&k>0&&(k-=nl),o===1&&k<0&&(k+=nl),p.centerX=v,p.centerY=S,p.ang1=N,p.ang2=k};function Zk(n,t,e,i,r,s,a,o=0,c=0,l=0){if(s===0||a===0)return;const u=Math.sin(o*nl/360),h=Math.cos(o*nl/360),p=h*(t-i)/2+u*(e-r)/2,f=-u*(t-i)/2+h*(e-r)/2;if(p===0&&f===0)return;s=Math.abs(s),a=Math.abs(a);const x=Math.pow(p,2)/Math.pow(s,2)+Math.pow(f,2)/Math.pow(a,2);x>1&&(s*=Math.sqrt(x),a*=Math.sqrt(x)),Kk(t,e,i,r,s,a,c,l,u,h,p,f,wd);let{ang1:y,ang2:d}=wd;const{centerX:_,centerY:g}=wd;let m=Math.abs(d)/(nl/4);Math.abs(1-m)<1e-7&&(m=1);const v=Math.max(Math.ceil(m),1);d/=v;let S=n[n.length-2],M=n[n.length-1];const w={x:0,y:0};for(let L=0;L<v;L++){const P=qk(y,d),{x:N,y:k}=Cd(P[0],s,a,h,u,_,g,w),{x:D,y:C}=Cd(P[1],s,a,h,u,_,g,w),{x:T,y:A}=Cd(P[2],s,a,h,u,_,g,w);Fv(n,S,M,N,k,D,C,T,A),S=T,M=A,y+=d}}function Qk(n,t,e){const i=(a,o)=>{const c=o.x-a.x,l=o.y-a.y,u=Math.sqrt(c*c+l*l),h=c/u,p=l/u;return{len:u,nx:h,ny:p}},r=(a,o)=>{a===0?n.moveTo(o.x,o.y):n.lineTo(o.x,o.y)};let s=t[t.length-1];for(let a=0;a<t.length;a++){const o=t[a%t.length],c=o.radius??e;if(c<=0){r(a,o),s=o;continue}const l=t[(a+1)%t.length],u=i(o,s),h=i(o,l);if(u.len<1e-4||h.len<1e-4){r(a,o),s=o;continue}let p=Math.asin(u.nx*h.ny-u.ny*h.nx),f=1,x=!1;u.nx*h.nx-u.ny*-h.ny<0?p<0?p=Math.PI+p:(p=Math.PI-p,f=-1,x=!0):p>0&&(f=-1,x=!0);const y=p/2;let d,_=Math.abs(Math.cos(y)*c/Math.sin(y));_>Math.min(u.len/2,h.len/2)?(_=Math.min(u.len/2,h.len/2),d=Math.abs(_*Math.sin(y)/Math.cos(y))):d=c;const g=o.x+h.nx*_+-h.ny*d*f,m=o.y+h.ny*_+h.nx*d*f,v=Math.atan2(u.ny,u.nx)+Math.PI/2*f,S=Math.atan2(h.ny,h.nx)-Math.PI/2*f;a===0&&n.moveTo(g+Math.cos(v)*d,m+Math.sin(v)*d),n.arc(g,m,d,v,S,x),s=o}}function Jk(n,t,e,i){const r=(o,c)=>Math.sqrt((o.x-c.x)**2+(o.y-c.y)**2),s=(o,c,l)=>({x:o.x+(c.x-o.x)*l,y:o.y+(c.y-o.y)*l}),a=t.length;for(let o=0;o<a;o++){const c=t[(o+1)%a],l=c.radius??e;if(l<=0){o===0?n.moveTo(c.x,c.y):n.lineTo(c.x,c.y);continue}const u=t[o],h=t[(o+2)%a],p=r(u,c);let f;if(p<1e-4)f=c;else{const d=Math.min(p/2,l);f=s(c,u,d/p)}const x=r(h,c);let y;if(x<1e-4)y=c;else{const d=Math.min(x/2,l);y=s(c,h,d/x)}o===0?n.moveTo(f.x,f.y):n.lineTo(f.x,f.y),n.quadraticCurveTo(c.x,c.y,y.x,y.y,i)}}const tM=new He;class eM{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new on,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==t||s!==e)&&i.push(t,e),this}arc(t,e,i,r,s,a){this._ensurePoly(!1);const o=this._currentPoly.points;return Ov(o,t,e,i,r,s,a),this}arcTo(t,e,i,r,s){this._ensurePoly();const a=this._currentPoly.points;return Vk(a,t,e,i,r,s),this}arcToSvg(t,e,i,r,s,a,o){const c=this._currentPoly.points;return Zk(c,this._currentPoly.lastX,this._currentPoly.lastY,a,o,t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,a,o){this._ensurePoly();const c=this._currentPoly;return Fv(this._currentPoly.points,c.lastX,c.lastY,t,e,i,r,s,a,o),this}quadraticCurveTo(t,e,i,r,s){this._ensurePoly();const a=this._currentPoly;return jk(this._currentPoly.points,a.lastX,a.lastY,t,e,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const i=this.shapePrimitives,r=i.length;for(let s=0;s<t.instructions.length;s++){const a=t.instructions[s];this[a.action](...a.data)}if(t.checkForHoles&&i.length-r>1){let s=null;for(let a=r;a<i.length;a++){const o=i[a];if(o.shape.type==="polygon"){const c=o.shape,l=s==null?void 0:s.shape;l&&l.containsPolygon(c)?(s.holes||(s.holes=[]),s.holes.push(o),i.copyWithin(a,a+1),i.length--,a--):s=o}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,s){return this.drawShape(new He(t,e,i,r),s),this}circle(t,e,i,r){return this.drawShape(new CT(t,e,i),r),this}poly(t,e,i){const r=new il(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,s=0,a){r=Math.max(r|0,3);const o=-1*Math.PI/2+s,c=Math.PI*2/r,l=[];for(let u=0;u<r;u++){const h=o-u*c;l.push(t+i*Math.cos(h),e+i*Math.sin(h))}return this.poly(l,!0,a),this}roundPoly(t,e,i,r,s,a=0,o){if(r=Math.max(r|0,3),s<=0)return this.regularPoly(t,e,i,r,a);const c=i*Math.sin(Math.PI/r)-.001;s=Math.min(s,c);const l=-1*Math.PI/2+a,u=Math.PI*2/r,h=(r-2)*Math.PI/r/2;for(let p=0;p<r;p++){const f=p*u+l,x=t+i*Math.cos(f),y=e+i*Math.sin(f),d=f+Math.PI+h,_=f-Math.PI-h,g=x+s*Math.cos(d),m=y+s*Math.sin(d),v=x+s*Math.cos(_),S=y+s*Math.sin(_);p===0?this.moveTo(g,m):this.lineTo(g,m),this.quadraticCurveTo(x,y,v,S,o)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?Jk(this,t,e,r):Qk(this,t,e),this.closePath())}filletRect(t,e,i,r,s){if(s===0)return this.rect(t,e,i,r);const a=Math.min(i,r)/2,o=Math.min(a,Math.max(-a,s)),c=t+i,l=e+r,u=o<0?-o:0,h=Math.abs(o);return this.moveTo(t,e+h).arcTo(t+u,e+u,t+h,e,h).lineTo(c-h,e).arcTo(c-u,e+u,c,e+h,h).lineTo(c,l-h).arcTo(c-u,l-u,t+i-h,l,h).lineTo(t+h,l).arcTo(t+u,l-u,t,l-h,h).closePath()}chamferRect(t,e,i,r,s,a){if(s<=0)return this.rect(t,e,i,r);const o=Math.min(s,Math.min(i,r)/2),c=t+i,l=e+r,u=[t+o,e,c-o,e,c,e+o,c,l-o,c-o,l,t+o,l,t,l-o,t,e+o];for(let h=u.length-1;h>=2;h-=2)u[h]===u[h-2]&&u[h-1]===u[h-3]&&u.splice(h-1,2);return this.poly(u,!0,a)}ellipse(t,e,i,r,s){return this.drawShape(new ST(t,e,i,r),s),this}roundRect(t,e,i,r,s,a){return this.drawShape(new Q0(t,e,i,r,s),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new il,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new il,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let i=e.shape.x,r=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const s=e.transform,a=i;i=s.a*i+s.c*r+s.tx,r=s.b*a+s.d*r+s.ty}this._currentPoly.points.push(i,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const r=e[i],s=r.shape.getBounds(tM);r.transform?t.addRect(s,r.transform):t.addRect(s)}return t}}class Ca{constructor(t,e=!1){this.instructions=[],this.uid=Ne("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?wT(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new eM(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,r,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(ei.shared);let c=0,l=0;if(!a||a.action!=="bezierCurveTo")c=o.x,l=o.y;else{c=a.data[2],l=a.data[3];const u=o.x,h=o.y;c=u+(u-c),l=h+(h-l)}return this.instructions.push({action:"bezierCurveTo",data:[c,l,t,e,i,r,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const r=this.instructions[this.instructions.length-1],s=this.getLastPoint(ei.shared);let a=0,o=0;if(!r||r.action!=="quadraticCurveTo")a=s.x,o=s.y;else{a=r.data[0],o=r.data[1];const c=s.x,l=s.y;a=c+(c-a),o=l+(l-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,t,e,i]}),this._dirty=!0,this}rect(t,e,i,r,s){return this.instructions.push({action:"rect",data:[t,e,i,r,s]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,s,a,o){s||(s=r/2);const c=-1*Math.PI/2+a,l=i*2,u=Math.PI*2/l,h=[];for(let p=0;p<l;p++){const f=p%2?s:r,x=p*u+c;h.push(t+f*Math.cos(x),e+f*Math.sin(x))}return this.poly(h,!0,o),this}clone(t=!1){const e=new Ca;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const r=this.instructions[i];e.instructions.push({action:r.action,data:r.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,r=t.c,s=t.d,a=t.tx,o=t.ty;let c=0,l=0,u=0,h=0,p=0,f=0,x=0,y=0;for(let d=0;d<this.instructions.length;d++){const _=this.instructions[d],g=_.data;switch(_.action){case"moveTo":case"lineTo":c=g[0],l=g[1],g[0]=e*c+r*l+a,g[1]=i*c+s*l+o;break;case"bezierCurveTo":u=g[0],h=g[1],p=g[2],f=g[3],c=g[4],l=g[5],g[0]=e*u+r*h+a,g[1]=i*u+s*h+o,g[2]=e*p+r*f+a,g[3]=i*p+s*f+o,g[4]=e*c+r*l+a,g[5]=i*c+s*l+o;break;case"quadraticCurveTo":u=g[0],h=g[1],c=g[2],l=g[3],g[0]=e*u+r*h+a,g[1]=i*u+s*h+o,g[2]=e*c+r*l+a,g[3]=i*c+s*l+o;break;case"arcToSvg":c=g[5],l=g[6],x=g[0],y=g[1],g[0]=e*x+r*y,g[1]=i*x+s*y,g[5]=e*c+r*l+a,g[6]=i*c+s*l+o;break;case"circle":g[4]=ja(g[3],t);break;case"rect":g[4]=ja(g[4],t);break;case"ellipse":g[8]=ja(g[8],t);break;case"roundRect":g[5]=ja(g[5],t);break;case"addPath":g[0].transform(t);break;case"poly":g[2]=ja(g[2],t);break;default:oi("unknown transform action",_.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function ja(n,t){return n?n.prepend(t):t.clone()}function be(n,t,e){const i=n.getAttribute(t);return i?Number(i):e}function iM(n,t){const e=n.querySelectorAll("defs");for(let i=0;i<e.length;i++){const r=e[i];for(let s=0;s<r.children.length;s++){const a=r.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":t.defs[a.id]=nM(a);break;case"radialgradient":t.defs[a.id]=rM();break}}}}function nM(n){const t=be(n,"x1",0),e=be(n,"y1",0),i=be(n,"x2",1),r=be(n,"y2",0),s=n.getAttribute("gradientUnits")||"objectBoundingBox",a=new ls(t,e,i,r,s==="objectBoundingBox"?"local":"global");for(let o=0;o<n.children.length;o++){const c=n.children[o],l=be(c,"offset",0),u=Ee.shared.setValue(c.getAttribute("stop-color")).toNumber();a.addColorStop(l,u)}return a}function rM(n){return oi("[SVG Parser] Radial gradients are not yet supported"),new ls(0,0,1,0)}function Mm(n){const t=n.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Am={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function Bv(n,t){const e=n.getAttribute("style"),i={},r={},s={strokeStyle:i,fillStyle:r,useFill:!1,useStroke:!1};for(const a in Am){const o=n.getAttribute(a);o&&Em(t,s,a,o.trim())}if(e){const a=e.split(";");for(let o=0;o<a.length;o++){const c=a[o].trim(),[l,u]=c.split(":");Am[l]&&Em(t,s,l,u.trim())}}return{strokeStyle:s.useStroke?i:null,fillStyle:s.useFill?r:null,useFill:s.useFill,useStroke:s.useStroke}}function Em(n,t,e,i){switch(e){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const r=Mm(i);t.strokeStyle.fill=n.defs[r]}else t.strokeStyle.color=Ee.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const r=Mm(i);t.fillStyle.fill=n.defs[r]}else t.fillStyle.color=Ee.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function sM(n,t){if(typeof n=="string"){const a=document.createElement("div");a.innerHTML=n.trim(),n=a.querySelector("svg")}const e={context:t,defs:{},path:new Ca};iM(n,e);const i=n.children,{fillStyle:r,strokeStyle:s}=Bv(n,e);for(let a=0;a<i.length;a++){const o=i[a];o.nodeName.toLowerCase()!=="defs"&&zv(o,e,r,s)}return t}function zv(n,t,e,i){const r=n.children,{fillStyle:s,strokeStyle:a}=Bv(n,t);s&&e?e={...e,...s}:s&&(e=s),a&&i?i={...i,...a}:a&&(i=a);const o=!e&&!i;o&&(e={color:0});let c,l,u,h,p,f,x,y,d,_,g,m,v,S,M,w,L;switch(n.nodeName.toLowerCase()){case"path":S=n.getAttribute("d"),n.getAttribute("fill-rule")==="evenodd"&&oi("SVG Evenodd fill rule not supported, your svg may render incorrectly"),M=new Ca(S,!0),t.context.path(M),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"circle":x=be(n,"cx",0),y=be(n,"cy",0),d=be(n,"r",0),t.context.ellipse(x,y,d,d),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"rect":c=be(n,"x",0),l=be(n,"y",0),w=be(n,"width",0),L=be(n,"height",0),_=be(n,"rx",0),g=be(n,"ry",0),_||g?t.context.roundRect(c,l,w,L,_||g):t.context.rect(c,l,w,L),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"ellipse":x=be(n,"cx",0),y=be(n,"cy",0),_=be(n,"rx",0),g=be(n,"ry",0),t.context.beginPath(),t.context.ellipse(x,y,_,g),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"line":u=be(n,"x1",0),h=be(n,"y1",0),p=be(n,"x2",0),f=be(n,"y2",0),t.context.beginPath(),t.context.moveTo(u,h),t.context.lineTo(p,f),i&&t.context.stroke(i);break;case"polygon":v=n.getAttribute("points"),m=v.match(/\d+/g).map(P=>parseInt(P,10)),t.context.poly(m,!0),e&&t.context.fill(e),i&&t.context.stroke(i);break;case"polyline":v=n.getAttribute("points"),m=v.match(/\d+/g).map(P=>parseInt(P,10)),t.context.poly(m,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{oi(`[SVG parser] <${n.nodeName}> elements unsupported`);break}}o&&(e=null);for(let P=0;P<r.length;P++)zv(r[P],t,e,i)}function aM(n){return Ee.isColorLike(n)}function Pm(n){return n instanceof Z0}function Dm(n){return n instanceof ls}function oM(n){return n instanceof te}function lM(n,t,e){const i=Ee.shared.setValue(t??0);return n.color=i.toNumber(),n.alpha=i.alpha===1?e.alpha:i.alpha,n.texture=te.WHITE,{...e,...n}}function cM(n,t,e){return n.texture=t,{...e,...n}}function Lm(n,t,e){return n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,{...e,...n}}function Rm(n,t,e){return t.buildGradient(),n.fill=t,n.color=16777215,n.texture=t.texture,n.matrix=t.transform,n.textureSpace=t.textureSpace,{...e,...n}}function uM(n,t){const e={...t,...n},i=Ee.shared.setValue(e.color);return e.alpha*=i.alpha,e.color=i.toNumber(),e}function qr(n,t){if(n==null)return null;const e={},i=n;return aM(n)?lM(e,n,t):oM(n)?cM(e,n,t):Pm(n)?Lm(e,n,t):Dm(n)?Rm(e,n,t):i.fill&&Pm(i.fill)?Lm(i,i.fill,t):i.fill&&Dm(i.fill)?Rm(i,i.fill,t):uM(i,t)}function Su(n,t){const{width:e,alignment:i,miterLimit:r,cap:s,join:a,pixelLine:o,...c}=t,l=qr(n,c);return l?{width:e,alignment:i,miterLimit:r,cap:s,join:a,pixelLine:o,...l}:null}const hM=new ei,Im=new Qt,t1=class yn extends Ln{constructor(){super(...arguments),this.uid=Ne("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Ca,this._transform=new Qt,this._fillStyle={...yn.defaultFillStyle},this._strokeStyle={...yn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new on,this._boundsDirty=!0}clone(){const t=new yn;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=qr(t,yn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Su(t,yn.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=qr(t,yn.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=qr(t,yn.defaultStrokeStyle),this}texture(t,e,i,r,s,a){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:r||0,dw:s||t.frame.width,dh:a||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Ee.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Ca,this}fill(t,e){let i;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?i=r.data.path:i=this._activePath.clone(),i?(t!=null&&(e!==void 0&&typeof t=="number"&&(le(we,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=qr(t,yn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(ei.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?e=i.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Su(t,yn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,r,s,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,i,r,s,a),this}arcTo(t,e,i,r,s){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,s),this}arcToSvg(t,e,i,r,s,a,o){this._tick++;const c=this._transform;return this._activePath.arcToSvg(t,e,i,r,s,c.a*a+c.c*o+c.tx,c.b*a+c.d*o+c.ty),this}bezierCurveTo(t,e,i,r,s,a,o){this._tick++;const c=this._transform;return this._activePath.bezierCurveTo(c.a*t+c.c*e+c.tx,c.b*t+c.d*e+c.ty,c.a*i+c.c*r+c.tx,c.b*i+c.d*r+c.ty,c.a*s+c.c*a+c.tx,c.b*s+c.d*a+c.ty,o),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,r=this._activePath.instructions,s=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=s,r[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(t,e,i,r,s){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,s),this}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,s){return this._tick++,this._activePath.roundRect(t,e,i,r,s,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,s=0,a){return this._tick++,this._activePath.regularPoly(t,e,i,r,s,a),this}roundPoly(t,e,i,r,s,a){return this._tick++,this._activePath.roundPoly(t,e,i,r,s,a),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,s){return this._tick++,this._activePath.filletRect(t,e,i,r,s),this}chamferRect(t,e,i,r,s,a){return this._tick++,this._activePath.chamferRect(t,e,i,r,s,a),this}star(t,e,i,r,s=0,a=0){return this._tick++,this._activePath.star(t,e,i,r,s,a,this._transform.clone()),this}svg(t){return this._tick++,sM(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,r,s,a){return t instanceof Qt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,r,s,a),this)}transform(t,e,i,r,s,a){return t instanceof Qt?(this._transform.append(t),this):(Im.set(t,e,i,r,s,a),this._transform.append(Im),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],r=i.action;if(r==="fill"){const s=i.data;t.addBounds(s.path.bounds)}else if(r==="texture"){const s=i.data;t.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(r==="stroke"){const s=i.data,a=s.style.alignment,o=s.style.width*(1-a),c=s.path.bounds;t.addFrame(c.minX-o,c.minY-o,c.maxX+o,c.maxY+o)}}return t}containsPoint(t){var r;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let s=0;s<e.length;s++){const a=e[s],o=a.data,c=o.path;if(!a.action||!c)continue;const l=o.style,u=c.shapePath.shapePrimitives;for(let h=0;h<u.length;h++){const p=u[h].shape;if(!l||!p)continue;const f=u[h].transform,x=f?f.applyInverse(t,hM):t;if(a.action==="fill")i=p.contains(x.x,x.y);else{const d=l;i=p.strokeContains(x.x,x.y,d.width,d.alignment)}const y=o.hole;if(y){const d=(r=y.shapePath)==null?void 0:r.shapePrimitives;if(d)for(let _=0;_<d.length;_++)d[_].shape.contains(x.x,x.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};t1.defaultFillStyle={color:16777215,alpha:1,texture:te.WHITE,matrix:null,fill:null,textureSpace:"local"};t1.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:te.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let en=t1;const Nm=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function Hv(n){const t=[];let e=0;for(let i=0;i<Nm.length;i++){const r=`_${Nm[i]}`;t[e++]=n[r]}return e=Gv(n._fill,t,e),e=dM(n._stroke,t,e),e=fM(n.dropShadow,t,e),t.join("-")}function Gv(n,t,e){var i;return n&&(t[e++]=n.color,t[e++]=n.alpha,t[e++]=(i=n.fill)==null?void 0:i.styleKey),e}function dM(n,t,e){return n&&(e=Gv(n,t,e),t[e++]=n.width,t[e++]=n.alignment,t[e++]=n.cap,t[e++]=n.join,t[e++]=n.miterLimit),e}function fM(n,t,e){return n&&(t[e++]=n.alpha,t[e++]=n.angle,t[e++]=n.blur,t[e++]=n.distance,t[e++]=Ee.shared.setValue(n.color).toNumber()),e}const e1=class Gs extends Ln{constructor(t={}){super(),pM(t);const e={...Gs.defaultTextStyle,...t};for(const i in e){const r=i;this[r]=e[i]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Gs.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Gs.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...en.defaultFillStyle,...t},()=>{this._fill=qr({...this._originalFill},en.defaultFillStyle)})),this._fill=qr(t===0?"black":t,en.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...en.defaultStrokeStyle,...t},()=>{this._stroke=Su({...this._originalStroke},en.defaultStrokeStyle)})),this._stroke=Su(t,en.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=Hv(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=Gs.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Gs({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var i,r,s,a;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const o=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(o),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(o),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(o),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(i,r,s)=>(i[r]=s,e==null||e(r,s),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Ee.isColorLike(t)||t instanceof ls||t instanceof Z0)}};e1.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};e1.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Tu=e1;function pM(n){const t=n;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=Tu.defaultDropShadow;n.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){le(we,"strokeThickness is now a part of stroke");const e=t.stroke;let i={};if(Ee.isColorLike(e))i.color=e;else if(e instanceof ls||e instanceof Z0)i.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))i=e;else throw new Error("Invalid stroke value.");n.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){le(we,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;n.fontSize==null?n.fontSize=Tu.defaultTextStyle.fontSize:typeof n.fontSize=="string"?e=parseInt(n.fontSize,10):e=n.fontSize;const i=new ls({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),r=t.fillGradientStops.map(s=>Ee.shared.setValue(s).toNumber());r.forEach((s,a)=>{const o=a/(r.length-1);i.addColorStop(o,s)}),n.fill={fill:i}}}const gM=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function mM(n){const t=typeof n.fontSize=="number"?`${n.fontSize}px`:n.fontSize;let e=n.fontFamily;Array.isArray(n.fontFamily)||(e=n.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!gM.includes(r)&&(r=`"${r}"`),e[i]=r}return`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${t} ${e.join(",")}`}const Sd={willReadFrequently:!0},un=class Rt{static get experimentalLetterSpacingSupported(){let t=Rt._experimentalLetterSpacingSupported;if(t!==void 0){const e=sn.get().getCanvasRenderingContext2D().prototype;t=Rt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,r,s,a,o,c,l){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=c,this.fontProperties=l}static measureText(t=" ",e,i=Rt._canvas,r=e.wordWrap){var g;const s=`${t}:${e.styleKey}`;if(Rt._measurementCache[s])return Rt._measurementCache[s];const a=mM(e),o=Rt.measureFont(a);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const c=Rt.__context;c.font=a;const u=(r?Rt._wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),h=new Array(u.length);let p=0;for(let m=0;m<u.length;m++){const v=Rt._measureText(u[m],e.letterSpacing,c);h[m]=v,p=Math.max(p,v)}const f=((g=e._stroke)==null?void 0:g.width)||0;let x=p+f;e.dropShadow&&(x+=e.dropShadow.distance);const y=e.lineHeight||o.fontSize;let d=Math.max(y,o.fontSize+f)+(u.length-1)*(y+e.leading);return e.dropShadow&&(d+=e.dropShadow.distance),new Rt(t,e,x,d,u,h,y+e.leading,p,o)}static _measureText(t,e,i){let r=!1;Rt.experimentalLetterSpacingSupported&&(Rt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const s=i.measureText(t);let a=s.width;const o=-s.actualBoundingBoxLeft;let l=s.actualBoundingBoxRight-o;if(a>0)if(r)a-=e,l-=e;else{const u=(Rt.graphemeSegmenter(t).length-1)*e;a+=u,l+=u}return Math.max(a,l)}static _wordWrap(t,e,i=Rt._canvas){const r=i.getContext("2d",Sd);let s=0,a="",o="";const c=Object.create(null),{letterSpacing:l,whiteSpace:u}=e,h=Rt._collapseSpaces(u),p=Rt._collapseNewlines(u);let f=!h;const x=e.wordWrapWidth+l,y=Rt._tokenize(t);for(let d=0;d<y.length;d++){let _=y[d];if(Rt._isNewline(_)){if(!p){o+=Rt._addLine(a),f=!h,a="",s=0;continue}_=" "}if(h){const m=Rt.isBreakingSpace(_),v=Rt.isBreakingSpace(a[a.length-1]);if(m&&v)continue}const g=Rt._getFromCache(_,l,c,r);if(g>x)if(a!==""&&(o+=Rt._addLine(a),a="",s=0),Rt.canBreakWords(_,e.breakWords)){const m=Rt.wordWrapSplit(_);for(let v=0;v<m.length;v++){let S=m[v],M=S,w=1;for(;m[v+w];){const P=m[v+w];if(!Rt.canBreakChars(M,P,_,v,e.breakWords))S+=P;else break;M=P,w++}v+=w-1;const L=Rt._getFromCache(S,l,c,r);L+s>x&&(o+=Rt._addLine(a),f=!1,a="",s=0),a+=S,s+=L}}else{a.length>0&&(o+=Rt._addLine(a),a="",s=0);const m=d===y.length-1;o+=Rt._addLine(_,!m),f=!1,a="",s=0}else g+s>x&&(f=!1,o+=Rt._addLine(a),a="",s=0),(a.length>0||!Rt.isBreakingSpace(_)||f)&&(a+=_,s+=g)}return o+=Rt._addLine(a,!1),o}static _addLine(t,e=!0){return t=Rt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,i,r){let s=i[t];return typeof s!="number"&&(s=Rt._measureText(t,e,r)+e,i[t]=s),s}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!Rt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:Rt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Rt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const s=t[r],a=t[r+1];if(Rt.isBreakingSpace(s,a)||Rt._isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,s){return!0}static wordWrapSplit(t){return Rt.graphemeSegmenter(t)}static measureFont(t){if(Rt._fonts[t])return Rt._fonts[t];const e=Rt._context;e.font=t;const i=e.measureText(Rt.METRICS_STRING+Rt.BASELINE_SYMBOL),r={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return Rt._fonts[t]=r,r}static clearMetrics(t=""){t?delete Rt._fonts[t]:Rt._fonts={}}static get _canvas(){if(!Rt.__canvas){let t;try{const e=new OffscreenCanvas(0,0),i=e.getContext("2d",Sd);if(i!=null&&i.measureText)return Rt.__canvas=e,e;t=sn.get().createCanvas()}catch{t=sn.get().createCanvas()}t.width=t.height=10,Rt.__canvas=t}return Rt.__canvas}static get _context(){return Rt.__context||(Rt.__context=Rt._canvas.getContext("2d",Sd)),Rt.__context}};un.METRICS_STRING="|ÉqÅ";un.BASELINE_SYMBOL="M";un.BASELINE_MULTIPLIER=1.4;un.HEIGHT_MULTIPLIER=2;un.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})();un.experimentalLetterSpacing=!1;un._fonts={};un._newlines=[10,13];un._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];un._measurementCache={};let yM=un;class oe extends X0{constructor(t){t instanceof en&&(t={context:t});const{context:e,roundPixels:i,...r}=t||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new en,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new oe(this._context.clone()):(this._ownedContext=null,new oe(this._context))}lineStyle(t,e,i){le(we,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return t&&(r.width=t),e&&(r.color=e),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(t,e){le(we,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),e!==void 0&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){le(we,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==en.defaultStrokeStyle.width||t.color!==en.defaultStrokeStyle.color||t.alpha!==en.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return le(we,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return le(we,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return le(we,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return le(we,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return le(we,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return le(we,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class Wv extends X0{constructor(t,e){const{text:i,resolution:r,style:s,anchor:a,width:o,height:c,roundPixels:l,...u}=t;super({...u}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=i??"",this.style=s,this.resolution=r??null,this.allowChildren=!1,this._anchor=new pi({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=l??!1,o!==void 0&&(this.width=o),c!==void 0&&(this.height=c)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t||(t={}),(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}containsPoint(t){const e=this.bounds.width,i=this.bounds.height,r=-e*this.anchor.x;let s=0;return t.x>=r&&t.x<=r+e&&(s=-i*this.anchor.y,t.y>=s&&t.y<=s+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function $v(n,t){let e=n[0]??{};return(typeof e=="string"||n[1])&&(le(we,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:n[1]}),e}let Uv=class extends Wv{constructor(...t){const e=$v(t,"Text");super(e,Tu),this.renderPipeId="text"}updateBounds(){const t=this._bounds,e=this._anchor,i=yM.measureText(this._text,this._style),{width:r,height:s}=i;t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}};function vM(n){const t=n._stroke,e=n._fill,r=[`div { ${[`color: ${Ee.shared.setValue(e.color).toHex()}`,`font-size: ${n.fontSize}px`,`font-family: ${n.fontFamily}`,`font-weight: ${n.fontWeight}`,`font-style: ${n.fontStyle}`,`font-variant: ${n.fontVariant}`,`letter-spacing: ${n.letterSpacing}px`,`text-align: ${n.align}`,`padding: ${n.padding}px`,`white-space: ${n.whiteSpace==="pre"&&n.wordWrap?"pre-wrap":n.whiteSpace}`,...n.lineHeight?[`line-height: ${n.lineHeight}px`]:[],...n.wordWrap?[`word-wrap: ${n.breakWords?"break-all":"break-word"}`,`max-width: ${n.wordWrapWidth}px`]:[],...t?[jv(t)]:[],...n.dropShadow?[Yv(n.dropShadow)]:[],...n.cssOverrides].join(";")} }`];return xM(n.tagStyles,r),r.join(" ")}function Yv(n){const t=Ee.shared.setValue(n.color).setAlpha(n.alpha).toHexa(),e=Math.round(Math.cos(n.angle)*n.distance),i=Math.round(Math.sin(n.angle)*n.distance),r=`${e}px ${i}px`;return n.blur>0?`text-shadow: ${r} ${n.blur}px ${t}`:`text-shadow: ${r} ${t}`}function jv(n){return[`-webkit-text-stroke-width: ${n.width}px`,`-webkit-text-stroke-color: ${Ee.shared.setValue(n.color).toHex()}`,`text-stroke-width: ${n.width}px`,`text-stroke-color: ${Ee.shared.setValue(n.color).toHex()}`,"paint-order: stroke"].join(";")}const Fm={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},Om={fill:n=>`color: ${Ee.shared.setValue(n).toHex()}`,breakWords:n=>`word-wrap: ${n?"break-all":"break-word"}`,stroke:jv,dropShadow:Yv};function xM(n,t){for(const e in n){const i=n[e],r=[];for(const s in i)Om[s]?r.push(Om[s](i[s])):Fm[s]&&r.push(Fm[s].replace("{{VALUE}}",i[s]));t.push(`${e} { ${r.join(";")} }`)}}class i1 extends Tu{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=t.cssOverrides),this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=Hv(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new i1({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=vM(this)),this._cssStyle}addOverride(...t){const e=t.filter(i=>!this.cssOverrides.includes(i));e.length>0&&(this.cssOverrides.push(...e),this.update())}removeOverride(...t){const e=t.filter(i=>this.cssOverrides.includes(i));e.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!e.includes(i)),this.update())}set fill(t){typeof t!="string"&&typeof t!="number"&&oi("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&typeof t!="string"&&typeof t!="number"&&oi("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}const Bm="http://www.w3.org/2000/svg",zm="http://www.w3.org/1999/xhtml";class _M{constructor(){this.svgRoot=document.createElementNS(Bm,"svg"),this.foreignObject=document.createElementNS(Bm,"foreignObject"),this.domElement=document.createElementNS(zm,"div"),this.styleElement=document.createElementNS(zm,"style"),this.image=new Image;const{foreignObject:t,svgRoot:e,styleElement:i,domElement:r}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(r)}}let Hm;function bM(n,t,e,i){i||(i=Hm||(Hm=new _M));const{domElement:r,styleElement:s,svgRoot:a}=i;r.innerHTML=`<style>${t.cssStyle};</style><div style='padding:0'>${n}</div>`,r.setAttribute("style","transform-origin: top left; display: inline-block"),e&&(s.textContent=e),document.body.appendChild(a);const o=r.getBoundingClientRect();a.remove();const c=t.padding*2;return{width:o.width-c,height:o.height-c}}class wM extends Wv{constructor(...t){const e=$v(t,"HtmlText");super(e,i1),this.renderPipeId="htmlText"}updateBounds(){const t=this._bounds,e=this._anchor,i=bM(this.text,this._style),{width:r,height:s}=i;t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*s,t.maxY=t.minY+s}}class n1 extends te{static create(t){return new n1({source:new cn(t)})}resize(t,e,i){return this.source.resize(t,e,i),this}}Xi.add(OC,BC);let CM=class{static init(){}};const ol=class ol{static init(t){this.pixi=t}static generate(t,e){const i=e.getLocalBounds(),r=0,s=0;e.position.set(-i.x+r,-i.y+s);const a=n1.create({width:i.width+r*2,height:i.height+s*2});return this.pixi.renderer.render(e,{renderTexture:a}),this.dict[t]=a,a}static generateFromCanvas(t,e){const i=new Cr(te.from(e)),r=Math.min(e.width,e.height),s=new oe().rect(0,0,r,r).fill("#fff");s.mask=i,ol.generate(t,s)}static instance(t){if(this.dict[t]===void 0)throw new Error(`Texture ${t} not found`);const e=this.dict[t],i=new Cr(e);return i.anchor.set(.5),i}};ot(ol,"pixi"),ot(ol,"dict",{});let Ye=ol;const Gm=an(rn.range[0]).formatHex(),Wm=an(rn.range[1]).formatHex(),_e=class _e extends CM{static init(){const t=_e.getBackground();Ye.generate("background",t);const e=_e.getPointer();Ye.generate("LocationIcon-pointer",e);const i=_e.getCenter();Ye.generate("LocationIcon-center",i);const r=_e.getUnknown();Ye.generate("LocationIcon-unknown",r)}static getBackground(){const t=_e.size;return new oe().circle(t*.5,t*.5,t*.5).fill("#fff")}static getPointer(){const t=_e.size,e=Math.PI*.7,i=t*.15,r=t*.5,s=t*.8,a=document.createElement("canvas");a.width=t,a.height=t;const o=a.getContext("2d");o.fillStyle="#fff",o.fillRect(0,0,t,t),o.globalCompositeOperation="destination-out",o.beginPath(),o.moveTo(t*.5,t*.05),o.lineTo(r+i*Math.cos(Math.PI/2-e),s+i*Math.sin(Math.PI/2-e)),o.lineTo(r,s),o.lineTo(r+i*Math.cos(Math.PI/2+e),s+i*Math.sin(Math.PI/2+e)),o.closePath(),o.fill();const c=new Cr(te.from(a)),l=new oe().circle(t*.5,t*.5,t*.5).fill("#fff");return l.mask=c,l}static getCenter(){const t=_e.size,e=t*.15,i=t*.5,r=t*.5,s=document.createElement("canvas");s.width=t,s.height=t;const a=s.getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,t,t),a.globalCompositeOperation="destination-out",a.beginPath(),a.arc(i,r,e,0,Math.PI*2),a.fill();const o=new Cr(te.from(s)),c=new oe().circle(t*.5,t*.5,t*.5).fill("#fff");return c.mask=o,c}static getUnknown(){const t=_e.size,e=t*.5,i=t*.5,r=t*.7,s=document.createElement("canvas");s.width=t,s.height=t;const a=s.getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,t,t),a.globalCompositeOperation="destination-out",a.font=`bold ${r}px sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText("?",e,i),a.fill();const o=new Cr(te.from(s)),c=new oe().circle(t*.5,t*.5,t*.5).fill("#fff");return c.mask=o,c}static drawBackground(t,e,i=!1){let r=t.getChildByLabel("location-label-background");(r===null||i)&&(t.removeChildren(),r=Ye.instance("background"),r.label="location-label-background",t.addChild(r)),r.x=e*.5,r.y=e*.5,r.scale=e/_e.size}static drawUnknown(t,e,i=!1){let r=t.getChildByLabel("location-icon");const s=Wm;return(r===null||i)&&(r=Ye.instance("LocationIcon-unknown"),r.label="location-icon",t.addChild(r)),r.x=e*.5,r.y=e*.5,r.scale=e/_e.size,r.tint=Number.parseInt(rn.range[rn.range.length-1].slice(1),16),s}static drawCenter(t,e,i=!1){let r=t.getChildByLabel("location-icon");const s=Gm;return(r===null||i)&&(r=Ye.instance("LocationIcon-center"),r.label="location-icon",t.addChild(r)),r.x=e*.5,r.y=e*.5,r.scale=e/_e.size,r.tint=Number.parseInt(s.slice(1),16),s}static drawPointer(t,e,i,r,s=!1){let a=t.getChildByLabel("location-icon");const o=an(_e.distanceColorMap(i)).formatHex();return(a===null||s)&&(a=Ye.instance("LocationIcon-pointer"),a.label="location-icon",t.addChild(a)),a.x=e*.5,a.y=e*.5,a.scale=e/_e.size,a.tint=Number.parseInt(o.slice(1),16),a.rotation=r,o}static draw(t,e,i,r,s=!1){if(_e.drawBackground(t,e,s),r===null)return _e.drawUnknown(t,e,s);const a=i.distanceTo(r),o=a<1?void 0:i.bearingTo(r);return o===void 0?_e.drawCenter(t,e,s):_e.drawPointer(t,e,a,o,s)}static getColor(t,e){if(e===null)return Wm;const i=t.distanceTo(e);return(i<1?void 0:t.bearingTo(e))===void 0?Gm:an(_e.distanceColorMap(i)).formatHex()}static updateColorMap(t,e,i){if(i===null)return;const r=e.distanceTo(i);t.children[0].fill(_e.distanceColorMap(r))}static get distanceColorMap(){return ji().domain([0,De.value.distance]).range(rn.range).clamp(!0).interpolate(P8)}};ot(_e,"size",200);let Sa=_e;function $m(n,t,e,i,r,s){n.beginPath(),n.moveTo(t+s,e),n.lineTo(t+i-s,e),n.quadraticCurveTo(t+i,e,t+i,e+s),n.lineTo(t+i,e+r-s),n.quadraticCurveTo(t+i,e+r,t+i-s,e+r),n.lineTo(t+s,e+r),n.quadraticCurveTo(t,e+r,t,e+r-s),n.lineTo(t,e+s),n.quadraticCurveTo(t,e,t+s,e),n.closePath()}const Ke=class Ke{static init(){Ke.generateTexture("background",Ke.getBackground());for(const t in Ke.type_dict){const e=Ke.getTypeGlyph(t);Ke.generateTexture(t,e)}}static getBackground(){const t=document.createElement("canvas"),e=Ke.size;t.width=e,t.height=e;const i=t.getContext("2d");return i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",$m(i,10,10,t.width-20,t.height-20,30),i.fill(),t}static getTypeGlyph(t){const e=document.createElement("canvas"),i=Ke.size,r=i*.7,s=Ke.type_dict[t];e.width=i,e.height=i;const a=e.getContext("2d");return a.fillStyle="#fff",a.fillRect(0,0,e.width,e.height),a.globalCompositeOperation="destination-in",$m(a,10,10,e.width-20,e.height-20,30),a.fill(),a.globalCompositeOperation="destination-out",a.textAlign="center",a.textBaseline="middle",a.font=`bold ${r}px Source-heavy`,a.fillText(s,e.width/2,e.height/2),e}static generateTexture(t,e){Ye.generateFromCanvas(`type-glyph-${t}`,e)}static draw(t,e,i,r,s=!1){let a="type-glyph",o=t.getChildByLabel("type-glyph-background");(o===null||s)&&(o=Ye.instance("type-glyph-background"),o.label="type-glyph-background",t.addChild(o));let c=t.getChildByLabel(a);(c===null||s)&&(c=Ye.instance(`type-glyph-${e}`),c.label=a,t.addChild(c)),o.x=i*.5,o.y=i*.5,o.scale=i/Ke.size,o.tint=16777215,c.x=i*.5,c.y=i*.5,c.scale=i/Ke.size,c.tint=Number.parseInt(r.slice(1),16)}static drawOnCanvas(t,e,i,r){const s=t.getContext("2d"),a=Ke.getTypeGlyph(e);s.drawImage(a,0,0,i,i),s.globalCompositeOperation="source-in",s.fillStyle=r,s.fillRect(0,0,i,i)}};ot(Ke,"size",200),ot(Ke,"type_dict",{皇帝:"皇",文官:"文",武將:"武",宗室:"宗",后妃:"妃",宦官:"宦",僧道:"僧",學者:"學",布衣:"布",其他:"?"}),ot(Ke,"key_dict",{皇帝:"emperor",文官:"official",武將:"general",宗室:"royal",后妃:"consort",宦官:"eunuch",僧道:"monk",學者:"scholar",布衣:"commoner",其他:"other"});let ku=Ke;const Yt=class Yt{static init(){Yt.generateTexture("hexagon-background",Yt.getHexagonBackground());for(const t in Yt.typeFunctions)Yt.generateTexture(t,Yt.typeFunctions[t]())}static generateTexture(t,e){Ye.generateFromCanvas(`event-glyph-${t}`,e)}static draw(t,e,i,r,s=!1){const a="event-glyph",o=Yt.needBackground.includes(e);let c=t.getChildByLabel("event-glyph-background");(c===null||s)&&o&&(c=Ye.instance("event-glyph-hexagon-background"),c.label="event-glyph-background",t.addChild(c)),o&&(c.x=i*.5,c.y=i*.5,c.scale=i/Yt.size);let l=t.getChildByLabel(a);(l===null||s)&&(l=Ye.instance(`event-glyph-${e}`),l.label=a,t.addChild(l)),l.x=i*.5,l.y=i*.5,l.scale=i/Yt.size,l.tint=Number.parseInt(r.slice(1),16)}static drawOnCanvas(t,e,i,r){const s=t.getContext("2d"),a=Yt.typeFunctions[e]();s.drawImage(a,0,0,i,i),s.globalCompositeOperation="source-in",s.fillStyle=r,s.fillRect(0,0,i,i)}static getHexagonBackground(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");return i.fillStyle="#fff",i.beginPath(),i.moveTo(e*.5,0),i.lineTo(e,e*.25),i.lineTo(e,e*.75),i.lineTo(e*.5,e),i.lineTo(0,e*.75),i.lineTo(0,e*.25),i.closePath(),i.fill(),t}static getEducationGlyph(){const t=document.createElement("canvas"),e=Yt.size,i=e*.8;t.width=e,t.height=e;const r=t.getContext("2d");return r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height),r.globalCompositeOperation="destination-in",r.arc(t.width/2,t.height/2,i*.5,0,Math.PI*2),r.fill(),t}static getEntryGlyph(){const t=document.createElement("canvas"),e=Yt.size,i=e*.5;t.width=e,t.height=e;const r=t.getContext("2d"),s=i*.3;return r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height),r.globalCompositeOperation="destination-in",r.beginPath(),r.moveTo((e-i)/2,0),r.lineTo((e-i)/2,e),r.lineTo((e+i)/2-s,e),r.lineTo((e+i)/2+s,e/2),r.lineTo((e+i)/2-s,0),r.closePath(),r.fill(),t}static getPromotionGlyph(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");return i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",i.beginPath(),i.moveTo(e*.5,0),i.lineTo(e,e*.25),i.lineTo(e,e*.75),i.lineTo(e*.5,e),i.lineTo(0,e*.75),i.lineTo(0,e*.25),i.closePath(),i.fill(),i.globalCompositeOperation="destination-out",i.lineWidth=e*.1,i.beginPath(),i.moveTo(e*.5,e*.8),i.lineTo(e*.5,e*.2),i.moveTo(e*.15,e*.5),i.lineTo(e*.5,e*.2),i.lineTo(e*.85,e*.5),i.stroke(),t}static getDemotionGlyph(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");return i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",i.beginPath(),i.moveTo(e*.5,0),i.lineTo(e,e*.25),i.lineTo(e,e*.75),i.lineTo(e*.5,e),i.lineTo(0,e*.75),i.lineTo(0,e*.25),i.closePath(),i.fill(),i.globalCompositeOperation="destination-out",i.lineWidth=e*.1,i.beginPath(),i.moveTo(e*.5,e*.2),i.lineTo(e*.5,e*.8),i.moveTo(e*.15,e*.5),i.lineTo(e*.5,e*.8),i.lineTo(e*.85,e*.5),i.stroke(),t}static getTransferGlyph(){const t=document.createElement("canvas"),e=Yt.size,i=e*.15;t.width=e,t.height=e;const r=t.getContext("2d");return r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height),r.globalCompositeOperation="destination-in",r.beginPath(),r.moveTo(e*.5,0),r.lineTo(e,e*.25),r.lineTo(e,e*.75),r.lineTo(e*.5,e),r.lineTo(0,e*.75),r.lineTo(0,e*.25),r.closePath(),r.fill(),r.globalCompositeOperation="destination-out",r.beginPath(),r.arc(e*.5,e*.5,i,0,Math.PI*2),r.fill(),t}static getSpecialPostGlyph(){const t=document.createElement("canvas"),e=Yt.size,i=e*.8;t.width=e,t.height=e;const r=t.getContext("2d");return r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height),r.globalCompositeOperation="destination-in",r.beginPath(),r.moveTo(e*.5,0),r.lineTo(e,e*.25),r.lineTo(e,e*.75),r.lineTo(e*.5,e),r.lineTo(0,e*.75),r.lineTo(0,e*.25),r.closePath(),r.fill(),r.globalCompositeOperation="destination-out",r.textAlign="center",r.textBaseline="middle",r.font=`bold ${i}px Source`,r.fillText("!",e*.5,e*.5),t}static getHighestPostGlyph(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height);const r=document.createElement("canvas");r.width=e,r.height=e;const s=r.getContext("2d");s.clearRect(0,0,e,e);const a=e*.1,o=e*.07,c=(a+o)*2;s.fillStyle="#fff",s.beginPath(),s.moveTo(e*.5,c),s.lineTo(e,c+(e-c)*.25),s.lineTo(e,c+(e-c)*.75),s.lineTo(e*.5,e),s.lineTo(0,c+(e-c)*.75),s.lineTo(0,c+(e-c)*.25),s.closePath(),s.fill();for(let l=0;l<2;++l){let u=(a+o)*l,h=u+(e-c)*.25;s.beginPath(),s.moveTo(e*.5,u),s.lineTo(e,h),s.lineTo(e,h+a),s.lineTo(e*.5,u+a),s.lineTo(0,h+a),s.lineTo(0,h),s.closePath(),s.fill()}return i.globalCompositeOperation="destination-in",i.drawImage(r,0,0),t}static getDismissalGlyph(){const t=document.createElement("canvas"),e=Yt.size,i=e*.5;t.width=e,t.height=e;const r=t.getContext("2d"),s=i*.3;return r.fillStyle="#fff",r.fillRect(0,0,t.width,t.height),r.globalCompositeOperation="destination-in",r.beginPath(),r.moveTo((e+i)/2,0),r.lineTo((e+i)/2,e),r.lineTo((e-i)/2+s,e),r.lineTo((e-i)/2-s,e/2),r.lineTo((e-i)/2+s,0),r.closePath(),r.fill(),t}static getAchievementGlyph(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",i.beginPath();const r=5,s=e*.4,a=e*.2;for(let o=0;o<r;o++){const c=o/r*Math.PI*2-Math.PI/2,l=Math.cos(c)*s+e/2,u=Math.sin(c)*s+e/2;i.lineTo(l,u);const h=(o+.5)/r*Math.PI*2-Math.PI/2,p=Math.cos(h)*a+e/2,f=Math.sin(h)*a+e/2;i.lineTo(p,f)}return i.closePath(),i.fill(),t}static getOtherGlyph(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");return i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",i.beginPath(),i.arc(e/2,e/2,e*.4,0,Math.PI*2),i.closePath(),i.fill(),t}static getRelatedFigureGlyph(){const t=document.createElement("canvas"),e=Yt.size;t.width=e,t.height=e;const i=t.getContext("2d");return i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.globalCompositeOperation="destination-in",i.beginPath(),i.arc(e/2,e/2,e*.4,0,Math.PI*2),i.closePath(),i.fill(),t}};ot(Yt,"size",200),ot(Yt,"typeFunctions",{教育:Yt.getEducationGlyph,入仕:Yt.getEntryGlyph,升職:Yt.getPromotionGlyph,降職:Yt.getDemotionGlyph,平調:Yt.getTransferGlyph,特殊官職:Yt.getSpecialPostGlyph,最高官職:Yt.getHighestPostGlyph,罷官:Yt.getDismissalGlyph,成就:Yt.getAchievementGlyph,其他:Yt.getOtherGlyph,相關人物:Yt.getRelatedFigureGlyph}),ot(Yt,"needBackground",["升職","降職","平調","特殊官職","最高官職"]);let Mu=Yt;const SM=Object.freeze(Object.defineProperty({__proto__:null,EventTypeGlyph:Mu,FigureTypeGlyph:ku,LocationIcon:Sa},Symbol.toStringTag,{value:"Module"}));function TM(n){return function(){return n}}let Xv=class{constructor(t,e){ot(this,"__data__");ot(this,"parent");ot(this,"_next");this.parent=t,this.__data__=e}addChild(t){const e=this.parent.children.findIndex(i=>i===this._next);return t.__data__=this.__data__,e===-1?this.parent.addChild(t):this.parent.addChildAt(t,e)}};function kM(n,t,e,i,r,s){let a=0,o,c=t.length,l=s.length;for(;a<l;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):e[a]=new Xv(n,s[a]);for(;a<c;++a)(o=t[a])&&(r[a]=o)}function MM(n,t,e,i,r,s,a){let o,c,l=new Map,u=t.length,h=s.length,p=new Array(u),f;for(o=0;o<u;++o)(c=t[o])&&(p[o]=f=a.call(c,c.__data__,o,t)+"",l.has(f)?r[o]=c:l.set(f,c));for(o=0;o<h;++o)f=a.call(n,s[o],o,s)+"",(c=l.get(f))?(i[o]=c,c.__data__=s[o],l.delete(f)):e[o]=new Xv(n,s[o]);for(o=0;o<u;++o)(c=t[o])&&l.get(p[o])===c&&(r[o]=c)}function AM(n){return function(){delete this[n]}}function EM(n,t){return function(){this[n]=t}}function PM(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}const DM={graphics:()=>new oe,text:()=>new Uv,htmlText:()=>new wM,sprite:()=>new Cr,container:()=>new Ue};function LM(n){return DM[n]}const RM=function(){return null},IM=function(){return[]};function NM(n){return n==null?RM:function(){return this===null?null:this.getChildByLabel(n)}}function FM(n){return n==null?IM:function(){return this==null?void 0:this.getChildrenByLabel(n)}}function OM(){this==null||this.removeFromParent()}function BM(n,t,e){this==null||this.on(n,i=>{t.call(this,i,e)})}function fr(n){return Array.isArray(n)?new Um([n]):new Um([[n]])}let Um=class Ur{constructor(t,e){ot(this,"_groups",[]);ot(this,"_parents",[]);this._groups=t,this._parents=e??[null]}*[Symbol.iterator](){for(let t=this._groups,e=t.length,i=0;i<e;++i)for(let r=t[i],s=r.length,a=0,o;a<s;++a)(o=r[a])&&(yield o)}select(t){typeof t!="function"&&(t=NM(t));const e=this._groups,i=e.length,r=new Array(i);for(let s=0;s<i;++s)for(let a=e[s],o=a.length,c=r[s]=new Array(o),l,u,h=0;h<o;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),c[h]=u);return new Ur(r,this._parents)}selectAll(t){typeof t!="function"&&(t=FM(t));const e=this._groups,i=e.length,r=[],s=[];for(let a=0;a<i;++a)for(let o=e[a],c=o.length,l,u=0;u<c;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),s.push(l));return new Ur(r,s)}each(t){for(let e=0;e<this._groups.length;++e){const i=this._groups[e];for(let r=0;r<i.length;++r){const s=i[r];s&&t.call(s,s.__data__,r,i)}}return this}node(){for(let t=0,e=this._groups,i=e.length;t<i;++t)for(let r=e[t],s=0,a=r.length;s<a;++s){let o=r[s];if(o)return o}return null}nodes(){return Array.from(this)}attr(t,e){return arguments.length>1?this.each((e==null?AM:typeof e=="function"?PM:EM)(t,e)):this.node()[t]}datum(t){return arguments.length?this.attr("__data__",t):this.node().__data__}data(t,e){if(arguments.length===0)return Array.from(this,h=>h.__data__);const i=this._groups,r=this._parents,s=e?MM:kM,a=i.length,o=new Array(a),c=new Array(a),l=new Array(a);typeof t!="function"&&(t=TM(t));for(let h=0;h<a;++h){let p=r[h],f=i[h],x=i.length,y=t.call(p,p&&p.__data__,h,r),d=y.length,_=c[h]=new Array(d),g=o[h]=new Array(d),m=l[h]=new Array(x);s(p,f,_,g,m,y,e);for(let v=0,S=0,M,w;v<d;++v)if(M=_[v]){for(v>=S&&(S=v+1);!(w=g[S])&&++S<d;);M._next=w||null}}const u=new Ur(o,r);return u._enter=c,u._exit=l,u}append(t){const e=typeof t!="function"?LM(t):t;return this.select(function(){return this.addChild(e.apply(this,arguments))})}enter(){return new Ur(this._enter||this._groups.map(t=>new Array(t.length)),this._parents)}exit(){return new Ur(this._exit||this._groups.map(t=>new Array(t.length)),this._parents)}order(){const t=this._groups,e=t.length;for(let i=0,r,s,a;i<e;++i){r=t[i],s=r.length;for(let o=0,c;o<s;++o)(c=r[o])&&(a=c)&&(c.zIndex=o);a&&a.parent.sortChildren();for(let o=0,c;o<s;++o)(c=r[o])&&(c.zIndex=0)}return this}merge(t){const e=this._groups,i=t._groups,r=e.length,s=i.length,a=Math.min(r,s),o=new Array(r);let c=0;for(;c<a;++c)for(let l=e[c],u=i[c],h=l.length,p=o[c]=new Array(h),f,x=0;x<h;++x)(f=l[x]||u[x])&&(p[x]=f);for(;c<r;++c)o[c]=e[c];return new Ur(o,this._parents)}remove(){this.each(OM)}on(t,e){this.each(function(i){BM.call(this,t,e,i)})}join(t,e,i){let r=this.enter(),s=this,a=this.exit();return typeof t=="function"?r=t(r):r=r.append(t+""),e&&(s=e(s)),i?i(a):a.remove(),r&&s?r.merge(s).order():s}};function zM(n){return function(){return n}}class Vv{constructor(t,e){ot(this,"__data__");ot(this,"parent");ot(this,"_next");this.parent=t,this.__data__=e}addChild(t){const e=this.parent,i=e.children.findIndex(r=>r===this._next);return t.__data__=this.__data__,i!==-1?(e.children.splice(i,0,t),t.parent=e):(e.children.push(t),t.parent=e),t}}function HM(n,t,e,i,r,s){let a=0,o,c=t.length,l=s.length;for(;a<l;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):e[a]=new Vv(n,s[a]);for(;a<c;++a)(o=t[a])&&(r[a]=o)}function GM(n,t,e,i,r,s,a){let o,c,l=new Map,u=t.length,h=s.length,p=new Array(u),f;for(o=0;o<u;++o)(c=t[o])&&(p[o]=f=a.call(c,c.__data__,o,t)+"",l.has(f)?r[o]=c:l.set(f,c));for(o=0;o<h;++o)f=a.call(n,s[o],o,s)+"",(c=l.get(f))?(i[o]=c,c.__data__=s[o],l.delete(f)):e[o]=new Vv(n,s[o]);for(o=0;o<u;++o)(c=t[o])&&l.get(p[o])===c&&(r[o]=c)}function WM(n){return function(){delete this[n]}}function $M(n,t){return function(){this[n]=t}}function UM(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}var Wc={exports:{}},Xa={},Td={},kd={},Ym;function Ut(){return Ym||(Ym=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n._registerNode=n.Konva=n.glob=void 0;const t=Math.PI/180;function e(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}n.glob=typeof ip<"u"?ip:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},n.Konva={_global:n.glob,version:"9.3.20",isBrowser:e(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return n.Konva.angleDeg?r*t:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return n.Konva.DD.isDragging},isTransforming(){var r;return(r=n.Konva.Transformer)===null||r===void 0?void 0:r.isTransforming()},isDragReady(){return!!n.Konva.DD.node},releaseCanvasOnDestroy:!0,document:n.glob.document,_injectGlobal(r){n.glob.Konva=r}};const i=r=>{n.Konva[r.prototype.getClassName()]=r};n._registerNode=i,n.Konva._injectGlobal(n.Konva)}(kd)),kd}var Md={},jm;function Se(){return jm||(jm=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.Transform=void 0;const t=Ut();class e{constructor(v=[1,0,0,1,0,0]){this.dirty=!1,this.m=v&&v.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new e(this.m)}copyInto(v){v.m[0]=this.m[0],v.m[1]=this.m[1],v.m[2]=this.m[2],v.m[3]=this.m[3],v.m[4]=this.m[4],v.m[5]=this.m[5]}point(v){const S=this.m;return{x:S[0]*v.x+S[2]*v.y+S[4],y:S[1]*v.x+S[3]*v.y+S[5]}}translate(v,S){return this.m[4]+=this.m[0]*v+this.m[2]*S,this.m[5]+=this.m[1]*v+this.m[3]*S,this}scale(v,S){return this.m[0]*=v,this.m[1]*=v,this.m[2]*=S,this.m[3]*=S,this}rotate(v){const S=Math.cos(v),M=Math.sin(v),w=this.m[0]*S+this.m[2]*M,L=this.m[1]*S+this.m[3]*M,P=this.m[0]*-M+this.m[2]*S,N=this.m[1]*-M+this.m[3]*S;return this.m[0]=w,this.m[1]=L,this.m[2]=P,this.m[3]=N,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(v,S){const M=this.m[0]+this.m[2]*S,w=this.m[1]+this.m[3]*S,L=this.m[2]+this.m[0]*v,P=this.m[3]+this.m[1]*v;return this.m[0]=M,this.m[1]=w,this.m[2]=L,this.m[3]=P,this}multiply(v){const S=this.m[0]*v.m[0]+this.m[2]*v.m[1],M=this.m[1]*v.m[0]+this.m[3]*v.m[1],w=this.m[0]*v.m[2]+this.m[2]*v.m[3],L=this.m[1]*v.m[2]+this.m[3]*v.m[3],P=this.m[0]*v.m[4]+this.m[2]*v.m[5]+this.m[4],N=this.m[1]*v.m[4]+this.m[3]*v.m[5]+this.m[5];return this.m[0]=S,this.m[1]=M,this.m[2]=w,this.m[3]=L,this.m[4]=P,this.m[5]=N,this}invert(){const v=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),S=this.m[3]*v,M=-this.m[1]*v,w=-this.m[2]*v,L=this.m[0]*v,P=v*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),N=v*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=S,this.m[1]=M,this.m[2]=w,this.m[3]=L,this.m[4]=P,this.m[5]=N,this}getMatrix(){return this.m}decompose(){const v=this.m[0],S=this.m[1],M=this.m[2],w=this.m[3],L=this.m[4],P=this.m[5],N=v*w-S*M,k={x:L,y:P,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(v!=0||S!=0){const D=Math.sqrt(v*v+S*S);k.rotation=S>0?Math.acos(v/D):-Math.acos(v/D),k.scaleX=D,k.scaleY=N/D,k.skewX=(v*M+S*w)/N,k.skewY=0}else if(M!=0||w!=0){const D=Math.sqrt(M*M+w*w);k.rotation=Math.PI/2-(w>0?Math.acos(-M/D):-Math.acos(M/D)),k.scaleX=N/D,k.scaleY=D,k.skewX=0,k.skewY=(v*M+S*w)/N}return k.rotation=n.Util._getRotation(k.rotation),k}}n.Transform=e;const i="[object Array]",r="[object Number]",s="[object String]",a="[object Boolean]",o=Math.PI/180,c=180/Math.PI,l="#",u="",h="0",p="Konva warning: ",f="Konva error: ",x="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let _=[];const g=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(m){setTimeout(m,60)};n.Util={_isElement(m){return!!(m&&m.nodeType==1)},_isFunction(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject(m){return!!m&&m.constructor===Object},_isArray(m){return Object.prototype.toString.call(m)===i},_isNumber(m){return Object.prototype.toString.call(m)===r&&!isNaN(m)&&isFinite(m)},_isString(m){return Object.prototype.toString.call(m)===s},_isBoolean(m){return Object.prototype.toString.call(m)===a},isObject(m){return m instanceof Object},isValidSelector(m){if(typeof m!="string")return!1;const v=m[0];return v==="#"||v==="."||v===v.toUpperCase()},_sign(m){return m===0||m>0?1:-1},requestAnimFrame(m){_.push(m),_.length===1&&g(function(){const v=_;_=[],v.forEach(function(S){S()})})},createCanvasElement(){const m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement(){return document.createElement("img")},_isInDocument(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_urlToImage(m,v){const S=n.Util.createImageElement();S.onload=function(){v(S)},S.src=m},_rgbToHex(m,v,S){return((1<<24)+(m<<16)+(v<<8)+S).toString(16).slice(1)},_hexToRgb(m){m=m.replace(l,u);const v=parseInt(m,16);return{r:v>>16&255,g:v>>8&255,b:v&255}},getRandomColor(){let m=(Math.random()*16777215<<0).toString(16);for(;m.length<6;)m=h+m;return l+m},getRGB(m){let v;return m in y?(v=y[m],{r:v[0],g:v[1],b:v[2]}):m[0]===l?this._hexToRgb(m.substring(1)):m.substr(0,4)===x?(v=d.exec(m.replace(/ /g,"")),{r:parseInt(v[1],10),g:parseInt(v[2],10),b:parseInt(v[3],10)}):{r:0,g:0,b:0}},colorToRGBA(m){return m=m||"black",n.Util._namedColorToRBA(m)||n.Util._hex3ColorToRGBA(m)||n.Util._hex4ColorToRGBA(m)||n.Util._hex6ColorToRGBA(m)||n.Util._hex8ColorToRGBA(m)||n.Util._rgbColorToRGBA(m)||n.Util._rgbaColorToRGBA(m)||n.Util._hslColorToRGBA(m)},_namedColorToRBA(m){const v=y[m.toLowerCase()];return v?{r:v[0],g:v[1],b:v[2],a:1}:null},_rgbColorToRGBA(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];const v=m.split(/ *, */).map(Number);return{r:v[0],g:v[1],b:v[2],a:1}}},_rgbaColorToRGBA(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];const v=m.split(/ *, */).map((S,M)=>S.slice(-1)==="%"?M===3?parseInt(S)/100:parseInt(S)/100*255:Number(S));return{r:v[0],g:v[1],b:v[2],a:v[3]}}},_hex8ColorToRGBA(m){if(m[0]==="#"&&m.length===9)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:parseInt(m.slice(7,9),16)/255}},_hex6ColorToRGBA(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex4ColorToRGBA(m){if(m[0]==="#"&&m.length===5)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:parseInt(m[4]+m[4],16)/255}},_hex3ColorToRGBA(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){const[v,...S]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m),M=Number(S[0])/360,w=Number(S[1])/100,L=Number(S[2])/100;let P,N,k;if(w===0)return k=L*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};L<.5?P=L*(1+w):P=L+w-L*w;const D=2*L-P,C=[0,0,0];for(let T=0;T<3;T++)N=M+1/3*-(T-1),N<0&&N++,N>1&&N--,6*N<1?k=D+(P-D)*6*N:2*N<1?k=P:3*N<2?k=D+(P-D)*(2/3-N)*6:k=D,C[T]=k*255;return{r:Math.round(C[0]),g:Math.round(C[1]),b:Math.round(C[2]),a:1}}},haveIntersection(m,v){return!(v.x>m.x+m.width||v.x+v.width<m.x||v.y>m.y+m.height||v.y+v.height<m.y)},cloneObject(m){const v={};for(const S in m)this._isPlainObject(m[S])?v[S]=this.cloneObject(m[S]):this._isArray(m[S])?v[S]=this.cloneArray(m[S]):v[S]=m[S];return v},cloneArray(m){return m.slice(0)},degToRad(m){return m*o},radToDeg(m){return m*c},_degToRad(m){return n.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),n.Util.degToRad(m)},_radToDeg(m){return n.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),n.Util.radToDeg(m)},_getRotation(m){return t.Konva.angleDeg?n.Util.radToDeg(m):m},_capitalize(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw(m){throw new Error(f+m)},error(m){console.error(f+m)},warn(m){t.Konva.showWarnings&&console.warn(p+m)},each(m,v){for(const S in m)v(S,m[S])},_inRange(m,v,S){return v<=m&&m<S},_getProjectionToSegment(m,v,S,M,w,L){let P,N,k;const D=(m-S)*(m-S)+(v-M)*(v-M);if(D==0)P=m,N=v,k=(w-S)*(w-S)+(L-M)*(L-M);else{const C=((w-m)*(S-m)+(L-v)*(M-v))/D;C<0?(P=m,N=v,k=(m-w)*(m-w)+(v-L)*(v-L)):C>1?(P=S,N=M,k=(S-w)*(S-w)+(M-L)*(M-L)):(P=m+C*(S-m),N=v+C*(M-v),k=(P-w)*(P-w)+(N-L)*(N-L))}return[P,N,k]},_getProjectionToLine(m,v,S){const M=n.Util.cloneObject(m);let w=Number.MAX_VALUE;return v.forEach(function(L,P){if(!S&&P===v.length-1)return;const N=v[(P+1)%v.length],k=n.Util._getProjectionToSegment(L.x,L.y,N.x,N.y,m.x,m.y),D=k[0],C=k[1],T=k[2];T<w&&(M.x=D,M.y=C,w=T)}),M},_prepareArrayForTween(m,v,S){const M=[],w=[];if(m.length>v.length){const P=v;v=m,m=P}for(let P=0;P<m.length;P+=2)M.push({x:m[P],y:m[P+1]});for(let P=0;P<v.length;P+=2)w.push({x:v[P],y:v[P+1]});const L=[];return w.forEach(function(P){const N=n.Util._getProjectionToLine(P,M,S);L.push(N.x),L.push(N.y)}),L},_prepareToStringify(m){let v;m.visitedByCircularReferenceRemoval=!0;for(const S in m)if(m.hasOwnProperty(S)&&m[S]&&typeof m[S]=="object"){if(v=Object.getOwnPropertyDescriptor(m,S),m[S].visitedByCircularReferenceRemoval||n.Util._isElement(m[S]))if(v.configurable)delete m[S];else return null;else if(n.Util._prepareToStringify(m[S])===null)if(v.configurable)delete m[S];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign(m,v){for(const S in v)m[S]=v[S];return m},_getFirstPointerId(m){return m.touches?m.changedTouches[0].identifier:m.pointerId||999},releaseCanvas(...m){t.Konva.releaseCanvasOnDestroy&&m.forEach(v=>{v.width=0,v.height=0})},drawRoundedRectPath(m,v,S,M){let w=0,L=0,P=0,N=0;typeof M=="number"?w=L=P=N=Math.min(M,v/2,S/2):(w=Math.min(M[0]||0,v/2,S/2),L=Math.min(M[1]||0,v/2,S/2),N=Math.min(M[2]||0,v/2,S/2),P=Math.min(M[3]||0,v/2,S/2)),m.moveTo(w,0),m.lineTo(v-L,0),m.arc(v-L,L,L,Math.PI*3/2,0,!1),m.lineTo(v,S-N),m.arc(v-N,S-N,N,0,Math.PI/2,!1),m.lineTo(P,S),m.arc(P,S-P,P,Math.PI/2,Math.PI,!1),m.lineTo(0,w),m.arc(w,w,w,Math.PI,Math.PI*3/2,!1)}}}(Md)),Md}var Va={},Ad={},ui={},Xm;function Xt(){if(Xm)return ui;Xm=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.RGBComponent=i,ui.alphaComponent=r,ui.getNumberValidator=s,ui.getNumberOrArrayOfNumbersValidator=a,ui.getNumberOrAutoValidator=o,ui.getStringValidator=c,ui.getStringOrGradientValidator=l,ui.getFunctionValidator=u,ui.getNumberArrayValidator=h,ui.getBooleanValidator=p,ui.getComponentValidator=f;const n=Ut(),t=Se();function e(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function i(x){return x>255?255:x<0?0:Math.round(x)}function r(x){return x>1?1:x<1e-4?1e-4:x}function s(){if(n.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),x}}function a(x){if(n.Konva.isUnminified)return function(y,d){let _=t.Util._isNumber(y),g=t.Util._isArray(y)&&y.length==x;return!_&&!g&&t.Util.warn(e(y)+' is a not valid value for "'+d+'" attribute. The value should be a number or Array<number>('+x+")"),y}}function o(){if(n.Konva.isUnminified)return function(x,y){var d=t.Util._isNumber(x),_=x==="auto";return d||_||t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),x}}function c(){if(n.Konva.isUnminified)return function(x,y){return t.Util._isString(x)||t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),x}}function l(){if(n.Konva.isUnminified)return function(x,y){const d=t.Util._isString(x),_=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return d||_||t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),x}}function u(){if(n.Konva.isUnminified)return function(x,y){return t.Util._isFunction(x)||t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),x}}function h(){if(n.Konva.isUnminified)return function(x,y){const d=Int8Array?Object.getPrototypeOf(Int8Array):null;return d&&x instanceof d||(t.Util._isArray(x)?x.forEach(function(_){t.Util._isNumber(_)||t.Util.warn('"'+y+'" attribute has non numeric element '+_+". Make sure that all elements are numbers.")}):t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),x}}function p(){if(n.Konva.isUnminified)return function(x,y){var d=x===!0||x===!1;return d||t.Util.warn(e(x)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),x}}function f(x){if(n.Konva.isUnminified)return function(y,d){return y==null||t.Util.isObject(y)||t.Util.warn(e(y)+' is a not valid value for "'+d+'" attribute. The value should be an object with properties '+x),y}}return ui}var Vm;function jt(){return Vm||(Vm=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Factory=void 0;const t=Se(),e=Xt(),i="get",r="set";n.Factory={addGetterSetter(s,a,o,c,l){n.Factory.addGetter(s,a,o),n.Factory.addSetter(s,a,c,l),n.Factory.addOverloadedGetterSetter(s,a)},addGetter(s,a,o){var c=i+t.Util._capitalize(a);s.prototype[c]=s.prototype[c]||function(){const l=this.attrs[a];return l===void 0?o:l}},addSetter(s,a,o,c){var l=r+t.Util._capitalize(a);s.prototype[l]||n.Factory.overWriteSetter(s,a,o,c)},overWriteSetter(s,a,o,c){var l=r+t.Util._capitalize(a);s.prototype[l]=function(u){return o&&u!==void 0&&u!==null&&(u=o.call(this,u,a)),this._setAttr(a,u),c&&c.call(this),this}},addComponentsGetterSetter(s,a,o,c,l){const u=o.length,h=t.Util._capitalize,p=i+h(a),f=r+h(a);s.prototype[p]=function(){const y={};for(let d=0;d<u;d++){const _=o[d];y[_]=this.getAttr(a+h(_))}return y};const x=(0,e.getComponentValidator)(o);s.prototype[f]=function(y){const d=this.attrs[a];c&&(y=c.call(this,y,a)),x&&x.call(this,y,a);for(const _ in y)y.hasOwnProperty(_)&&this._setAttr(a+h(_),y[_]);return y||o.forEach(_=>{this._setAttr(a+h(_),void 0)}),this._fireChangeEvent(a,d,y),l&&l.call(this),this},n.Factory.addOverloadedGetterSetter(s,a)},addOverloadedGetterSetter(s,a){var o=t.Util._capitalize(a),c=r+o,l=i+o;s.prototype[a]=function(){return arguments.length?(this[c](arguments[0]),this):this[l]()}},addDeprecatedGetterSetter(s,a,o,c){t.Util.error("Adding deprecated "+a);const l=i+t.Util._capitalize(a),u=a+" property is deprecated and will be removed soon. Look at Konva change log for more information.";s.prototype[l]=function(){t.Util.error(u);const h=this.attrs[a];return h===void 0?o:h},n.Factory.addSetter(s,a,c,function(){t.Util.error(u)}),n.Factory.addOverloadedGetterSetter(s,a)},backCompat(s,a){t.Util.each(a,function(o,c){const l=s.prototype[c],u=i+t.Util._capitalize(o),h=r+t.Util._capitalize(o);function p(){l.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}s.prototype[o]=p,s.prototype[u]=p,s.prototype[h]=p})},afterSetFilter(){this._filterUpToDate=!1}}}(Ad)),Ad}var Hn={},Gn={},qm;function qv(){if(qm)return Gn;qm=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.HitContext=Gn.SceneContext=Gn.Context=void 0;const n=Se(),t=Ut();function e(_){const g=[],m=_.length,v=n.Util;for(let S=0;S<m;S++){let M=_[S];v._isNumber(M)?M=Math.round(M*1e3)/1e3:v._isString(M)||(M=M+""),g.push(M)}return g}const i=",",r="(",s=")",a="([",o="])",c=";",l="()",u="=",h=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],p=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100;let x=class{constructor(g){this.canvas=g,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(g){g.fillEnabled()&&this._fill(g)}_fill(g){}strokeShape(g){g.hasStroke()&&this._stroke(g)}_stroke(g){}fillStrokeShape(g){g.attrs.fillAfterStrokeEnabled?(this.strokeShape(g),this.fillShape(g)):(this.fillShape(g),this.strokeShape(g))}getTrace(g,m){let v=this.traceArr,S=v.length,M="",w,L,P,N;for(w=0;w<S;w++)L=v[w],P=L.method,P?(N=L.args,M+=P,g?M+=l:n.Util._isArray(N[0])?M+=a+N.join(i)+o:(m&&(N=N.map(k=>typeof k=="number"?Math.floor(k):k)),M+=r+N.join(i)+s)):(M+=L.property,g||(M+=u+L.val)),M+=c;return M}clearTrace(){this.traceArr=[]}_trace(g){let m=this.traceArr,v;m.push(g),v=m.length,v>=f&&m.shift()}reset(){const g=this.getCanvas().getPixelRatio();this.setTransform(1*g,0,0,1*g,0,0)}getCanvas(){return this.canvas}clear(g){const m=this.getCanvas();g?this.clearRect(g.x||0,g.y||0,g.width||0,g.height||0):this.clearRect(0,0,m.getWidth()/m.pixelRatio,m.getHeight()/m.pixelRatio)}_applyLineCap(g){const m=g.attrs.lineCap;m&&this.setAttr("lineCap",m)}_applyOpacity(g){const m=g.getAbsoluteOpacity();m!==1&&this.setAttr("globalAlpha",m)}_applyLineJoin(g){const m=g.attrs.lineJoin;m&&this.setAttr("lineJoin",m)}setAttr(g,m){this._context[g]=m}arc(g,m,v,S,M,w){this._context.arc(g,m,v,S,M,w)}arcTo(g,m,v,S,M){this._context.arcTo(g,m,v,S,M)}beginPath(){this._context.beginPath()}bezierCurveTo(g,m,v,S,M,w){this._context.bezierCurveTo(g,m,v,S,M,w)}clearRect(g,m,v,S){this._context.clearRect(g,m,v,S)}clip(...g){this._context.clip.apply(this._context,g)}closePath(){this._context.closePath()}createImageData(g,m){const v=arguments;if(v.length===2)return this._context.createImageData(g,m);if(v.length===1)return this._context.createImageData(g)}createLinearGradient(g,m,v,S){return this._context.createLinearGradient(g,m,v,S)}createPattern(g,m){return this._context.createPattern(g,m)}createRadialGradient(g,m,v,S,M,w){return this._context.createRadialGradient(g,m,v,S,M,w)}drawImage(g,m,v,S,M,w,L,P,N){const k=arguments,D=this._context;k.length===3?D.drawImage(g,m,v):k.length===5?D.drawImage(g,m,v,S,M):k.length===9&&D.drawImage(g,m,v,S,M,w,L,P,N)}ellipse(g,m,v,S,M,w,L,P){this._context.ellipse(g,m,v,S,M,w,L,P)}isPointInPath(g,m,v,S){return v?this._context.isPointInPath(v,g,m,S):this._context.isPointInPath(g,m,S)}fill(...g){this._context.fill.apply(this._context,g)}fillRect(g,m,v,S){this._context.fillRect(g,m,v,S)}strokeRect(g,m,v,S){this._context.strokeRect(g,m,v,S)}fillText(g,m,v,S){S?this._context.fillText(g,m,v,S):this._context.fillText(g,m,v)}measureText(g){return this._context.measureText(g)}getImageData(g,m,v,S){return this._context.getImageData(g,m,v,S)}lineTo(g,m){this._context.lineTo(g,m)}moveTo(g,m){this._context.moveTo(g,m)}rect(g,m,v,S){this._context.rect(g,m,v,S)}roundRect(g,m,v,S,M){this._context.roundRect(g,m,v,S,M)}putImageData(g,m,v){this._context.putImageData(g,m,v)}quadraticCurveTo(g,m,v,S){this._context.quadraticCurveTo(g,m,v,S)}restore(){this._context.restore()}rotate(g){this._context.rotate(g)}save(){this._context.save()}scale(g,m){this._context.scale(g,m)}setLineDash(g){this._context.setLineDash?this._context.setLineDash(g):"mozDash"in this._context?this._context.mozDash=g:"webkitLineDash"in this._context&&(this._context.webkitLineDash=g)}getLineDash(){return this._context.getLineDash()}setTransform(g,m,v,S,M,w){this._context.setTransform(g,m,v,S,M,w)}stroke(g){g?this._context.stroke(g):this._context.stroke()}strokeText(g,m,v,S){this._context.strokeText(g,m,v,S)}transform(g,m,v,S,M,w){this._context.transform(g,m,v,S,M,w)}translate(g,m){this._context.translate(g,m)}_enableTrace(){let g=this,m=h.length,v=this.setAttr,S,M;const w=function(L){let P=g[L],N;g[L]=function(){return M=e(Array.prototype.slice.call(arguments,0)),N=P.apply(g,arguments),g._trace({method:L,args:M}),N}};for(S=0;S<m;S++)w(h[S]);g.setAttr=function(){v.apply(g,arguments);const L=arguments[0];let P=arguments[1];(L==="shadowOffsetX"||L==="shadowOffsetY"||L==="shadowBlur")&&(P=P/this.canvas.getPixelRatio()),g._trace({property:L,val:P})}}_applyGlobalCompositeOperation(g){const m=g.attrs.globalCompositeOperation;!m||m==="source-over"||this.setAttr("globalCompositeOperation",m)}};Gn.Context=x,p.forEach(function(_){Object.defineProperty(x.prototype,_,{get(){return this._context[_]},set(g){this._context[_]=g}})});class y extends x{constructor(g,{willReadFrequently:m=!1}={}){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:m})}_fillColor(g){const m=g.fill();this.setAttr("fillStyle",m),g._fillFunc(this)}_fillPattern(g){this.setAttr("fillStyle",g._getFillPattern()),g._fillFunc(this)}_fillLinearGradient(g){const m=g._getLinearGradient();m&&(this.setAttr("fillStyle",m),g._fillFunc(this))}_fillRadialGradient(g){const m=g._getRadialGradient();m&&(this.setAttr("fillStyle",m),g._fillFunc(this))}_fill(g){const m=g.fill(),v=g.getFillPriority();if(m&&v==="color"){this._fillColor(g);return}const S=g.getFillPatternImage();if(S&&v==="pattern"){this._fillPattern(g);return}const M=g.getFillLinearGradientColorStops();if(M&&v==="linear-gradient"){this._fillLinearGradient(g);return}const w=g.getFillRadialGradientColorStops();if(w&&v==="radial-gradient"){this._fillRadialGradient(g);return}m?this._fillColor(g):S?this._fillPattern(g):M?this._fillLinearGradient(g):w&&this._fillRadialGradient(g)}_strokeLinearGradient(g){const m=g.getStrokeLinearGradientStartPoint(),v=g.getStrokeLinearGradientEndPoint(),S=g.getStrokeLinearGradientColorStops(),M=this.createLinearGradient(m.x,m.y,v.x,v.y);if(S){for(let w=0;w<S.length;w+=2)M.addColorStop(S[w],S[w+1]);this.setAttr("strokeStyle",M)}}_stroke(g){const m=g.dash(),v=g.getStrokeScaleEnabled();if(g.hasStroke()){if(!v){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(g),m&&g.dashEnabled()&&(this.setLineDash(m),this.setAttr("lineDashOffset",g.dashOffset())),this.setAttr("lineWidth",g.strokeWidth()),g.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),g.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(g):this.setAttr("strokeStyle",g.stroke()),g._strokeFunc(this),v||this.restore()}}_applyShadow(g){var m,v,S;const M=(m=g.getShadowRGBA())!==null&&m!==void 0?m:"black",w=(v=g.getShadowBlur())!==null&&v!==void 0?v:5,L=(S=g.getShadowOffset())!==null&&S!==void 0?S:{x:0,y:0},P=g.getAbsoluteScale(),N=this.canvas.getPixelRatio(),k=P.x*N,D=P.y*N;this.setAttr("shadowColor",M),this.setAttr("shadowBlur",w*Math.min(Math.abs(k),Math.abs(D))),this.setAttr("shadowOffsetX",L.x*k),this.setAttr("shadowOffsetY",L.y*D)}}Gn.SceneContext=y;class d extends x{constructor(g){super(g),this._context=g._canvas.getContext("2d",{willReadFrequently:!0})}_fill(g){this.save(),this.setAttr("fillStyle",g.colorKey),g._fillFuncHit(this),this.restore()}strokeShape(g){g.hasHitStroke()&&this._stroke(g)}_stroke(g){if(g.hasHitStroke()){const m=g.getStrokeScaleEnabled();if(!m){this.save();const M=this.getCanvas().getPixelRatio();this.setTransform(M,0,0,M,0,0)}this._applyLineCap(g);const v=g.hitStrokeWidth(),S=v==="auto"?g.strokeWidth():v;this.setAttr("lineWidth",S),this.setAttr("strokeStyle",g.colorKey),g._strokeFuncHit(this),m||this.restore()}}}return Gn.HitContext=d,Gn}var Km;function Xu(){if(Km)return Hn;Km=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.HitCanvas=Hn.SceneCanvas=Hn.Canvas=void 0;const n=Se(),t=qv(),e=Ut();let i;function r(){if(i)return i;const c=n.Util.createCanvasElement(),l=c.getContext("2d");return i=function(){const u=e.Konva._global.devicePixelRatio||1,h=l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1;return u/h}(),n.Util.releaseCanvas(c),i}let s=class{constructor(l){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const h=(l||{}).pixelRatio||e.Konva.pixelRatio||r();this.pixelRatio=h,this._canvas=n.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(l){const u=this.pixelRatio;this.pixelRatio=l,this.setSize(this.getWidth()/u,this.getHeight()/u)}setWidth(l){this.width=this._canvas.width=l*this.pixelRatio,this._canvas.style.width=l+"px";const u=this.pixelRatio;this.getContext()._context.scale(u,u)}setHeight(l){this.height=this._canvas.height=l*this.pixelRatio,this._canvas.style.height=l+"px";const u=this.pixelRatio;this.getContext()._context.scale(u,u)}getWidth(){return this.width}getHeight(){return this.height}setSize(l,u){this.setWidth(l||0),this.setHeight(u||0)}toDataURL(l,u){try{return this._canvas.toDataURL(l,u)}catch{try{return this._canvas.toDataURL()}catch(p){return n.Util.error("Unable to get data URL. "+p.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Hn.Canvas=s;class a extends s{constructor(l={width:0,height:0,willReadFrequently:!1}){super(l),this.context=new t.SceneContext(this,{willReadFrequently:l.willReadFrequently}),this.setSize(l.width,l.height)}}Hn.SceneCanvas=a;class o extends s{constructor(l={width:0,height:0}){super(l),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(l.width,l.height)}}return Hn.HitCanvas=o,Hn}var Ed={},Zm;function r1(){return Zm||(Zm=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DD=void 0;const t=Ut(),e=Se();n.DD={get isDragging(){let i=!1;return n.DD._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(i=!0)}),i},justDragged:!1,get node(){let i;return n.DD._dragElements.forEach(r=>{i=r.node}),i},_dragElements:new Map,_drag(i){const r=[];n.DD._dragElements.forEach((s,a)=>{const{node:o}=s,c=o.getStage();c.setPointersPositions(i),s.pointerId===void 0&&(s.pointerId=e.Util._getFirstPointerId(i));const l=c._changedPointerPositions.find(u=>u.id===s.pointerId);if(l){if(s.dragStatus!=="dragging"){const u=o.dragDistance();if(Math.max(Math.abs(l.x-s.startPointerPos.x),Math.abs(l.y-s.startPointerPos.y))<u||(o.startDrag({evt:i}),!o.isDragging()))return}o._setDragPosition(i,s),r.push(o)}}),r.forEach(s=>{s.fire("dragmove",{type:"dragmove",target:s,evt:i},!0)})},_endDragBefore(i){const r=[];n.DD._dragElements.forEach(s=>{const{node:a}=s,o=a.getStage();if(i&&o.setPointersPositions(i),!o._changedPointerPositions.find(u=>u.id===s.pointerId))return;(s.dragStatus==="dragging"||s.dragStatus==="stopped")&&(n.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,s.dragStatus="stopped");const l=s.node.getLayer()||s.node instanceof t.Konva.Stage&&s.node;l&&r.indexOf(l)===-1&&r.push(l)}),r.forEach(s=>{s.draw()})},_endDragAfter(i){n.DD._dragElements.forEach((r,s)=>{r.dragStatus==="stopped"&&r.node.fire("dragend",{type:"dragend",target:r.node,evt:i},!0),r.dragStatus!=="dragging"&&n.DD._dragElements.delete(s)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",n.DD._endDragBefore,!0),window.addEventListener("touchend",n.DD._endDragBefore,!0),window.addEventListener("touchcancel",n.DD._endDragBefore,!0),window.addEventListener("mousemove",n.DD._drag),window.addEventListener("touchmove",n.DD._drag),window.addEventListener("mouseup",n.DD._endDragAfter,!1),window.addEventListener("touchend",n.DD._endDragAfter,!1),window.addEventListener("touchcancel",n.DD._endDragAfter,!1))}(Ed)),Ed}var Qm;function Pe(){if(Qm)return Va;Qm=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.Node=void 0;const n=Se(),t=jt(),e=Xu(),i=Ut(),r=r1(),s=Xt(),a="absoluteOpacity",o="allEventListeners",c="absoluteTransform",l="absoluteScale",u="canvas",h="Change",p="children",f="konva",x="listening",y="mouseenter",d="mouseleave",_="set",g="Shape",m=" ",v="stage",S="transform",M="Stage",w="visible",L=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m);let P=1,N=class Kf{constructor(C){this._id=P++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(C),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(C){(C===S||C===c)&&this._cache.get(C)?this._cache.get(C).dirty=!0:C?this._cache.delete(C):this._cache.clear()}_getCache(C,T){let A=this._cache.get(C);return(A===void 0||(C===S||C===c)&&A.dirty===!0)&&(A=T.call(this),this._cache.set(C,A)),A}_calculate(C,T,A){if(!this._attachedDepsListeners.get(C)){const E=T.map(I=>I+"Change.konva").join(m);this.on(E,()=>{this._clearCache(C)}),this._attachedDepsListeners.set(C,!0)}return this._getCache(C,A)}_getCanvasCache(){return this._cache.get(u)}_clearSelfAndDescendantCache(C){this._clearCache(C),C===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(u)){const{scene:C,filter:T,hit:A}=this._cache.get(u);n.Util.releaseCanvas(C,T,A),this._cache.delete(u)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(C){const T=C||{};let A={};(T.x===void 0||T.y===void 0||T.width===void 0||T.height===void 0)&&(A=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let E=Math.ceil(T.width||A.width),I=Math.ceil(T.height||A.height),B=T.pixelRatio,$=T.x===void 0?Math.floor(A.x):T.x,Y=T.y===void 0?Math.floor(A.y):T.y,q=T.offset||0,G=T.drawBorder||!1,F=T.hitCanvasPixelRatio||1;if(!E||!I){n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const U=Math.abs(Math.round(A.x)-$)>.5?1:0,j=Math.abs(Math.round(A.y)-Y)>.5?1:0;E+=q*2+U,I+=q*2+j,$-=q,Y-=q;const et=new e.SceneCanvas({pixelRatio:B,width:E,height:I}),V=new e.SceneCanvas({pixelRatio:B,width:0,height:0,willReadFrequently:!0}),tt=new e.HitCanvas({pixelRatio:F,width:E,height:I}),z=et.getContext(),H=tt.getContext();return tt.isCache=!0,et.isCache=!0,this._cache.delete(u),this._filterUpToDate=!1,T.imageSmoothingEnabled===!1&&(et.getContext()._context.imageSmoothingEnabled=!1,V.getContext()._context.imageSmoothingEnabled=!1),z.save(),H.save(),z.translate(-$,-Y),H.translate(-$,-Y),this._isUnderCache=!0,this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(l),this.drawScene(et,this),this.drawHit(tt,this),this._isUnderCache=!1,z.restore(),H.restore(),G&&(z.save(),z.beginPath(),z.rect(0,0,E,I),z.closePath(),z.setAttr("strokeStyle","red"),z.setAttr("lineWidth",5),z.stroke(),z.restore()),this._cache.set(u,{scene:et,filter:V,hit:tt,x:$,y:Y}),this._requestDraw(),this}isCached(){return this._cache.has(u)}getClientRect(C){throw new Error('abstract "getClientRect" method call')}_transformedRect(C,T){const A=[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}];let E=1/0,I=1/0,B=-1/0,$=-1/0;const Y=this.getAbsoluteTransform(T);return A.forEach(function(q){const G=Y.point(q);E===void 0&&(E=B=G.x,I=$=G.y),E=Math.min(E,G.x),I=Math.min(I,G.y),B=Math.max(B,G.x),$=Math.max($,G.y)}),{x:E,y:I,width:B-E,height:$-I}}_drawCachedSceneCanvas(C){C.save(),C._applyOpacity(this),C._applyGlobalCompositeOperation(this);const T=this._getCanvasCache();C.translate(T.x,T.y);const A=this._getCachedSceneCanvas(),E=A.pixelRatio;C.drawImage(A._canvas,0,0,A.width/E,A.height/E),C.restore()}_drawCachedHitCanvas(C){const T=this._getCanvasCache(),A=T.hit;C.save(),C.translate(T.x,T.y),C.drawImage(A._canvas,0,0,A.width/A.pixelRatio,A.height/A.pixelRatio),C.restore()}_getCachedSceneCanvas(){let C=this.filters(),T=this._getCanvasCache(),A=T.scene,E=T.filter,I=E.getContext(),B,$,Y,q;if(C){if(!this._filterUpToDate){const G=A.pixelRatio;E.setSize(A.width/A.pixelRatio,A.height/A.pixelRatio);try{for(B=C.length,I.clear(),I.drawImage(A._canvas,0,0,A.getWidth()/G,A.getHeight()/G),$=I.getImageData(0,0,E.getWidth(),E.getHeight()),Y=0;Y<B;Y++){if(q=C[Y],typeof q!="function"){n.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,$),I.putImageData($,0,0)}}catch(F){n.Util.error("Unable to apply filter. "+F.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return E}return A}on(C,T){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);let A=C.split(m),E=A.length,I,B,$,Y,q;for(I=0;I<E;I++)B=A[I],$=B.split("."),Y=$[0],q=$[1]||"",this.eventListeners[Y]||(this.eventListeners[Y]=[]),this.eventListeners[Y].push({name:q,handler:T});return this}off(C,T){let A=(C||"").split(m),E=A.length,I,B,$,Y,q,G;if(this._cache&&this._cache.delete(o),!C)for(B in this.eventListeners)this._off(B);for(I=0;I<E;I++)if($=A[I],Y=$.split("."),q=Y[0],G=Y[1],q)this.eventListeners[q]&&this._off(q,G,T);else for(B in this.eventListeners)this._off(B,G,T);return this}dispatchEvent(C){const T={target:this,type:C.type,evt:C};return this.fire(C.type,T),this}addEventListener(C,T){return this.on(C,function(A){T.call(this,A.evt)}),this}removeEventListener(C){return this.off(C),this}_delegate(C,T,A){const E=this;this.on(C,function(I){const B=I.target.findAncestors(T,!0,E);for(let $=0;$<B.length;$++)I=n.Util.cloneObject(I),I.currentTarget=B[$],A.call(B[$],I)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(a),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const C=this.getParent();C&&C.children&&(C.children.splice(this.index,1),C._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(C){const T="get"+n.Util._capitalize(C);return n.Util._isFunction(this[T])?this[T]():this.attrs[C]}getAncestors(){let C=this.getParent(),T=[];for(;C;)T.push(C),C=C.getParent();return T}getAttrs(){return this.attrs||{}}setAttrs(C){return this._batchTransformChanges(()=>{let T,A;if(!C)return this;for(T in C)T!==p&&(A=_+n.Util._capitalize(T),n.Util._isFunction(this[A])?this[A](C[T]):this._setAttr(T,C[T]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(C){if(!this.listening())return!1;const A=this.getParent();return A&&A!==C&&this!==C?A._isListening(C):!0}isVisible(){return this._getCache(w,this._isVisible)}_isVisible(C){if(!this.visible())return!1;const A=this.getParent();return A&&A!==C&&this!==C?A._isVisible(C):!0}shouldDrawHit(C,T=!1){if(C)return this._isVisible(C)&&this._isListening(C);const A=this.getLayer();let E=!1;r.DD._dragElements.forEach(B=>{B.dragStatus==="dragging"&&(B.node.nodeType==="Stage"||B.node.getLayer()===A)&&(E=!0)});const I=!T&&!i.Konva.hitOnDragEnabled&&(E||i.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!I}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let C=this.getDepth(),T=this,A=0,E,I,B,$;function Y(G){for(E=[],I=G.length,B=0;B<I;B++)$=G[B],A++,$.nodeType!==g&&(E=E.concat($.getChildren().slice())),$._id===T._id&&(B=I);E.length>0&&E[0].getDepth()<=C&&Y(E)}const q=this.getStage();return T.nodeType!==M&&q&&Y(q.getChildren()),A}getDepth(){let C=0,T=this.parent;for(;T;)C++,T=T.parent;return C}_batchTransformChanges(C){this._batchingTransformChange=!0,C(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(C){return this._batchTransformChanges(()=>{this.x(C.x),this.y(C.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const C=this.getStage();if(!C)return null;const T=C.getPointerPosition();if(!T)return null;const A=this.getAbsoluteTransform().copy();return A.invert(),A.point(T)}getAbsolutePosition(C){let T=!1,A=this.parent;for(;A;){if(A.isCached()){T=!0;break}A=A.parent}T&&!C&&(C=!0);const E=this.getAbsoluteTransform(C).getMatrix(),I=new n.Transform,B=this.offset();return I.m=E.slice(),I.translate(B.x,B.y),I.getTranslation()}setAbsolutePosition(C){const{x:T,y:A,...E}=this._clearTransform();this.attrs.x=T,this.attrs.y=A,this._clearCache(S);const I=this._getAbsoluteTransform().copy();return I.invert(),I.translate(C.x,C.y),C={x:this.attrs.x+I.getTranslation().x,y:this.attrs.y+I.getTranslation().y},this._setTransform(E),this.setPosition({x:C.x,y:C.y}),this._clearCache(S),this._clearSelfAndDescendantCache(c),this}_setTransform(C){let T;for(T in C)this.attrs[T]=C[T]}_clearTransform(){const C={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,C}move(C){let T=C.x,A=C.y,E=this.x(),I=this.y();return T!==void 0&&(E+=T),A!==void 0&&(I+=A),this.setPosition({x:E,y:I}),this}_eachAncestorReverse(C,T){let A=[],E=this.getParent(),I,B;if(!(T&&T._id===this._id)){for(A.unshift(this);E&&(!T||E._id!==T._id);)A.unshift(E),E=E.parent;for(I=A.length,B=0;B<I;B++)C(A[B])}}rotate(C){return this.rotation(this.rotation()+C),this}moveToTop(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const C=this.index,T=this.parent.getChildren().length;return C<T-1?(this.parent.children.splice(C,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;const C=this.index,T=this.parent.getChildren().length;return C<T-1?(this.parent.children.splice(C,1),this.parent.children.splice(C+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.splice(C-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const C=this.index;return C>0?(this.parent.children.splice(C,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(C){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(C<0||C>=this.parent.children.length)&&n.Util.warn("Unexpected value "+C+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const T=this.index;return this.parent.children.splice(T,1),this.parent.children.splice(C,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(a,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let C=this.opacity();const T=this.getParent();return T&&!T._isUnderCache&&(C*=T.getAbsoluteOpacity()),C}moveTo(C){return this.getParent()!==C&&(this._remove(),C.add(this)),this}toObject(){let C=this.getAttrs(),T,A,E,I,B;const $={attrs:{},className:this.getClassName()};for(T in C)A=C[T],B=n.Util.isObject(A)&&!n.Util._isPlainObject(A)&&!n.Util._isArray(A),!B&&(E=typeof this[T]=="function"&&this[T],delete C[T],I=E?E.call(this):null,C[T]=A,I!==A&&($.attrs[T]=A));return n.Util._prepareToStringify($)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(C,T,A){const E=[];T&&this._isMatch(C)&&E.push(this);let I=this.parent;for(;I;){if(I===A)return E;I._isMatch(C)&&E.push(I),I=I.parent}return E}isAncestorOf(C){return!1}findAncestor(C,T,A){return this.findAncestors(C,T,A)[0]}_isMatch(C){if(!C)return!1;if(typeof C=="function")return C(this);let T=C.replace(/ /g,"").split(","),A=T.length,E,I;for(E=0;E<A;E++)if(I=T[E],n.Util.isValidSelector(I)||(n.Util.warn('Selector "'+I+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),I.charAt(0)==="#"){if(this.id()===I.slice(1))return!0}else if(I.charAt(0)==="."){if(this.hasName(I.slice(1)))return!0}else if(this.className===I||this.nodeType===I)return!0;return!1}getLayer(){const C=this.getParent();return C?C.getLayer():null}getStage(){return this._getCache(v,this._getStage)}_getStage(){const C=this.getParent();return C?C.getStage():null}fire(C,T={},A){return T.target=T.target||this,A?this._fireAndBubble(C,T):this._fire(C,T),this}getAbsoluteTransform(C){return C?this._getAbsoluteTransform(C):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(C){let T;if(C)return T=new n.Transform,this._eachAncestorReverse(function(A){const E=A.transformsEnabled();E==="all"?T.multiply(A.getTransform()):E==="position"&&T.translate(A.x()-A.offsetX(),A.y()-A.offsetY())},C),T;{T=this._cache.get(c)||new n.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(T):T.reset();const A=this.transformsEnabled();if(A==="all")T.multiply(this.getTransform());else if(A==="position"){const E=this.attrs.x||0,I=this.attrs.y||0,B=this.attrs.offsetX||0,$=this.attrs.offsetY||0;T.translate(E-B,I-$)}return T.dirty=!1,T}}getAbsoluteScale(C){let T=this;for(;T;)T._isUnderCache&&(C=T),T=T.getParent();const E=this.getAbsoluteTransform(C).decompose();return{x:E.scaleX,y:E.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var C,T;const A=this._cache.get(S)||new n.Transform;A.reset();const E=this.x(),I=this.y(),B=i.Konva.getAngle(this.rotation()),$=(C=this.attrs.scaleX)!==null&&C!==void 0?C:1,Y=(T=this.attrs.scaleY)!==null&&T!==void 0?T:1,q=this.attrs.skewX||0,G=this.attrs.skewY||0,F=this.attrs.offsetX||0,U=this.attrs.offsetY||0;return(E!==0||I!==0)&&A.translate(E,I),B!==0&&A.rotate(B),(q!==0||G!==0)&&A.skew(q,G),($!==1||Y!==1)&&A.scale($,Y),(F!==0||U!==0)&&A.translate(-1*F,-1*U),A.dirty=!1,A}clone(C){let T=n.Util.cloneObject(this.attrs),A,E,I,B,$;for(A in C)T[A]=C[A];const Y=new this.constructor(T);for(A in this.eventListeners)for(E=this.eventListeners[A],I=E.length,B=0;B<I;B++)$=E[B],$.name.indexOf(f)<0&&(Y.eventListeners[A]||(Y.eventListeners[A]=[]),Y.eventListeners[A].push($));return Y}_toKonvaCanvas(C){C=C||{};const T=this.getClientRect(),A=this.getStage(),E=C.x!==void 0?C.x:Math.floor(T.x),I=C.y!==void 0?C.y:Math.floor(T.y),B=C.pixelRatio||1,$=new e.SceneCanvas({width:C.width||Math.ceil(T.width)||(A?A.width():0),height:C.height||Math.ceil(T.height)||(A?A.height():0),pixelRatio:B}),Y=$.getContext(),q=new e.SceneCanvas({width:$.width/$.pixelRatio+Math.abs(E),height:$.height/$.pixelRatio+Math.abs(I),pixelRatio:$.pixelRatio});return C.imageSmoothingEnabled===!1&&(Y._context.imageSmoothingEnabled=!1),Y.save(),(E||I)&&Y.translate(-1*E,-1*I),this.drawScene($,void 0,q),Y.restore(),$}toCanvas(C){return this._toKonvaCanvas(C)._canvas}toDataURL(C){C=C||{};const T=C.mimeType||null,A=C.quality||null,E=this._toKonvaCanvas(C).toDataURL(T,A);return C.callback&&C.callback(E),E}toImage(C){return new Promise((T,A)=>{try{const E=C==null?void 0:C.callback;E&&delete C.callback,n.Util._urlToImage(this.toDataURL(C),function(I){T(I),E==null||E(I)})}catch(E){A(E)}})}toBlob(C){return new Promise((T,A)=>{try{const E=C==null?void 0:C.callback;E&&delete C.callback,this.toCanvas(C).toBlob(I=>{T(I),E==null||E(I)},C==null?void 0:C.mimeType,C==null?void 0:C.quality)}catch(E){A(E)}})}setSize(C){return this.width(C.width),this.height(C.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():i.Konva.dragDistance}_off(C,T,A){let E=this.eventListeners[C],I,B,$;for(I=0;I<E.length;I++)if(B=E[I].name,$=E[I].handler,(B!=="konva"||T==="konva")&&(!T||B===T)&&(!A||A===$)){if(E.splice(I,1),E.length===0){delete this.eventListeners[C];break}I--}}_fireChangeEvent(C,T,A){this._fire(C+h,{oldVal:T,newVal:A})}addName(C){if(!this.hasName(C)){const T=this.name(),A=T?T+" "+C:C;this.name(A)}return this}hasName(C){if(!C)return!1;const T=this.name();return T?(T||"").split(/\s/g).indexOf(C)!==-1:!1}removeName(C){const T=(this.name()||"").split(/\s/g),A=T.indexOf(C);return A!==-1&&(T.splice(A,1),this.name(T.join(" "))),this}setAttr(C,T){const A=this[_+n.Util._capitalize(C)];return n.Util._isFunction(A)?A.call(this,T):this._setAttr(C,T),this}_requestDraw(){if(i.Konva.autoDrawEnabled){const C=this.getLayer()||this.getStage();C==null||C.batchDraw()}}_setAttr(C,T){const A=this.attrs[C];A===T&&!n.Util.isObject(T)||(T==null?delete this.attrs[C]:this.attrs[C]=T,this._shouldFireChangeEvents&&this._fireChangeEvent(C,A,T),this._requestDraw())}_setComponentAttr(C,T,A){let E;A!==void 0&&(E=this.attrs[C],E||(this.attrs[C]=this.getAttr(C)),this.attrs[C][T]=A,this._fireChangeEvent(C,E,A))}_fireAndBubble(C,T,A){if(T&&this.nodeType===g&&(T.target=this),!((C===y||C===d)&&(A&&(this===A||this.isAncestorOf&&this.isAncestorOf(A))||this.nodeType==="Stage"&&!A))){this._fire(C,T);const I=(C===y||C===d)&&A&&A.isAncestorOf&&A.isAncestorOf(this)&&!A.isAncestorOf(this.parent);(T&&!T.cancelBubble||!T)&&this.parent&&this.parent.isListening()&&!I&&(A&&A.parent?this._fireAndBubble.call(this.parent,C,T,A):this._fireAndBubble.call(this.parent,C,T))}}_getProtoListeners(C){var T,A,E;const I=(T=this._cache.get(o))!==null&&T!==void 0?T:{};let B=I==null?void 0:I[C];if(B===void 0){B=[];let $=Object.getPrototypeOf(this);for(;$;){const Y=(E=(A=$.eventListeners)===null||A===void 0?void 0:A[C])!==null&&E!==void 0?E:[];B.push(...Y),$=Object.getPrototypeOf($)}I[C]=B,this._cache.set(o,I)}return B}_fire(C,T){T=T||{},T.currentTarget=this,T.type=C;const A=this._getProtoListeners(C);if(A)for(var E=0;E<A.length;E++)A[E].handler.call(this,T);const I=this.eventListeners[C];if(I)for(var E=0;E<I.length;E++)I[E].handler.call(this,T)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(C){const T=C?C.pointerId:void 0,A=this.getStage(),E=this.getAbsolutePosition();if(!A)return;const I=A._getPointerById(T)||A._changedPointerPositions[0]||E;r.DD._dragElements.set(this._id,{node:this,startPointerPos:I,offset:{x:I.x-E.x,y:I.y-E.y},dragStatus:"ready",pointerId:T})}startDrag(C,T=!0){r.DD._dragElements.has(this._id)||this._createDragElement(C);const A=r.DD._dragElements.get(this._id);A.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:C&&C.evt},T)}_setDragPosition(C,T){const A=this.getStage()._getPointerById(T.pointerId);if(!A)return;let E={x:A.x-T.offset.x,y:A.y-T.offset.y};const I=this.dragBoundFunc();if(I!==void 0){const B=I.call(this,E,C);B?E=B:n.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==E.x||this._lastPos.y!==E.y)&&(this.setAbsolutePosition(E),this._requestDraw()),this._lastPos=E}stopDrag(C){const T=r.DD._dragElements.get(this._id);T&&(T.dragStatus="stopped"),r.DD._endDragBefore(C),r.DD._endDragAfter(C)}setDraggable(C){this._setAttr("draggable",C),this._dragChange()}isDragging(){const C=r.DD._dragElements.get(this._id);return C?C.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(C){if(!(!(C.evt.button!==void 0)||i.Konva.dragButtons.indexOf(C.evt.button)>=0)||this.isDragging())return;let E=!1;r.DD._dragElements.forEach(I=>{this.isAncestorOf(I.node)&&(E=!0)}),E||this._createDragElement(C)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const T=r.DD._dragElements.get(this._id),A=T&&T.dragStatus==="dragging",E=T&&T.dragStatus==="ready";A?this.stopDrag():E&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(C={x:0,y:0}){const T=this.getStage();if(!T)return!1;const A={x:-C.x,y:-C.y,width:T.width()+2*C.x,height:T.height()+2*C.y};return n.Util.haveIntersection(A,this.getClientRect())}static create(C,T){return n.Util._isString(C)&&(C=JSON.parse(C)),this._createNode(C,T)}static _createNode(C,T){let A=Kf.prototype.getClassName.call(C),E=C.children,I,B,$;T&&(C.attrs.container=T),i.Konva[A]||(n.Util.warn('Can not find a node with class name "'+A+'". Fallback to "Shape".'),A="Shape");const Y=i.Konva[A];if(I=new Y(C.attrs),E)for(B=E.length,$=0;$<B;$++)I.add(Kf._createNode(E[$]));return I}};Va.Node=N,N.prototype.nodeType="Node",N.prototype._attrsAffectingSize=[],N.prototype.eventListeners={},N.prototype.on.call(N.prototype,L,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(S),this._clearSelfAndDescendantCache(c)}),N.prototype.on.call(N.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(w)}),N.prototype.on.call(N.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),N.prototype.on.call(N.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(a)});const k=t.Factory.addGetterSetter;return k(N,"zIndex"),k(N,"absolutePosition"),k(N,"position"),k(N,"x",0,(0,s.getNumberValidator)()),k(N,"y",0,(0,s.getNumberValidator)()),k(N,"globalCompositeOperation","source-over",(0,s.getStringValidator)()),k(N,"opacity",1,(0,s.getNumberValidator)()),k(N,"name","",(0,s.getStringValidator)()),k(N,"id","",(0,s.getStringValidator)()),k(N,"rotation",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(N,"scale",["x","y"]),k(N,"scaleX",1,(0,s.getNumberValidator)()),k(N,"scaleY",1,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(N,"skew",["x","y"]),k(N,"skewX",0,(0,s.getNumberValidator)()),k(N,"skewY",0,(0,s.getNumberValidator)()),t.Factory.addComponentsGetterSetter(N,"offset",["x","y"]),k(N,"offsetX",0,(0,s.getNumberValidator)()),k(N,"offsetY",0,(0,s.getNumberValidator)()),k(N,"dragDistance",void 0,(0,s.getNumberValidator)()),k(N,"width",0,(0,s.getNumberValidator)()),k(N,"height",0,(0,s.getNumberValidator)()),k(N,"listening",!0,(0,s.getBooleanValidator)()),k(N,"preventDefault",!0,(0,s.getBooleanValidator)()),k(N,"filters",void 0,function(D){return this._filterUpToDate=!1,D}),k(N,"visible",!0,(0,s.getBooleanValidator)()),k(N,"transformsEnabled","all",(0,s.getStringValidator)()),k(N,"size"),k(N,"dragBoundFunc"),k(N,"draggable",!1,(0,s.getBooleanValidator)()),t.Factory.backCompat(N,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Va}var qa={},Jm;function Vu(){if(Jm)return qa;Jm=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.Container=void 0;const n=jt(),t=Pe(),e=Xt();let i=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(s){if(!s)return this.children||[];const a=this.children||[],o=[];return a.forEach(function(c){s(c)&&o.push(c)}),o}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(s=>{s.parent=null,s.index=0,s.destroy()}),this.children=[],this._requestDraw(),this}add(...s){if(s.length===0)return this;if(s.length>1){for(let o=0;o<s.length;o++)this.add(s[o]);return this}const a=s[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(s){return this._generalFind(s,!1)}findOne(s){const a=this._generalFind(s,!0);return a.length>0?a[0]:void 0}_generalFind(s,a){const o=[];return this._descendants(c=>{const l=c._isMatch(s);return l&&o.push(c),!!(l&&a)}),o}_descendants(s){let a=!1;const o=this.getChildren();for(const c of o){if(a=s(c),a)return!0;if(c.hasChildren()&&(a=c._descendants(s),a))return!0}return!1}toObject(){const s=t.Node.prototype.toObject.call(this);return s.children=[],this.getChildren().forEach(a=>{s.children.push(a.toObject())}),s}isAncestorOf(s){let a=s.getParent();for(;a;){if(a._id===this._id)return!0;a=a.getParent()}return!1}clone(s){const a=t.Node.prototype.clone.call(this,s);return this.getChildren().forEach(function(o){a.add(o.clone())}),a}getAllIntersections(s){const a=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(s)&&a.push(o)}),a}_clearSelfAndDescendantCache(s){var a;super._clearSelfAndDescendantCache(s),!this.isCached()&&((a=this.children)===null||a===void 0||a.forEach(function(o){o._clearSelfAndDescendantCache(s)}))}_setChildrenIndices(){var s;(s=this.children)===null||s===void 0||s.forEach(function(a,o){a.index=o}),this._requestDraw()}drawScene(s,a,o){const c=this.getLayer(),l=s||c&&c.getCanvas(),u=l&&l.getContext(),h=this._getCanvasCache(),p=h&&h.scene,f=l&&l.isCache;if(!this.isVisible()&&!f)return this;if(p){u.save();const x=this.getAbsoluteTransform(a).getMatrix();u.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(u),u.restore()}else this._drawChildren("drawScene",l,a,o);return this}drawHit(s,a){if(!this.shouldDrawHit(a))return this;const o=this.getLayer(),c=s||o&&o.hitCanvas,l=c&&c.getContext(),u=this._getCanvasCache();if(u&&u.hit){l.save();const p=this.getAbsoluteTransform(a).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",c,a);return this}_drawChildren(s,a,o,c){var l;const u=a&&a.getContext(),h=this.clipWidth(),p=this.clipHeight(),f=this.clipFunc(),x=typeof h=="number"&&typeof p=="number"||f,y=o===this;if(x){u.save();const _=this.getAbsoluteTransform(o);let g=_.getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),u.beginPath();let m;if(f)m=f.call(this,u,this);else{const v=this.clipX(),S=this.clipY();u.rect(v||0,S||0,h,p)}u.clip.apply(u,m),g=_.copy().invert().getMatrix(),u.transform(g[0],g[1],g[2],g[3],g[4],g[5])}const d=!y&&this.globalCompositeOperation()!=="source-over"&&s==="drawScene";d&&(u.save(),u._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(_){_[s](a,o,c)}),d&&u.restore(),x&&u.restore()}getClientRect(s={}){var a;const o=s.skipTransform,c=s.relativeTo;let l,u,h,p,f={x:1/0,y:1/0,width:0,height:0};const x=this;(a=this.children)===null||a===void 0||a.forEach(function(_){if(!_.visible())return;const g=_.getClientRect({relativeTo:x,skipShadow:s.skipShadow,skipStroke:s.skipStroke});g.width===0&&g.height===0||(l===void 0?(l=g.x,u=g.y,h=g.x+g.width,p=g.y+g.height):(l=Math.min(l,g.x),u=Math.min(u,g.y),h=Math.max(h,g.x+g.width),p=Math.max(p,g.y+g.height)))});const y=this.find("Shape");let d=!1;for(let _=0;_<y.length;_++)if(y[_]._isVisible(this)){d=!0;break}return d&&l!==void 0?f={x:l,y:u,width:h-l,height:p-u}:f={x:0,y:0,width:0,height:0},o?f:this._transformedRect(f,c)}};return qa.Container=i,n.Factory.addComponentsGetterSetter(i,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(i,"clipX",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipY",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipWidth",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipHeight",void 0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(i,"clipFunc"),qa}var Pd={},hr={},ty;function Kv(){if(ty)return hr;ty=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.getCapturedShape=i,hr.createEvent=r,hr.hasPointerCapture=s,hr.setPointerCapture=a,hr.releaseCapture=o;const n=Ut(),t=new Map,e=n.Konva._global.PointerEvent!==void 0;function i(c){return t.get(c)}function r(c){return{evt:c,pointerId:c.pointerId}}function s(c,l){return t.get(c)===l}function a(c,l){o(c),l.getStage()&&(t.set(c,l),e&&l._fire("gotpointercapture",r(new PointerEvent("gotpointercapture"))))}function o(c,l){const u=t.get(c);if(!u)return;const h=u.getStage();h&&h.content,t.delete(c),e&&u._fire("lostpointercapture",r(new PointerEvent("lostpointercapture")))}return hr}var ey;function YM(){return ey||(ey=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Stage=n.stages=void 0;const t=Se(),e=jt(),i=Vu(),r=Ut(),s=Xu(),a=r1(),o=Ut(),c=Kv(),l="Stage",u="string",h="px",p="mouseout",f="mouseleave",x="mouseover",y="mouseenter",d="mousemove",_="mousedown",g="mouseup",m="pointermove",v="pointerdown",S="pointerup",M="pointercancel",w="lostpointercapture",L="pointerout",P="pointerleave",N="pointerover",k="pointerenter",D="contextmenu",C="touchstart",T="touchend",A="touchmove",E="touchcancel",I="wheel",B=5,$=[[y,"_pointerenter"],[_,"_pointerdown"],[d,"_pointermove"],[g,"_pointerup"],[f,"_pointerleave"],[C,"_pointerdown"],[A,"_pointermove"],[T,"_pointerup"],[E,"_pointercancel"],[x,"_pointerover"],[I,"_wheel"],[D,"_contextmenu"],[v,"_pointerdown"],[m,"_pointermove"],[S,"_pointerup"],[M,"_pointercancel"],[w,"_lostpointercapture"]],Y={mouse:{[L]:p,[P]:f,[N]:x,[k]:y,[m]:d,[v]:_,[S]:g,[M]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[L]:"touchout",[P]:"touchleave",[N]:"touchover",[k]:"touchenter",[m]:A,[v]:C,[S]:T,[M]:E,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[L]:L,[P]:P,[N]:N,[k]:k,[m]:m,[v]:v,[S]:S,[M]:M,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},q=et=>et.indexOf("pointer")>=0?"pointer":et.indexOf("touch")>=0?"touch":"mouse",G=et=>{const V=q(et);if(V==="pointer")return r.Konva.pointerEventsEnabled&&Y.pointer;if(V==="touch")return Y.touch;if(V==="mouse")return Y.mouse};function F(et={}){return(et.clipFunc||et.clipWidth||et.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),et}const U="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";n.stages=[];class j extends i.Container{constructor(V){super(F(V)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),n.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{F(this.attrs)}),this._checkVisibility()}_validateAdd(V){const tt=V.getType()==="Layer",z=V.getType()==="FastLayer";tt||z||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const V=this.visible()?"":"none";this.content.style.display=V}setContainer(V){if(typeof V===u){if(V.charAt(0)==="."){const z=V.slice(1);V=document.getElementsByClassName(z)[0]}else{var tt;V.charAt(0)!=="#"?tt=V:tt=V.slice(1),V=document.getElementById(tt)}if(!V)throw"Can not find container in document with id "+tt}return this._setAttr("container",V),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),V.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const V=this.children,tt=V.length;for(let z=0;z<tt;z++)V[z].clear();return this}clone(V){return V||(V={}),V.container=typeof document<"u"&&document.createElement("div"),i.Container.prototype.clone.call(this,V)}destroy(){super.destroy();const V=this.content;V&&t.Util._isInDocument(V)&&this.container().removeChild(V);const tt=n.stages.indexOf(this);return tt>-1&&n.stages.splice(tt,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const V=this._pointerPositions[0]||this._changedPointerPositions[0];return V?{x:V.x,y:V.y}:(t.Util.warn(U),null)}_getPointerById(V){return this._pointerPositions.find(tt=>tt.id===V)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(V){V=V||{},V.x=V.x||0,V.y=V.y||0,V.width=V.width||this.width(),V.height=V.height||this.height();const tt=new s.SceneCanvas({width:V.width,height:V.height,pixelRatio:V.pixelRatio||1}),z=tt.getContext()._context,H=this.children;return(V.x||V.y)&&z.translate(-1*V.x,-1*V.y),H.forEach(function(X){if(!X.isVisible())return;const K=X._toKonvaCanvas(V);z.drawImage(K._canvas,V.x,V.y,K.getWidth()/K.getPixelRatio(),K.getHeight()/K.getPixelRatio())}),tt}getIntersection(V){if(!V)return null;const tt=this.children,z=tt.length,H=z-1;for(let X=H;X>=0;X--){const K=tt[X].getIntersection(V);if(K)return K}return null}_resizeDOM(){const V=this.width(),tt=this.height();this.content&&(this.content.style.width=V+h,this.content.style.height=tt+h),this.bufferCanvas.setSize(V,tt),this.bufferHitCanvas.setSize(V,tt),this.children.forEach(z=>{z.setSize({width:V,height:tt}),z.draw()})}add(V,...tt){if(arguments.length>1){for(let H=0;H<arguments.length;H++)this.add(arguments[H]);return this}super.add(V);const z=this.children.length;return z>B&&t.Util.warn("The stage has "+z+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),V.setSize({width:this.width(),height:this.height()}),V.draw(),r.Konva.isBrowser&&this.content.appendChild(V.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(V){return c.hasPointerCapture(V,this)}setPointerCapture(V){c.setPointerCapture(V,this)}releaseCapture(V){c.releaseCapture(V,this)}getLayers(){return this.children}_bindContentEvents(){r.Konva.isBrowser&&$.forEach(([V,tt])=>{this.content.addEventListener(V,z=>{this[tt](z)},{passive:!1})})}_pointerenter(V){this.setPointersPositions(V);const tt=G(V.type);tt&&this._fire(tt.pointerenter,{evt:V,target:this,currentTarget:this})}_pointerover(V){this.setPointersPositions(V);const tt=G(V.type);tt&&this._fire(tt.pointerover,{evt:V,target:this,currentTarget:this})}_getTargetShape(V){let tt=this[V+"targetShape"];return tt&&!tt.getStage()&&(tt=null),tt}_pointerleave(V){const tt=G(V.type),z=q(V.type);if(!tt)return;this.setPointersPositions(V);const H=this._getTargetShape(z),X=!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled;H&&X?(H._fireAndBubble(tt.pointerout,{evt:V}),H._fireAndBubble(tt.pointerleave,{evt:V}),this._fire(tt.pointerleave,{evt:V,target:this,currentTarget:this}),this[z+"targetShape"]=null):X&&(this._fire(tt.pointerleave,{evt:V,target:this,currentTarget:this}),this._fire(tt.pointerout,{evt:V,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(V){const tt=G(V.type),z=q(V.type);if(!tt)return;this.setPointersPositions(V);let H=!1;this._changedPointerPositions.forEach(X=>{const K=this.getIntersection(X);if(a.DD.justDragged=!1,r.Konva["_"+z+"ListenClick"]=!0,!K||!K.isListening()){this[z+"ClickStartShape"]=void 0;return}r.Konva.capturePointerEventsEnabled&&K.setPointerCapture(X.id),this[z+"ClickStartShape"]=K,K._fireAndBubble(tt.pointerdown,{evt:V,pointerId:X.id}),H=!0;const rt=V.type.indexOf("touch")>=0;K.preventDefault()&&V.cancelable&&rt&&V.preventDefault()}),H||this._fire(tt.pointerdown,{evt:V,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(V){const tt=G(V.type),z=q(V.type);if(!tt||(r.Konva.isDragging()&&a.DD.node.preventDefault()&&V.cancelable&&V.preventDefault(),this.setPointersPositions(V),!(!(r.Konva.isDragging()||r.Konva.isTransforming())||r.Konva.hitOnDragEnabled)))return;const X={};let K=!1;const rt=this._getTargetShape(z);this._changedPointerPositions.forEach(nt=>{const Q=c.getCapturedShape(nt.id)||this.getIntersection(nt),it=nt.id,at={evt:V,pointerId:it},ut=rt!==Q;if(ut&&rt&&(rt._fireAndBubble(tt.pointerout,{...at},Q),rt._fireAndBubble(tt.pointerleave,{...at},Q)),Q){if(X[Q._id])return;X[Q._id]=!0}Q&&Q.isListening()?(K=!0,ut&&(Q._fireAndBubble(tt.pointerover,{...at},rt),Q._fireAndBubble(tt.pointerenter,{...at},rt),this[z+"targetShape"]=Q),Q._fireAndBubble(tt.pointermove,{...at})):rt&&(this._fire(tt.pointerover,{evt:V,target:this,currentTarget:this,pointerId:it}),this[z+"targetShape"]=null)}),K||this._fire(tt.pointermove,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(V){const tt=G(V.type),z=q(V.type);if(!tt)return;this.setPointersPositions(V);const H=this[z+"ClickStartShape"],X=this[z+"ClickEndShape"],K={};let rt=!1;this._changedPointerPositions.forEach(nt=>{const Q=c.getCapturedShape(nt.id)||this.getIntersection(nt);if(Q){if(Q.releaseCapture(nt.id),K[Q._id])return;K[Q._id]=!0}const it=nt.id,at={evt:V,pointerId:it};let ut=!1;r.Konva["_"+z+"InDblClickWindow"]?(ut=!0,clearTimeout(this[z+"DblTimeout"])):a.DD.justDragged||(r.Konva["_"+z+"InDblClickWindow"]=!0,clearTimeout(this[z+"DblTimeout"])),this[z+"DblTimeout"]=setTimeout(function(){r.Konva["_"+z+"InDblClickWindow"]=!1},r.Konva.dblClickWindow),Q&&Q.isListening()?(rt=!0,this[z+"ClickEndShape"]=Q,Q._fireAndBubble(tt.pointerup,{...at}),r.Konva["_"+z+"ListenClick"]&&H&&H===Q&&(Q._fireAndBubble(tt.pointerclick,{...at}),ut&&X&&X===Q&&Q._fireAndBubble(tt.pointerdblclick,{...at}))):(this[z+"ClickEndShape"]=null,r.Konva["_"+z+"ListenClick"]&&this._fire(tt.pointerclick,{evt:V,target:this,currentTarget:this,pointerId:it}),ut&&this._fire(tt.pointerdblclick,{evt:V,target:this,currentTarget:this,pointerId:it}))}),rt||this._fire(tt.pointerup,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),r.Konva["_"+z+"ListenClick"]=!1,V.cancelable&&z!=="touch"&&z!=="pointer"&&V.preventDefault()}_contextmenu(V){this.setPointersPositions(V);const tt=this.getIntersection(this.getPointerPosition());tt&&tt.isListening()?tt._fireAndBubble(D,{evt:V}):this._fire(D,{evt:V,target:this,currentTarget:this})}_wheel(V){this.setPointersPositions(V);const tt=this.getIntersection(this.getPointerPosition());tt&&tt.isListening()?tt._fireAndBubble(I,{evt:V}):this._fire(I,{evt:V,target:this,currentTarget:this})}_pointercancel(V){this.setPointersPositions(V);const tt=c.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());tt&&tt._fireAndBubble(S,c.createEvent(V)),c.releaseCapture(V.pointerId)}_lostpointercapture(V){c.releaseCapture(V.pointerId)}setPointersPositions(V){const tt=this._getContentPosition();let z=null,H=null;V=V||window.event,V.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(V.touches,X=>{this._pointerPositions.push({id:X.identifier,x:(X.clientX-tt.left)/tt.scaleX,y:(X.clientY-tt.top)/tt.scaleY})}),Array.prototype.forEach.call(V.changedTouches||V.touches,X=>{this._changedPointerPositions.push({id:X.identifier,x:(X.clientX-tt.left)/tt.scaleX,y:(X.clientY-tt.top)/tt.scaleY})})):(z=(V.clientX-tt.left)/tt.scaleX,H=(V.clientY-tt.top)/tt.scaleY,this.pointerPos={x:z,y:H},this._pointerPositions=[{x:z,y:H,id:t.Util._getFirstPointerId(V)}],this._changedPointerPositions=[{x:z,y:H,id:t.Util._getFirstPointerId(V)}])}_setPointerPosition(V){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(V)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const V=this.content.getBoundingClientRect();return{top:V.top,left:V.left,scaleX:V.width/this.content.clientWidth||1,scaleY:V.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!r.Konva.isBrowser)return;const V=this.container();if(!V)throw"Stage has no container. A container is required.";V.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),V.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(V){V.batchDraw()}),this}}n.Stage=j,j.prototype.nodeType=l,(0,o._registerNode)(j),e.Factory.addGetterSetter(j,"container"),r.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{n.stages.forEach(et=>{et.batchDraw()})})}(Pd)),Pd}var Ka={},Dd={},iy;function $e(){return iy||(iy=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Shape=n.shapes=void 0;const t=Ut(),e=Se(),i=jt(),r=Pe(),s=Xt(),a=Ut(),o=Kv(),c="hasShadow",l="shadowRGBA",u="patternImage",h="linearGradient",p="radialGradient";let f;function x(){return f||(f=e.Util.createCanvasElement().getContext("2d"),f)}n.shapes={};function y(P){const N=this.attrs.fillRule;N?P.fill(N):P.fill()}function d(P){P.stroke()}function _(P){const N=this.attrs.fillRule;N?P.fill(N):P.fill()}function g(P){P.stroke()}function m(){this._clearCache(c)}function v(){this._clearCache(l)}function S(){this._clearCache(u)}function M(){this._clearCache(h)}function w(){this._clearCache(p)}class L extends r.Node{constructor(N){super(N);let k;for(;k=e.Util.getRandomColor(),!(k&&!(k in n.shapes)););this.colorKey=k,n.shapes[k]=this}getContext(){return e.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return e.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(u,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const D=new e.Transform;D.translate(this.fillPatternX(),this.fillPatternY()),D.rotate(t.Konva.getAngle(this.fillPatternRotation())),D.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),D.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const C=D.getMatrix(),T=typeof DOMMatrix>"u"?{a:C[0],b:C[1],c:C[2],d:C[3],e:C[4],f:C[5]}:new DOMMatrix(C);k.setTransform(T)}return k}}_getLinearGradient(){return this._getCache(h,this.__getLinearGradient)}__getLinearGradient(){const N=this.fillLinearGradientColorStops();if(N){const k=x(),D=this.fillLinearGradientStartPoint(),C=this.fillLinearGradientEndPoint(),T=k.createLinearGradient(D.x,D.y,C.x,C.y);for(let A=0;A<N.length;A+=2)T.addColorStop(N[A],N[A+1]);return T}}_getRadialGradient(){return this._getCache(p,this.__getRadialGradient)}__getRadialGradient(){const N=this.fillRadialGradientColorStops();if(N){const k=x(),D=this.fillRadialGradientStartPoint(),C=this.fillRadialGradientEndPoint(),T=k.createRadialGradient(D.x,D.y,this.fillRadialGradientStartRadius(),C.x,C.y,this.fillRadialGradientEndRadius());for(let A=0;A<N.length;A+=2)T.addColorStop(N[A],N[A+1]);return T}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const N=e.Util.colorToRGBA(this.shadowColor());if(N)return"rgba("+N.r+","+N.g+","+N.b+","+N.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const N=this.hitStrokeWidth();return N==="auto"?this.hasStroke():this.strokeEnabled()&&!!N}intersects(N){const k=this.getStage();if(!k)return!1;const D=k.bufferHitCanvas;return D.getContext().clear(),this.drawHit(D,void 0,!0),D.context.getImageData(Math.round(N.x),Math.round(N.y),1,1).data[3]>0}destroy(){return r.Node.prototype.destroy.call(this),delete n.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(N){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const C=N||this.hasFill(),T=this.hasStroke(),A=this.getAbsoluteOpacity()!==1;if(C&&T&&A)return!0;const E=this.hasShadow(),I=this.shadowForStrokeEnabled();return!!(C&&T&&E&&I)}setStrokeHitEnabled(N){e.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),N?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const N=this.size();return{x:this._centroid?-N.width/2:0,y:this._centroid?-N.height/2:0,width:N.width,height:N.height}}getClientRect(N={}){let k=!1,D=this.getParent();for(;D;){if(D.isCached()){k=!0;break}D=D.getParent()}const C=N.skipTransform,T=N.relativeTo||k&&this.getStage()||void 0,A=this.getSelfRect(),I=!N.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,B=A.width+I,$=A.height+I,Y=!N.skipShadow&&this.hasShadow(),q=Y?this.shadowOffsetX():0,G=Y?this.shadowOffsetY():0,F=B+Math.abs(q),U=$+Math.abs(G),j=Y&&this.shadowBlur()||0,et=F+j*2,V=U+j*2,tt={width:et,height:V,x:-(I/2+j)+Math.min(q,0)+A.x,y:-(I/2+j)+Math.min(G,0)+A.y};return C?tt:this._transformedRect(tt,T)}drawScene(N,k,D){const C=this.getLayer();let T=N||C.getCanvas(),A=T.getContext(),E=this._getCanvasCache(),I=this.getSceneFunc(),B=this.hasShadow(),$,Y;const q=T.isCache,G=k===this;if(!this.isVisible()&&!G)return this;if(E){A.save();const U=this.getAbsoluteTransform(k).getMatrix();return A.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(A),A.restore(),this}if(!I)return this;if(A.save(),this._useBufferCanvas()&&!q){$=this.getStage();const U=D||$.bufferCanvas;Y=U.getContext(),Y.clear(),Y.save(),Y._applyLineJoin(this);var F=this.getAbsoluteTransform(k).getMatrix();Y.transform(F[0],F[1],F[2],F[3],F[4],F[5]),I.call(this,Y,this),Y.restore();const j=U.pixelRatio;B&&A._applyShadow(this),A._applyOpacity(this),A._applyGlobalCompositeOperation(this),A.drawImage(U._canvas,0,0,U.width/j,U.height/j)}else{if(A._applyLineJoin(this),!G){var F=this.getAbsoluteTransform(k).getMatrix();A.transform(F[0],F[1],F[2],F[3],F[4],F[5]),A._applyOpacity(this),A._applyGlobalCompositeOperation(this)}B&&A._applyShadow(this),I.call(this,A,this)}return A.restore(),this}drawHit(N,k,D=!1){if(!this.shouldDrawHit(k,D))return this;const C=this.getLayer(),T=N||C.hitCanvas,A=T&&T.getContext(),E=this.hitFunc()||this.sceneFunc(),I=this._getCanvasCache(),B=I&&I.hit;if(this.colorKey||e.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),B){A.save();const Y=this.getAbsoluteTransform(k).getMatrix();return A.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),this._drawCachedHitCanvas(A),A.restore(),this}if(!E)return this;if(A.save(),A._applyLineJoin(this),!(this===k)){const Y=this.getAbsoluteTransform(k).getMatrix();A.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5])}return E.call(this,A,this),A.restore(),this}drawHitFromCache(N=0){const k=this._getCanvasCache(),D=this._getCachedSceneCanvas(),C=k.hit,T=C.getContext(),A=C.getWidth(),E=C.getHeight();T.clear(),T.drawImage(D._canvas,0,0,A,E);try{const I=T.getImageData(0,0,A,E),B=I.data,$=B.length,Y=e.Util._hexToRgb(this.colorKey);for(let q=0;q<$;q+=4)B[q+3]>N?(B[q]=Y.r,B[q+1]=Y.g,B[q+2]=Y.b,B[q+3]=255):B[q+3]=0;T.putImageData(I,0,0)}catch(I){e.Util.error("Unable to draw hit graph from cached scene canvas. "+I.message)}return this}hasPointerCapture(N){return o.hasPointerCapture(N,this)}setPointerCapture(N){o.setPointerCapture(N,this)}releaseCapture(N){o.releaseCapture(N,this)}}n.Shape=L,L.prototype._fillFunc=y,L.prototype._strokeFunc=d,L.prototype._fillFuncHit=_,L.prototype._strokeFuncHit=g,L.prototype._centroid=!1,L.prototype.nodeType="Shape",(0,a._registerNode)(L),L.prototype.eventListeners={},L.prototype.on.call(L.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),L.prototype.on.call(L.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",v),L.prototype.on.call(L.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",S),L.prototype.on.call(L.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",M),L.prototype.on.call(L.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",w),i.Factory.addGetterSetter(L,"stroke",void 0,(0,s.getStringOrGradientValidator)()),i.Factory.addGetterSetter(L,"strokeWidth",2,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"fillAfterStrokeEnabled",!1),i.Factory.addGetterSetter(L,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),i.Factory.addGetterSetter(L,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(L,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(L,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),i.Factory.addGetterSetter(L,"lineJoin"),i.Factory.addGetterSetter(L,"lineCap"),i.Factory.addGetterSetter(L,"sceneFunc"),i.Factory.addGetterSetter(L,"hitFunc"),i.Factory.addGetterSetter(L,"dash"),i.Factory.addGetterSetter(L,"dashOffset",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"shadowColor",void 0,(0,s.getStringValidator)()),i.Factory.addGetterSetter(L,"shadowBlur",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"shadowOpacity",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(L,"shadowOffset",["x","y"]),i.Factory.addGetterSetter(L,"shadowOffsetX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"shadowOffsetY",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"fillPatternImage"),i.Factory.addGetterSetter(L,"fill",void 0,(0,s.getStringOrGradientValidator)()),i.Factory.addGetterSetter(L,"fillPatternX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"fillPatternY",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"fillLinearGradientColorStops"),i.Factory.addGetterSetter(L,"strokeLinearGradientColorStops"),i.Factory.addGetterSetter(L,"fillRadialGradientStartRadius",0),i.Factory.addGetterSetter(L,"fillRadialGradientEndRadius",0),i.Factory.addGetterSetter(L,"fillRadialGradientColorStops"),i.Factory.addGetterSetter(L,"fillPatternRepeat","repeat"),i.Factory.addGetterSetter(L,"fillEnabled",!0),i.Factory.addGetterSetter(L,"strokeEnabled",!0),i.Factory.addGetterSetter(L,"shadowEnabled",!0),i.Factory.addGetterSetter(L,"dashEnabled",!0),i.Factory.addGetterSetter(L,"strokeScaleEnabled",!0),i.Factory.addGetterSetter(L,"fillPriority","color"),i.Factory.addComponentsGetterSetter(L,"fillPatternOffset",["x","y"]),i.Factory.addGetterSetter(L,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(L,"fillPatternScale",["x","y"]),i.Factory.addGetterSetter(L,"fillPatternScaleX",1,(0,s.getNumberValidator)()),i.Factory.addGetterSetter(L,"fillPatternScaleY",1,(0,s.getNumberValidator)()),i.Factory.addComponentsGetterSetter(L,"fillLinearGradientStartPoint",["x","y"]),i.Factory.addComponentsGetterSetter(L,"strokeLinearGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(L,"fillLinearGradientStartPointX",0),i.Factory.addGetterSetter(L,"strokeLinearGradientStartPointX",0),i.Factory.addGetterSetter(L,"fillLinearGradientStartPointY",0),i.Factory.addGetterSetter(L,"strokeLinearGradientStartPointY",0),i.Factory.addComponentsGetterSetter(L,"fillLinearGradientEndPoint",["x","y"]),i.Factory.addComponentsGetterSetter(L,"strokeLinearGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(L,"fillLinearGradientEndPointX",0),i.Factory.addGetterSetter(L,"strokeLinearGradientEndPointX",0),i.Factory.addGetterSetter(L,"fillLinearGradientEndPointY",0),i.Factory.addGetterSetter(L,"strokeLinearGradientEndPointY",0),i.Factory.addComponentsGetterSetter(L,"fillRadialGradientStartPoint",["x","y"]),i.Factory.addGetterSetter(L,"fillRadialGradientStartPointX",0),i.Factory.addGetterSetter(L,"fillRadialGradientStartPointY",0),i.Factory.addComponentsGetterSetter(L,"fillRadialGradientEndPoint",["x","y"]),i.Factory.addGetterSetter(L,"fillRadialGradientEndPointX",0),i.Factory.addGetterSetter(L,"fillRadialGradientEndPointY",0),i.Factory.addGetterSetter(L,"fillPatternRotation",0),i.Factory.addGetterSetter(L,"fillRule",void 0,(0,s.getStringValidator)()),i.Factory.backCompat(L,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Dd)),Dd}var ny;function Zv(){if(ny)return Ka;ny=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.Layer=void 0;const n=Se(),t=Vu(),e=Pe(),i=jt(),r=Xu(),s=Xt(),a=$e(),o=Ut(),c="#",l="beforeDraw",u="draw",h=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],p=h.length;let f=class extends t.Container{constructor(y){super(y),this.canvas=new r.SceneCanvas,this.hitCanvas=new r.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const d=this.getStage();return d&&d.content&&(d.content.removeChild(this.getNativeCanvasElement()),y<d.children.length-1?d.content.insertBefore(this.getNativeCanvasElement(),d.children[y+1].getCanvas()._canvas):d.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){e.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!e.Node.prototype.moveUp.call(this))return!1;const d=this.getStage();return!d||!d.content?!1:(d.content.removeChild(this.getNativeCanvasElement()),this.index<d.children.length-1?d.content.insertBefore(this.getNativeCanvasElement(),d.children[this.index+1].getCanvas()._canvas):d.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(e.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const d=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),d[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(e.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const d=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),d[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return e.Node.prototype.remove.call(this),y&&y.parentNode&&n.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:d}){return this.canvas.setSize(y,d),this.hitCanvas.setSize(y,d),this._setSmoothEnabled(),this}_validateAdd(y){const d=y.getType();d!=="Group"&&d!=="Shape"&&n.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),e.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){n.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){n.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,n.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let d=1,_=!1;for(;;){for(let g=0;g<p;g++){const m=h[g],v=this._getIntersection({x:y.x+m.x*d,y:y.y+m.y*d}),S=v.shape;if(S)return S;if(_=!!v.antialiased,!v.antialiased)break}if(_)d+=1;else return null}}_getIntersection(y){const d=this.hitCanvas.pixelRatio,_=this.hitCanvas.context.getImageData(Math.round(y.x*d),Math.round(y.y*d),1,1).data,g=_[3];if(g===255){const m=n.Util._rgbToHex(_[0],_[1],_[2]),v=a.shapes[c+m];return v?{shape:v}:{antialiased:!0}}else if(g>0)return{antialiased:!0};return{}}drawScene(y,d){const _=this.getLayer(),g=y||_&&_.getCanvas();return this._fire(l,{node:this}),this.clearBeforeDraw()&&g.getContext().clear(),t.Container.prototype.drawScene.call(this,g,d),this._fire(u,{node:this}),this}drawHit(y,d){const _=this.getLayer(),g=y||_&&_.hitCanvas;return _&&_.clearBeforeDraw()&&_.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,g,d),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return n.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return n.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};return Ka.Layer=f,f.prototype.nodeType="Layer",(0,o._registerNode)(f),i.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),i.Factory.addGetterSetter(f,"clearBeforeDraw",!0),i.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,s.getBooleanValidator)()),Ka}var Za={},ry;function jM(){if(ry)return Za;ry=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.FastLayer=void 0;const n=Se(),t=Zv(),e=Ut();let i=class extends t.Layer{constructor(s){super(s),this.listening(!1),n.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return Za.FastLayer=i,i.prototype.nodeType="FastLayer",(0,e._registerNode)(i),Za}var Qa={},sy;function s1(){if(sy)return Qa;sy=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.Group=void 0;const n=Se(),t=Vu(),e=Ut();let i=class extends t.Container{_validateAdd(s){const a=s.getType();a!=="Group"&&a!=="Shape"&&n.Util.throw("You may only add groups and shapes to groups.")}};return Qa.Group=i,i.prototype.nodeType="Group",(0,e._registerNode)(i),Qa}var Ja={},ay;function a1(){if(ay)return Ja;ay=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.Animation=void 0;const n=Ut(),t=Se(),e=function(){return n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return new Date().getTime()}}();let i=class Ws{constructor(s,a){this.id=Ws.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=s,this.setLayers(a)}setLayers(s){let a=[];return s&&(a=Array.isArray(s)?s:[s]),this.layers=a,this}getLayers(){return this.layers}addLayer(s){const a=this.layers,o=a.length;for(let c=0;c<o;c++)if(a[c]._id===s._id)return!1;return this.layers.push(s),!0}isRunning(){const a=Ws.animations,o=a.length;for(let c=0;c<o;c++)if(a[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),Ws._addAnimation(this),this}stop(){return Ws._removeAnimation(this),this}_updateFrameObject(s){this.frame.timeDiff=s-this.frame.lastTime,this.frame.lastTime=s,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(s){this.animations.push(s),this._handleAnimation()}static _removeAnimation(s){const a=s.id,o=this.animations,c=o.length;for(let l=0;l<c;l++)if(o[l].id===a){this.animations.splice(l,1);break}}static _runFrames(){const s={},a=this.animations;for(let o=0;o<a.length;o++){const c=a[o],l=c.layers,u=c.func;c._updateFrameObject(e());const h=l.length;let p;if(u?p=u.call(c,c.frame)!==!1:p=!0,!!p)for(let f=0;f<h;f++){const x=l[f];x._id!==void 0&&(s[x._id]=x)}}for(const o in s)s.hasOwnProperty(o)&&s[o].batchDraw()}static _animationLoop(){const s=Ws;s.animations.length?(s._runFrames(),t.Util.requestAnimFrame(s._animationLoop)):s.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Ja.Animation=i,i.animations=[],i.animIdCounter=0,i.animRunning=!1,Ja}var Ld={},oy;function XM(){return oy||(oy=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Easings=n.Tween=void 0;const t=Se(),e=a1(),i=Pe(),r=Ut(),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},a=1,o=2,c=3,l=["fill","stroke","shadowColor"];let u=0;class h{constructor(x,y,d,_,g,m,v){this.prop=x,this.propFunc=y,this.begin=_,this._pos=_,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=d,this._change=g-this.begin,this.pause()}fire(x){const y=this[x];y&&y()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===c&&this.setTime(this.duration-x)}pause(){this.state=a,this.fire("onPause")}getTimer(){return new Date().getTime()}}class p{constructor(x){const y=this,d=x.node,_=d._id,g=x.easing||n.Easings.Linear,m=!!x.yoyo;let v,S;typeof x.duration>"u"?v=.3:x.duration===0?v=.001:v=x.duration,this.node=d,this._id=u++;const M=d.getLayer()||(d instanceof r.Konva.Stage?d.getLayers():null);M||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new e.Animation(function(){y.tween.onEnterFrame()},M),this.tween=new h(S,function(w){y._tweenFunc(w)},g,0,1,v*1e3,m),this._addListeners(),p.attrs[_]||(p.attrs[_]={}),p.attrs[_][this._id]||(p.attrs[_][this._id]={}),p.tweens[_]||(p.tweens[_]={});for(S in x)s[S]===void 0&&this._addAttr(S,x[S]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,y){const d=this.node,_=d._id;let g,m,v,S,M;const w=p.tweens[_][x];w&&delete p.attrs[_][w][x];let L=d.getAttr(x);if(t.Util._isArray(y))if(g=[],m=Math.max(y.length,L.length),x==="points"&&y.length!==L.length&&(y.length>L.length?(S=L,L=t.Util._prepareArrayForTween(L,y,d.closed())):(v=y,y=t.Util._prepareArrayForTween(y,L,d.closed()))),x.indexOf("fill")===0)for(let P=0;P<m;P++)if(P%2===0)g.push(y[P]-L[P]);else{const N=t.Util.colorToRGBA(L[P]);M=t.Util.colorToRGBA(y[P]),L[P]=N,g.push({r:M.r-N.r,g:M.g-N.g,b:M.b-N.b,a:M.a-N.a})}else for(let P=0;P<m;P++)g.push(y[P]-L[P]);else l.indexOf(x)!==-1?(L=t.Util.colorToRGBA(L),M=t.Util.colorToRGBA(y),g={r:M.r-L.r,g:M.g-L.g,b:M.b-L.b,a:M.a-L.a}):g=y-L;p.attrs[_][this._id][x]={start:L,diff:g,end:y,trueEnd:v,trueStart:S},p.tweens[_][x]=this._id}_tweenFunc(x){const y=this.node,d=p.attrs[y._id][this._id];let _,g,m,v,S,M,w,L;for(_ in d){if(g=d[_],m=g.start,v=g.diff,L=g.end,t.Util._isArray(m))if(S=[],w=Math.max(m.length,L.length),_.indexOf("fill")===0)for(M=0;M<w;M++)M%2===0?S.push((m[M]||0)+v[M]*x):S.push("rgba("+Math.round(m[M].r+v[M].r*x)+","+Math.round(m[M].g+v[M].g*x)+","+Math.round(m[M].b+v[M].b*x)+","+(m[M].a+v[M].a*x)+")");else for(M=0;M<w;M++)S.push((m[M]||0)+v[M]*x);else l.indexOf(_)!==-1?S="rgba("+Math.round(m.r+v.r*x)+","+Math.round(m.g+v.g*x)+","+Math.round(m.b+v.b*x)+","+(m.a+v.a*x)+")":S=m+v*x;y.setAttr(_,S)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,y=p.attrs[x._id][this._id];y.points&&y.points.trueEnd&&x.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,y=p.attrs[x._id][this._id];y.points&&y.points.trueStart&&x.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,y=this._id,d=p.tweens[x];this.pause();for(const _ in d)delete p.tweens[x][_];delete p.attrs[x][y]}}n.Tween=p,p.attrs={},p.tweens={},i.Node.prototype.to=function(f){const x=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),x&&x()},new p(f).play()},n.Easings={BackEaseIn(f,x,y,d){return y*(f/=d)*f*((1.70158+1)*f-1.70158)+x},BackEaseOut(f,x,y,d){return y*((f=f/d-1)*f*((1.70158+1)*f+1.70158)+1)+x},BackEaseInOut(f,x,y,d){let _=1.70158;return(f/=d/2)<1?y/2*(f*f*(((_*=1.525)+1)*f-_))+x:y/2*((f-=2)*f*(((_*=1.525)+1)*f+_)+2)+x},ElasticEaseIn(f,x,y,d,_,g){let m=0;return f===0?x:(f/=d)===1?x+y:(g||(g=d*.3),!_||_<Math.abs(y)?(_=y,m=g/4):m=g/(2*Math.PI)*Math.asin(y/_),-(_*Math.pow(2,10*(f-=1))*Math.sin((f*d-m)*(2*Math.PI)/g))+x)},ElasticEaseOut(f,x,y,d,_,g){let m=0;return f===0?x:(f/=d)===1?x+y:(g||(g=d*.3),!_||_<Math.abs(y)?(_=y,m=g/4):m=g/(2*Math.PI)*Math.asin(y/_),_*Math.pow(2,-10*f)*Math.sin((f*d-m)*(2*Math.PI)/g)+y+x)},ElasticEaseInOut(f,x,y,d,_,g){let m=0;return f===0?x:(f/=d/2)===2?x+y:(g||(g=d*(.3*1.5)),!_||_<Math.abs(y)?(_=y,m=g/4):m=g/(2*Math.PI)*Math.asin(y/_),f<1?-.5*(_*Math.pow(2,10*(f-=1))*Math.sin((f*d-m)*(2*Math.PI)/g))+x:_*Math.pow(2,-10*(f-=1))*Math.sin((f*d-m)*(2*Math.PI)/g)*.5+y+x)},BounceEaseOut(f,x,y,d){return(f/=d)<1/2.75?y*(7.5625*f*f)+x:f<2/2.75?y*(7.5625*(f-=1.5/2.75)*f+.75)+x:f<2.5/2.75?y*(7.5625*(f-=2.25/2.75)*f+.9375)+x:y*(7.5625*(f-=2.625/2.75)*f+.984375)+x},BounceEaseIn(f,x,y,d){return y-n.Easings.BounceEaseOut(d-f,0,y,d)+x},BounceEaseInOut(f,x,y,d){return f<d/2?n.Easings.BounceEaseIn(f*2,0,y,d)*.5+x:n.Easings.BounceEaseOut(f*2-d,0,y,d)*.5+y*.5+x},EaseIn(f,x,y,d){return y*(f/=d)*f+x},EaseOut(f,x,y,d){return-y*(f/=d)*(f-2)+x},EaseInOut(f,x,y,d){return(f/=d/2)<1?y/2*f*f+x:-y/2*(--f*(f-2)-1)+x},StrongEaseIn(f,x,y,d){return y*(f/=d)*f*f*f*f+x},StrongEaseOut(f,x,y,d){return y*((f=f/d-1)*f*f*f*f+1)+x},StrongEaseInOut(f,x,y,d){return(f/=d/2)<1?y/2*f*f*f*f*f+x:y/2*((f-=2)*f*f*f*f+2)+x},Linear(f,x,y,d){return y*f/d+x}}}(Ld)),Ld}var ly;function VM(){return ly||(ly=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Konva=void 0;const t=Ut(),e=Se(),i=Pe(),r=Vu(),s=YM(),a=Zv(),o=jM(),c=s1(),l=r1(),u=$e(),h=a1(),p=XM(),f=qv(),x=Xu();n.Konva=e.Util._assign(t.Konva,{Util:e.Util,Transform:e.Transform,Node:i.Node,Container:r.Container,Stage:s.Stage,stages:s.stages,Layer:a.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:l.DD,Shape:u.Shape,shapes:u.shapes,Animation:h.Animation,Tween:p.Tween,Easings:p.Easings,Context:f.Context,Canvas:x.Canvas}),n.default=n.Konva}(Td)),Td}var to={},cy;function qM(){if(cy)return to;cy=1,Object.defineProperty(to,"__esModule",{value:!0}),to.Arc=void 0;const n=jt(),t=$e(),e=Ut(),i=Xt(),r=Ut();let s=class extends t.Shape{_sceneFunc(o){const c=e.Konva.getAngle(this.angle()),l=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,c,l),o.arc(0,0,this.innerRadius(),c,0,!l),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),c=this.outerRadius(),l=this.clockwise(),u=e.Konva.getAngle(l?360-this.angle():this.angle()),h=Math.cos(Math.min(u,Math.PI)),p=1,f=Math.sin(Math.min(Math.max(Math.PI,u),3*Math.PI/2)),x=Math.sin(Math.min(u,Math.PI/2)),y=h*(h>0?o:c),d=p*c,_=f*(f>0?o:c),g=x*(x>0?c:o);return{x:y,y:l?-1*g:_,width:d-y,height:g-_}}};return to.Arc=s,s.prototype._centroid=!0,s.prototype.className="Arc",s.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,r._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1,(0,i.getBooleanValidator)()),to}var eo={},io={},uy;function Qv(){if(uy)return io;uy=1,Object.defineProperty(io,"__esModule",{value:!0}),io.Line=void 0;const n=jt(),t=Ut(),e=$e(),i=Xt();function r(o,c,l,u,h,p,f){const x=Math.sqrt(Math.pow(l-o,2)+Math.pow(u-c,2)),y=Math.sqrt(Math.pow(h-l,2)+Math.pow(p-u,2)),d=f*x/(x+y),_=f*y/(x+y),g=l-d*(h-o),m=u-d*(p-c),v=l+_*(h-o),S=u+_*(p-c);return[g,m,v,S]}function s(o,c){const l=o.length,u=[];for(let h=2;h<l-2;h+=2){const p=r(o[h-2],o[h-1],o[h],o[h+1],o[h+2],o[h+3],c);isNaN(p[0])||(u.push(p[0]),u.push(p[1]),u.push(o[h]),u.push(o[h+1]),u.push(p[2]),u.push(p[3]))}return u}let a=class extends e.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){let l=this.points(),u=l.length,h=this.tension(),p=this.closed(),f=this.bezier(),x,y,d;if(u){if(c.beginPath(),c.moveTo(l[0],l[1]),h!==0&&u>4){for(x=this.getTensionPoints(),y=x.length,d=p?0:4,p||c.quadraticCurveTo(x[0],x[1],x[2],x[3]);d<y-2;)c.bezierCurveTo(x[d++],x[d++],x[d++],x[d++],x[d++],x[d++]);p||c.quadraticCurveTo(x[y-2],x[y-1],l[u-2],l[u-1])}else if(f)for(d=2;d<u;)c.bezierCurveTo(l[d++],l[d++],l[d++],l[d++],l[d++],l[d++]);else for(d=2;d<u;d+=2)c.lineTo(l[d],l[d+1]);p?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():s(this.points(),this.tension())}_getTensionPointsClosed(){const c=this.points(),l=c.length,u=this.tension(),h=r(c[l-2],c[l-1],c[0],c[1],c[2],c[3],u),p=r(c[l-4],c[l-3],c[l-2],c[l-1],c[0],c[1],u),f=s(c,u);return[h[2],h[3]].concat(f).concat([p[0],p[1],c[l-2],c[l-1],p[2],p[3],h[0],h[1],c[0],c[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();let l=c[0],u=c[0],h=c[1],p=c[1],f,x;for(let y=0;y<c.length/2;y++)f=c[y*2],x=c[y*2+1],l=Math.min(l,f),u=Math.max(u,f),h=Math.min(h,x),p=Math.max(p,x);return{x:l,y:h,width:u-l,height:p-h}}};return io.Line=a,a.prototype.className="Line",a.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(a),n.Factory.addGetterSetter(a,"closed",!1),n.Factory.addGetterSetter(a,"bezier",!1),n.Factory.addGetterSetter(a,"tension",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(a,"points",[],(0,i.getNumberArrayValidator)()),io}var no={},Rd={},hy;function KM(){return hy||(hy=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.t2length=n.getQuadraticArcLength=n.getCubicArcLength=n.binomialCoefficients=n.cValues=n.tValues=void 0,n.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],n.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],n.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(a,o,c)=>{let l,u;const p=c/2;l=0;for(let f=0;f<20;f++)u=p*n.tValues[20][f]+p,l+=n.cValues[20][f]*i(a,o,u);return p*l};n.getCubicArcLength=t;const e=(a,o,c)=>{c===void 0&&(c=1);const l=a[0]-2*a[1]+a[2],u=o[0]-2*o[1]+o[2],h=2*a[1]-2*a[0],p=2*o[1]-2*o[0],f=4*(l*l+u*u),x=4*(l*h+u*p),y=h*h+p*p;if(f===0)return c*Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(o[2]-o[0],2));const d=x/(2*f),_=y/f,g=c+d,m=_-d*d,v=g*g+m>0?Math.sqrt(g*g+m):0,S=d*d+m>0?Math.sqrt(d*d+m):0,M=d+Math.sqrt(d*d+m)!==0?m*Math.log(Math.abs((g+v)/(d+S))):0;return Math.sqrt(f)/2*(g*v-d*S+M)};n.getQuadraticArcLength=e;function i(a,o,c){const l=r(1,c,a),u=r(1,c,o),h=l*l+u*u;return Math.sqrt(h)}const r=(a,o,c)=>{const l=c.length-1;let u,h;if(l===0)return 0;if(a===0){h=0;for(let p=0;p<=l;p++)h+=n.binomialCoefficients[l][p]*Math.pow(1-o,l-p)*Math.pow(o,p)*c[p];return h}else{u=new Array(l);for(let p=0;p<l;p++)u[p]=l*(c[p+1]-c[p]);return r(a-1,o,u)}},s=(a,o,c)=>{let l=1,u=a/o,h=(a-c(u))/o,p=0;for(;l>.001;){const f=c(u+h),x=Math.abs(a-f)/o;if(x<l)l=x,u+=h;else{const y=c(u-h),d=Math.abs(a-y)/o;d<l?(l=d,u-=h):h/=2}if(p++,p>500)break}return u};n.t2length=s}(Rd)),Rd}var dy;function o1(){if(dy)return no;dy=1,Object.defineProperty(no,"__esModule",{value:!0}),no.Path=void 0;const n=jt(),t=$e(),e=Ut(),i=KM();let r=class hi extends t.Shape{constructor(a){super(a),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=hi.parsePathData(this.data()),this.pathLength=hi.getPathLength(this.dataArray)}_sceneFunc(a){const o=this.dataArray;a.beginPath();let c=!1;for(let v=0;v<o.length;v++){const S=o[v].command,M=o[v].points;switch(S){case"L":a.lineTo(M[0],M[1]);break;case"M":a.moveTo(M[0],M[1]);break;case"C":a.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5]);break;case"Q":a.quadraticCurveTo(M[0],M[1],M[2],M[3]);break;case"A":var l=M[0],u=M[1],h=M[2],p=M[3],f=M[4],x=M[5],y=M[6],d=M[7],_=h>p?h:p,g=h>p?1:h/p,m=h>p?p/h:1;a.translate(l,u),a.rotate(y),a.scale(g,m),a.arc(0,0,_,f,f+x,1-d),a.scale(1/g,1/m),a.rotate(-y),a.translate(-l,-u);break;case"z":c=!0,a.closePath();break}}!c&&!this.hasFill()?a.strokeShape(this):a.fillStrokeShape(this)}getSelfRect(){let a=[];this.dataArray.forEach(function(f){if(f.command==="A"){const x=f.points[4],y=f.points[5],d=f.points[4]+y;let _=Math.PI/180;if(Math.abs(x-d)<_&&(_=Math.abs(x-d)),y<0)for(let g=x-_;g>d;g-=_){const m=hi.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],g,0);a.push(m.x,m.y)}else for(let g=x+_;g<d;g+=_){const m=hi.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],g,0);a.push(m.x,m.y)}}else if(f.command==="C")for(let x=0;x<=1;x+=.01){const y=hi.getPointOnCubicBezier(x,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);a.push(y.x,y.y)}else a=a.concat(f.points)});let o=a[0],c=a[0],l=a[1],u=a[1],h,p;for(let f=0;f<a.length/2;f++)h=a[f*2],p=a[f*2+1],isNaN(h)||(o=Math.min(o,h),c=Math.max(c,h)),isNaN(p)||(l=Math.min(l,p),u=Math.max(u,p));return{x:o,y:l,width:c-o,height:u-l}}getLength(){return this.pathLength}getPointAtLength(a){return hi.getPointAtLengthOfDataArray(a,this.dataArray)}static getLineLength(a,o,c,l){return Math.sqrt((c-a)*(c-a)+(l-o)*(l-o))}static getPathLength(a){let o=0;for(let c=0;c<a.length;++c)o+=a[c].pathLength;return o}static getPointAtLengthOfDataArray(a,o){let c,l=0,u=o.length;if(!u)return null;for(;l<u&&a>o[l].pathLength;)a-=o[l].pathLength,++l;if(l===u)return c=o[l-1].points.slice(-2),{x:c[0],y:c[1]};if(a<.01)return c=o[l].points.slice(0,2),{x:c[0],y:c[1]};const h=o[l],p=h.points;switch(h.command){case"L":return hi.getPointOnLine(a,h.start.x,h.start.y,p[0],p[1]);case"C":return hi.getPointOnCubicBezier((0,i.t2length)(a,hi.getPathLength(o),v=>(0,i.getCubicArcLength)([h.start.x,p[0],p[2],p[4]],[h.start.y,p[1],p[3],p[5]],v)),h.start.x,h.start.y,p[0],p[1],p[2],p[3],p[4],p[5]);case"Q":return hi.getPointOnQuadraticBezier((0,i.t2length)(a,hi.getPathLength(o),v=>(0,i.getQuadraticArcLength)([h.start.x,p[0],p[2]],[h.start.y,p[1],p[3]],v)),h.start.x,h.start.y,p[0],p[1],p[2],p[3]);case"A":var f=p[0],x=p[1],y=p[2],d=p[3],_=p[4],g=p[5],m=p[6];return _+=g*a/h.pathLength,hi.getPointOnEllipticalArc(f,x,y,d,_,m)}return null}static getPointOnLine(a,o,c,l,u,h,p){h=h??o,p=p??c;const f=this.getLineLength(o,c,l,u);if(f<1e-10)return{x:o,y:c};if(l===o)return{x:h,y:p+(u>c?a:-a)};const x=(u-c)/(l-o),y=Math.sqrt(a*a/(1+x*x))*(l<o?-1:1),d=x*y;if(Math.abs(p-c-x*(h-o))<1e-10)return{x:h+y,y:p+d};const _=((h-o)*(l-o)+(p-c)*(u-c))/(f*f),g=o+_*(l-o),m=c+_*(u-c),v=this.getLineLength(h,p,g,m),S=Math.sqrt(a*a-v*v),M=Math.sqrt(S*S/(1+x*x))*(l<o?-1:1),w=x*M;return{x:g+M,y:m+w}}static getPointOnCubicBezier(a,o,c,l,u,h,p,f,x){function y(S){return S*S*S}function d(S){return 3*S*S*(1-S)}function _(S){return 3*S*(1-S)*(1-S)}function g(S){return(1-S)*(1-S)*(1-S)}const m=f*y(a)+h*d(a)+l*_(a)+o*g(a),v=x*y(a)+p*d(a)+u*_(a)+c*g(a);return{x:m,y:v}}static getPointOnQuadraticBezier(a,o,c,l,u,h,p){function f(g){return g*g}function x(g){return 2*g*(1-g)}function y(g){return(1-g)*(1-g)}const d=h*f(a)+l*x(a)+o*y(a),_=p*f(a)+u*x(a)+c*y(a);return{x:d,y:_}}static getPointOnEllipticalArc(a,o,c,l,u,h){const p=Math.cos(h),f=Math.sin(h),x={x:c*Math.cos(u),y:l*Math.sin(u)};return{x:a+(x.x*p-x.y*f),y:o+(x.x*f+x.y*p)}}static parsePathData(a){if(!a)return[];let o=a;const c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(var l=0;l<c.length;l++)o=o.replace(new RegExp(c[l],"g"),"|"+c[l]);const u=o.split("|"),h=[],p=[];let f=0,x=0;const y=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let d;for(l=1;l<u.length;l++){let C=u[l],T=C.charAt(0);for(C=C.slice(1),p.length=0;d=y.exec(C);)p.push(d[0]);const A=[];for(let E=0,I=p.length;E<I;E++){if(p[E]==="00"){A.push(0,0);continue}const B=parseFloat(p[E]);isNaN(B)?A.push(0):A.push(B)}for(;A.length>0&&!isNaN(A[0]);){let E="",I=[];const B=f,$=x;var _,g,m,v,S,M,w,L,P,N;switch(T){case"l":f+=A.shift(),x+=A.shift(),E="L",I.push(f,x);break;case"L":f=A.shift(),x=A.shift(),I.push(f,x);break;case"m":var k=A.shift(),D=A.shift();if(f+=k,x+=D,E="M",h.length>2&&h[h.length-1].command==="z"){for(let Y=h.length-2;Y>=0;Y--)if(h[Y].command==="M"){f=h[Y].points[0]+k,x=h[Y].points[1]+D;break}}I.push(f,x),T="l";break;case"M":f=A.shift(),x=A.shift(),E="M",I.push(f,x),T="L";break;case"h":f+=A.shift(),E="L",I.push(f,x);break;case"H":f=A.shift(),E="L",I.push(f,x);break;case"v":x+=A.shift(),E="L",I.push(f,x);break;case"V":x=A.shift(),E="L",I.push(f,x);break;case"C":I.push(A.shift(),A.shift(),A.shift(),A.shift()),f=A.shift(),x=A.shift(),I.push(f,x);break;case"c":I.push(f+A.shift(),x+A.shift(),f+A.shift(),x+A.shift()),f+=A.shift(),x+=A.shift(),E="C",I.push(f,x);break;case"S":g=f,m=x,_=h[h.length-1],_.command==="C"&&(g=f+(f-_.points[2]),m=x+(x-_.points[3])),I.push(g,m,A.shift(),A.shift()),f=A.shift(),x=A.shift(),E="C",I.push(f,x);break;case"s":g=f,m=x,_=h[h.length-1],_.command==="C"&&(g=f+(f-_.points[2]),m=x+(x-_.points[3])),I.push(g,m,f+A.shift(),x+A.shift()),f+=A.shift(),x+=A.shift(),E="C",I.push(f,x);break;case"Q":I.push(A.shift(),A.shift()),f=A.shift(),x=A.shift(),I.push(f,x);break;case"q":I.push(f+A.shift(),x+A.shift()),f+=A.shift(),x+=A.shift(),E="Q",I.push(f,x);break;case"T":g=f,m=x,_=h[h.length-1],_.command==="Q"&&(g=f+(f-_.points[0]),m=x+(x-_.points[1])),f=A.shift(),x=A.shift(),E="Q",I.push(g,m,f,x);break;case"t":g=f,m=x,_=h[h.length-1],_.command==="Q"&&(g=f+(f-_.points[0]),m=x+(x-_.points[1])),f+=A.shift(),x+=A.shift(),E="Q",I.push(g,m,f,x);break;case"A":v=A.shift(),S=A.shift(),M=A.shift(),w=A.shift(),L=A.shift(),P=f,N=x,f=A.shift(),x=A.shift(),E="A",I=this.convertEndpointToCenterParameterization(P,N,f,x,w,L,v,S,M);break;case"a":v=A.shift(),S=A.shift(),M=A.shift(),w=A.shift(),L=A.shift(),P=f,N=x,f+=A.shift(),x+=A.shift(),E="A",I=this.convertEndpointToCenterParameterization(P,N,f,x,w,L,v,S,M);break}h.push({command:E||T,points:I,start:{x:B,y:$},pathLength:this.calcLength(B,$,E||T,I)})}(T==="z"||T==="Z")&&h.push({command:"z",points:[],start:void 0,pathLength:0})}return h}static calcLength(a,o,c,l){let u,h,p,f;const x=hi;switch(c){case"L":return x.getLineLength(a,o,l[0],l[1]);case"C":return(0,i.getCubicArcLength)([a,l[0],l[2],l[4]],[o,l[1],l[3],l[5]],1);case"Q":return(0,i.getQuadraticArcLength)([a,l[0],l[2]],[o,l[1],l[3]],1);case"A":u=0;var y=l[4],d=l[5],_=l[4]+d,g=Math.PI/180;if(Math.abs(y-_)<g&&(g=Math.abs(y-_)),h=x.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],y,0),d<0)for(f=y-g;f>_;f-=g)p=x.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],f,0),u+=x.getLineLength(h.x,h.y,p.x,p.y),h=p;else for(f=y+g;f<_;f+=g)p=x.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],f,0),u+=x.getLineLength(h.x,h.y,p.x,p.y),h=p;return p=x.getPointOnEllipticalArc(l[0],l[1],l[2],l[3],_,0),u+=x.getLineLength(h.x,h.y,p.x,p.y),u}return 0}static convertEndpointToCenterParameterization(a,o,c,l,u,h,p,f,x){const y=x*(Math.PI/180),d=Math.cos(y)*(a-c)/2+Math.sin(y)*(o-l)/2,_=-1*Math.sin(y)*(a-c)/2+Math.cos(y)*(o-l)/2,g=d*d/(p*p)+_*_/(f*f);g>1&&(p*=Math.sqrt(g),f*=Math.sqrt(g));let m=Math.sqrt((p*p*(f*f)-p*p*(_*_)-f*f*(d*d))/(p*p*(_*_)+f*f*(d*d)));u===h&&(m*=-1),isNaN(m)&&(m=0);const v=m*p*_/f,S=m*-f*d/p,M=(a+c)/2+Math.cos(y)*v-Math.sin(y)*S,w=(o+l)/2+Math.sin(y)*v+Math.cos(y)*S,L=function(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])},P=function(A,E){return(A[0]*E[0]+A[1]*E[1])/(L(A)*L(E))},N=function(A,E){return(A[0]*E[1]<A[1]*E[0]?-1:1)*Math.acos(P(A,E))},k=N([1,0],[(d-v)/p,(_-S)/f]),D=[(d-v)/p,(_-S)/f],C=[(-1*d-v)/p,(-1*_-S)/f];let T=N(D,C);return P(D,C)<=-1&&(T=Math.PI),P(D,C)>=1&&(T=0),h===0&&T>0&&(T=T-2*Math.PI),h===1&&T<0&&(T=T+2*Math.PI),[M,w,p,f,k,T,y,h]}};return no.Path=r,r.prototype.className="Path",r.prototype._attrsAffectingSize=["data"],(0,e._registerNode)(r),n.Factory.addGetterSetter(r,"data"),no}var fy;function ZM(){if(fy)return eo;fy=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.Arrow=void 0;const n=jt(),t=Qv(),e=Xt(),i=Ut(),r=o1();let s=class extends t.Line{_sceneFunc(o){super._sceneFunc(o);const c=Math.PI*2,l=this.points();let u=l;const h=this.tension()!==0&&l.length>4;h&&(u=this.getTensionPoints());const p=this.pointerLength(),f=l.length;let x,y;if(h){const g=[u[u.length-4],u[u.length-3],u[u.length-2],u[u.length-1],l[f-2],l[f-1]],m=r.Path.calcLength(u[u.length-4],u[u.length-3],"C",g),v=r.Path.getPointOnQuadraticBezier(Math.min(1,1-p/m),g[0],g[1],g[2],g[3],g[4],g[5]);x=l[f-2]-v.x,y=l[f-1]-v.y}else x=l[f-2]-l[f-4],y=l[f-1]-l[f-3];const d=(Math.atan2(y,x)+c)%c,_=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(l[f-2],l[f-1]),o.rotate(d),o.moveTo(0,0),o.lineTo(-p,_/2),o.lineTo(-p,-_/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(l[0],l[1]),h?(x=(u[0]+u[2])/2-l[0],y=(u[1]+u[3])/2-l[1]):(x=l[2]-l[0],y=l[3]-l[1]),o.rotate((Math.atan2(-y,-x)+c)%c),o.moveTo(0,0),o.lineTo(-p,_/2),o.lineTo(-p,-_/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),c=this.pointerWidth()/2;return{x:o.x,y:o.y-c,width:o.width,height:o.height+c*2}}};return eo.Arrow=s,s.prototype.className="Arrow",(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"pointerLength",10,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerWidth",10,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(s,"pointerAtBeginning",!1),n.Factory.addGetterSetter(s,"pointerAtEnding",!0),eo}var ro={},py;function QM(){if(py)return ro;py=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.Circle=void 0;const n=jt(),t=$e(),e=Xt(),i=Ut();let r=class extends t.Shape{_sceneFunc(a){a.beginPath(),a.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius()!==a/2&&this.radius(a/2)}setHeight(a){this.radius()!==a/2&&this.radius(a/2)}};return ro.Circle=r,r.prototype._centroid=!0,r.prototype.className="Circle",r.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(r),n.Factory.addGetterSetter(r,"radius",0,(0,e.getNumberValidator)()),ro}var so={},gy;function JM(){if(gy)return so;gy=1,Object.defineProperty(so,"__esModule",{value:!0}),so.Ellipse=void 0;const n=jt(),t=$e(),e=Xt(),i=Ut();let r=class extends t.Shape{_sceneFunc(a){const o=this.radiusX(),c=this.radiusY();a.beginPath(),a.save(),o!==c&&a.scale(1,c/o),a.arc(0,0,o,0,Math.PI*2,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(a){this.radiusX(a/2)}setHeight(a){this.radiusY(a/2)}};return so.Ellipse=r,r.prototype.className="Ellipse",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i._registerNode)(r),n.Factory.addComponentsGetterSetter(r,"radius",["x","y"]),n.Factory.addGetterSetter(r,"radiusX",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(r,"radiusY",0,(0,e.getNumberValidator)()),so}var ao={},my;function tA(){if(my)return ao;my=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.Image=void 0;const n=Se(),t=jt(),e=$e(),i=Ut(),r=Xt();class s extends e.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",c=>{this._removeImageLoad(c.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),c=this.hasShadow();return o&&c?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const c=this.getWidth(),l=this.getHeight(),u=this.cornerRadius(),h=this.attrs.image;let p;if(h){const f=this.attrs.cropWidth,x=this.attrs.cropHeight;f&&x?p=[h,this.cropX(),this.cropY(),f,x,0,0,c,l]:p=[h,0,0,c,l]}(this.hasFill()||this.hasStroke()||u)&&(o.beginPath(),u?n.Util.drawRoundedRectPath(o,c,l,u):o.rect(0,0,c,l),o.closePath(),o.fillStrokeShape(this)),h&&(u&&o.clip(),o.drawImage.apply(o,p))}_hitFunc(o){const c=this.width(),l=this.height(),u=this.cornerRadius();o.beginPath(),u?n.Util.drawRoundedRectPath(o,c,l,u):o.rect(0,0,c,l),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,c;return(o=this.attrs.width)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var o,c;return(o=this.attrs.height)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(o,c,l=null){const u=n.Util.createImageElement();u.onload=function(){const h=new s({image:u});c(h)},u.onerror=l,u.crossOrigin="Anonymous",u.src=o}}return ao.Image=s,s.prototype.className="Image",(0,i._registerNode)(s),t.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(s,"image"),t.Factory.addComponentsGetterSetter(s,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(s,"cropX",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropY",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropWidth",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(s,"cropHeight",0,(0,r.getNumberValidator)()),ao}var Or={},yy;function eA(){if(yy)return Or;yy=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.Tag=Or.Label=void 0;const n=jt(),t=$e(),e=s1(),i=Xt(),r=Ut(),s=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],a="Change.konva",o="none",c="up",l="right",u="down",h="left",p=s.length;class f extends e.Group{constructor(d){super(d),this.on("add.konva",function(_){this._addListeners(_.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(d){let _=this,g;const m=function(){_._sync()};for(g=0;g<p;g++)d.on(s[g]+a,m)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let d=this.getText(),_=this.getTag(),g,m,v,S,M,w,L;if(d&&_){switch(g=d.width(),m=d.height(),v=_.pointerDirection(),S=_.pointerWidth(),L=_.pointerHeight(),M=0,w=0,v){case c:M=g/2,w=-1*L;break;case l:M=g+S,w=m/2;break;case u:M=g/2,w=m+L;break;case h:M=-1*S,w=m/2;break}_.setAttrs({x:-1*M,y:-1*w,width:g,height:m}),d.setAttrs({x:-1*M,y:-1*w})}}}Or.Label=f,f.prototype.className="Label",(0,r._registerNode)(f);class x extends t.Shape{_sceneFunc(d){const _=this.width(),g=this.height(),m=this.pointerDirection(),v=this.pointerWidth(),S=this.pointerHeight(),M=this.cornerRadius();let w=0,L=0,P=0,N=0;typeof M=="number"?w=L=P=N=Math.min(M,_/2,g/2):(w=Math.min(M[0]||0,_/2,g/2),L=Math.min(M[1]||0,_/2,g/2),N=Math.min(M[2]||0,_/2,g/2),P=Math.min(M[3]||0,_/2,g/2)),d.beginPath(),d.moveTo(w,0),m===c&&(d.lineTo((_-v)/2,0),d.lineTo(_/2,-1*S),d.lineTo((_+v)/2,0)),d.lineTo(_-L,0),d.arc(_-L,L,L,Math.PI*3/2,0,!1),m===l&&(d.lineTo(_,(g-S)/2),d.lineTo(_+v,g/2),d.lineTo(_,(g+S)/2)),d.lineTo(_,g-N),d.arc(_-N,g-N,N,0,Math.PI/2,!1),m===u&&(d.lineTo((_+v)/2,g),d.lineTo(_/2,g+S),d.lineTo((_-v)/2,g)),d.lineTo(P,g),d.arc(P,g-P,P,Math.PI/2,Math.PI,!1),m===h&&(d.lineTo(0,(g+S)/2),d.lineTo(-1*v,g/2),d.lineTo(0,(g-S)/2)),d.lineTo(0,w),d.arc(w,w,w,Math.PI,Math.PI*3/2,!1),d.closePath(),d.fillStrokeShape(this)}getSelfRect(){let d=0,_=0,g=this.pointerWidth(),m=this.pointerHeight(),v=this.pointerDirection(),S=this.width(),M=this.height();return v===c?(_-=m,M+=m):v===u?M+=m:v===h?(d-=g*1.5,S+=g):v===l&&(S+=g*1.5),{x:d,y:_,width:S,height:M}}}return Or.Tag=x,x.prototype.className="Tag",(0,r._registerNode)(x),n.Factory.addGetterSetter(x,"pointerDirection",o),n.Factory.addGetterSetter(x,"pointerWidth",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(x,"pointerHeight",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(x,"cornerRadius",0,(0,i.getNumberOrArrayOfNumbersValidator)(4)),Or}var oo={},vy;function Jv(){if(vy)return oo;vy=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.Rect=void 0;const n=jt(),t=$e(),e=Ut(),i=Se(),r=Xt();let s=class extends t.Shape{_sceneFunc(o){const c=this.cornerRadius(),l=this.width(),u=this.height();o.beginPath(),c?i.Util.drawRoundedRectPath(o,l,u,c):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}};return oo.Rect=s,s.prototype.className="Rect",(0,e._registerNode)(s),n.Factory.addGetterSetter(s,"cornerRadius",0,(0,r.getNumberOrArrayOfNumbersValidator)(4)),oo}var lo={},xy;function iA(){if(xy)return lo;xy=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.RegularPolygon=void 0;const n=jt(),t=$e(),e=Xt(),i=Ut();let r=class extends t.Shape{_sceneFunc(a){const o=this._getPoints();a.beginPath(),a.moveTo(o[0].x,o[0].y);for(let c=1;c<o.length;c++)a.lineTo(o[c].x,o[c].y);a.closePath(),a.fillStrokeShape(this)}_getPoints(){const a=this.attrs.sides,o=this.attrs.radius||0,c=[];for(let l=0;l<a;l++)c.push({x:o*Math.sin(l*2*Math.PI/a),y:-1*o*Math.cos(l*2*Math.PI/a)});return c}getSelfRect(){const a=this._getPoints();let o=a[0].x,c=a[0].y,l=a[0].x,u=a[0].y;return a.forEach(h=>{o=Math.min(o,h.x),c=Math.max(c,h.x),l=Math.min(l,h.y),u=Math.max(u,h.y)}),{x:o,y:l,width:c-o,height:u-l}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(a){this.radius(a/2)}setHeight(a){this.radius(a/2)}};return lo.RegularPolygon=r,r.prototype.className="RegularPolygon",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["radius"],(0,i._registerNode)(r),n.Factory.addGetterSetter(r,"radius",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(r,"sides",0,(0,e.getNumberValidator)()),lo}var co={},_y;function nA(){if(_y)return co;_y=1,Object.defineProperty(co,"__esModule",{value:!0}),co.Ring=void 0;const n=jt(),t=$e(),e=Xt(),i=Ut(),r=Math.PI*2;let s=class extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,r,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),r,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}};return co.Ring=s,s.prototype.className="Ring",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(s),n.Factory.addGetterSetter(s,"innerRadius",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(s,"outerRadius",0,(0,e.getNumberValidator)()),co}var uo={},by;function rA(){if(by)return uo;by=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.Sprite=void 0;const n=jt(),t=$e(),e=a1(),i=Xt(),r=Ut();let s=class extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new e.Animation(()=>{const c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const c=this.animation(),l=this.frameIndex(),u=l*4,h=this.animations()[c],p=this.frameOffsets(),f=h[u+0],x=h[u+1],y=h[u+2],d=h[u+3],_=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,d),o.closePath(),o.fillStrokeShape(this)),_)if(p){const g=p[c],m=l*2;o.drawImage(_,f,x,y,d,g[m+0],g[m+1],y,d)}else o.drawImage(_,f,x,y,d,0,0,y,d)}_hitFunc(o){const c=this.animation(),l=this.frameIndex(),u=l*4,h=this.animations()[c],p=this.frameOffsets(),f=h[u+2],x=h[u+3];if(o.beginPath(),p){const y=p[c],d=l*2;o.rect(y[d+0],y[d+1],f,x)}else o.rect(0,0,f,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),c=this.animation(),l=this.animations(),u=l[c],h=u.length/4;o<h-1?this.frameIndex(o+1):this.frameIndex(0)}};return uo.Sprite=s,s.prototype.className="Sprite",(0,r._registerNode)(s),n.Factory.addGetterSetter(s,"animation"),n.Factory.addGetterSetter(s,"animations"),n.Factory.addGetterSetter(s,"frameOffsets"),n.Factory.addGetterSetter(s,"image"),n.Factory.addGetterSetter(s,"frameIndex",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"frameRate",17,(0,i.getNumberValidator)()),n.Factory.backCompat(s,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),uo}var ho={},wy;function sA(){if(wy)return ho;wy=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.Star=void 0;const n=jt(),t=$e(),e=Xt(),i=Ut();let r=class extends t.Shape{_sceneFunc(a){const o=this.innerRadius(),c=this.outerRadius(),l=this.numPoints();a.beginPath(),a.moveTo(0,0-c);for(let u=1;u<l*2;u++){const h=u%2===0?c:o,p=h*Math.sin(u*Math.PI/l),f=-1*h*Math.cos(u*Math.PI/l);a.lineTo(p,f)}a.closePath(),a.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(a){this.outerRadius(a/2)}setHeight(a){this.outerRadius(a/2)}};return ho.Star=r,r.prototype.className="Star",r.prototype._centroid=!0,r.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i._registerNode)(r),n.Factory.addGetterSetter(r,"numPoints",5,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(r,"innerRadius",0,(0,e.getNumberValidator)()),n.Factory.addGetterSetter(r,"outerRadius",0,(0,e.getNumberValidator)()),ho}var Ls={},Cy;function t4(){if(Cy)return Ls;Cy=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.Text=void 0,Ls.stringToArray=a;const n=Se(),t=jt(),e=$e(),i=Ut(),r=Xt(),s=Ut();function a(G){return[...G].reduce((F,U,j,et)=>{if(new RegExp("\\p{Emoji}","u").test(U)){const V=et[j+1];V&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(V)?(F.push(U+V),et[j+1]=""):F.push(U)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(U+(et[j+1]||""))?F.push(U+et[j+1]):j>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(U)?F[F.length-1]+=U:U&&F.push(U);return F},[])}const o="auto",c="center",l="inherit",u="justify",h="Change.konva",p="2d",f="-",x="left",y="text",d="Text",_="top",g="bottom",m="middle",v="normal",S="px ",M=" ",w="right",L="rtl",P="word",N="char",k="none",D="…",C=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],T=C.length;function A(G){return G.split(",").map(F=>{F=F.trim();const U=F.indexOf(" ")>=0,j=F.indexOf('"')>=0||F.indexOf("'")>=0;return U&&!j&&(F=`"${F}"`),F}).join(", ")}let E;function I(){return E||(E=n.Util.createCanvasElement().getContext(p),E)}function B(G){G.fillText(this._partialText,this._partialTextX,this._partialTextY)}function $(G){G.setAttr("miterLimit",2),G.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Y(G){return G=G||{},!G.fillLinearGradientColorStops&&!G.fillRadialGradientColorStops&&!G.fillPatternImage&&(G.fill=G.fill||"black"),G}let q=class extends e.Shape{constructor(F){super(Y(F)),this._partialTextX=0,this._partialTextY=0;for(let U=0;U<T;U++)this.on(C[U]+h,this._setTextData);this._setTextData()}_sceneFunc(F){const U=this.textArr,j=U.length;if(!this.text())return;let et=this.padding(),V=this.fontSize(),tt=this.lineHeight()*V,z=this.verticalAlign(),H=this.direction(),X=0,K=this.align(),rt=this.getWidth(),nt=this.letterSpacing(),Q=this.fill(),it=this.textDecoration(),at=it.indexOf("underline")!==-1,ut=it.indexOf("line-through")!==-1,ft;H=H===l?F.direction:H;let dt=tt/2,xt=m;if(i.Konva._fixTextRendering){const kt=this.measureSize("M");xt="alphabetic",dt=(kt.fontBoundingBoxAscent-kt.fontBoundingBoxDescent)/2+tt/2}var vt=0,_t=0;for(H===L&&F.setAttr("direction",H),F.setAttr("font",this._getContextFont()),F.setAttr("textBaseline",xt),F.setAttr("textAlign",x),z===m?X=(this.getHeight()-j*tt-et*2)/2:z===g&&(X=this.getHeight()-j*tt-et*2),F.translate(et,X+et),ft=0;ft<j;ft++){var vt=0,_t=0,yt=U[ft],mt=yt.text,pt=yt.width,bt=yt.lastInParagraph,Mt,Pt;if(F.save(),K===w?vt+=rt-pt-et*2:K===c&&(vt+=(rt-pt-et*2)/2),at){F.save(),F.beginPath();const Dt=i.Konva._fixTextRendering?Math.round(V/4):Math.round(V/2),Gt=vt,Vt=dt+_t+Dt;F.moveTo(Gt,Vt),Mt=mt.split(" ").length-1,Pt=K===u&&!bt?rt-et*2:pt,F.lineTo(Gt+Math.round(Pt),Vt),F.lineWidth=V/15;const fe=this._getLinearGradient();F.strokeStyle=fe||Q,F.stroke(),F.restore()}if(ut){F.save(),F.beginPath();const Dt=i.Konva._fixTextRendering?-Math.round(V/4):0;F.moveTo(vt,dt+_t+Dt),Mt=mt.split(" ").length-1,Pt=K===u&&!bt?rt-et*2:pt,F.lineTo(vt+Math.round(Pt),dt+_t+Dt),F.lineWidth=V/15;const Gt=this._getLinearGradient();F.strokeStyle=Gt||Q,F.stroke(),F.restore()}if(H!==L&&(nt!==0||K===u)){Mt=mt.split(" ").length-1;const Dt=a(mt);for(let Gt=0;Gt<Dt.length;Gt++){const Vt=Dt[Gt];Vt===" "&&!bt&&K===u&&(vt+=(rt-et*2-pt)/Mt),this._partialTextX=vt,this._partialTextY=dt+_t,this._partialText=Vt,F.fillStrokeShape(this),vt+=this.measureSize(Vt).width+nt}}else nt!==0&&F.setAttr("letterSpacing",`${nt}px`),this._partialTextX=vt,this._partialTextY=dt+_t,this._partialText=mt,F.fillStrokeShape(this);F.restore(),j>1&&(dt+=tt)}}_hitFunc(F){const U=this.getWidth(),j=this.getHeight();F.beginPath(),F.rect(0,0,U,j),F.closePath(),F.fillStrokeShape(this)}setText(F){const U=n.Util._isString(F)?F:F==null?"":F+"";return this._setAttr(y,U),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(F){var U,j,et,V,tt,z,H,X,K,rt,nt;let Q=I(),it=this.fontSize(),at;Q.save(),Q.font=this._getContextFont(),at=Q.measureText(F),Q.restore();const ut=it/100;return{actualBoundingBoxAscent:(U=at.actualBoundingBoxAscent)!==null&&U!==void 0?U:71.58203125*ut,actualBoundingBoxDescent:(j=at.actualBoundingBoxDescent)!==null&&j!==void 0?j:0,actualBoundingBoxLeft:(et=at.actualBoundingBoxLeft)!==null&&et!==void 0?et:-7.421875*ut,actualBoundingBoxRight:(V=at.actualBoundingBoxRight)!==null&&V!==void 0?V:75.732421875*ut,alphabeticBaseline:(tt=at.alphabeticBaseline)!==null&&tt!==void 0?tt:0,emHeightAscent:(z=at.emHeightAscent)!==null&&z!==void 0?z:100*ut,emHeightDescent:(H=at.emHeightDescent)!==null&&H!==void 0?H:-20*ut,fontBoundingBoxAscent:(X=at.fontBoundingBoxAscent)!==null&&X!==void 0?X:91*ut,fontBoundingBoxDescent:(K=at.fontBoundingBoxDescent)!==null&&K!==void 0?K:21*ut,hangingBaseline:(rt=at.hangingBaseline)!==null&&rt!==void 0?rt:72.80000305175781*ut,ideographicBaseline:(nt=at.ideographicBaseline)!==null&&nt!==void 0?nt:-21*ut,width:at.width,height:it}}_getContextFont(){return this.fontStyle()+M+this.fontVariant()+M+(this.fontSize()+S)+A(this.fontFamily())}_addTextLine(F){this.align()===u&&(F=F.trim());const j=this._getTextWidth(F);return this.textArr.push({text:F,width:j,lastInParagraph:!1})}_getTextWidth(F){const U=this.letterSpacing(),j=F.length;return I().measureText(F).width+U*j}_setTextData(){let F=this.text().split(`
`),U=+this.fontSize(),j=0,et=this.lineHeight()*U,V=this.attrs.width,tt=this.attrs.height,z=V!==o&&V!==void 0,H=tt!==o&&tt!==void 0,X=this.padding(),K=V-X*2,rt=tt-X*2,nt=0,Q=this.wrap(),it=Q!==k,at=Q!==N&&it,ut=this.ellipsis();this.textArr=[],I().font=this._getContextFont();const ft=ut?this._getTextWidth(D):0;for(let dt=0,xt=F.length;dt<xt;++dt){let vt=F[dt],_t=this._getTextWidth(vt);if(z&&_t>K)for(;vt.length>0;){let yt=0,mt=a(vt).length,pt="",bt=0;for(;yt<mt;){const Mt=yt+mt>>>1,Pt=a(vt),kt=Pt.slice(0,Mt+1).join(""),Ft=this._getTextWidth(kt);(ut&&H&&nt+et>rt?Ft+ft:Ft)<=K?(yt=Mt+1,pt=kt,bt=Ft):mt=Mt}if(pt){if(at){const kt=a(vt),Ft=a(pt),Dt=kt[Ft.length],Gt=Dt===M||Dt===f;let Vt;if(Gt&&bt<=K)Vt=Ft.length;else{const fe=Ft.lastIndexOf(M),zt=Ft.lastIndexOf(f);Vt=Math.max(fe,zt)+1}Vt>0&&(yt=Vt,pt=kt.slice(0,yt).join(""),bt=this._getTextWidth(pt))}if(pt=pt.trimRight(),this._addTextLine(pt),j=Math.max(j,bt),nt+=et,this._shouldHandleEllipsis(nt)){this._tryToAddEllipsisToLastLine();break}if(vt=a(vt).slice(yt).join("").trimLeft(),vt.length>0&&(_t=this._getTextWidth(vt),_t<=K)){this._addTextLine(vt),nt+=et,j=Math.max(j,_t);break}}else break}else this._addTextLine(vt),nt+=et,j=Math.max(j,_t),this._shouldHandleEllipsis(nt)&&dt<xt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),H&&nt+et>rt)break}this.textHeight=U,this.textWidth=j}_shouldHandleEllipsis(F){const U=+this.fontSize(),j=this.lineHeight()*U,et=this.attrs.height,V=et!==o&&et!==void 0,tt=this.padding(),z=et-tt*2;return!(this.wrap()!==k)||V&&F+j>z}_tryToAddEllipsisToLastLine(){const F=this.attrs.width,U=F!==o&&F!==void 0,j=this.padding(),et=F-j*2,V=this.ellipsis(),tt=this.textArr[this.textArr.length-1];!tt||!V||(U&&(this._getTextWidth(tt.text+D)<et||(tt.text=tt.text.slice(0,tt.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(tt.text+D))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const F=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,U=this.hasShadow();return F&&U?!0:super._useBufferCanvas()}};return Ls.Text=q,q.prototype._fillFunc=B,q.prototype._strokeFunc=$,q.prototype.className=d,q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,s._registerNode)(q),t.Factory.overWriteSetter(q,"width",(0,r.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(q,"height",(0,r.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(q,"direction",l),t.Factory.addGetterSetter(q,"fontFamily","Arial"),t.Factory.addGetterSetter(q,"fontSize",12,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"fontStyle",v),t.Factory.addGetterSetter(q,"fontVariant",v),t.Factory.addGetterSetter(q,"padding",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"align",x),t.Factory.addGetterSetter(q,"verticalAlign",_),t.Factory.addGetterSetter(q,"lineHeight",1,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"wrap",P),t.Factory.addGetterSetter(q,"ellipsis",!1,(0,r.getBooleanValidator)()),t.Factory.addGetterSetter(q,"letterSpacing",0,(0,r.getNumberValidator)()),t.Factory.addGetterSetter(q,"text","",(0,r.getStringValidator)()),t.Factory.addGetterSetter(q,"textDecoration",""),Ls}var fo={},Sy;function aA(){if(Sy)return fo;Sy=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.TextPath=void 0;const n=Se(),t=jt(),e=$e(),i=o1(),r=t4(),s=Xt(),a=Ut(),o="",c="normal";function l(p){p.fillText(this.partialText,0,0)}function u(p){p.strokeText(this.partialText,0,0)}let h=class extends e.Shape{constructor(f){super(f),this.dummyCanvas=n.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return i.Path.getPathLength(this.dataArray)}_getPointAtLength(f){if(!this.attrs.data)return null;const x=this.pathLength;return f-1>x?null:i.Path.getPointAtLengthOfDataArray(f,this.dataArray)}_readDataAttribute(){this.dataArray=i.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(f){f.setAttr("font",this._getContextFont()),f.setAttr("textBaseline",this.textBaseline()),f.setAttr("textAlign","left"),f.save();const x=this.textDecoration(),y=this.fill(),d=this.fontSize(),_=this.glyphInfo;x==="underline"&&f.beginPath();for(let g=0;g<_.length;g++){f.save();const m=_[g].p0;f.translate(m.x,m.y),f.rotate(_[g].rotation),this.partialText=_[g].text,f.fillStrokeShape(this),x==="underline"&&(g===0&&f.moveTo(0,d/2+1),f.lineTo(d,d/2+1)),f.restore()}x==="underline"&&(f.strokeStyle=y,f.lineWidth=d/20,f.stroke()),f.restore()}_hitFunc(f){f.beginPath();const x=this.glyphInfo;if(x.length>=1){const y=x[0].p0;f.moveTo(y.x,y.y)}for(let y=0;y<x.length;y++){const d=x[y].p1;f.lineTo(d.x,d.y)}f.setAttr("lineWidth",this.fontSize()),f.setAttr("strokeStyle",this.colorKey),f.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return n.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(f){return r.Text.prototype.setText.call(this,f)}_getContextFont(){return r.Text.prototype._getContextFont.call(this)}_getTextSize(f){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const d=y.measureText(f);return y.restore(),{width:d.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:f,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=f,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),d=this.align(),_=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let m=0;d==="center"&&(m=Math.max(0,this.pathLength/2-g/2)),d==="right"&&(m=Math.max(0,this.pathLength-g));const v=(0,r.stringToArray)(this.text());let S=m;for(let M=0;M<v.length;M++){const w=this._getPointAtLength(S);if(!w)return;let L=this._getTextSize(v[M]).width+y;if(v[M]===" "&&d==="justify"){const T=this.text().split(" ").length-1;L+=(this.pathLength-g)/T}const P=this._getPointAtLength(S+L);if(!P)return;const N=i.Path.getLineLength(w.x,w.y,P.x,P.y);let k=0;if(_)try{k=_(v[M-1],v[M])*this.fontSize()}catch{k=0}w.x+=k,P.x+=k,this.textWidth+=k;const D=i.Path.getPointOnLine(k+N/2,w.x,w.y,P.x,P.y),C=Math.atan2(P.y-w.y,P.x-w.x);this.glyphInfo.push({transposeX:D.x,transposeY:D.y,text:v[M],rotation:C,p0:w,p1:P}),S+=L}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const f=[];this.glyphInfo.forEach(function(S){f.push(S.p0.x),f.push(S.p0.y),f.push(S.p1.x),f.push(S.p1.y)});let x=f[0]||0,y=f[0]||0,d=f[1]||0,_=f[1]||0,g,m;for(let S=0;S<f.length/2;S++)g=f[S*2],m=f[S*2+1],x=Math.min(x,g),y=Math.max(y,g),d=Math.min(d,m),_=Math.max(_,m);const v=this.fontSize();return{x:x-v/2,y:d-v/2,width:y-x+v,height:_-d+v}}destroy(){return n.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return fo.TextPath=h,h.prototype._fillFunc=l,h.prototype._strokeFunc=u,h.prototype._fillFuncHit=l,h.prototype._strokeFuncHit=u,h.prototype.className="TextPath",h.prototype._attrsAffectingSize=["text","fontSize","data"],(0,a._registerNode)(h),t.Factory.addGetterSetter(h,"data"),t.Factory.addGetterSetter(h,"fontFamily","Arial"),t.Factory.addGetterSetter(h,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(h,"fontStyle",c),t.Factory.addGetterSetter(h,"align","left"),t.Factory.addGetterSetter(h,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(h,"textBaseline","middle"),t.Factory.addGetterSetter(h,"fontVariant",c),t.Factory.addGetterSetter(h,"text",o),t.Factory.addGetterSetter(h,"textDecoration",""),t.Factory.addGetterSetter(h,"kerningFunc",void 0),fo}var po={},Ty;function oA(){if(Ty)return po;Ty=1,Object.defineProperty(po,"__esModule",{value:!0}),po.Transformer=void 0;const n=Se(),t=jt(),e=Pe(),i=$e(),r=Jv(),s=s1(),a=Ut(),o=Xt(),c=Ut(),l="tr-konva",u=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(L=>L+`.${l}`).join(" "),h="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in a.Konva._global;function y(L,P,N){if(L==="rotater")return N;P+=n.Util.degToRad(f[L]||0);const k=(n.Util.radToDeg(P)%360+360)%360;return n.Util._inRange(k,315+22.5,360)||n.Util._inRange(k,0,22.5)?"ns-resize":n.Util._inRange(k,45-22.5,45+22.5)?"nesw-resize":n.Util._inRange(k,90-22.5,90+22.5)?"ew-resize":n.Util._inRange(k,135-22.5,135+22.5)?"nwse-resize":n.Util._inRange(k,180-22.5,180+22.5)?"ns-resize":n.Util._inRange(k,225-22.5,225+22.5)?"nesw-resize":n.Util._inRange(k,270-22.5,270+22.5)?"ew-resize":n.Util._inRange(k,315-22.5,315+22.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+k),"pointer")}const d=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function _(L){return{x:L.x+L.width/2*Math.cos(L.rotation)+L.height/2*Math.sin(-L.rotation),y:L.y+L.height/2*Math.cos(L.rotation)+L.width/2*Math.sin(L.rotation)}}function g(L,P,N){const k=N.x+(L.x-N.x)*Math.cos(P)-(L.y-N.y)*Math.sin(P),D=N.y+(L.x-N.x)*Math.sin(P)+(L.y-N.y)*Math.cos(P);return{...L,rotation:L.rotation+P,x:k,y:D}}function m(L,P){const N=_(L);return g(L,P,N)}function v(L,P,N){let k=P;for(let D=0;D<L.length;D++){const C=a.Konva.getAngle(L[D]),T=Math.abs(C-P)%(Math.PI*2);Math.min(T,Math.PI*2-T)<N&&(k=C)}return k}let S=0,M=class extends s.Group{constructor(P){super(P),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(u,this.update),this.getNode()&&this.update()}attachTo(P){return this.setNode(P),this}setNode(P){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([P])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return l+this._id}setNodes(P=[]){this._nodes&&this._nodes.length&&this.detach();const N=P.filter(D=>D.isAncestorOf(this)?(n.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=P=N,P.length===1&&this.useSingleNodeRotation()?this.rotation(P[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(D=>{const C=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(D._attrsAffectingSize.length){const T=D._attrsAffectingSize.map(A=>A+"Change."+this._getEventNamespace()).join(" ");D.on(T,C)}D.on(p.map(T=>T+`.${this._getEventNamespace()}`).join(" "),C),D.on(`absoluteTransformChange.${this._getEventNamespace()}`,C),this._proxyDrag(D)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(P){let N;P.on(`dragstart.${this._getEventNamespace()}`,k=>{N=P.getAbsolutePosition(),!this.isDragging()&&P!==this.findOne(".back")&&this.startDrag(k,!1)}),P.on(`dragmove.${this._getEventNamespace()}`,k=>{if(!N)return;const D=P.getAbsolutePosition(),C=D.x-N.x,T=D.y-N.y;this.nodes().forEach(A=>{if(A===P||A.isDragging())return;const E=A.getAbsolutePosition();A.setAbsolutePosition({x:E.x+C,y:E.y+T}),A.startDrag(k)}),N=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(P=>{P.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(h),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(h,this.__getNodeRect)}__getNodeShape(P,N=this.rotation(),k){const D=P.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),C=P.getAbsoluteScale(k),T=P.getAbsolutePosition(k),A=D.x*C.x-P.offsetX()*C.x,E=D.y*C.y-P.offsetY()*C.y,I=(a.Konva.getAngle(P.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),B={x:T.x+A*Math.cos(I)+E*Math.sin(-I),y:T.y+E*Math.cos(I)+A*Math.sin(I),width:D.width*C.x,height:D.height*C.y,rotation:I};return g(B,-a.Konva.getAngle(N),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const N=[];this.nodes().map(I=>{const B=I.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),$=[{x:B.x,y:B.y},{x:B.x+B.width,y:B.y},{x:B.x+B.width,y:B.y+B.height},{x:B.x,y:B.y+B.height}],Y=I.getAbsoluteTransform();$.forEach(function(q){const G=Y.point(q);N.push(G)})});const k=new n.Transform;k.rotate(-a.Konva.getAngle(this.rotation()));let D=1/0,C=1/0,T=-1/0,A=-1/0;N.forEach(function(I){const B=k.point(I);D===void 0&&(D=T=B.x,C=A=B.y),D=Math.min(D,B.x),C=Math.min(C,B.y),T=Math.max(T,B.x),A=Math.max(A,B.y)}),k.invert();const E=k.point({x:D,y:C});return{x:E.x,y:E.y,width:T-D,height:A-C,rotation:a.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),d.forEach(P=>{this._createAnchor(P)}),this._createAnchor("rotater")}_createAnchor(P){const N=new r.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:P+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),k=this;N.on("mousedown touchstart",function(D){k._handleMouseDown(D)}),N.on("dragstart",D=>{N.stopDrag(),D.cancelBubble=!0}),N.on("dragend",D=>{D.cancelBubble=!0}),N.on("mouseenter",()=>{const D=a.Konva.getAngle(this.rotation()),C=this.rotateAnchorCursor(),T=y(P,D,C);N.getStage().content&&(N.getStage().content.style.cursor=T),this._cursorChange=!0}),N.on("mouseout",()=>{N.getStage().content&&(N.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(N)}_createBack(){const P=new i.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(N,k){const D=k.getParent(),C=D.padding();N.beginPath(),N.rect(-C,-C,k.width()+C*2,k.height()+C*2),N.moveTo(k.width()/2,-C),D.rotateEnabled()&&D.rotateLineVisible()&&N.lineTo(k.width()/2,-D.rotateAnchorOffset()*n.Util._sign(k.height())-C),N.fillStrokeShape(k)},hitFunc:(N,k)=>{if(!this.shouldOverdrawWholeArea())return;const D=this.padding();N.beginPath(),N.rect(-D,-D,k.width()+D*2,k.height()+D*2),N.fillStrokeShape(k)}});this.add(P),this._proxyDrag(P),P.on("dragstart",N=>{N.cancelBubble=!0}),P.on("dragmove",N=>{N.cancelBubble=!0}),P.on("dragend",N=>{N.cancelBubble=!0}),this.on("dragmove",N=>{this.update()})}_handleMouseDown(P){if(this._transforming)return;this._movingAnchorName=P.target.name().split(" ")[0];const N=this._getNodeRect(),k=N.width,D=N.height,C=Math.sqrt(Math.pow(k,2)+Math.pow(D,2));this.sin=Math.abs(D/C),this.cos=Math.abs(k/C),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const T=P.target.getAbsolutePosition(),A=P.target.getStage().getPointerPosition();this._anchorDragOffset={x:A.x-T.x,y:A.y-T.y},S++,this._fire("transformstart",{evt:P.evt,target:this.getNode()}),this._nodes.forEach(E=>{E._fire("transformstart",{evt:P.evt,target:E})})}_handleMouseMove(P){let N,k,D;const C=this.findOne("."+this._movingAnchorName),T=C.getStage();T.setPointersPositions(P);const A=T.getPointerPosition();let E={x:A.x-this._anchorDragOffset.x,y:A.y-this._anchorDragOffset.y};const I=C.getAbsolutePosition();this.anchorDragBoundFunc()&&(E=this.anchorDragBoundFunc()(I,E,P)),C.setAbsolutePosition(E);const B=C.getAbsolutePosition();if(I.x===B.x&&I.y===B.y)return;if(this._movingAnchorName==="rotater"){const z=this._getNodeRect();N=C.x()-z.width/2,k=-C.y()+z.height/2;let H=Math.atan2(-k,N)+Math.PI/2;z.height<0&&(H-=Math.PI);const K=a.Konva.getAngle(this.rotation())+H,rt=a.Konva.getAngle(this.rotationSnapTolerance()),Q=v(this.rotationSnaps(),K,rt)-z.rotation,it=m(z,Q);this._fitNodesInto(it,P);return}const $=this.shiftBehavior();let Y;$==="inverted"?Y=this.keepRatio()&&!P.shiftKey:$==="none"?Y=this.keepRatio():Y=this.keepRatio()||P.shiftKey;var j=this.centeredScaling()||P.altKey;if(this._movingAnchorName==="top-left"){if(Y){var q=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};D=Math.sqrt(Math.pow(q.x-C.x(),2)+Math.pow(q.y-C.y(),2));var G=this.findOne(".top-left").x()>q.x?-1:1,F=this.findOne(".top-left").y()>q.y?-1:1;N=D*this.cos*G,k=D*this.sin*F,this.findOne(".top-left").x(q.x-N),this.findOne(".top-left").y(q.y-k)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(C.y());else if(this._movingAnchorName==="top-right"){if(Y){var q=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};D=Math.sqrt(Math.pow(C.x()-q.x,2)+Math.pow(q.y-C.y(),2));var G=this.findOne(".top-right").x()<q.x?-1:1,F=this.findOne(".top-right").y()>q.y?-1:1;N=D*this.cos*G,k=D*this.sin*F,this.findOne(".top-right").x(q.x+N),this.findOne(".top-right").y(q.y-k)}var U=C.position();this.findOne(".top-left").y(U.y),this.findOne(".bottom-right").x(U.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(C.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(C.x());else if(this._movingAnchorName==="bottom-left"){if(Y){var q=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};D=Math.sqrt(Math.pow(q.x-C.x(),2)+Math.pow(C.y()-q.y,2));var G=q.x<C.x()?-1:1,F=C.y()<q.y?-1:1;N=D*this.cos*G,k=D*this.sin*F,C.x(q.x-N),C.y(q.y+k)}U=C.position(),this.findOne(".top-left").x(U.x),this.findOne(".bottom-right").y(U.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(C.y());else if(this._movingAnchorName==="bottom-right"){if(Y){var q=j?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};D=Math.sqrt(Math.pow(C.x()-q.x,2)+Math.pow(C.y()-q.y,2));var G=this.findOne(".bottom-right").x()<q.x?-1:1,F=this.findOne(".bottom-right").y()<q.y?-1:1;N=D*this.cos*G,k=D*this.sin*F,this.findOne(".bottom-right").x(q.x+N),this.findOne(".bottom-right").y(q.y+k)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var j=this.centeredScaling()||P.altKey;if(j){const z=this.findOne(".top-left"),H=this.findOne(".bottom-right"),X=z.x(),K=z.y(),rt=this.getWidth()-H.x(),nt=this.getHeight()-H.y();H.move({x:-X,y:-K}),z.move({x:rt,y:nt})}const et=this.findOne(".top-left").getAbsolutePosition();N=et.x,k=et.y;const V=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),tt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:N,y:k,width:V,height:tt,rotation:a.Konva.getAngle(this.rotation())},P)}_handleMouseUp(P){this._removeEvents(P)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(P){var N;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const k=this.getNode();S--,this._fire("transformend",{evt:P,target:k}),(N=this.getLayer())===null||N===void 0||N.batchDraw(),k&&this._nodes.forEach(D=>{var C;D._fire("transformend",{evt:P,target:D}),(C=D.getLayer())===null||C===void 0||C.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(P,N){const k=this._getNodeRect(),D=1;if(n.Util._inRange(P.width,-this.padding()*2-D,D)){this.update();return}if(n.Util._inRange(P.height,-this.padding()*2-D,D)){this.update();return}const C=new n.Transform;if(C.rotate(a.Konva.getAngle(this.rotation())),this._movingAnchorName&&P.width<0&&this._movingAnchorName.indexOf("left")>=0){const Y=C.point({x:-this.padding()*2,y:0});P.x+=Y.x,P.y+=Y.y,P.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y}else if(this._movingAnchorName&&P.width<0&&this._movingAnchorName.indexOf("right")>=0){const Y=C.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y,P.width+=this.padding()*2}if(this._movingAnchorName&&P.height<0&&this._movingAnchorName.indexOf("top")>=0){const Y=C.point({x:0,y:-this.padding()*2});P.x+=Y.x,P.y+=Y.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y,P.height+=this.padding()*2}else if(this._movingAnchorName&&P.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const Y=C.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=Y.x,this._anchorDragOffset.y-=Y.y,P.height+=this.padding()*2}if(this.boundBoxFunc()){const Y=this.boundBoxFunc()(k,P);Y?P=Y:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const T=1e7,A=new n.Transform;A.translate(k.x,k.y),A.rotate(k.rotation),A.scale(k.width/T,k.height/T);const E=new n.Transform,I=P.width/T,B=P.height/T;this.flipEnabled()===!1?(E.translate(P.x,P.y),E.rotate(P.rotation),E.translate(P.width<0?P.width:0,P.height<0?P.height:0),E.scale(Math.abs(I),Math.abs(B))):(E.translate(P.x,P.y),E.rotate(P.rotation),E.scale(I,B));const $=E.multiply(A.invert());this._nodes.forEach(Y=>{var q;const G=Y.getParent().getAbsoluteTransform(),F=Y.getTransform().copy();F.translate(Y.offsetX(),Y.offsetY());const U=new n.Transform;U.multiply(G.copy().invert()).multiply($).multiply(G).multiply(F);const j=U.decompose();Y.setAttrs(j),(q=Y.getLayer())===null||q===void 0||q.batchDraw()}),this.rotation(n.Util._getRotation(P.rotation)),this._nodes.forEach(Y=>{this._fire("transform",{evt:N,target:Y}),Y._fire("transform",{evt:N,target:Y})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(P,N){this.findOne(P).setAttrs(N)}update(){var P;const N=this._getNodeRect();this.rotation(n.Util._getRotation(N.rotation));const k=N.width,D=N.height,C=this.enabledAnchors(),T=this.resizeEnabled(),A=this.padding(),E=this.anchorSize(),I=this.find("._anchor");I.forEach($=>{$.setAttrs({width:E,height:E,offsetX:E/2,offsetY:E/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:E/2+A,offsetY:E/2+A,visible:T&&C.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:k/2,y:0,offsetY:E/2+A,visible:T&&C.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:k,y:0,offsetX:E/2-A,offsetY:E/2+A,visible:T&&C.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:D/2,offsetX:E/2+A,visible:T&&C.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:k,y:D/2,offsetX:E/2-A,visible:T&&C.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:D,offsetX:E/2+A,offsetY:E/2-A,visible:T&&C.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:k/2,y:D,offsetY:E/2-A,visible:T&&C.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:k,y:D,offsetX:E/2-A,offsetY:E/2-A,visible:T&&C.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:k/2,y:-this.rotateAnchorOffset()*n.Util._sign(D)-A,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:k,height:D,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const B=this.anchorStyleFunc();B&&I.forEach($=>{B($)}),(P=this.getLayer())===null||P===void 0||P.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const P=this.findOne("."+this._movingAnchorName);P&&P.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),s.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return e.Node.prototype.toObject.call(this)}clone(P){return e.Node.prototype.clone.call(this,P)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};po.Transformer=M,M.isTransforming=()=>S>0;function w(L){return L instanceof Array||n.Util.warn("enabledAnchors value should be an array"),L instanceof Array&&L.forEach(function(P){d.indexOf(P)===-1&&n.Util.warn("Unknown anchor name: "+P+". Available names are: "+d.join(", "))}),L||[]}return M.prototype.className="Transformer",(0,c._registerNode)(M),t.Factory.addGetterSetter(M,"enabledAnchors",d,w),t.Factory.addGetterSetter(M,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(M,"resizeEnabled",!0),t.Factory.addGetterSetter(M,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"rotateEnabled",!0),t.Factory.addGetterSetter(M,"rotateLineVisible",!0),t.Factory.addGetterSetter(M,"rotationSnaps",[]),t.Factory.addGetterSetter(M,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(M,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"borderEnabled",!0),t.Factory.addGetterSetter(M,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(M,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"anchorFill","white"),t.Factory.addGetterSetter(M,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(M,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"borderDash"),t.Factory.addGetterSetter(M,"keepRatio",!0),t.Factory.addGetterSetter(M,"shiftBehavior","default"),t.Factory.addGetterSetter(M,"centeredScaling",!1),t.Factory.addGetterSetter(M,"ignoreStroke",!1),t.Factory.addGetterSetter(M,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(M,"nodes"),t.Factory.addGetterSetter(M,"node"),t.Factory.addGetterSetter(M,"boundBoxFunc"),t.Factory.addGetterSetter(M,"anchorDragBoundFunc"),t.Factory.addGetterSetter(M,"anchorStyleFunc"),t.Factory.addGetterSetter(M,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(M,"useSingleNodeRotation",!0),t.Factory.backCompat(M,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),po}var go={},ky;function lA(){if(ky)return go;ky=1,Object.defineProperty(go,"__esModule",{value:!0}),go.Wedge=void 0;const n=jt(),t=$e(),e=Ut(),i=Xt(),r=Ut();let s=class extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,e.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}};return go.Wedge=s,s.prototype.className="Wedge",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,r._registerNode)(s),n.Factory.addGetterSetter(s,"radius",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"angle",0,(0,i.getNumberValidator)()),n.Factory.addGetterSetter(s,"clockwise",!1),n.Factory.backCompat(s,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),go}var mo={},My;function cA(){if(My)return mo;My=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.Blur=void 0;const n=jt(),t=Pe(),e=Xt();function i(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(c,l){const u=c.data,h=c.width,p=c.height;let f,x,y,d,_,g,m,v,S,M,w,L,P,N,k,D,C,T,A,E,I,B,$,Y;const q=l+l+1,G=h-1,F=p-1,U=l+1,j=U*(U+1)/2,et=new i,V=r[l],tt=s[l];let z=null,H=et,X=null,K=null;for(y=1;y<q;y++)H=H.next=new i,y===U&&(z=H);for(H.next=et,m=g=0,x=0;x<p;x++){for(D=C=T=A=v=S=M=w=0,L=U*(E=u[g]),P=U*(I=u[g+1]),N=U*(B=u[g+2]),k=U*($=u[g+3]),v+=j*E,S+=j*I,M+=j*B,w+=j*$,H=et,y=0;y<U;y++)H.r=E,H.g=I,H.b=B,H.a=$,H=H.next;for(y=1;y<U;y++)d=g+((G<y?G:y)<<2),v+=(H.r=E=u[d])*(Y=U-y),S+=(H.g=I=u[d+1])*Y,M+=(H.b=B=u[d+2])*Y,w+=(H.a=$=u[d+3])*Y,D+=E,C+=I,T+=B,A+=$,H=H.next;for(X=et,K=z,f=0;f<h;f++)u[g+3]=$=w*V>>tt,$!==0?($=255/$,u[g]=(v*V>>tt)*$,u[g+1]=(S*V>>tt)*$,u[g+2]=(M*V>>tt)*$):u[g]=u[g+1]=u[g+2]=0,v-=L,S-=P,M-=N,w-=k,L-=X.r,P-=X.g,N-=X.b,k-=X.a,d=m+((d=f+l+1)<G?d:G)<<2,D+=X.r=u[d],C+=X.g=u[d+1],T+=X.b=u[d+2],A+=X.a=u[d+3],v+=D,S+=C,M+=T,w+=A,X=X.next,L+=E=K.r,P+=I=K.g,N+=B=K.b,k+=$=K.a,D-=E,C-=I,T-=B,A-=$,K=K.next,g+=4;m+=h}for(f=0;f<h;f++){for(C=T=A=D=S=M=w=v=0,g=f<<2,L=U*(E=u[g]),P=U*(I=u[g+1]),N=U*(B=u[g+2]),k=U*($=u[g+3]),v+=j*E,S+=j*I,M+=j*B,w+=j*$,H=et,y=0;y<U;y++)H.r=E,H.g=I,H.b=B,H.a=$,H=H.next;for(_=h,y=1;y<=l;y++)g=_+f<<2,v+=(H.r=E=u[g])*(Y=U-y),S+=(H.g=I=u[g+1])*Y,M+=(H.b=B=u[g+2])*Y,w+=(H.a=$=u[g+3])*Y,D+=E,C+=I,T+=B,A+=$,H=H.next,y<F&&(_+=h);for(g=f,X=et,K=z,x=0;x<p;x++)d=g<<2,u[d+3]=$=w*V>>tt,$>0?($=255/$,u[d]=(v*V>>tt)*$,u[d+1]=(S*V>>tt)*$,u[d+2]=(M*V>>tt)*$):u[d]=u[d+1]=u[d+2]=0,v-=L,S-=P,M-=N,w-=k,L-=X.r,P-=X.g,N-=X.b,k-=X.a,d=f+((d=x+U)<F?d:F)*h<<2,v+=D+=X.r=u[d],S+=C+=X.g=u[d+1],M+=T+=X.b=u[d+2],w+=A+=X.a=u[d+3],X=X.next,L+=E=K.r,P+=I=K.g,N+=B=K.b,k+=$=K.a,D-=E,C-=I,T-=B,A-=$,K=K.next,g+=h}}const o=function(l){const u=Math.round(this.blurRadius());u>0&&a(l,u)};return mo.Blur=o,n.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),mo}var yo={},Ay;function uA(){if(Ay)return yo;Ay=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.Brighten=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=this.brightness()*255,a=r.data,o=a.length;for(let c=0;c<o;c+=4)a[c]+=s,a[c+1]+=s,a[c+2]+=s};return yo.Brighten=i,n.Factory.addGetterSetter(t.Node,"brightness",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),yo}var vo={},Ey;function hA(){if(Ey)return vo;Ey=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.Contrast=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=Math.pow((this.contrast()+100)/100,2),a=r.data,o=a.length;let c=150,l=150,u=150;for(let h=0;h<o;h+=4)c=a[h],l=a[h+1],u=a[h+2],c/=255,c-=.5,c*=s,c+=.5,c*=255,l/=255,l-=.5,l*=s,l+=.5,l*=255,u/=255,u-=.5,u*=s,u+=.5,u*=255,c=c<0?0:c>255?255:c,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,a[h]=c,a[h+1]=l,a[h+2]=u};return vo.Contrast=i,n.Factory.addGetterSetter(t.Node,"contrast",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),vo}var xo={},Py;function dA(){if(Py)return xo;Py=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.Emboss=void 0;const n=jt(),t=Pe(),e=Se(),i=Xt(),r=function(s){const a=this.embossStrength()*10,o=this.embossWhiteLevel()*255,c=this.embossDirection(),l=this.embossBlend(),u=s.data,h=s.width,p=s.height,f=h*4;let x=0,y=0,d=p;switch(c){case"top-left":x=-1,y=-1;break;case"top":x=-1,y=0;break;case"top-right":x=-1,y=1;break;case"right":x=0,y=1;break;case"bottom-right":x=1,y=1;break;case"bottom":x=1,y=0;break;case"bottom-left":x=1,y=-1;break;case"left":x=0,y=-1;break;default:e.Util.error("Unknown emboss direction: "+c)}do{const _=(d-1)*f;let g=x;d+g<1&&(g=0),d+g>p&&(g=0);const m=(d-1+g)*h*4;let v=h;do{const S=_+(v-1)*4;let M=y;v+M<1&&(M=0),v+M>h&&(M=0);const w=m+(v-1+M)*4,L=u[S]-u[w],P=u[S+1]-u[w+1],N=u[S+2]-u[w+2];let k=L;const D=k>0?k:-k,C=P>0?P:-P,T=N>0?N:-N;if(C>D&&(k=P),T>D&&(k=N),k*=a,l){const A=u[S]+k,E=u[S+1]+k,I=u[S+2]+k;u[S]=A>255?255:A<0?0:A,u[S+1]=E>255?255:E<0?0:E,u[S+2]=I>255?255:I<0?0:I}else{let A=o-k;A<0?A=0:A>255&&(A=255),u[S]=u[S+1]=u[S+2]=A}}while(--v)}while(--d)};return xo.Emboss=r,n.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,n.Factory.afterSetFilter),xo}var _o={},Dy;function fA(){if(Dy)return _o;Dy=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.Enhance=void 0;const n=jt(),t=Pe(),e=Xt();function i(s,a,o,c,l){const u=o-a,h=l-c;if(u===0)return c+h/2;if(h===0)return c;let p=(s-a)/u;return p=h*p+c,p}const r=function(s){const a=s.data,o=a.length;let c=a[0],l=c,u,h=a[1],p=h,f,x=a[2],y=x,d;const _=this.enhance();if(_===0)return;for(let k=0;k<o;k+=4)u=a[k+0],u<c?c=u:u>l&&(l=u),f=a[k+1],f<h?h=f:f>p&&(p=f),d=a[k+2],d<x?x=d:d>y&&(y=d);l===c&&(l=255,c=0),p===h&&(p=255,h=0),y===x&&(y=255,x=0);let g,m,v,S,M,w,L,P,N;_>0?(m=l+_*(255-l),v=c-_*(c-0),M=p+_*(255-p),w=h-_*(h-0),P=y+_*(255-y),N=x-_*(x-0)):(g=(l+c)*.5,m=l+_*(l-g),v=c+_*(c-g),S=(p+h)*.5,M=p+_*(p-S),w=h+_*(h-S),L=(y+x)*.5,P=y+_*(y-L),N=x+_*(x-L));for(let k=0;k<o;k+=4)a[k+0]=i(a[k+0],c,l,v,m),a[k+1]=i(a[k+1],h,p,w,M),a[k+2]=i(a[k+2],x,y,N,P)};return _o.Enhance=r,n.Factory.addGetterSetter(t.Node,"enhance",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),_o}var bo={},Ly;function pA(){if(Ly)return bo;Ly=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.Grayscale=void 0;const n=function(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=.34*e[r]+.5*e[r+1]+.16*e[r+2];e[r]=s,e[r+1]=s,e[r+2]=s}};return bo.Grayscale=n,bo}var wo={},Ry;function gA(){if(Ry)return wo;Ry=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.HSL=void 0;const n=jt(),t=Pe(),e=Xt();n.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"luminance",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter);const i=function(r){const s=r.data,a=s.length,o=1,c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=this.luminance()*127,h=o*c*Math.cos(l*Math.PI/180),p=o*c*Math.sin(l*Math.PI/180),f=.299*o+.701*h+.167*p,x=.587*o-.587*h+.33*p,y=.114*o-.114*h-.497*p,d=.299*o-.299*h-.328*p,_=.587*o+.413*h+.035*p,g=.114*o-.114*h+.293*p,m=.299*o-.3*h+1.25*p,v=.587*o-.586*h-1.05*p,S=.114*o+.886*h-.2*p;let M,w,L,P;for(let N=0;N<a;N+=4)M=s[N+0],w=s[N+1],L=s[N+2],P=s[N+3],s[N+0]=f*M+x*w+y*L+u,s[N+1]=d*M+_*w+g*L+u,s[N+2]=m*M+v*w+S*L+u,s[N+3]=P};return wo.HSL=i,wo}var Co={},Iy;function mA(){if(Iy)return Co;Iy=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.HSV=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=r.data,a=s.length,o=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=o*c*Math.cos(l*Math.PI/180),h=o*c*Math.sin(l*Math.PI/180),p=.299*o+.701*u+.167*h,f=.587*o-.587*u+.33*h,x=.114*o-.114*u-.497*h,y=.299*o-.299*u-.328*h,d=.587*o+.413*u+.035*h,_=.114*o-.114*u+.293*h,g=.299*o-.3*u+1.25*h,m=.587*o-.586*u-1.05*h,v=.114*o+.886*u-.2*h;let S,M,w,L;for(let P=0;P<a;P+=4)S=s[P+0],M=s[P+1],w=s[P+2],L=s[P+3],s[P+0]=p*S+f*M+x*w,s[P+1]=y*S+d*M+_*w,s[P+2]=g*S+m*M+v*w,s[P+3]=L};return Co.HSV=i,n.Factory.addGetterSetter(t.Node,"hue",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"saturation",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"value",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),Co}var So={},Ny;function yA(){if(Ny)return So;Ny=1,Object.defineProperty(So,"__esModule",{value:!0}),So.Invert=void 0;const n=function(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};return So.Invert=n,So}var To={},Fy;function vA(){if(Fy)return To;Fy=1,Object.defineProperty(To,"__esModule",{value:!0}),To.Kaleidoscope=void 0;const n=jt(),t=Pe(),e=Se(),i=Xt(),r=function(o,c,l){const u=o.data,h=c.data,p=o.width,f=o.height,x=l.polarCenterX||p/2,y=l.polarCenterY||f/2;let d=Math.sqrt(x*x+y*y),_=p-x,g=f-y;const m=Math.sqrt(_*_+g*g);d=m>d?m:d;const v=f,S=p,M=360/S*Math.PI/180;for(let w=0;w<S;w+=1){const L=Math.sin(w*M),P=Math.cos(w*M);for(let N=0;N<v;N+=1){_=Math.floor(x+d*N/v*P),g=Math.floor(y+d*N/v*L);let k=(g*p+_)*4;const D=u[k+0],C=u[k+1],T=u[k+2],A=u[k+3];k=(w+N*p)*4,h[k+0]=D,h[k+1]=C,h[k+2]=T,h[k+3]=A}}},s=function(o,c,l){const u=o.data,h=c.data,p=o.width,f=o.height,x=l.polarCenterX||p/2,y=l.polarCenterY||f/2;let d=Math.sqrt(x*x+y*y),_=p-x,g=f-y;const m=Math.sqrt(_*_+g*g);d=m>d?m:d;const v=f,S=p,M=0;let w,L;for(_=0;_<p;_+=1)for(g=0;g<f;g+=1){const P=_-x,N=g-y,k=Math.sqrt(P*P+N*N)*v/d;let D=(Math.atan2(N,P)*180/Math.PI+360+M)%360;D=D*S/360,w=Math.floor(D),L=Math.floor(k);let C=(L*p+w)*4;const T=u[C+0],A=u[C+1],E=u[C+2],I=u[C+3];C=(g*p+_)*4,h[C+0]=T,h[C+1]=A,h[C+2]=E,h[C+3]=I}},a=function(o){const c=o.width,l=o.height;let u,h,p,f,x,y,d,_,g,m,v=Math.round(this.kaleidoscopePower());const S=Math.round(this.kaleidoscopeAngle()),M=Math.floor(c*(S%360)/360);if(v<1)return;const w=e.Util.createCanvasElement();w.width=c,w.height=l;const L=w.getContext("2d").getImageData(0,0,c,l);e.Util.releaseCanvas(w),r(o,L,{polarCenterX:c/2,polarCenterY:l/2});let P=c/Math.pow(2,v);for(;P<=8;)P=P*2,v-=1;P=Math.ceil(P);let N=P,k=0,D=N,C=1;for(M+P>c&&(k=N,D=0,C=-1),h=0;h<l;h+=1)for(u=k;u!==D;u+=C)p=Math.round(u+M)%c,g=(c*h+p)*4,x=L.data[g+0],y=L.data[g+1],d=L.data[g+2],_=L.data[g+3],m=(c*h+u)*4,L.data[m+0]=x,L.data[m+1]=y,L.data[m+2]=d,L.data[m+3]=_;for(h=0;h<l;h+=1)for(N=Math.floor(P),f=0;f<v;f+=1){for(u=0;u<N+1;u+=1)g=(c*h+u)*4,x=L.data[g+0],y=L.data[g+1],d=L.data[g+2],_=L.data[g+3],m=(c*h+N*2-u-1)*4,L.data[m+0]=x,L.data[m+1]=y,L.data[m+2]=d,L.data[m+3]=_;N*=2}s(L,o,{})};return To.Kaleidoscope=a,n.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),To}var ko={},Oy;function xA(){if(Oy)return ko;Oy=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.Mask=void 0;const n=jt(),t=Pe(),e=Xt();function i(p,f,x){let y=(x*p.width+f)*4;const d=[];return d.push(p.data[y++],p.data[y++],p.data[y++],p.data[y++]),d}function r(p,f){return Math.sqrt(Math.pow(p[0]-f[0],2)+Math.pow(p[1]-f[1],2)+Math.pow(p[2]-f[2],2))}function s(p){const f=[0,0,0];for(let x=0;x<p.length;x++)f[0]+=p[x][0],f[1]+=p[x][1],f[2]+=p[x][2];return f[0]/=p.length,f[1]/=p.length,f[2]/=p.length,f}function a(p,f){const x=i(p,0,0),y=i(p,p.width-1,0),d=i(p,0,p.height-1),_=i(p,p.width-1,p.height-1),g=f||10;if(r(x,y)<g&&r(y,_)<g&&r(_,d)<g&&r(d,x)<g){const m=s([y,x,_,d]),v=[];for(let S=0;S<p.width*p.height;S++){const M=r(m,[p.data[S*4],p.data[S*4+1],p.data[S*4+2]]);v[S]=M<g?0:255}return v}}function o(p,f){for(let x=0;x<p.width*p.height;x++)p.data[4*x+3]=f[x]}function c(p,f,x){const y=[1,1,1,1,0,1,1,1,1],d=Math.round(Math.sqrt(y.length)),_=Math.floor(d/2),g=[];for(let m=0;m<x;m++)for(let v=0;v<f;v++){const S=m*f+v;let M=0;for(let w=0;w<d;w++)for(let L=0;L<d;L++){const P=m+w-_,N=v+L-_;if(P>=0&&P<x&&N>=0&&N<f){const k=P*f+N,D=y[w*d+L];M+=p[k]*D}}g[S]=M===255*8?255:0}return g}function l(p,f,x){const y=[1,1,1,1,1,1,1,1,1],d=Math.round(Math.sqrt(y.length)),_=Math.floor(d/2),g=[];for(let m=0;m<x;m++)for(let v=0;v<f;v++){const S=m*f+v;let M=0;for(let w=0;w<d;w++)for(let L=0;L<d;L++){const P=m+w-_,N=v+L-_;if(P>=0&&P<x&&N>=0&&N<f){const k=P*f+N,D=y[w*d+L];M+=p[k]*D}}g[S]=M>=255*4?255:0}return g}function u(p,f,x){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],d=Math.round(Math.sqrt(y.length)),_=Math.floor(d/2),g=[];for(let m=0;m<x;m++)for(let v=0;v<f;v++){const S=m*f+v;let M=0;for(let w=0;w<d;w++)for(let L=0;L<d;L++){const P=m+w-_,N=v+L-_;if(P>=0&&P<x&&N>=0&&N<f){const k=P*f+N,D=y[w*d+L];M+=p[k]*D}}g[S]=M}return g}const h=function(p){const f=this.threshold();let x=a(p,f);return x&&(x=c(x,p.width,p.height),x=l(x,p.width,p.height),x=u(x,p.width,p.height),o(p,x)),p};return ko.Mask=h,n.Factory.addGetterSetter(t.Node,"threshold",0,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),ko}var Mo={},By;function _A(){if(By)return Mo;By=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.Noise=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=this.noise()*255,a=r.data,o=a.length,c=s/2;for(let l=0;l<o;l+=4)a[l+0]+=c-2*c*Math.random(),a[l+1]+=c-2*c*Math.random(),a[l+2]+=c-2*c*Math.random()};return Mo.Noise=i,n.Factory.addGetterSetter(t.Node,"noise",.2,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),Mo}var Ao={},zy;function bA(){if(zy)return Ao;zy=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.Pixelate=void 0;const n=jt(),t=Se(),e=Pe(),i=Xt(),r=function(s){let a=Math.ceil(this.pixelSize()),o=s.width,c=s.height,l,u,h,p,f,x,y,d=Math.ceil(o/a),_=Math.ceil(c/a),g,m,v,S,M,w,L,P=s.data;if(a<=0){t.Util.error("pixelSize value can not be <= 0");return}for(M=0;M<d;M+=1)for(w=0;w<_;w+=1){for(p=0,f=0,x=0,y=0,g=M*a,m=g+a,v=w*a,S=v+a,L=0,l=g;l<m;l+=1)if(!(l>=o))for(u=v;u<S;u+=1)u>=c||(h=(o*u+l)*4,p+=P[h+0],f+=P[h+1],x+=P[h+2],y+=P[h+3],L+=1);for(p=p/L,f=f/L,x=x/L,y=y/L,l=g;l<m;l+=1)if(!(l>=o))for(u=v;u<S;u+=1)u>=c||(h=(o*u+l)*4,P[h+0]=p,P[h+1]=f,P[h+2]=x,P[h+3]=y)}};return Ao.Pixelate=r,n.Factory.addGetterSetter(e.Node,"pixelSize",8,(0,i.getNumberValidator)(),n.Factory.afterSetFilter),Ao}var Eo={},Hy;function wA(){if(Hy)return Eo;Hy=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.Posterize=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=Math.round(this.levels()*254)+1,a=r.data,o=a.length,c=255/s;for(let l=0;l<o;l+=1)a[l]=Math.floor(a[l]/c)*c};return Eo.Posterize=i,n.Factory.addGetterSetter(t.Node,"levels",.5,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),Eo}var Po={},Gy;function CA(){if(Gy)return Po;Gy=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.RGB=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=r.data,a=s.length,o=this.red(),c=this.green(),l=this.blue();for(let u=0;u<a;u+=4){const h=(.34*s[u]+.5*s[u+1]+.16*s[u+2])/255;s[u]=h*o,s[u+1]=h*c,s[u+2]=h*l,s[u+3]=s[u+3]}};return Po.RGB=i,n.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,n.Factory.afterSetFilter),Po}var Do={},Wy;function SA(){if(Wy)return Do;Wy=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.RGBA=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=r.data,a=s.length,o=this.red(),c=this.green(),l=this.blue(),u=this.alpha();for(let h=0;h<a;h+=4){const p=1-u;s[h]=o*u+s[h]*p,s[h+1]=c*u+s[h+1]*p,s[h+2]=l*u+s[h+2]*p}};return Do.RGBA=i,n.Factory.addGetterSetter(t.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(t.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)}),n.Factory.addGetterSetter(t.Node,"blue",0,e.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(t.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r}),Do}var Lo={},$y;function TA(){if($y)return Lo;$y=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.Sepia=void 0;const n=function(t){const e=t.data,i=e.length;for(let r=0;r<i;r+=4){const s=e[r+0],a=e[r+1],o=e[r+2];e[r+0]=Math.min(255,s*.393+a*.769+o*.189),e[r+1]=Math.min(255,s*.349+a*.686+o*.168),e[r+2]=Math.min(255,s*.272+a*.534+o*.131)}};return Lo.Sepia=n,Lo}var Ro={},Uy;function kA(){if(Uy)return Ro;Uy=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.Solarize=void 0;const n=function(t){const e=t.data,i=t.width,r=t.height,s=i*4;let a=r;do{const o=(a-1)*s;let c=i;do{const l=o+(c-1)*4;let u=e[l],h=e[l+1],p=e[l+2];u>127&&(u=255-u),h>127&&(h=255-h),p>127&&(p=255-p),e[l]=u,e[l+1]=h,e[l+2]=p}while(--c)}while(--a)};return Ro.Solarize=n,Ro}var Io={},Yy;function MA(){if(Yy)return Io;Yy=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.Threshold=void 0;const n=jt(),t=Pe(),e=Xt(),i=function(r){const s=this.threshold()*255,a=r.data,o=a.length;for(let c=0;c<o;c+=1)a[c]=a[c]<s?0:255};return Io.Threshold=i,n.Factory.addGetterSetter(t.Node,"threshold",.5,(0,e.getNumberValidator)(),n.Factory.afterSetFilter),Io}var jy;function AA(){if(jy)return Xa;jy=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.Konva=void 0;const n=VM(),t=qM(),e=ZM(),i=QM(),r=JM(),s=tA(),a=eA(),o=Qv(),c=o1(),l=Jv(),u=iA(),h=nA(),p=rA(),f=sA(),x=t4(),y=aA(),d=oA(),_=lA(),g=cA(),m=uA(),v=hA(),S=dA(),M=fA(),w=pA(),L=gA(),P=mA(),N=yA(),k=vA(),D=xA(),C=_A(),T=bA(),A=wA(),E=CA(),I=SA(),B=TA(),$=kA(),Y=MA();return Xa.Konva=n.Konva.Util._assign(n.Konva,{Arc:t.Arc,Arrow:e.Arrow,Circle:i.Circle,Ellipse:r.Ellipse,Image:s.Image,Label:a.Label,Tag:a.Tag,Line:o.Line,Path:c.Path,Rect:l.Rect,RegularPolygon:u.RegularPolygon,Ring:h.Ring,Sprite:p.Sprite,Star:f.Star,Text:x.Text,TextPath:y.TextPath,Transformer:d.Transformer,Wedge:_.Wedge,Filters:{Blur:g.Blur,Brighten:m.Brighten,Contrast:v.Contrast,Emboss:S.Emboss,Enhance:M.Enhance,Grayscale:w.Grayscale,HSL:L.HSL,HSV:P.HSV,Invert:N.Invert,Kaleidoscope:k.Kaleidoscope,Mask:D.Mask,Noise:C.Noise,Pixelate:T.Pixelate,Posterize:A.Posterize,RGB:E.RGB,RGBA:I.RGBA,Sepia:B.Sepia,Solarize:$.Solarize,Threshold:Y.Threshold}}),Xa}var EA=Wc.exports,Xy;function PA(){if(Xy)return Wc.exports;Xy=1,Object.defineProperty(EA,"__esModule",{value:!0});const n=AA();return Wc.exports=n.Konva,Wc.exports}var DA=PA();const he=Au(DA),LA={group:()=>new he.Group,text:()=>new he.Text,rect:()=>new he.Rect,circle:()=>new he.Circle,line:()=>new he.Line,path:()=>new he.Path};function RA(n){return LA[n]}const IA=function(){return null},NA=function(){return[]};function FA(n){return n==null?IA:function(){return this===null?null:this==null?void 0:this.findOne(n)}}function OA(n){return n==null?NA:function(){return this==null?void 0:this.find(n)}}function BA(){var t,e;let n;(n=(t=this==null?void 0:this.parent)==null?void 0:t.children.findIndex(i=>i===this))!==-1&&((e=this==null?void 0:this.parent)==null||e.children.splice(n,1)),this==null||this.remove()}function zA(n,t,e){this==null||this.on(n,i=>{t.call(this,i,e)})}function Kr(n){return Array.isArray(n)?new Yn([n]):new Yn([[n]])}class Yn{constructor(t,e){ot(this,"_groups",[]);ot(this,"_parents",[]);this._groups=t,this._parents=e??[null]}*[Symbol.iterator](){for(let t=this._groups,e=t.length,i=0;i<e;++i)for(let r=t[i],s=r.length,a=0,o;a<s;++a)(o=r[a])&&(yield o)}select(t){typeof t!="function"&&(t=FA(t));const e=this._groups,i=e.length,r=new Array(i);for(let s=0;s<i;++s)for(let a=e[s],o=a.length,c=r[s]=new Array(o),l,u,h=0;h<o;++h)(l=a[h])&&(u=t.call(l,l.__data__,h,a))&&("__data__"in l&&(u.__data__=l.__data__),c[h]=u);return new Yn(r,this._parents)}selectAll(t){typeof t!="function"&&(t=OA(t));const e=this._groups,i=e.length,r=[],s=[];for(let a=0;a<i;++a)for(let o=e[a],c=o.length,l,u=0;u<c;++u)(l=o[u])&&(r.push(t.call(l,l.__data__,u,o)),s.push(l));return new Yn(r,s)}each(t){for(let e=0;e<this._groups.length;++e){const i=this._groups[e];for(let r=0;r<i.length;++r){const s=i[r];s&&t.call(s,s.__data__,r,i)}}return this}node(){for(let t=0,e=this._groups,i=e.length;t<i;++t)for(let r=e[t],s=0,a=r.length;s<a;++s){let o=r[s];if(o)return o}return null}nodes(){return Array.from(this)}attr(t,e){return arguments.length>1?this.each((e==null?WM:typeof e=="function"?UM:$M)(t,e)):this.node()[t]}datum(t){return arguments.length?this.attr("__data__",t):this.node().__data__}data(t,e){if(arguments.length===0)return Array.from(this,h=>h.__data__);const i=this._groups,r=this._parents,s=e?GM:HM,a=i.length,o=new Array(a),c=new Array(a),l=new Array(a);typeof t!="function"&&(t=zM(t));for(let h=0;h<a;++h){let p=r[h],f=i[h],x=i.length,y=t.call(p,p&&p.__data__,h,r),d=y.length,_=c[h]=new Array(d),g=o[h]=new Array(d),m=l[h]=new Array(x);s(p,f,_,g,m,y,e);for(let v=0,S=0,M,w;v<d;++v)if(M=_[v]){for(v>=S&&(S=v+1);!(w=g[S])&&++S<d;);M._next=w||null}}const u=new Yn(o,r);return u._enter=c,u._exit=l,u}append(t){const e=typeof t!="function"?RA(t):t;return this.select(function(){return this.addChild(e.apply(this,arguments))})}enter(){return new Yn(this._enter||this._groups.map(t=>new Array(t.length)),this._parents)}exit(){return new Yn(this._exit||this._groups.map(t=>new Array(t.length)),this._parents)}order(){var i;const t=this._groups,e=t.length;for(let r=0,s,a,o;r<e;++r){s=t[r],a=s.length;for(let c=0,l;c<a;++c)(l=s[c])&&(o=l)&&(l.__index__=c);o&&((i=o.parent)==null||i.children.sort((c,l)=>c.__index__-l.__index__));for(let c=0,l;c<a;++c)(l=s[c])&&delete l.__index__}return this}merge(t){const e=this._groups,i=t._groups,r=e.length,s=i.length,a=Math.min(r,s),o=new Array(r);let c=0;for(;c<a;++c)for(let l=e[c],u=i[c],h=l.length,p=o[c]=new Array(h),f,x=0;x<h;++x)(f=l[x]||u[x])&&(p[x]=f);for(;c<r;++c)o[c]=e[c];return new Yn(o,this._parents)}remove(){this.each(BA)}on(t,e){this.each(function(i){zA.call(this,t,e,i)})}join(t,e,i){let r=this.enter(),s=this,a=this.exit();return typeof t=="function"?r=t(r):r=r.append(t+""),e&&(s=e(s)),i?i(a):a.remove(),r&&s?r.merge(s).order():s}}function HA(n,t,e,i){const r=n.length;if(r===0)throw new Error("Data length must be > 0");const s=i-e+1,a=new Array(s),o=new Array(r);for(let c=0,l;c<s;++c)l=a[c]=new Array,l.year=e+c;for(let c=0,l,u,h;c<r;++c)h=n[c],l=t(h,c).getFullYear(),u=o[c]=l-e,a[u].push(h);return a}function GA(n,t,e=-1/0,i=1/0){const r=new Float64Array(n.length),s=new Float64Array(n.length),a=new Uint8Array(n.length),o=new Int32Array(n.length);s[0]=Math.max(e,n[0].leftX)+n[0].width;let c=s[0]<=Math.min(i,n[0].rightX);r[0]=c?n[0].weight:-1/0,a[0]=c?1:0,o[0]=-1;for(let h=1;h<n.length;h++){let p=n[h].weight,f=Math.max(e,n[h].leftX)+n[h].width,x=-1,y=1;for(let d=h-1;d>=0;d--){let _=Math.max(s[d],n[h].leftX)+n[h].width;if(_<=Math.min(i,n[h].rightX)&&(t[d]||r[d]+n[h].weight>p)&&(p=r[d]+n[h].weight,f=_,x=d,y=1),t[d])break}t[h]===0&&(r[h-1]>p||f>i)&&(p=r[h-1],f=s[h-1],x=h-1,y=0),s[h]=f,r[h]=p,a[h]=y,o[h]=x}const l=new Uint8Array(n.length);let u=n.length-1;for(;u>=0;)a[u]&&(l[u]=1),u=o[u];return l}let WA=class e4{constructor(t,e,i){ot(this,"intervals");ot(this,"leftX");ot(this,"rightX");ot(this,"CXs");ot(this,"DLEFT");ot(this,"DRIGHT");ot(this,"L");ot(this,"D");ot(this,"W");this.intervals=t.slice().sort((r,s)=>r.cx-s.cx),this.leftX=e,this.rightX=i,this.preprocess()}static init(t,e,i){return new e4(t,e,i)}solve(){const t=this.intervals,e=this.L;if(t.length===0)return;const i=[];let r=[0,0];t[0].cx2=Math.max(this.leftX+t[0].width/2,Math.min(t[0].cx,this.rightX-t[0].width/2));for(let s=1;s<this.intervals.length;++s){t[s].cx-t[s].width/2>t[r[1]].cx2+t[r[1]].width/2?(i.push(r),r=[s,s]):r[1]=s;let a=this.optimize(...r),o;for(;(o=i[i.length-1])!==void 0;){let c=t[o[1]],l=t[r[0]];if(c.cx2+c.width/2+l.width/2<=a)break;r=[o[0],r[1]],a=this.optimize(...r),i.pop()}for(let c=r[0];c<=r[1];++c)t[c].cx2=a+this.getAcc(e,r[0],c-1)}}preprocess(){const t=this.intervals;this.CXs=new Float64Array(t.length),this.DLEFT=new Float64Array(t.length),this.DRIGHT=new Float64Array(t.length),this.L=new Float64Array(t.length),this.D=new Float64Array(t.length),this.W=new Float64Array(t.length);for(let e=0;e<t.length;++e){const i=t[e];this.CXs[e]=i.cx;const r=(i.rightX-i.leftX-i.width)/2;this.DLEFT[e]=Math.min(r,this.CXs[e]-i.width/2-this.leftX),this.DRIGHT[e]=Math.min(r,this.rightX-this.CXs[e]-i.width/2),this.W[e]=(this.W[e-1]??0)+i.weight}for(let e=0;e<t.length-1;++e){const i=t[e];this.L[e]=(this.L[e-1]??0)+(i.width+t[e+1].width)/2,this.D[e]=this.CXs[e+1]-this.CXs[0]}}optimize(t,e){const i=this.intervals,r=this.CXs;if(t===e)return Math.min(Math.max(this.leftX+i[t].width/2,r[t]),this.rightX-i[t].width/2);const s=this.DLEFT,a=this.DRIGHT,o=this.L,c=this.D,l=this.W;let u=-1/0,h=1/0;for(let x=t;x<=e;++x){const y=r[t]-this.getAcc(o,t,x-1)+this.getAcc(c,t,x-1);u=Math.max(u,y-s[x],this.leftX+i[x].width/2),h=Math.min(h,y+a[x],this.rightX-i[x].width/2)}let p=0;for(let x=t;x<=e;++x){const y=i[x];p+=y.weight*(+this.getAcc(c,t,x-1)-this.getAcc(o,t,x-1))}p/=this.getAcc(l,t,e);let f=r[t]+p;return u<=h&&(f=Math.min(Math.max(f,u),h)),f}getAcc(t,e,i){return e>i?0:(t[i]??0)-(t[e-1]??0)}};function $A(n,t,e){return WA.init(n,t,e).solve()}class sa{constructor(t,e,i,r=1){ot(this,"cx");ot(this,"width");ot(this,"delta");ot(this,"weight");ot(this,"cx2");ot(this,"leftX");ot(this,"rightX");this.cx=t,this.width=e,this.delta=i,this.weight=r;const s=e/2+i;this.leftX=t-s,this.rightX=t+s}static createFromRange(t,e,i,r=1){const s=(e-t-i)/2;return new sa((t+e)/2,i,s,r)}copy(){return new sa(this.cx,this.width,this.delta,this.weight)}static schedule(t,e,i=-1/0,r=1/0){return GA(t,e,i,r)}static layout(t,e=-1/0,i=1/0){return $A(t,e,i)}}const UA="./font/unicode_width.bin",Cc="UnicodeWidth";function YA(){return{__dict:null,get dict(){if(this.__dict===null)throw new Error("dict not loaded");return this.__dict},async load(){if(this.__dict!==null)return;const t=await(await fetch(UA)).arrayBuffer();this.__dict=new Float32Array(t),console.log("dict loaded",this.__dict)},charWidth(n,t){if(this.__dict===null)throw new Error("dict not loaded");const e=n.codePointAt(0);return(this.__dict[e]??0)*t/10},stringWidth(n,t){if(this.__dict===null)throw new Error("dict not loaded");let e=0;for(let i=0;i<n.length;i++){const r=n.codePointAt(i);e+=(this.__dict[r]??0)*t/10}return e}}}const Id=(globalThis[Cc]===void 0&&(globalThis[Cc]=YA(),globalThis[Cc].load()),globalThis[Cc]);class jo{constructor(t,e=12,i="sans-serif"){ot(this,"multiline",!1);ot(this,"fontSize",12);ot(this,"fontFamily","FZQINGKBYSJF");ot(this,"lineHeight",15);ot(this,"mode","speed");ot(this,"text","");ot(this,"lens",[]);ot(this,"heights",[]);ot(this,"offsets",[]);ot(this,"ellipsisWidths",{});ot(this,"chineseCharWidth",null);ot(this,"isChinese",/[\u4e00-\u9fa5]/);if(Id.dict===null)throw new Error("dict not loaded");this.fontSize=e,this.fontFamily=i,this.setText(t),this.updateCache()}attr(t,e){if(e===void 0)return this[t];if(t==="multiline")throw new Error(`Property ${t} is read-only`);return this[t]===e?this:(this[t]=e,t==="text"&&this.setText(e),this.updateCache(),this)}visualWidth(t=0,e=this.text.length){return(this.lens[e-1]||0)-(this.lens[t-1]||0)}visualHeight(){return this.heights.reduce((t,e)=>Math.max(t,e),this.lineHeight)}idealRectangle(t,e,i){const r=this.visualWidth(),s=this.lineHeight;if(r/s<t){const u=this.wrap(e,1/0).length;return{width:u>1?e:r,height:Math.min(u*s,i)}}const o=r*s;let c=Math.sqrt(o/t),l=this.wrap(c,1/0).length*s;return c<=e&&l<=i?{width:c,height:l}:c>e?(c=e,l=this.wrap(c,1/0).length*s,l<=i?{width:c,height:l}:{width:e,height:i}):l>i?(l=i,c=Math.ceil(o/l*t),c<=e?{width:c,height:l}:{width:e,height:i}):{width:c,height:l}}truncate(t,e){if(this.visualWidth()<=t)return this.text;e=e||"...";const r=this.ellipsisWidths[e]||this.setEllipsisWidth(e),s=this.truncate_index(t-r,0,this.text.length-1);return s===0?r<=t?e:"":this.text.slice(0,s)+e}wrap(t,e,i){const r=Math.max(0,Math.floor(e/this.lineHeight));return this.multiline?this.wrapMultiParagraph(this.text,t,r,i):this.wrapSingleParagraph(this.text,0,this.text.length,t,r,i)}lines2svg(t){return t.map((e,i)=>"<tspan x='0' dy='"+this.lineHeight*Math.min(i,1)+"'>"+e+"</tspan>").join("")}setEllipsisWidth(t){return this.ellipsisWidths[t]=Id.stringWidth(t,this.fontSize)}truncate_index(t,e,i){if(t<=0)return 0;let r=this.lens[i]-(this.lens[e-1]||0)-this.offsets[e];if(e=e||0,i=i||this.text.length-1,r<=t)return i;if(this.lens[0]>t)return 0;let s=(this.lens[e-1]||0)-this.offsets[e];for(;e<i;){const a=Math.ceil((e+i)/2);this.lens[a]-s<=t?e=a:i=a-1}return e+1}wrapSingleParagraph(t,e,i,r,s,a){if(s===0)return[];s=s||1/0,a=a||"...";const o=this.ellipsisWidths[a]||this.setEllipsisWidth(a);let c=e;const l=[];for(;c<i;){let u=this.truncate_index(r,c,i);if(u-c===0){o<=r&&l.push(a);break}if(l.push(t.slice(c,u)),c=u,l.length===s)break}if(c<i&&l.length>0){let u=c-l[l.length-1].length;if(r<=o)l[l.length-1]=a;else{let h=this.truncate_index(r-o,u,i);l[l.length-1]=t.slice(u,h)+a}}return l}wrapMultiParagraph(t,e,i,r){if(i===0)return[];i=i||1/0,r=r||"...";let s=0;const a=[];let o=null;for(;(o=t.indexOf(`
`,s))!==-1;){const c=this.wrapSingleParagraph(t,s,o,e,i,r);if(i-c.length===0){a.push(...c),i-=c.length;break}a.push(...c," "),i-=c.length+1,s=o+1}if(o<t.length&&i>0){const c=this.wrapSingleParagraph(t,s,t.length,e,i,r);a.push(...c)}return a}updateCache(){this.mode==="speed"?this.updateCacheModeSpeed():this.updateCacheModePrecision()}updateCacheModePrecision(){return this.updateCacheModeSpeed()}updateCacheModeSpeed(){for(let e=0;e<this.text.length;e++)this.offsets[e]=0,this.lens[e]=(this.lens[e-1]||0)+Id.charWidth(this.text[e],this.fontSize)+0}setText(t){if(t==null){this.text="";return}this.text=t.trim().replace(/[ ]+/g," ").replace(/\n+/g,`
`),this.text.length===0&&(this.text=" "),this.multiline=this.text.includes(`
`)}}function jA(n){const t={start:null,drag:null,end:null},e={};return e.on=function(i,r){return t[i]=r,e},e.apply=function(i){i.on("mousedown",r=>{var l;let s=r.clientX,a=r.clientY;(l=t.start)==null||l.call(i,{x:s,y:a,context:n,sourceEvent:r});const o=u=>{var f;let h=u.clientX,p=u.clientY;(f=t.drag)==null||f.call(i,{x:h,y:p,dx:h-s,dy:p-a,context:n,sourceEvent:u})},c=u=>{var f;let h=u.clientX,p=u.clientY;(f=t.end)==null||f.call(i,{x:h,y:p,dx:h-s,dy:p-a,context:n,sourceEvent:u}),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",c)};window.addEventListener("mousemove",o),window.addEventListener("mouseup",c)})},e}const Vy=new ba,$s=12,Sc=$s*1.2;let rl=!1;window.addEventListener("keydown",n=>{n.key==="Control"&&(rl=!0)});window.addEventListener("keyup",n=>{n.key==="Control"&&(rl=!1)});class qu{constructor(t,e,i){ot(this,"datum");ot(this,"index");ot(this,"labels");ot(this,"container");ot(this,"group");ot(this,"initialPosition",{});ot(this,"lastPosition",{});ot(this,"position",{});ot(this,"fy");ot(this,"fHeight");ot(this,"scaleX");ot(this,"level",0);ot(this,"weight",0);ot(this,"__baseSize__");ot(this,"idealWidth");ot(this,"idealHeight");ot(this,"width");ot(this,"height");ot(this,"lastWidth");ot(this,"lastHeight");ot(this,"locations");ot(this,"posts");ot(this,"relations");ot(this,"events");ot(this,"texts");ot(this,"shortTexts");ot(this,"eventTextWidths");ot(this,"name");ot(this,"shortDescription");this.datum=t,this.index=e,this.labels=i;const r=this.baseSize;this.width=r*this.datum.name.length,this.height=r,this.idealWidth=this.width,this.idealHeight=this.height,this.lastWidth=this.width,this.lastHeight=this.height,this.container=new Ue,this.group=new he.Group,this.locations=t.locations.filter(s=>s.time!==null),t.birthplace&&(this.locations.length===0||this.locations[0].id!==t.birthplace.id)&&this.locations.unshift(t.birthplace),this.posts=t.posts.filter(s=>s.time!==null),this.relations=t.relations.filter(s=>s.time!==null),this.events=t.events.filter(s=>s.time!==null),this.texts=this.events.map(s=>{const a=new jo(s.description,$s,"Source");return a.lineHeight=Sc,a}),this.shortTexts=this.events.map(s=>{const a=new jo(s.short_description,$s,"Source");return a.lineHeight=Sc,a}),this.eventTextWidths=this.events.map((s,a)=>{const o=this.texts[a],{width:c}=o.idealRectangle(1.5,200,1/0),l=this.shortTexts[a],{width:u}=l.idealRectangle(1.5,200,1/0);return{w:c,ws:u}}),this.shortDescription=new jo(t.description,r,"Source"),this.shortDescription.lineHeight=Sc-1e-6,this.name=new jo(t.name,r),this.initialize()}get alpha(){return this.container.alpha}set alpha(t){this.container.alpha=t,this.group.opacity(t)}get visible(){return this.container.visible}set visible(t){this.container.visible=t,this.group.visible(t)}static getBaseSize(t){return Math.max(Math.pow(t.weight,.3)*25,12)}get baseSize(){return this.__baseSize__===void 0&&(this.__baseSize__=qu.getBaseSize(this)),this.__baseSize__}initialize(){}listenSelectInteraction(t){t.cursor="pointer",t.on("mouseenter",a=>{a.nativeEvent.target===null||a.nativeEvent.target.tagName!=="CANVAS"||this.level>0||is.set(this.datum)}),t.on("mouseleave",a=>{a.nativeEvent.target===null||a.nativeEvent.target.tagName!=="CANVAS"||this.level>0||is.set(null)});function e(){const a=Wt.value.findIndex(o=>o.id===this.datum.id);if(a===-1)Wt.set([...Wt.value,this.datum]);else{const o=[...Wt.value];o.splice(a,1),o.length===0&&Ze.get()==="focused"&&Ze.set("global"),Wt.set(o)}}function i(){Wt.get().findIndex(o=>o.id===this.datum.id)===-1&&Wt.set([...Wt.value,this.datum]),Ze.set(Ze.get()==="global"?"focused":"global")}let r=null;const s=300;t.on("click",a=>{a.nativeEvent.target===null||a.nativeEvent.target.tagName!=="CANVAS"||(r?(clearTimeout(r),r=null,i.call(this)):r=setTimeout(()=>{r=null,e.call(this)},s))}),t.eventMode="static"}render(t){this.updatePosition();const e=Eg.get();this.renderRelatedFigureBackground(),this.renderBorder(t.border),this.renderName(t.name),this.renderSelectedFiguresBar(t.selectedFiguresBar),this.renderStatusIcon(e==="status"?t.statusIcon:void 0),this.renderLocationIcon(e==="location"?t.statusIcon:void 0),this.renderLine(t.line),this.renderDescription(t.description),this.renderLocationAreaChart(t.locationAreaChart),this.renderEventLine(t.eventLine),this.renderRelationBar(t.relationBar),this.renderPostLine(t.postLine),this.renderEvents(t.events),this.alpha=this.getAlpha()}renderAsRelatedFigure(){this.updatePosition();const t=this.width,e=this.height,i=Eg.get(),r=this.baseSize;Vy.fontSize=r;const s=Vy.visualWidth(this.datum.name),a=s+r*1.5,o=r,c=(t-a)/2,l=(e-o)/2,u={x:c+r*.15,width:r,y:l,height:r};this.renderRelatedFigureBackground({x:c+r,y:l,width:a-r,height:o}),this.renderDraggableBorder(!1),this.renderBorder(),this.renderName({x:c+r*1.35,width:s,y:l-r*.1,height:r}),this.renderSelectedFiguresBar(),this.renderStatusIcon(i==="status"?u:void 0),this.renderLocationIcon(i==="location"?u:void 0),this.renderLine(),this.renderDescription(),this.renderLocationAreaChart(),this.renderEventLine(),this.renderRelationBar(),this.renderLocationLine(),this.renderPostLine(),this.renderEvents(),this.alpha=1}updatePosition(){const t=this.position.x1,e=this.fy??this.position.y1;this.container.x=t,this.container.y=e,this.group.x(t).y(e)}getAlpha(){if(this.level>0)return 1/this.level*.1;const t=Te.get(),e=re.get(),i=this.datum.id;if(e.length&&!e.find(r=>r.id===i)){const r=t,s=dr.get().get(i);if(s===void 0)return 0;const a=r[s];if(a===null)return 1;const o=r.minWeight,c=r.maxWeight;return .3+.7*((a.weight-o)/(c-o))}return 1}updateScale(t,e,i,r,s,a){let o=t(this.initialPosition.x1),c=t(this.initialPosition.x2),l=e(this.initialPosition.y1),u=e(this.initialPosition.y2);this.lastPosition.x1=this.position.x1,this.lastPosition.x2=this.position.x2,this.lastPosition.y1=this.position.y1,this.lastPosition.y2=this.position.y2,this.position.x1=o,this.position.x2=c,this.position.y1=l,this.position.y2=u;const h=this.baseSize;let p=Math.max(c-o,h*this.datum.name.length*Math.sqrt(i)),f=u-l;this.idealWidth=p,this.idealHeight=f,this.scaleX=t}renderMask(t,e){let i=this.container.getChildByLabel("mask");i===null&&(i=new oe,i.label="mask",this.container.addChild(i));const r=t;if(i.visible=r,!r)return;i.clear();const s="#fff",a=this.position.x1,o=this.position.y1,c=this.position.x2-a,l=this.position.y2-o;if(e.border){const x=this.name.visualHeight();i.rect(0,x,c,l-x).fill(s)}let u=e.name.y,h=e.name.height+this.baseSize*.2,p=0,f=e.name.x+e.name.width;e.selectedFiguresBar&&(p=-this.baseSize*.6,f+=this.baseSize*.6),i.rect(p,u,f,h).fill(s)}renderRelatedFigureBackground(t){const e=this.container;let i=e.getChildByLabel("related-figure-background");i===null&&(i=new oe,i.label="related-figure-background",e.addChild(i));const r=t!==void 0;if(i.visible=r,!r)return;const s=t.x,a=t.y,o=t.width*1.1,c=t.height,l=Math.min(o,c)*.15;i.clear(),i.roundRect(s,a,o,c,l).fill(En)}renderDraggableBorder(t){let e=this.container,i=e.getChildByLabel("draggable-border");if(e.x,e.y,i===null){i=new oe,i.label="draggable-border",i.cursor="move",i.eventMode="static",this.container.addChild(i);let f=Date.now();i.on("click",()=>{const x=Date.now();x-f<300&&this.focus(),f=x})}const r=t;if(i.visible=r,!r)return;const s=this.name,a=this.group,o=0,c=s.visualHeight(),l=s.visualWidth()+s.fontSize*1.2,u=this.width,h=this.height-c;i.clear().rect(o,c,u,h).stroke({color:Lt,width:1}).fill("#fff").rect(o,c-2,l,4).fill("#fff");let p=a.findOne(".background");p===void 0&&(p=new he.Rect,p.name("background"),a.children.unshift(p),p.parent=a),p.x(o).y(c).width(u).height(h).fill("black").globalCompositeOperation("destination-out")}renderBorder(t){let e=this.container.getChildByLabel("border");e===null&&(e=new oe,e.label="border",this.container.addChild(e));const i=!!t;e.visible=i,i&&e.clear().rect(0,0,this.position.x2-this.position.x1,this.position.y2-this.position.y1).stroke({color:Lt,width:1})}renderSelectedFiguresBar(t){let e=this.container.getChildByLabel("selected-figures-bar");e===null&&(e=new oe,e.label="selected-figures-bar",this.container.addChild(e));const i=t!==void 0;if(e.visible=i,!i)return;e.clear();const r=re.get();if(r.length===0)return;let s=0;const o=this.baseSize*.5,c=-o*1.2,l=ra.get(),u=t.context;if(u)for(let h=0;h<u.length;++h){const f=u[h].weight/Math.max(u.weight,1e-6)*t.height;e.rect(c,t.y+s,o,f).fill(l.get(r[h].id)),s+=f}}renderName(t){let e=this.container.getChildByLabel("name");e===null&&(e=new Uv({text:this.datum.name,style:{fontFamily:"Source",fill:Lt}}),e.label="name",e.scale.set(.5,.5),this.container.addChild(e),this.listenSelectInteraction(e));const i=t!==void 0;if(e.visible=i,!i)return;e.style.fontSize!==t.height*2&&(e.style.fontSize=t.height*2),e.cursor=this.level===0?"pointer":"default";const r=ra.get(),s=re.get(),a=this.datum.id,o=s.find(c=>c.id===a)?r.get(a):Lt;e.style.fill!==o&&(e.style.fill=o),e.x=t.x,e.y=t.y}renderStatusIcon(t){let e=this.container.getChildByLabel("status-icon");e===null&&(e=new Ue,e.label="status-icon",this.container.addChild(e));const i=t!==void 0;if(e.visible=i,!i)return;const r=t.x??e.x,s=t.y??e.y,a=t.width??e.__width,o=t.height??e.__height;e.x=r,e.y=s,e.width=a,e.height=o,e.__width=a,e.__height=o;const c=gi.postColorMap[this.datum.status]??gi.postColorMap[0],l=this.datum.type;e.scale.set(1,1),ku.draw(e,l,a,c,t.forceFlush),e.visible=this.level===0}renderLocationIcon(t){let e=this.container.getChildByLabel("icon");e===null&&(e=new Ue,e.label="icon",this.container.addChild(e));const i=t!==void 0;if(e.visible=i,!i)return;const r=t.x??e.x,s=t.y??e.y,a=t.width??e.__width,o=t.height??e.__height;e.x=r,e.y=s,e.width=a,e.height=o,e.__width=a,e.__height=o;const c=$u.get().get(this.datum.id),l=c.center,u=c.locate;e.scale.set(1,1),Sa.draw(e,a,l,u,t.forceFlush),e.visible=this.level===0}renderLine(t){let e=this.container.getChildByLabel("line");e===null&&(e=new oe,e.label="line",this.container.addChild(e));const i=t!==void 0;e.visible=i,i&&(e.clear(),e.rect(0,t.y,this.position.x2-this.position.x1,t.height).fill(Lt),e.alpha=.3,e.visible=this.level===0)}renderDescription(t){let e=this.group.findOne(".description");e===void 0&&(e=new he.Group,e.name("description"),this.group.add(e));const i=t!==void 0;if(e.visible(i),!i)return;const r=t.y??e.y,s=this.width,a=t.height??e.height,o=this.shortDescription,c=o.wrap(s,a,"...");e.y(r).height(a),Kr(e).selectAll(".line").data(c,l=>l).join("text").each((l,u,h)=>{h[u].name("line").y(o.lineHeight*u).fontSize(o.fontSize).fill(Lt).text(l)}),e.visible(this.level===0)}renderLocationAreaChart(t){if(kC.get()==="icon")return this.renderLocationLine(t);let e=this.container.getChildByLabel("location-areaChart");e===null&&(e=new oe,e.label="location-areaChart",this.container.addChild(e));const i=t!==void 0;if(e.visible=i,!i)return;const r=this.datum,s=this.locations,a=De.get(),o=Lf.getCurrent(r.time[0],r.time[1]).coordinate,c=a.location.id===-1?o:a.location.coordinate,l=this.container.x,u=t.y??e.y,h=this.width,p=t.height??e.height,f=this.scaleX,x=ji().domain([0,1e3]).range([p,0]).clamp(!0);e.clear(),e.y=u,e.height=p,e.beginPath();let y=0,d=p;e.moveTo(y,d);for(let _=0,g=s.length,m;_<g;++_){m=s[_];const v=f(m.time)-l,S=Pi.distanceBetween(m.coordinate,c),M=x(S);e.bezierCurveTo((y+v)/2,d,(y+v)/2,M,v,M),y=v,d=M}e.lineTo(h,d).lineTo(h,p),e.closePath(),e.fillStyle=En,e.fill(),e.visible=this.level===0}getEventLineY(){const t=this.container.getChildByLabel("event-line");return t===null?[0,0]:[t.y,t.y+t.height*.6]}renderEventLine(t){let e=this.container.getChildByLabel("event-line");e===null&&(e=new Ue,e.label="event-line",this.container.addChild(e));let i=this.group.findOne(".event-line-brush");i===void 0&&(i=new he.Rect({x:0,y:0,width:0,height:0,fill:Lt,opacity:.3,name:"event-line-brush"}),this.group.add(i));const r=t!==void 0;if(e.visible=r,i.visible(r),!r)return;const s=t.y??e.y,a=this.width,o=t.height??e.height,c=this.events,l=new Array(c.length).fill(0).map((g,m)=>m).sort((g,m)=>c[g].importance-c[m].importance),u=this.scaleX,h=this.container.x,p=o,f=this.datum,x=Wt.get(),y=wr.get(),d=y.get(f.id);e.y=s,e.height=o;let _=e.getChildByLabel("background");_===null&&(_=new oe,_.label="background",e.addChild(_),jA({x1:0,x2:0,X:0,x0:0,width:0,scaleX:0,lock:!1}).on("start",g=>{var S;if(g.context.lock=!rl,g.context.lock)return;g.context.x0=this.container.x,g.context.X=((S=this.labels.root)==null?void 0:S.getBoundingClientRect().x)??0,g.context.width=this.width,g.context.scaleX=this.scaleX;const m=g.x-g.context.X;g.context.x1=g.context.x2=m;const v=Math.min(g.context.width,Math.max(0,m-g.context.x0));i.x(v).width(0)}).on("drag",g=>{if(!rl||g.context.lock)return;const{X:m,x0:v,width:S}=g.context,M=g.x-m;g.context.x2=M;const w=Math.min(S,Math.max(0,Math.min(g.context.x1,g.context.x2)-v)),L=Math.min(S,Math.max(0,Math.max(g.context.x1,g.context.x2)-v));i.x(w).width(L-w)}).on("end",g=>{if(!rl||g.context.lock)return;const{x0:m,width:v,scaleX:S}=g.context,M=Math.min(m+v,Math.max(m,Math.min(g.context.x1,g.context.x2))),w=Math.min(m+v,Math.max(m,Math.max(g.context.x1,g.context.x2))),L=S.invert(M),P=S.invert(w);Math.abs(L.getTime()-P.getTime())>1e3?y.set(f.id,[L,P]):y.delete(f.id),wr.set(new Map(y.entries()))}).apply(_)),_.clear(),_.roundRect(0,0,a,o,Math.min(a,o)*.15).fill("rgba(0, 0, 0, 0.1)"),_.cursor=x.find(g=>g.id===f.id)?"crosshair":"default",_.eventMode=x.find(g=>g.id===f.id)?"static":"none",fr(e).selectAll("g").data(l,g=>g).join("container").attr("label","g").each((g,m,v)=>{const S=c[g],M=v[m];let w,L=S.type==="成就"?p*1.5:S.type==="相關人物"?p*.45:p;S.type==="成就"||S.type==="教育"||S.type==="其他"?w=Lt:w=gi.postColorMap[S.posts.reduce((P,N)=>Math.max(P,N.rank),0)],M.x=u(S.time)-h-L*.5,M.y=(o-L)*.5,Mu.draw(M,S.type,L,w),M.cursor="pointer",M.eventMode="static",M.removeAllListeners(),M.on("click",()=>{const P=Xn.get();P!==null&&f.id===P.figure.id&&g===P.idx?Xn.set(null):Xn.set({figure:f,idx:g})})}),e.scale=1,i.x(d?u(d[0])-h:0).y(s).width(d?u(d[1])-u(d[0]):0).height(o)}renderLocationLine(t){let e=this.container.getChildByLabel("location-line");e===null&&(e=new Ue,e.label="location-line",this.container.addChild(e));let i=this.group.findOne(".location-line-brush");i===void 0&&(i=new he.Rect({x:0,y:0,width:0,height:0,fill:Lt,opacity:.3,name:"location-line-brush"}),this.group.add(i));let r=this.group.findOne(".location-name");r===void 0&&(r=new he.Group,r.name("location-name"),this.group.add(r));const s=t!==void 0&&this.level===0;if(e.visible=s,i.visible(s),r.visible(!1),!s)return;let a=r.findOne(".location-name-background");a===void 0&&(a=new he.Rect({x:0,y:0,width:0,height:0,strokeWidth:1,stroke:Lt,cornerRadius:0,fill:"#fff",name:"location-name-background"}),r.add(a));const o=14;a.height(o*1.5);let c=r.findOne(".location-name-text");c===void 0&&(c=new he.Text({x:0,y:0,text:"",fontSize:0,fill:Lt,name:"location-name-text"}),r.add(c)),c.x(o*.3).y(o*.25).verticalAlign("start").fontSize(o);const l=this.scaleX,u=this.datum,h=t.forceFlush,p=De.get(),f=p.location.id,x=p.location.coordinate,y=Lf.getCurrent(u.time[0],u.time[1]).coordinate,d=f===-1?y:x,_=this.locations;this.width;const g=this.container.x,m=t.y??e.y,v=t.height??i.height(),S=v,M=S*.6,w=(S-M)*.5,L=wr.get(),P=L.get(u.id);Wt.get();const N=new ba(o);if(e.x=0,e.y=m,e.eventMode="static",e.interactiveChildren=!0,i.x(P?l(P[0])-g:0).y(m).width(P?l(P[1])-l(P[0]):0).height(v),_.length===0){const k=iC();k.time=u.time[0],_.push(k)}fr(e).selectAll("g").data(_,k=>k.id).join("container").attr("label","g").each((k,D,C)=>{const T=C[D],A=l(k.time)-g,E=l(D===C.length-1?u.time[1]:_[D+1].time)-g;let I=T.getChildByLabel("subline");I===null&&(I=new oe,I.label="subline",T.addChild(I));let B=T.getChildByLabel("icon"),$=B===null;if($&&(B=new Ue,B.label="icon",B.cursor="pointer",B.eventMode="static",B.on("mouseover",()=>{const Y=k.name,q=N.visualWidth(Y),G=this.scaleX(k.time)-this.container.x;r.x(G-(q*.5+o*.3)).y(m-o*2).width(q+o*.6).visible(!0),a.width(q+o*.6),c.text(Y)}),B.on("mouseout",()=>{r.visible(!1)}),B.on("click",()=>{const Y=De.get();De.set({...Y,location:Y.location.id===k.id?rn.defaultAddress:k})}),T.addChild(B)),B.x=A-S*.5,B.scale.set(1,1),$||h){const Y=k.coordinate,q=Sa.draw(B,S,d,Y,h);k.__color__=q}I.clear().rect(A,w,E-A,M).fill(k.__color__)})}renderPostLine(t){let e=this.container.getChildByLabel("post-line");e===null&&(e=new Ue,e.label="post-line",this.container.addChild(e));let i=this.group.findOne(".post-name");i===void 0&&(i=new he.Group,i.name("post-name"),this.group.add(i));const r=t!==void 0&&this.level===0;if(e.visible=r,i.visible(!1),!r)return;e.y=t.y;let s=i.findOne(".post-name-background");s===void 0&&(s=new he.Rect({x:0,y:0,width:0,height:0,strokeWidth:1,stroke:Lt,cornerRadius:0,fill:"#fff",name:"post-name-background"}),i.add(s));const a=14;s.height(a*1.5);let o=i.findOne(".post-name-text");o===void 0&&(o=new he.Text({x:0,y:0,text:"",fontSize:0,fill:Lt,name:"post-name-text"}),i.add(o)),o.x(a*.3).y(a*.25).verticalAlign("start").fontSize(a);const c=this.scaleX,l=this.container.x,u=t.height,h=this.datum,p=h.time[1],f=this.posts,x=new ba(a);fr(e).selectAll("g").data(f,y=>y.name).join("container").attr("label","g").each((y,d,_)=>{const g=_[d],m=c(y.time)-l,v=c(d===_.length-1?y.endTime??p:f[d+1].time)-l,S=2,M=y.__color__;let w=g.getChildByLabel("one-post");w===null&&(w=new oe,w.label="one-post",g.addChild(w)),w.clear().rect(m-S*.5,0,S,u).rect(m,-2*.5,v-m,S*.5).fill(M);let L=g.getChildByLabel("one-post-mask");L===null&&(L=new oe,L.label="one-post-mask",L.eventMode="static",L.cursor="pointer",g.addChild(L),L.on("mouseover",()=>{const P=y.name,N=x.visualWidth(P),k=this.scaleX(y.time)-this.container.x;i.x(k-(N*.5+a*.3)).y(t.y-a*2).width(N+a*.6).visible(!0),s.width(N+a*.6),o.text(P)}),L.on("mouseout",()=>{i.visible(!1)})),L.clear().rect(m,0,v-m,u).fill(M),L.alpha=0})}renderRelationBar(t){let e=this.container.getChildByLabel("relation-bar");e===null&&(e=new Ue,e.label="relation-bar",this.container.addChild(e));const i=t!==void 0&&this.level===0;if(e.visible=i,!i)return;const r=this.relations;if(r.length===0)return;e.y=t.y;const s=this.datum,a=this.scaleX,o=s.time[0],c=s.time[1],l=a(o),u=a(c),h=o.getFullYear(),p=c.getFullYear(),f=HA(r,m=>m.time,h,p),x=5,y=this.position.x2-this.position.x1,d=t.height,_=d/x;let g=e.getChildByLabel("line");g===null&&(g=new oe,g.label="line",e.addChild(g)),g.clear().setStrokeStyle({width:1,color:Lt}).moveTo(0,d).lineTo(y,d).stroke(),fr(e).selectAll("bin").data(f,(m,v)=>v).join("container").attr("label","bin").each((m,v,S)=>{let M=S[v],w=m.year,L=a(new Date(w,0,1)),P=a(new Date(w+1,0,1)),N=P-L,k=(L+P)*.5,D=Math.max(l,k-N*.4)-l,C=Math.min(u,k+N*.4)-l,T=C-D;D>C&&([D,C]=[C,D]);let A=m.length>8?d/m.length:_,E=A*.8;fr(M).selectAll("item").data(m,(I,B)=>B).join("graphics").attr("label","item").each((I,B,$)=>{const Y=$[B],q=d-A*(B+1);Y.clear().rect(D,q,T,E).fill(Lt)})})}renderEvents(t){let e=this.container.getChildByLabel("events");e===null&&(e=new Ue,e.label="events",this.container.addChild(e));let i=this.group.findOne(".events");if(i===void 0&&(i=new he.Group,i.name("events"),this.group.add(i)),t===void 0||this.level>0){e.visible=!1,i.visible(!1);return}const r=this.events,s=$s,a=this.width,o=t.height??this.container.__height__,c=Math.min(20,o*.1),l=o-c,u=$s*.6,h=l-u*2;if(r.length===0||h<s){e.visible=!1,i.visible(!1);return}e.visible=!0,i.visible(!0),this.container.__height__=o;const p=this.datum,f=this.texts,x=this.shortTexts,y=this.eventTextWidths,d=this.scaleX,_=Sc,g=r.length,m=new Array(g),v=new Uint8Array(g),S=d(p.time[0]),M=d(p.time[1]);this.container.y;const w=t.y??e.y,L=0,P=M-S,N=$s,k=N*.5,D=Xn.get();h<s&&(e.visible=!1,i.visible(!1));const C=(F,U,j,et)=>{const V=Math.min(1,a/U);return j+(et-j)*V};e.y=w;const T=N+k*2,A=[],E=x.reduce((F,U)=>F+U.visualWidth(),0)+T*g,I=f.reduce((F,U)=>F+U.visualWidth(),0)+T*g,B=E+Math.max(0,I-E)*.2;for(let F=0,U=r.length;F<U;++F){const j=r[F],{w:et,ws:V}=y[F],tt=C(j,B,V,et),z=d(j.time)-S;tt>V+(et-V)*.6?A.push(f[F]):A.push(x[F]);const H=j.importance;m[F]=new sa(z,tt+T,(tt+T)*.55,H)}D!==null&&D.figure.id===p.id&&(v[D.idx]=1);const $=sa.schedule(m,v,L,P),Y=new Array,q=new Array,G=new Array;for(let F=0;F<$.length;++F)$[F]&&(Y.push(m[F]),q.push(r[F]),G.push(F));sa.layout(Y,L,P),Kr(i).selectAll(".text").data(q,F=>F.id).join("group").each((F,U,j)=>{const et=j[U],V=Y[U],tt=G[U],z=V.cx2,H=V.width-N,X=H-k*2,K=z-(H-N)*.5,rt=c+w,nt=A[tt],Q=nt.wrap(X,h);et.name("text"),et.x(K+k).y(rt+u),Kr(et).selectAll(".line").data(Q).join("text").each((at,ut,ft)=>{ft[ut].name("line").y(ut*_).fontSize(s).fontFamily("Source").fill(Lt).text(at).align("left").verticalAlign("top")});let it=_*Q.length;F.__textHeight__=it}),i.children.length!==q.length&&this.renderEvents(t),fr(e).selectAll("g").data(q,F=>F.id).join("container").attr("label","g").each((F,U,j)=>{const et=j[U],V=Y[U],tt=V.cx,z=V.cx2,H=0,X=c,K=V.width-N,rt=z-(K-N)*.5,nt=c,Q=F.__textHeight__+u*2,it=Math.min(K,Q)*.1;let at=et.getChildByLabel("tick");at===null&&(at=new oe,at.label="tick",et.addChild(at)),at.clear(),at.setStrokeStyle({width:1,color:Lt}).moveTo(tt,H).bezierCurveTo(tt,X,z,H,z,X).stroke(),at.roundRect(rt,nt,K,Q,it).fill(En),at.cursor="pointer",at.off("click"),at.on("click",()=>{const ut=r.findIndex(ft=>ft.id===F.id);Xn.set({figure:p,idx:ut})}),at.eventMode="static"})}focus(){this.labels.zoomToLabel(this)}destroy(){this.container.destroy({children:!0}),this.group.destroy()}}function XA(n){let t=2166136261;for(let e=0;e<n.length;e++)t^=n.charCodeAt(e),t*=16777619;return(t>>>0)/4294967295}class VA{constructor(t,e,i,r,s,a,o,c){ot(this,"allLabels");ot(this,"labels");ot(this,"internalScaleX");ot(this,"internalScaleY");ot(this,"id2index");ot(this,"size");ot(this,"globalLineNumber",()=>1);ot(this,"singleLineNumber",()=>1/0);ot(this,"order");ot(this,"key");ot(this,"Tx");ot(this,"Ty");ot(this,"globalPositions");ot(this,"singlePositions");ot(this,"focusedPositions");ot(this,"globalConfig");ot(this,"focusedTotalHeight",0);if(this.labels=t,this.allLabels=t,this.id2index=new Map,t.forEach((l,u)=>{this.id2index.set(l.datum.id,u)}),this.Tx=2,this.Ty=100,this.internalScaleX=du().domain(Yi).range([0,e]),this.internalScaleY=ji().domain(x5).range([0,i]),this.size=r,s&&(this.globalLineNumber=s),a&&(this.singleLineNumber=a),this.order=o,this.key=c,o===void 0&&c===void 0)throw new Error("Either order or key must be defined");this.globalPositions=new Map,this.singlePositions=[],this.focusedPositions=new Map,this.globalConfig={},this.solve_global()}updateConfig(t,e,i,r){if(t!==void 0&&(this.globalLineNumber=t),e!==void 0&&(this.singleLineNumber=e),this.order=i,this.key=r,i===void 0&&r===void 0)throw new Error("Either order or key must be defined");this.solve_global()}solve_global(){const t=this.labels,e=[];let i;if(this.order!==void 0){const u=this.order,h=t.length;i=t.slice().sort((p,f)=>u(p,0,f,0,h))}else{const u=this.key,h=t.length,p=t.map((f,x)=>u(f,x,h));i=new Array(h).fill(0).map((f,x)=>x).sort((f,x)=>p[f]-p[x]).map(f=>t[f])}const r=this.globalLineNumber,s=this.size.getX;i.forEach(u=>{const[h,p]=s(u),f=e.length,x=Math.min(f,r(u));let y=!1;for(let d=f-x,_;d<f;d++)if(_=e[d],_.every(g=>g.x1>p||g.x2<h)){_.push({label:u,x1:h,x2:p}),y=!0;break}y||e.push([{label:u,x1:h,x2:p}])});const a=this.size.height,o=this.size.labelLineHeight==="auto"?a/e.length:this.size.labelLineHeight,c=this.size.labelHeight==="auto"?o*.8:this.size.labelHeight,l=this.globalPositions;for(let u=0;u<e.length;u++){const h=e[u],p=a-(u+1)*o,f=c;for(const{label:x,x1:y,x2:d}of h)l.set(x.datum.id,{x1:y,x2:d,y1:p,y2:p+f})}this.globalConfig={lineNumber:e.length,height:a,labelHeight:c,labelLineHeight:o,totalHeight:o*e.length}}solve_single(){const t=Wt.get(),e=new Array(t.length);if(t.length===0){this.singlePositions=e;return}const i=Te.get().slice(),r=this.labels,s=this.globalPositions,a=this.globalConfig.labelLineHeight,o=new Array(r.length).fill(0).map((c,l)=>l);for(let c=0;c<t.length;++c){const l=new Map,u=t[c],h=s.get(u.id),p=[{label:u,x1:h.x1,x2:h.x2}],f=[],x=[];o.sort((y,d)=>{var _,g;return(((_=i[d])==null?void 0:_[c].weight)??0)-(((g=i[y])==null?void 0:g[c].weight)??0)});for(let y=0;y<i.length;++y){const d=o[y];if(i[d][c].weight===0)break;const g=r[d],m=g.datum.id,v=s.get(m),[S,M]=this.size.getX(g);if(t.find(P=>P.id===m)){l.set(m,{x1:S,x2:M,dy1:v.y1-h.y1,dy2:v.y2-h.y2});continue}let w;v.y1<h.y1?w=-this._add_in_lines(g,f)-1:v.y1>h.y1?w=this._add_in_lines(g,x)+1:p.every(P=>P.x1>M||P.x2<S)?(p.push({label:g.datum,x1:S,x2:M}),w=0):w=this._add_in_lines(g,x)+1;const L=w*a;l.set(m,{x1:S,x2:M,dy1:L,dy2:L})}e[c]=l}this.singlePositions=e}solve_focused(t,e){const[i,r]=t.range(),[s,a]=e.range(),o=a-s,c=(Yi[1].getTime()-Yi[0].getTime())/(t.domain()[1].getTime()-t.domain()[0].getTime()),l=Math.max(1,(c-50)/5),u=this.allLabels,h=this.id2index,p=Wt.get().slice().sort((B,$)=>this.id2index.get($.id)-this.id2index.get(B.id)),f=p.length;if(f===0)throw new Error("No figures clicked");const x=160,y=12,d=5,_=re.get(),g=p.map(B=>_.findIndex($=>$.id===B.id)),m=new Set(p.map(B=>B.id)),v=ce.get(),S=v.map(B=>u[h.get(B.id)]),M=Te.get(),w=this.globalPositions,L=S.map(B=>qu.getBaseSize(B)),P=w.get(p.at(0).id).y1,N=w.get(p.at(-1).id).y1,k=(P+N)/2,D=new Array(p.length+1).fill(0).map(()=>[]);for(let B=0,$=v.length;B<$;++B){const Y=v[B];if(m.has(Y.id))continue;const q=M[B],G=g.map(et=>q[et].weight),F=G.reduce((et,V)=>et+V,0);G.forEach((et,V)=>G[V]=F===0?0:et/F);let U=G.reduce((et,V,tt)=>et+V*(tt+1),0),j;U===0||Math.abs(U-1)<1e-6&&f===1?w.get(Y.id).y1<k?j=0:j=f:Math.abs(U-1)<1e-6?j=0:Math.abs(U-f)<1e-6?j=f:j=Math.floor(U),D[j].push(B)}const C=new Float64Array(v.length),T=new Float64Array(v.length);for(let B=0,$=D.length;B<$;++B){const Y=D[B];for(let q=0,G=Y.length;q<G;++q){const F=Y[q],U=v[F],j=M[F],et=g.map(K=>j[K].weight+1),V=B===0?g.reduce((K,rt,nt)=>K-et[nt]*(nt+1),0):g.reduce((K,rt,nt)=>K+et[nt]*(nt+1),0);T[F]=V;const tt=K=>1/(1+Math.abs(K));let z=0,H=0,X=!1;g.forEach(K=>{let rt=0;j[K].events.forEach(nt=>{if(nt.time===null)return;const Q=t(nt.time)+(XA(U.name)-.5)*20*l;let it;Q>=i&&Q<=r?(it=1,H+=it,rt+=Q*it,X=!0):Q<i?(it=tt(i-Q),H+=it,rt+=Q*it):(it=tt(Q-r),H+=it,rt+=Q*it)}),z+=rt}),X?H>0?z/=H:z=(t(U.time[0])+t(U.time[1]))/2:z=Number.NaN,C[F]=z}}let A=d;const E=new Array(v.length);for(let B=0,$=D.length;B<$;++B){const Y=D[B],q=Math.max(...Y.map(j=>L[j])),G=Math.max(Math.min(Y.length*y*.15,o*.4),q),F=Math.max(...Y.map(j=>T[j])),U=Math.min(...Y.map(j=>T[j]));for(const j of Y){const et=C[j],V=(T[j]-U)/Math.max(F-U,1e-12),tt=A+L[j]/2+V*(G-L[j]/2);E[j]={x1:et,y1:tt,x2:et,y2:tt}}if(A+=G+d,B<D.length-1){const j=p[B];E[v.findIndex(et=>et.id===j.id)]={x1:t(j.time[0]),y1:A,x2:t(j.time[1]),y2:A+x},A+=x+d}}if(A<o){const B=(o-A)*.5;for(const $ of E)$.y1+=B,$.y2+=B;A=o}const I=this.focusedPositions;for(let B=0,$=v.length;B<$;++B){const Y=E[B];Y.x1=t.invert(Y.x1).getTime(),Y.x2=t.invert(Y.x2).getTime(),Y.y1=e.invert(Y.y1),Y.y2=e.invert(Y.y2),I.set(v[B].id,Y)}this.focusedTotalHeight=A/o}getTotalHeight(t){return t==="global"?this.globalConfig.totalHeight:this.focusedTotalHeight}getSelectedFigureWeights(t,e){const i=Wt.get(),r=this.globalPositions,s=i.map(l=>r.get(l.id));t=this.internalScaleX(t),e=this.internalScaleY(e);const a=s.map(l=>{const u=this.internalScaleX((l.x1+l.x2)/2),h=this.internalScaleY((l.y1+l.y2)/2);let p=Math.hypot(u-t,h-e);return 1/Math.max(p,1e-12)});let o=a.reduce((l,u)=>l+u,0);a.forEach((l,u)=>a[u]=l/o);const c=4;return a.forEach((l,u)=>{const h=Math.pow(l,c),p=Math.pow(1-l,c);a[u]=h/(h+p)}),o=a.reduce((l,u)=>l+u,0),a.forEach((l,u)=>a[u]=l/o),a}customInterpolate(t,e,i,r){for(const s of t){let a=e.get(s.datum.id),o=i.get(s.datum.id);!a&&!o||(a?o||(a=o):o=a,s.initialPosition={x1:this._interpolateNumber(a.x1,o.x1,r),x2:this._interpolateNumber(a.x2,o.x2,r),y1:this._interpolateNumber(a.y1,o.y1,r),y2:this._interpolateNumber(a.y2,o.y2,r)})}}interpolate(t,[e,i],r="global"){if(r==="focused"){const f=this.globalPositions,x=this.focusedPositions;for(const y of this.labels){const d=x.get(y.datum.id)??f.get(y.datum.id);y.initialPosition=d}return}const s=t===null?null:t.getTransform(),a=s===null?0:this._scaleX(s.kx),o=s===null?0:this._scaleY(s.ky),c=this.globalPositions,l=this.singlePositions,h=Wt.get().map(f=>c.get(f.id)),p=this.getSelectedFigureWeights(e,i);for(const f of this.labels){const{x1:x,x2:y,y1:d,y2:_}=c.get(f.datum.id);let g=0,m=0,v=0,S=0,M=0,w=0;for(let P=0,N,k,D;P<l.length;++P)N=l[P].get(f.datum.id),N!==void 0&&(k=h[P],D=p[P],g+=N.x1,m+=N.x2,v+=(k.y1+N.dy1)*D,S+=(k.y2+N.dy2)*D,M++,w+=D);M>0?(g/=M,m/=M,v/=w,S/=w):(g=x,m=y,v=d,S=_);const L={x1:this._interpolateNumber(x,g,a),x2:this._interpolateNumber(y,m,a),y1:this._interpolateNumber(d,v,o),y2:this._interpolateNumber(_,S,o)};f.initialPosition=L}}_interpolateNumber(t,e,i){return i=Math.min(Math.max(i,0),1),t+(e-t)*i}_scaleX(t){const i=this.Tx,r=i*(t-1)/((i-1)*t);return Math.min(Math.max(r,0),1)}_scaleY(t){const i=this.Ty,r=i*(t-1)/((i-1)*t);return Math.min(Math.max(r,0),1)}_add_in_lines(t,e){const[i,r]=this.size.getX(t),s=e.length,a=Math.min(s,this.singleLineNumber(t));for(let o=s-a,c;o<s;o++)if(c=e[o],c.every(l=>l.x1>r||l.x2<i))return c.push({label:t,x1:i,x2:r}),o;return e.push([{label:t,x1:i,x2:r}]),e.length-1}}class qA{constructor(t,e,i,r=2){ot(this,"xRange");ot(this,"yRange");ot(this,"grid");ot(this,"maxOverlap");ot(this,"gridArray");this.xRange=t,this.yRange=e,this.grid=i,this.gridArray=new Array(r).fill(0).map(()=>new Uint8Array(i[0]*i[1])),this.maxOverlap=r}getGridX(t){return Math.floor((t-this.xRange[0])/(this.xRange[1]-this.xRange[0])*this.grid[0])}getGridY(t){return Math.floor((t-this.yRange[0])/(this.yRange[1]-this.yRange[0])*this.grid[1])}solve(t,e){const i=this.grid,r=this.gridArray,s=this.maxOverlap;r.forEach(c=>c.fill(0));const a=[],o=[];return t.forEach(c=>{const l=e(c).map(p=>({x1:Math.max(Math.min(this.getGridX(p.x1),i[0]-1),0),y1:Math.max(Math.min(this.getGridY(p.y1),i[1]-1),0),x2:Math.max(Math.min(this.getGridX(p.x2),i[0]-1),0),y2:Math.max(Math.min(this.getGridY(p.y2),i[1]-1),0)}));let u=-1;for(let p=0,f,x;p<s;p++){f=r[p],x=!1;t:for(const{x1:y,y1:d,x2:_,y2:g}of l)for(let m=y;m<=_;m++)for(let v=d;v<=g;v++){const S=v*i[0]+m;if(f[S]>0){x=!0;break t}}if(!x){u=p;break}}if(u===-1)return;const h=r[u];for(const{x1:p,y1:f,x2:x,y2:y}of l)for(let d=p;d<=x;d++)for(let _=f;_<=y;_++){const g=_*i[0]+d;h[g]=1}a.push(c),o.push(u)}),[a,o]}}function KA(n,t,e){const i=new Map;n.forEach((a,o)=>i.set(e(a,o),o));const r=new Uint8Array(n.length),s=new Uint8Array(t.length);return t.forEach((a,o)=>{const c=e(a,o);if(i.has(c)){const l=i.get(c);r[l]=1}else s[o]=1}),{enter:Array.from(s.keys()).filter(a=>s[a]===1),update:Array.from(s.keys()).filter(a=>s[a]===0),exit:Array.from(r.keys()).filter(a=>r[a]===0)}}const Be=12;class ZA{constructor(t,e,i,r=0,s=0){ot(this,"nodes");ot(this,"edgesX");ot(this,"edgesY");ot(this,"x");ot(this,"y");ot(this,"sx");ot(this,"sy");if(t.length!==i.length+1)throw new Error("SemanticZooming: nodes.length !== edgesY.length");for(let a=0;a<t.length;a++)if(t[a].length!==e.length+1)throw new Error("SemanticZooming: nodes[i].length !== edgesX.length");this.nodes=t,this.edgesX=e,this.edgesY=i,this.x=0,this.y=0,this.sx=r,this.sy=s}hit(t,e){let i=this.x,r=this.y;for(;;){let s=i,a=r;if(i<this.edgesX.length&&this.edgesX[i].compare(t)>=0&&(s+=1),i>0&&this.edgesX[i-1].compare(t)<0&&(s-=1),r<this.edgesY.length&&this.edgesY[r].compare(e)>=0&&(a+=1),r>0&&this.edgesY[r-1].compare(e)<0&&(a-=1),s===i&&a===r)break;i=s,r=a}return[i,r]}update(t,e){const[i,r]=this.hit(t,e);return this.x!==i||this.y!==r?(this.x=i,this.y=r,!0):!1}getCurrentNode(){return this.nodes[this.y][this.x]}getSelectedFigureNode(){return this.nodes[this.sy][this.sx]}}const Rs=-.15,Bi=0,Is=new ZA([[{getSamplingBBoxes(n,t,e){const i=n.name.fontSize,r=n.name.visualWidth()+i*(1+Bi),s=i,a=r*t,o=s*e;n.width=r,n.height=s;const c=Math.min(5,a*.1),l=Math.min(5,o*.1),u=[{x1:n.initialPosition.x1-c,y1:n.initialPosition.y1-l,x2:n.initialPosition.x1+a+c,y2:n.initialPosition.y1+o+l}];return re.get().length>0,u},updateWidthAndHeight(n){},render(n){const t=dr.get().get(n.datum.id),e=Te.value===null?void 0:Te.value[t],i=n.name,r=i.visualWidth(),s=i.fontSize,a=n.datum.id,o=!!Wt.get().find(c=>c.id===a);n.render({mask:o,name:{x:s*(1+Bi),width:r,y:s*Rs,height:s,context:e},selectedFiguresBar:{y:0,height:s,context:e},statusIcon:{x:0,y:0,width:s,height:s}})}}],[{getSamplingBBoxes(n,t,e){const i=n.name.fontSize,r=n.name.visualWidth()+i*(1+Bi),s=r*t,a=i*e;n.height=a/e;const o=Math.min(5,s*.1),c=Math.min(5,a*.1),l=[{x1:n.initialPosition.x1-o,y1:n.initialPosition.y1-c,x2:n.initialPosition.x1+s+o,y2:n.initialPosition.y1+a+c}];return re.get().length>0,l},updateWidthAndHeight(n){const t=n.position;n.width=t.x2-t.x1},render(n){const t=dr.get().get(n.datum.id),e=Te.value===null?void 0:Te.value[t],i=n.name,r=i.visualWidth(),s=i.fontSize,a=n.datum.id,o=!!Wt.get().find(c=>c.id===a);n.render({mask:o,name:{x:s*(1+Bi),width:r,y:s*Rs,height:s,context:e},selectedFiguresBar:{y:0,height:s,context:e},statusIcon:{x:0,y:0,width:s,height:s},line:{y:n.height-.5,height:1}})}}],[{getSamplingBBoxes(n,t,e){const i=n.name.fontSize,r=n.name.visualWidth()+i*(1+Bi),s=r*t,a=i*e,o=a*1.2,c=o+Be*1.2*e;n.height=c/e;const l=[{x1:n.initialPosition.x1,y1:n.initialPosition.y1,x2:n.initialPosition.x1+s,y2:n.initialPosition.y1+a},{x1:n.initialPosition.x1,y1:n.initialPosition.y1+o,x2:n.initialPosition.x2,y2:n.initialPosition.y1+c}];return re.get().length>0&&l.push({x1:n.initialPosition.x1-n.baseSize*.6*t,y1:n.initialPosition.y1,x2:n.initialPosition.x2,y2:n.initialPosition.y1+a}),l},updateWidthAndHeight(n){const t=n.position;n.width=t.x2-t.x1},render(n){const t=dr.get().get(n.datum.id),e=Te.value===null?void 0:Te.value[t],i=n.name,r=i.visualWidth(),s=i.fontSize,a=n.datum.id,o=!!Wt.get().find(h=>h.id===a),c=s,l=c*1.2,u=l+Be*1.2;n.render({mask:o,name:{x:s*(1+Bi),width:r,y:s*Rs,height:c,context:e},selectedFiguresBar:{y:0,height:c,context:e},statusIcon:{x:0,y:0,width:s,height:s},description:{y:l,height:u-l},line:{y:n.height-.5,height:1}})}}],[{getSamplingBBoxes(n,t,e){const i=n.name.fontSize,r=n.name.visualWidth()+i*(1+Bi),s=r*t,a=i*e,o=a*1.2,c=o+Be*1.2*e,l=c+i*.1*e,u=l+Be*e;n.height=u/e;const h=[{x1:n.initialPosition.x1,y1:n.initialPosition.y1,x2:n.initialPosition.x1+s,y2:n.initialPosition.y1+a},{x1:n.initialPosition.x1,y1:n.initialPosition.y1+o,x2:n.initialPosition.x2,y2:n.initialPosition.y1+u}];return re.get().length>0&&h.push({x1:n.initialPosition.x1-i*.6*t,y1:n.initialPosition.y1,x2:n.initialPosition.x2,y2:n.initialPosition.y1+a}),h},updateWidthAndHeight(n){const t=n.position;n.width=t.x2-t.x1},render(n){const t=dr.get().get(n.datum.id),e=Te.value===null?void 0:Te.value[t],i=n.name,r=i.visualWidth(),s=i.fontSize,a=n.datum.id,o=!!Wt.get().find(f=>f.id===a),c=s,l=c*1.2,u=l+Be*1.2,h=u+s*.1,p=h+Be;n.render({mask:o,name:{x:s*(1+Bi),width:r,y:s*Rs,height:c,context:e},selectedFiguresBar:{y:0,height:c,context:e},statusIcon:{x:0,y:0,width:s,height:s},description:{y:l,height:u-l},eventLine:{y:h,height:p-h}})}}],[{getSamplingBBoxes(n,t,e){const i=n.name.fontSize,r=n.name.visualWidth()+i*(1+Bi),s=r*t,a=i*e,o=a*1.2,c=o+Be*1.2*e,l=c+i*.1*e,u=l+Be*e,h=u+Be*e;n.height=h/e;const p=[{x1:n.initialPosition.x1,y1:n.initialPosition.y1,x2:n.initialPosition.x1+s,y2:n.initialPosition.y1+a},{x1:n.initialPosition.x1,y1:n.initialPosition.y1+o,x2:n.initialPosition.x2,y2:n.initialPosition.y1+h}];return re.get().length>0&&p.push({x1:n.initialPosition.x1-i*.6*t,y1:n.initialPosition.y1,x2:n.initialPosition.x2,y2:n.initialPosition.y1+a}),p},updateWidthAndHeight(n){const t=n.position;n.width=t.x2-t.x1},render(n){const t=dr.get().get(n.datum.id),e=Te.value===null?void 0:Te.value[t],i=n.name,r=i.visualWidth(),s=i.fontSize,a=n.datum.id,o=!!Wt.get().find(x=>x.id===a),c=s,l=c*1.2,u=l+Be*1.2,h=u+s*.1,p=h+Be,f=p+Be;n.render({mask:o,name:{x:s*(1+Bi),width:r,y:s*Rs,height:c,context:e},selectedFiguresBar:{y:0,height:c,context:e},statusIcon:{x:0,y:0,width:s,height:s},description:{y:l,height:u-l},locationAreaChart:{y:h,height:p-h},eventLine:{y:p,height:f-p}})}}],[{getSamplingBBoxes(n,t,e){const i=n.name.fontSize,r=n.name.visualWidth()+i*(1+Bi),s=n.initialPosition,a=r*t,o=s.y2-s.y1,c=i*e,l=c*1.2,u=l+Be*1.2*e,h=u+i*.1*e,p=h+Be*e,f=p+Be*e,x=o;n.height=Math.max(x,f)/e;const y=[{x1:n.initialPosition.x1,y1:n.initialPosition.y1,x2:n.initialPosition.x1+a,y2:n.initialPosition.y1+c},{x1:n.initialPosition.x1,y1:n.initialPosition.y1+l,x2:n.initialPosition.x2,y2:n.initialPosition.y1+x}];return re.get().length>0&&y.push({x1:n.initialPosition.x1-i*.6*t,y1:n.initialPosition.y1,x2:n.initialPosition.x2,y2:n.initialPosition.y1+c}),y},updateWidthAndHeight(n){const t=n.position;n.width=t.x2-t.x1},render(n){const t=dr.get().get(n.datum.id),e=Te.value===null?void 0:Te.value[t],i=n.name,r=i.visualWidth(),s=i.fontSize,a=n.datum.id,o=!!Wt.get().find(d=>d.id===a),c=n.height,l=s,u=l*1.2,h=u+Be*1.2,p=h+s*.1,f=p+Be,x=f+Be,y=c;n.render({mask:o,name:{x:s*(1+Bi),width:r,y:s*Rs,height:l,context:e},selectedFiguresBar:{y:0,height:l,context:e},statusIcon:{x:0,y:0,width:s,height:s},description:{y:u,height:h-u},locationAreaChart:{y:p,height:f-p},eventLine:{y:f,height:x-f},events:{y:x,height:y-x}})}}]],[],[{mode:"size",compare(n){return n}},{mode:"size",compare(n){return n-15}},{mode:"size",compare(n){return n-90}},{mode:"size",compare(n){return n-110}},{mode:"size",compare(n){return n-150}}],0,5),qy=T5;class QA{constructor(t){ot(this,"props");ot(this,"emit",null);ot(this,"root",null);ot(this,"pixi",null);ot(this,"konva",null);ot(this,"eventsContainer",null);ot(this,"eventsGroup",null);ot(this,"labels");ot(this,"id2label");ot(this,"visibleLabels",[]);ot(this,"sampleLabels",[]);ot(this,"zooming");ot(this,"totalHeight",0);ot(this,"lineNumber",0);ot(this,"domainX",Yi);ot(this,"domainY",Pg);ot(this,"rangeX",[0,0]);ot(this,"rangeY",[0,0]);ot(this,"originScaleX",du().domain(Yi));ot(this,"originScaleY",ji().domain(Pg));ot(this,"resolution",eC);ot(this,"layout");ot(this,"_zoom",null);ot(this,"stopPropagation",!1);this.props=Object.assign({x:0,y:0,width:0,height:0,data:[]},t),this.rangeX=[0,this.width],this.rangeY=[0,this.height],this.originScaleX.range(this.rangeX),this.originScaleY.range(this.rangeY),this.zooming=Is.getCurrentNode();const e=this.props.data.map((o,c)=>new qu(o,c,this)),i=new Map;for(let o=0,c=e.length,l;o<c;++o)l=e[o],i.set(l.datum.id,l);this.labels=e,this.id2label=i;const[r,s]=na.get(),a=qy[r].call(s);this.layout=new VA(e,this.width,this.height,{height:1,labelHeight:"auto",labelLineHeight:"auto",getX:o=>o.datum.time.map(c=>c.getTime())},a.lineNumber,a.singleLineNumber,a.order,a.key),this.applyLayout()}get width(){return this.props.width}get height(){return this.props.height}get baseSize(){return Math.min(this.width,this.height)/50}get scaleX(){return du().domain(this.domainX).range(this.rangeX)}get scaleY(){return ji().domain(this.domainY).range(this.rangeY)}get kx(){return(this.originScaleX.domain()[1].getTime()-this.originScaleX.domain()[0].getTime())/(this.domainX[1].getTime()-this.domainX[0].getTime())}get ky(){return(this.originScaleY.domain()[1]-this.originScaleY.domain()[0])/(this.domainY[1]-this.domainY[0])}async setRoot(t){return this.root=t,await this._initialize(),this}setEmit(t){return this.emit=t,this}updateContainer(){this.root!==null&&(this.root.setAttributeNS("http://www.w3.org/2000/svg","transform",`translate(${this.props.x}, ${this.props.y})`),this.root.setAttribute("x",this.props.x.toString()),this.root.setAttribute("y",this.props.y.toString()),this.root.setAttribute("width",this.props.width.toString()),this.root.setAttribute("height",this.props.height.toString()))}updateScale(t,e,i){const r=this.kx,s=this.ky;e=e??this.scaleX,i=i??this.scaleY;for(const u of t)u.updateScale(e,i,r,s,this.rangeX,this.rangeY);const a=re.get(),o=this.id2label,c=0;this.props.width;const l=this.props.height;for(let u=0,h=a.length,p,f,x,y,d;u<h;++u)p=a[u],f=o.get(p.id),x=f.position,y=x.y1,d=f.height,y<=c&&(x.y1=c,x.y2=c+d),y>=l-d&&(x.y1=l-d,x.y2=l);Ze.get()==="focused"?t.forEach(u=>{u.width=u.position.x2-u.position.x1,u.height=u.position.y2-u.position.y1}):t.forEach(u=>{this.zooming.updateWidthAndHeight(u)})}addSelectedFigures(t){const e=[],i=re.get(),r=this.id2label,s=new Set,a=this.zooming,o=this.kx,c=this.ky,l=this.originScaleX,u=this.originScaleY,h=(l.domain()[1].getTime()-l.domain()[0].getTime())/(l.range()[1]-l.range()[0]),p=(u.domain()[1]-u.domain()[0])/(u.range()[1]-u.range()[0]),f=h/o,x=p/c;for(let y=0,d=t.length,_;y<d;++y)_=t[y],s.add(_.datum.id);for(let y=0,d=i.length,_,g,m;y<d;++y)_=i[y],g=_.id,m=r.get(g),s.has(g)?m.level=0:(a.getSamplingBBoxes(m,f,x),a.updateWidthAndHeight(m),e.push(m));return e.concat(t)}updateWeights(){const t=bu.get(),e=t.maxWeight-t.minWeight||1,i=dr.get();for(const r of this.labels){const s=i.get(r.datum.id);r.__baseSize__=void 0,r.weight=(t[s].weight-t.minWeight)/e,r.name=new jo(r.datum.name,r.baseSize)}}renderLabel(t){const e=Ze.get(),i=Wt.get();e==="global"?this.zooming.render(t):i.find(r=>r.id===t.datum.id)!==void 0?Is.getSelectedFigureNode().render(t):t.renderAsRelatedFigure()}renderLabels(t,e=0){this.zooming;const i=Is.y,r=re.get(),s=new Set(r.map(l=>l.id));for(let l of this.labels)l.container.zIndex=0;for(let l=0,u=t.length,h;l<u;l++)h=t[l],h.container.zIndex=s.has(h.datum.id)?u+1:u-l;if(i>=5)for(let l=0,u=t.length;l<u;++l){const h=t[l];h.group.zIndex(s.has(h.datum.id)?u+1:u-l)}const{enter:a,update:o,exit:c}=KA(this.visibleLabels,t,l=>l.datum.id);if(e===0){for(const l of a){const u=t[l];u.visible=!0,this.renderLabel(u)}for(const l of o){const u=t[l];u.visible=!0,this.renderLabel(u)}for(const l of c){const u=this.visibleLabels[l];u.visible=!1}}else{const l=tl.timeline();for(const u of a){const h=t[u];h.visible=!0,h.alpha=0,this.renderLabel(h),l.to(h,{alpha:h.getAlpha(),duration:e/1e3},0)}for(const u of o){const h=t[u],p=h.position;h.position=Object.assign({},h.lastPosition),this.renderLabel(h),l.to(h.position,{...p,duration:e/1e3,onUpdate:()=>{this.renderLabel(h)}},0)}for(const u of c){const h=this.visibleLabels[u];l.to(h,{alpha:0,duration:e/1e3,onComplete:()=>{h.visible=!1}},0)}return l}this.visibleLabels=t}renderLinks(t){const e=Wt.get(),i=re.get(),r=new Set(e.map(g=>g.id)),s=e.map(g=>i.findIndex(m=>m.id===g.id)),a=Te.get(),o=this.id2label,c=this.pixi.stage,l=_5;let u=c.getChildByLabel("links");if(u||(u=new Ue,u.label="links",u.zIndex=1/0,c.addChild(u)),e.length===0||t===void 0||t.length===0){u.visible=!1;return}u.visible=!0;const h=[],p=[];t.forEach((g,m)=>{const v=g.datum,S=a[m];if(S)for(let M=0,w=s.length;M<w;++M){const L=s[M],P=e[M];S[L].events.forEach(k=>{var T;if(!k.time)return;const D=[];k.relations.length>0&&k.relations.forEach(A=>{D.push({content:A.description,rank:A.score})}),k.posts.length>0&&D.push({content:`可能同時任職於${k.posts.map(A=>A[0].name).join(", ")}`,rank:0}),k.locations.length>0&&D.push({content:`可能同時出現在${k.locations.map(A=>A.name).join(", ")}`,rank:0});const C={id:`${v.id}-${P.id}-${(T=k.time)==null?void 0:T.getTime()}`,time:k.time,source:v.id,target:P.id,type:"",descriptions:D,description:"",score:Math.round(D.reduce((A,E)=>A+E.rank,0)/Math.max(1,D.filter(A=>A.rank>0).length))};if(r.has(v.id)){if(v.id===P.id)return;p.push(C)}else h.push(C)})}});let f=this.konva.findOne("#link-tooltip");f||(f=new he.Group({id:"link-tooltip"}),f.hide(),this.konva.add(f));const[x,y]=this.scaleX.range();fr(u).selectAll("link").data(h,g=>g.id).join("container").attr("label","link").each((g,m,v)=>{const S=v[m],M=o.get(g.target),w=o.get(g.source).position,L=M.position,P=(w.x1+w.x2)*.5,N=(L.y1>w.y1,w.y2),k=this.scaleX(g.time),D=M.getEventLineY(),C=L.y1+(L.y1>w.y1?D[0]:D[1]),T=P,A=(N+C)*.5,E=k,I=(N+C)*.5,B=l.get(g.score)??l.get(0);let $=S.getChildByLabel("link-mask");$===null&&($=new oe,$.label="link-mask",$.alpha=0,$.interactive=!1,$.eventMode="none",S.addChild($));const Y=Math.abs(C-N)*.2;$.clear().circle(P,N,Y).fill("#fff"),$.alpha=0;let q=S.getChildByLabel("link-line");q===null&&(q=new oe,q.label="link-line",S.addChild(q)),q.clear().moveTo(P,N).bezierCurveTo(T,A,E,I,k,C).stroke({color:B,width:1});let G=S.getChildByLabel("link-interactive");G===null&&(G=new oe,G.label="link-interactive",G.cursor="pointer",G.eventMode="static",G.alpha=0,G.on("mouseover",F=>{const U=F.nativeEvent.offsetX,j=F.nativeEvent.offsetY;f.position({x:U,y:j}),f.removeChildren();const et=new he.Rect({x:0,y:0,width:0,height:0,fill:En,cornerRadius:5});f.add(et);const V=new he.Text({text:o.get(g.source).datum.name+"-"+o.get(g.target).datum.name,fontSize:14,fontStyle:"bold",padding:5,fill:B});f.add(V);let tt=V.height(),z=0;Kr(f).selectAll(".content").data(g.descriptions,H=>H.content).join("text").each((H,X,K)=>{const rt=K[X],nt=l.get(H.rank);rt.name("content").text(H.content).fontSize(12).padding(5).fill(nt),z=Math.max(z,rt.width())}),z>150&&(z=150),Kr(f).selectAll(".content").each((H,X,K)=>{const rt=K[X];rt.y(tt).width(z),tt+=rt.height()}),et.width(Math.max(z,V.width())).height(tt),f.show()}),G.on("mouseout",()=>{f.hide()}),G.on("click",()=>{const F=M.datum.events.findIndex(U=>{var j,et;return((j=U.time)==null?void 0:j.getTime())===((et=g.time)==null?void 0:et.getTime())&&U.relations.findIndex(V=>V.id===g.source)>=0});F<0||Xn.set({figure:M.datum,idx:F})}),S.addChild(G)),G.clear().moveTo(P,N).bezierCurveTo(T,A,E,I,k,C).stroke({color:B,width:5}),k<x||k>y?(q.mask=$,G.mask=$):(q.mask=null,G.mask=null),q.alpha=.3});const[d,_]=this.scaleX.domain().map(g=>g.getTime());fr(u).selectAll("link-selected").data(p.filter(g=>g.time.getTime()>d&&g.time.getTime()<_),g=>g.id).join("container").attr("label","link-selected").each((g,m,v)=>{const S=v[m],M=o.get(g.source),w=o.get(g.target),L=M.position,P=w.position,N=this.scaleX(g.time),k=M.getEventLineY(),D=L.y1+(L.y1>P.y1?k[0]:k[1]),C=N,T=w.getEventLineY(),A=P.y1+(P.y1>L.y1?T[0]:T[1]),E=Math.abs(A-D),I=N-E*.2,B=C-E*.2,$=D+(A-D)*.3,Y=A+(D-A)*.3,q=l.get(g.score);let G=S.getChildByLabel("link-line");G===null&&(G=new oe,G.label="link-line",S.addChild(G)),G.clear().moveTo(N,D).bezierCurveTo(I,$,B,Y,C,A).stroke({color:q,width:1});let F=S.getChildByLabel("link-interactive");F===null&&(F=new oe,F.label="link-interactive",F.cursor="pointer",F.eventMode="static",F.on("mouseover",U=>{const j=U.nativeEvent.offsetX,et=U.nativeEvent.offsetY;f.position({x:j,y:et}),f.removeChildren();const V=new he.Rect({x:0,y:0,width:0,height:0,fill:En,cornerRadius:5});f.add(V);const tt=new he.Text({text:o.get(g.source).datum.name+"-"+o.get(g.target).datum.name,fontSize:14,fontStyle:"bold",padding:5,fill:q});f.add(tt);let z=tt.height(),H=0;Kr(f).selectAll(".content").data(g.descriptions,X=>X.content).join("text").each((X,K,rt)=>{const nt=rt[K],Q=l.get(X.rank);nt.name("content").text(X.content).fontSize(12).padding(5).fill(Q),H=Math.max(H,nt.width())}),H>150&&(H=150),Kr(f).selectAll(".content").each((X,K,rt)=>{const nt=rt[K];nt.y(z).width(H),z+=nt.height()}),V.width(Math.max(H,tt.width())).height(z),f.show()}),F.on("mouseout",()=>{f.hide()}),S.addChild(F)),F.clear().moveTo(N,D).bezierCurveTo(I,$,B,Y,C,A).stroke({color:q,width:5}),F.alpha=0})}render(t=!0,e=!0,i=0){e&&this.applyLayout();const r=0,s=this.scaleY(this.layout.globalConfig.labelLineHeight)-this.scaleY(0);Is.update(r,s),this.zooming=Is.getCurrentNode();let a=t?this.sampling():this.visibleLabels;a=this.addSelectedFigures(a),this.updateScale(a),this.renderLabels(a,i),this.renderLinks(Ze.get()==="focused"?a:void 0)}applyLayout(t,e){const i=Ze.get(),r=this.layout;t=t??this.scaleX,e=e??this.scaleY;const s=t.invert(this.width*.5).getTime(),a=e.invert(this.height*.5);i==="global"?(r.interpolate(this._zoom,[s,a],i),this.totalHeight=r.globalConfig.totalHeight*this.props.height,this.lineNumber=r.globalConfig.lineNumber):(r.solve_focused(t,this.originScaleY),r.interpolate(this._zoom,[s,a],i))}sophisticatedZoom(t,e,i=0){this.stopPropagation=!0;const r=this.getTransform(t,e),s=this._zoom.getTransform(),a=this.labels.slice(),o=tl.timeline();s.t=0,s.t=1;const c=r.rescaleX(this.originScaleX);r.rescaleY(this.originScaleY),this.layout.globalPositions,this.layout.labels=a,this.layout.solve_focused(c,this.originScaleY),this.layout.focusedPositions,console.log("?????"),o.to(s,{...r,duration:i/1e3,onUpdate:()=>{s.t,this._zoom.setTransform(s),this.domainX=s.rescaleX(this.originScaleX).domain(),this.domainY=s.rescaleY(this.originScaleY).domain(),this.render(!0,!1)},onComplete:()=>{}})}updateLabels(t,e=700){this.labels=t;const i=Ze.get(),r=Wt.get();if(i==="focused"){const s=this.layout;s.labels=t,s.solve_global(),s.solve_single(),this.totalHeight=s.getTotalHeight(i)*this.props.height,this.lineNumber=s.globalConfig.lineNumber,this.updateSampleLabels(t);const a=[Math.min(...r.map(o=>o.time[0].getTime())),Math.max(...r.map(o=>o.time[1].getTime()))];a[0]=new Date(a[0]-(a[1]-a[0])*.1),a[1]=new Date(a[1]+(a[1]-a[0])*.1),this.zoom(a,this.originScaleY.domain(),e),setTimeout(()=>{this.totalHeight=s.getTotalHeight(i)*this.props.height,this.lineNumber=s.globalConfig.lineNumber,this._listenZoom()},e)}else{const s=this.layout;s.labels=t,s.solve_global(),s.solve_single(),this.totalHeight=s.getTotalHeight(i)*this.props.height,this.lineNumber=s.globalConfig.lineNumber,this.updateSampleLabels(void 0),this._listenZoom()}}updateSampleLabels(t){if(t!==void 0){this.sampleLabels=t;return}const e=Te.get(),i=this.labels;if(e!==null){const r=re.get();t=new Array(e.length).fill(0).map((a,o)=>o).sort((a,o)=>e[a]===null&&e[o]===null?r.indexOf(i[a].datum)-r.indexOf(i[o].datum):e[a]===null?-1:e[o]===null?1:e[o].weight-e[a].weight||i[o].weight-i[a].weight).map(a=>i[a])}else t=i.slice().sort((r,s)=>s.weight-r.weight);this.sampleLabels=t}sampling(){if(Ze.get()==="focused")return this.labels.slice();let t=this.sampleLabels;const e=this.kx,i=this.ky,r=(this.originScaleX.domain()[1].getTime()-this.originScaleX.domain()[0].getTime())/(this.originScaleX.range()[1]-this.originScaleX.range()[0]),s=(this.originScaleY.domain()[1]-this.originScaleY.domain()[0])/(this.originScaleY.range()[1]-this.originScaleY.range()[0]),a=r/e,o=s/i,c=this.scaleX.domain().map(f=>f.getTime()),l=this.scaleY.domain();t=t.filter(f=>f.initialPosition.x2>=c[0]&&f.initialPosition.x1<=c[1]&&f.initialPosition.y2>=l[0]&&f.initialPosition.y1<=l[1]);const u=new qA(c,l,[600,300],1),[h,p]=u.solve(t,f=>this.zooming.getSamplingBBoxes(f,a,o));t=h;for(let f=0;f<t.length;f++)t[f].level=p[f];return t}getTransform(t,e){t=t??this.domainX,e=e??this.domainY;const[i,r]=(()=>{const[o,c]=t.map(f=>this.originScaleX(f)),[l,u]=this.originScaleX.range(),h=(u-l)/(c-o);return[l-h*o,h]})(),[s,a]=(()=>{const[o,c]=e.map(f=>this.originScaleY(f)),[l,u]=this.originScaleY.range(),h=(u-l)/(c-o);return[l-h*o,h]})();return new Mr(i,s,r,a)}zoom(t,e,i=0){const r=this.getTransform(t,e);this.stopPropagation=!0,this._zoomEvent(r,i)}zoomToLabel(t,e=1e3){const{x1:i,x2:r,y1:s,y2:a}=this.layout.globalPositions.get(t.datum.id),o=(r-i)*.3,c=(a-s)*2,l=[new Date(i-o),new Date(r+o)],u=[s-c,a+c];this.zoom(l,u,e)}relayout(t="default",e,i=500){var o;const r=qy[t].call(e);this.layout.updateConfig(r.lineNumber,r.singleLineNumber,r.order,r.key),this.applyLayout();let s=this.sampling();s=this.addSelectedFigures(s),this.updateScale(s),this.renderLabels(s,i);const a=Number.isNaN(this.lineNumber)?400:Math.max(400,200/(this.totalHeight/this.lineNumber));(o=this._zoom)==null||o.scaleExtentY([1,a])}async _initialize(){const t=this.root;if(t===null)return;const e=this.width,i=this.height,r=this.pixi||new xv;await r.init({resolution:(window.devicePixelRatio||1)*this.resolution,preserveDrawingBuffer:!0,autoDensity:!0,antialias:!0,background:16777215,width:e,height:i});const s=new he.Stage({container:t,width:e,height:i}),a=new he.Layer;return s.add(a),this.konva=a,this.eventsGroup=new he.Group({name:"events-group",listening:!1}),a.add(this.eventsGroup),t.querySelector(".konvajs-content").style.setProperty("pointer-events","none"),new Promise(c=>{setTimeout(()=>{const l=this.props.width,u=this.props.height,h=t.insertBefore(r.canvas,t.firstChild);h.style.width=`${l}px`,h.style.height=`${u}px`,h.style.position="absolute",this.pixi=r,w5.set(r),Ye.init(r);for(const p of Object.values(SM))p.init();this.labels.forEach(p=>{a.add(p.group);const f=r.stage.addChild(p.container);f.__data__=p.datum,f.alpha=0}),this.eventsContainer=new Ue,this.eventsContainer.label="events-container",this.eventsContainer.interactive=!0,this.eventsContainer.zIndex=Number.MAX_VALUE,r.stage.addChild(this.eventsContainer),this.updateContainer(),this.updateWeights(),this._listenInteraction(),this._listenZoom(),c()},0)})}_listenInteraction(){Wt.listen(()=>{Ze.get()==="global"&&this.layout.solve_single()}),wr.listen(()=>{this.layout.solve_single()}),bu.listen(()=>{this.updateWeights(),this.render(!0)}),Te.subscribe(()=>{this.updateSampleLabels()}),na.listen(()=>{const[t,e]=na.value;this.relayout(t,e)}),De.listen(()=>{this.visibleLabels.forEach(t=>{t.renderLocationIcon({forceFlush:!0})}),Is.y>1&&this.visibleLabels.forEach(t=>{t.renderLocationLine({forceFlush:!0})})}),Xn.listen(()=>{const t=Ze.get(),e=Wt.get();for(const i of this.visibleLabels)t==="focused"&&e.find(r=>r.id===i.datum.id)===void 0||i.renderEvents({})}),Ze.listen(()=>{}),ce.listen(t=>{const e=this.id2label;this.updateLabels(t.map(i=>e.get(i.id))),this.render(!0)}),Te.listen(()=>{this.render(!0)}),$0.on("book-mark",t=>{this.stopPropagation=!0,this._zoomEvent(t,800)}),is.listen(()=>{this.render(!0)})}_listenZoom(){const t=Ze.get(),e=Math.max(this.props.height,this.totalHeight),i=t==="global"?Number.isNaN(this.lineNumber)?400:this.height/3.2/(this.totalHeight/this.lineNumber):1;if(this.layout.Ty=i**.85,this._zoom!==null)this._zoom.extent([[0,0],[this.props.width,this.props.height]]).translateExtent([[0,0],[this.props.width,e]]).scaleExtentY([1,i]);else{const r=IC().extent([[0,0],[this.props.width,this.props.height]]).scaleExtentX([1,1/0]).scaleExtentY([1,i]).axis(["x","y"]).translateExtent([[0,this.props.height-e],[this.props.width,e]]).filter(s=>!s.ctrlKey);r.on("zoom",s=>{!this.stopPropagation&&this._zoomEvent(s.transform,0,!0),this.stopPropagation=!1}),r.on("end",s=>{}),this._zoom=r,It(this.root).call(r)}}_zoomEvent(t,e=0,i=!0,r=null){if(C5.set(t),!this.stopPropagation)this.domainX=t.rescaleX(this.originScaleX).domain(),this.domainY=t.rescaleY(this.originScaleY).domain(),this.render(i),this.emit&&this.emit.zoom(this.domainX,this.domainY);else if(e>0){const s=this._zoom.getTransform();tl.timeline().to(s,{...t,duration:e/1e3,onUpdate:()=>{this._zoom.setTransform(s),this.domainX=s.rescaleX(this.originScaleX).domain(),this.domainY=s.rescaleY(this.originScaleY).domain(),this.render(i)},onComplete:()=>{!i&&this.render(!0),r&&r()}})}else this._zoom.setTransform(t),this.domainX=t.rescaleX(this.originScaleX).domain(),this.domainY=t.rescaleY(this.originScaleY).domain(),this.render(!0),r&&r()}}function i4(n,t){var r,s;t=t||(a=>a.time);let e=Mc(n.flatMap(t)),i=(((r=e[1])==null?void 0:r.getTime())??0)-(((s=e[0])==null?void 0:s.getTime())??0);return[Number(e[0])-i*.03,Number(e[1])+i*.03]}function JA(n,t,e=18,i=18,r=20){const s={sec:[1e3,d=>d.getSeconds()!==0],min:[6e4,d=>d.getMinutes()!==0],hour:[36e5,d=>d.getHours()!==0],day:[864e5,d=>d.getDate()!==1],mon:[2592e6,d=>d.getMonth()!==0],year:[31536e6,d=>d.getFullYear()%10!==0],year10:[31536e7,d=>d.getFullYear()%100!==0],year100:[31536e8,d=>d.getFullYear()%1e3!==0],year1000:[31536e9,d=>!0]},a={sec:[d=>d.getMilliseconds()===0,"1s"],min:[d=>d.getSeconds()===0,"1M"],hour:[d=>d.getMinutes()===0,"1h"],day:[d=>d.getHours()===0,"1d"],mon:[d=>d.getDate()===1,"1m"],year:[d=>d.getMonth()===0,"1y"],year10:[d=>d.getFullYear()%10===0,"10y"],year100:[d=>d.getFullYear()%100===0,"100y"],year1000:[d=>d.getFullYear()%1e3===0,"1000y"]},o={sec:d=>`${d.getSeconds()}秒`,min:d=>`${d.getMinutes()}分`,hour:d=>`${d.getHours()}时`,day:d=>`${d.getDate()}日`,mon:d=>`${d.getMonth()+1}月`,year:d=>`${d.getFullYear()<0?"前":""}${Math.abs(d.getFullYear())||1}年`,year10:d=>`${d.getFullYear()<0?"前":""}${Math.abs(d.getFullYear())||1}年`,year100:d=>`${d.getFullYear()<0?"前":""}${Math.abs(d.getFullYear())||1}年`,year1000:d=>`${d.getFullYear()<0?"前":""}${Math.abs(d.getFullYear())||1}年`},c=Object.keys(s);let l,u,h=n.flatMap(t),p=i4(n),f=p[1]-p[0];for(let d in c){let _=c[d];if(f<=s[_][0]*r){u=Number(d);break}}u===void 0&&(u=c.length-1);for(let d in c){let _=c[d];if(h.some(s[_][1])){l=Number(d);break}}l===void 0&&(l=0),u<l&&([u,l]=[l,u]),u>l+2&&(l=u-2);let x=[],y=c.slice(l,u+1).reverse();return Math.max(.5,1-y.length*.25),y.map((d,_)=>{d.startsWith("year")||(x=x.slice(-1));let g=x.slice(),m=a[d],v=.85**_;return x.push(m[0]),pr.create().is(S=>!g.some(M=>M(S))&&m[0](S),m[1]).tickLength(i*v).fontsize(e*v).tickFormat(o[d])})}function tE(n){const t=/^(-)?(\d+)[-/年]?((\d+)[-/月]?((\d+)[日]?)?)?$/,e=n.match(t);if(e===null)throw new Error("Invalid date string: "+n+".");const r=(e[1]===void 0?1:-1)===1?Number(e[2]):-Number(e[2]),s=Number(e[4]??1),a=Number(e[6]??1);return new Date(r,s-1,a)}function eE(n){const t=n.getFullYear(),e=n.getMonth()+1,i=n.getDate();return i===1?e===1?`${t}年`:`${t}年${e}月`:`${t}年${e}月${i}日`}const Br={timeExtent:i4,data2ticks:JA,string2Date:tE,date2string:eE};class l1{constructor(){ot(this,"time");ot(this,"offsetX",0);ot(this,"offsetY",0);ot(this,"importance",1);ot(this,"debug",!0)}}const iE=new Ou,Nd="#6f4922";class sl extends l1{constructor(){super();ot(this,"text");ot(this,"subTimelineWidth");ot(this,"subTimelineHeight");ot(this,"opacity",1);ot(this,"textAlignment","center");ot(this,"textBaseline","center");ot(this,"fontSize",-1);ot(this,"paddingVertical",-1)}static create(){return new sl}attr(e,i){return i===void 0?this[e]:(this[e]=i,this)}build(){const e=this.subTimelineWidth,i=this.subTimelineHeight,r=this.text,s=this.opacity,a=this.fontSize===-1?i*.4:this.fontSize,o=this.paddingVertical===-1?i*.2:this.paddingVertical,c=iE.visualWidth(r,a)+a*.75,l=this.importance;return Bu.create().attr("time",this.time).attr("height",i).attr("importance",l).attr("description",this.debug?`[time range] ${r}`:"").content((u,h,p)=>{const f=p.getBoundingBox(h,[0,e]);if(u.save(),u.translate(f.x,f.y),u.globalAlpha=s,f.truncatedX1||(u.beginPath(),u.moveTo(0,o),u.lineTo(0,i-o),u.strokeStyle=Nd,u.lineWidth=1,u.stroke()),f.truncatedX2||(u.beginPath(),u.moveTo(f.width,o),u.lineTo(f.width,i-o),u.strokeStyle=Nd,u.lineWidth=1,u.stroke()),f.width>=c){const x=this.textBaseline,y=this.textAlignment,d=y==="center"?f.width*.5:y==="left"?o:f.width-o,_=x==="center"?f.height*.5:x==="top"?o:f.height-o;u.fillStyle=Nd,u.font=`${a}px Source`,u.textAlign=y,u.textBaseline=x==="center"?"middle":x==="top"?"hanging":"alphabetic",u.fillText(r,d,_)}u.restore()})}}const Fd=new Ou,Ky="#6f4922";class c1 extends l1{constructor(){super();ot(this,"text");ot(this,"type","其他");ot(this,"side","bottom");ot(this,"subTimelineWidth");ot(this,"subTimelineHeight");ot(this,"opacity",1);ot(this,"maxWidth",-1);ot(this,"maxLines",1)}static create(){return new c1}attr(e,i){return i===void 0?this[e]:(this[e]=i,this)}get fontSize(){return this.subTimelineHeight*.36}build(){const e=this.fontSize;this.subTimelineWidth;const i=this.subTimelineHeight,r=this.opacity,s=this.importance;let a,o,c;if(this.maxLines===1||this.maxWidth<=0)c=[this.text],a=Fd.visualWidth(this.text,e),o=e;else{if(this.maxWidth<=0)throw new Error("maxWidth must be greater than 0");c=Fd.wrap(this.text,this.maxWidth,this.maxLines,"...",e),a=c.length>1?this.maxWidth:Fd.visualWidth(c[0],e),o=c.length*e*1.2}return Bu.create().attr("time",this.time).attr("offsetY",i*.25).attr("importance",s).attr("width",a*1.2).attr("height",o).attr("description",this.debug?`[time point] text-${this.text}`:"").tick((l,u,h,p)=>{const f=p===void 0?"bottom":p.side,x=h.getBoundingBox(u);l.save(),l.translate(x.x,0),l.strokeStyle=Ky,l.lineWidth=1,l.globalAlpha=p.opacity??r,l.beginPath(),l.moveTo(x.width*.5,0),l.lineTo(x.width*.5,f==="top"?-i*.2:i*.2),l.stroke(),l.restore()}).content((l,u,h,p)=>{const f=p===void 0?"bottom":p.side,x=h.getBoundingBox(u),y=f==="top"?-x.height-e*1.2:0;l.save(),l.translate(x.x,x.y),l.globalAlpha=r,l.fillStyle=Ky,l.font=`${e}px Source`,l.textAlign="center",l.textBaseline="hanging",c.forEach((d,_)=>{l.fillText(d,x.width*.5,_*e*1.2+y)}),l.restore()})}}const Od=new Ou,nE="#6f4922",rE="#ab8c70";class u1 extends l1{constructor(){super();ot(this,"text");ot(this,"subTimelineWidth");ot(this,"subTimelineHeight");ot(this,"opacity",1);ot(this,"rangeOffsetY",0);ot(this,"side","top");ot(this,"maxWidth",-1);ot(this,"maxLines",1)}static create(){return new u1}attr(e,i){return i===void 0?this[e]:(this[e]=i,this)}build(){const e=this.subTimelineWidth,i=this.subTimelineHeight,r=this.opacity,s=i*.36,a=this.importance;let o,c,l;if(this.maxLines===1||this.maxWidth<=0)l=[this.text],o=Od.visualWidth(this.text,s),c=s;else{if(this.maxWidth<=0)throw new Error("maxWidth must be greater than 0");l=Od.wrap(this.text,this.maxWidth,this.maxLines,"...",s),o=l.length>1?this.maxWidth:Od.visualWidth(l[0],s),c=l.length*s*1.2}return Bu.create().attr("time",new Date((this.time[0].getTime()+this.time[1].getTime())/2)).attr("timeRange",this.time).attr("offsetY",i*.25).attr("importance",a).attr("width",o).attr("height",c).attr("description",this.debug?`[time range2] text-${this.text}`:"").tick((u,h,p,f)=>{const x=p.getBoundingBox(h,[0,e]),y=p.attr("timeRange"),d=0,_=this.side==="top"?this.rangeOffsetY:i-this.rangeOffsetY,g=x.height*.1,m=x.height*.1,v=h(y[1])-h(y[0]),S=x.height*.2,M=p.attr("width")??0;u.save(),u.translate(x.x+M*.5-v*.5,0),u.globalAlpha=f.opacity??r,u.fillStyle=rE,u.beginPath(),u.moveTo(d+g,_),u.lineTo(v-g,_),u.quadraticCurveTo(v,_,v,_+m),u.lineTo(v,_+S-m),u.quadraticCurveTo(v,_+S,v-g,_+S),u.lineTo(d+g,_+S),u.quadraticCurveTo(0,_+S,0,_+S-m),u.lineTo(0,_+m),u.quadraticCurveTo(0,_,d+g,_),u.closePath(),u.fill(),u.restore()}).content((u,h,p)=>{const f=p.getBoundingBox(h,[0,e]);u.save(),u.translate(f.x+f.width*.5,f.y),u.globalAlpha=r;for(let x=0;x<l.length;++x){const y=l[x];u.fillStyle=nE,u.font=`${s}px Source`,u.textAlign="center",u.textBaseline="hanging",u.fillText(y,0,x*s*1.2)}u.restore()})}}async function sE(n,t){const e=await fetch(n);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let i=e.headers.get("Content-Length");i||console.warn("Unable to retrieve Content-Length. Set default to 30,895,666"),i="30895666";let r=0;const s=e.body.getReader(),a=new ReadableStream({async pull(c){const{done:l,value:u}=await s.read();if(l){c.close();return}r+=u.byteLength,c.enqueue(u)}});return await new Response(a,{headers:e.headers}).json()}const Zy=ue(Er,n=>n==="en"?" A.D.":"年");async function aE(n,t=20){const e=t,i=Er.get()==="en",r=await Lc("./data/emperors.json").then(c=>c.map(l=>({name:l.name,en:l.en,start:Br.string2Date(l.start),end:Br.string2Date(l.end)}))),s=await Lc("./data/nianhao.json").then(c=>c.map(l=>({name:l.name,en:l.en,start:Br.string2Date(l.start),end:Br.string2Date(l.end)}))),a=await Lc("./data/events.json").then(c=>c.map(l=>l.time!==void 0?{event:l.event,en:l.en,time:Br.string2Date(l.time),importance:l.importance}:{event:l.event,en:l.en,time:[Br.string2Date(l.start),Br.string2Date(l.end)],importance:l.importance})),o=[{idx:-1,name:"事件",groupId:"g1",height:e,ticks:[],labels:[a.flatMap(c=>{if(c.time instanceof Date)return c1.create().attr("time",c.time).attr("importance",c.importance||1).attr("subTimelineWidth",n).attr("subTimelineHeight",e).attr("text",i?c.en:c.event).attr("opacity",1).build();{const l=c.event==="元丰改制"?5:0;return u1.create().attr("time",c.time).attr("importance",c.importance||1).attr("subTimelineWidth",n).attr("subTimelineHeight",e).attr("rangeOffsetY",l).attr("text",i?c.en:c.event).attr("opacity",1).build()}})],showBrush:!0,showMask:!0,side:"bottom"},{idx:-1,name:"帝王",groupId:"g1",height:e,ticks:[],labels:[r.flatMap(c=>sl.create().attr("text",i?c.en:c.name).attr("subTimelineWidth",n).attr("subTimelineHeight",e).attr("opacity",c.name==="五代十国"||c.name==="南宋"?.5:1).attr("time",[c.start,c.end]).build()).map(c=>c.attr("maxK",5)),r.flatMap(c=>sl.create().attr("text",i?c.en:c.name).attr("textBaseline","bottom").attr("textAlignment","left").attr("subTimelineWidth",n).attr("subTimelineHeight",e).attr("opacity",.3).attr("time",[c.start,c.end]).build()).map(c=>c.attr("minK",5)),s.flatMap(c=>sl.create().attr("text",i?c.en:c.name).attr("subTimelineWidth",n).attr("subTimelineHeight",e).attr("opacity",1).attr("time",[c.start,c.end]).build()).map(c=>c.attr("minK",5))],showBrush:!1,showMask:!0,maskType:"domain",side:"bottom"},{idx:-1,name:"年份",groupId:"g1",height:Math.max(e*1.2,0),ticks:[pr.create().is(c=>c.getFullYear()%100===0,"100y").tickLength(e*.25).fontsize(e*.4).tickFormat(c=>`${c.getFullYear()}${Zy.get()}`),pr.create().is(c=>c.getFullYear()%100!==0&&c.getFullYear()%10===0,"10y").tickLength(e*.2).fontsize(e*.32).tickFormat(c=>`${c.getFullYear()}${Zy.get()}`),pr.create().is(c=>c.getFullYear()%10!==0,"1y").tickLength(e*.15).fontsize(e*.24).tickFormat(c=>`${c.getFullYear()}`)],labels:[],showBrush:!1,showMask:!0,maskType:"domain",side:"bottom"},{idx:-1,name:"时间分布",groupId:"g1",height:Math.max(e*1.2,0),init(){const c={"10y":31536e7,"5y":15768e7,"1y":31536e6,"1m":2592e6},l=["10y","5y","1y","1m"],u=Yi,h=new Map;for(let x=0,y=l.length;x<y;++x){const d=l[x],_=pr.create().granularity(d).every(d).getTicks(u,"external").map(g=>g.getTime());h.set(d,_)}const p=ue(Si,x=>{const y=new Map;for(let d=0,_=l.length;d<_;++d){const g=l[d],m=h.get(g),v=m[0],S=new Int32Array(m.length-1);let M=0;for(let w=0,L=x.length;w<L;++w){const N=x[w].time,k=N[0].getTime(),D=N[1].getTime(),C=Math.floor((k-v)/c[l[d]]),T=Math.floor((D-v)/c[l[d]]);for(let A=C;A<T;++A)S[A]+=1}for(let w=0;w<S.length;++w)M=Math.max(M,S[w]);S.max=M,y.set(l[d],S)}return y}),f=ue(ce,x=>{const y=new Map;for(let d=0,_=l.length;d<_;++d){const g=l[d],m=h.get(g),v=m[0],S=new Int32Array(m.length-1);for(let M=0,w=x.length;M<w;++M){const P=x[M].time,N=P[0].getTime(),k=P[1].getTime(),D=Math.floor((N-v)/c[l[d]]),C=Math.floor((k-v)/c[l[d]]);for(let T=D;T<C;++T)S[T]+=1}y.set(l[d],S)}return y});return{granularities:c,ticksMap:h,allFigureBinsMap:p,figureBinsMap:f}},ticks:[],labels:[],labelsRenderer:function(c,l){const u=this.context,h=u.granularities,p=u.ticksMap,f=u.allFigureBinsMap.get(),x=u.figureBinsMap.get(),y=Object.keys(h),d=l(0);let _=0;for(let C=y.length;_<C;++_){const T=h[y[_]];if(l(T)-d<20)break}_===y.length&&(_=y.length-1);const g=y[_],m=p.get(g),v=f.get(g),S=x.get(g),M=v.max,[w,L]=l.domain().map(C=>C.getTime()),P=Z4(m,w),N=Math.min(e0(m,L),S.length),k=this.props.height,D=ji().domain([0,M]).range([0,k*.7]);c.save();for(let C=P;C<N;++C){const T=l(new Date(m[C])),A=l(new Date(m[C+1])),E=(T+A)/2,I=(A-T)*.8,B=E-I/2,$=D(v[C]),Y=D(S[C]),q=k;c.fillStyle=En,c.fillRect(B,q-$,I,$),c.fillStyle=Lt,c.fillRect(B,q-Y,I,Y)}c.restore()},showBrush:!1,showMask:!0,maskType:"domain",side:"bottom"},{idx:-1,name:null,groupId:"g1",height:3,ticks:[],labels:[],showBrush:!1,showMask:!0,side:"bottom"}];return o.height=e*2+Math.max(e*1.2,0)*2+3,o}async function oE(n){return[{id:"g1",domain:Yi,range:[0,n],effect:gn,brush:!0,scalable:!0,timelines:[]}]}function lE(n,t,e){const i={};t.forEach((r,s)=>{i[r.id]=s;let a=t.find(o=>o.effect===r.id);if(a!==void 0){let o=a;for(;o!==void 0;)o=t.find(c=>c.effect===o.id),a=o||a}a=a||r,r.scale=du().domain(a.domain).range([0,e]),r.originScale=r.scale.copy(),r.brushDomain=null,r.timelines=[]}),n.forEach((r,s)=>{let a=t[i[r.groupId]];r.g=a,r.idx=s,r.group=a,a.timelines.push(r)})}let cE=0;const uE={出生:2,死亡:2,教育:3,入仕:10,升職:7,降職:7,平調:6,罷官:10,特殊官職:9,最高官職:10,成就:4,其他:1};function Qy(n){let t=uE[n.type]??1;return n.__fromOtherFigure&&(t=.5),t}function Jy(n){return Math.sqrt(n.description.length*2)}function hE(n,t){let e=n.subtype.replace(/（.*?）/g,"").trim();if(e==="出生"||e==="死亡")return"其他";if(e.startsWith("教育"))return"教育";if(e.startsWith("入仕")||e==="官職變動-奪情或起復"||e==="皇帝-登基")return"入仕";if(e.startsWith("官職變動")){let i=n.posts.length>0?Math.max(...n.posts.map(s=>s.rank)):0;return Math.max(...t.map(s=>s.posts.length>0?Math.max(...s.posts.map(a=>a.rank)):0))===i?"最高官職":e==="官職變動-擢升"?"升職":e==="官職變動-貶謫"?"降職":e==="官職變動-主動辭官或致仕"||e==="官職變動-丁憂"||e==="皇帝-退位"?"罷官":"平調"}return e.startsWith("政績實踐")||e.startsWith("成就")?"成就":"其他"}async function dE(n){let t=0,e=0;const i=await Lc("./data/layout_importance.json");return await sE("./data/figures.json").then(s=>{if(s===void 0)throw new Error("Failed to load data.");const a=Er.get()==="en";let o=s.filter(l=>!Number.isNaN(Date.parse(l.birth))&&!Number.isNaN(Date.parse(l.death))).map((l,u)=>{const h=new Date(l.birth),p=new Date(l.death);e=Math.max(e,l.weight);const f=l.birthplace,x=l.events.map(d=>{const _=d.time===null?null:new Date(d.time);return{id:cE++,time:_,description:d.description,short_description:d.short_description,type:"",subtype:d.type,importance:1,size:1,locations:d.locations.filter(m=>m.coordinate!==null).map(m=>({id:m.id,name:m.name,time:_,coordinate:new Pi(m.coordinate[0],m.coordinate[1]),parents:m.hierarchy})),posts:d.posts.map(m=>({id:m.id,time:_,name:a?m.en_name:m.name,postName:m.org_name,__name__:m.name,endTime:null,institutions:m.hierarchy.map(v=>({id:v.id,name:a?v.en_name:v.name,__name__:v.name})),rank:0})),relations:d.relations.map(m=>({time:_,id:m.id,name:m.name,type:m.type,score:m.rate,description:m.description}))}}),y={id:l.id,time:[h,p],name:a?l.en_name:l.name,pinyin:l.en_name,type:l.type,birthplace:f===null||!f.coordinate?null:{id:f.id,name:f.name,coordinate:new Pi(f.coordinate[0],f.coordinate[1]),parents:f.hierarchy.map(d=>({id:d.id,name:d.name}))},weight:l.weight,description:l.description,totalHistoricalContextWeight:0,events:x.filter(d=>d.time!==null).filter(d=>d.time instanceof Array?d.time.every(_=>_>=h&&_<=p):d.time>=h&&d.time<=p),posts:x.flatMap(d=>d.posts).sort((d,_)=>{var g,m,v,S;return(((m=(g=d.time)==null?void 0:g.getTime)==null?void 0:m.call(g))??Number.MAX_SAFE_INTEGER)-(((S=(v=_.time)==null?void 0:v.getTime)==null?void 0:S.call(v))??Number.MAX_SAFE_INTEGER)}),locations:x.flatMap(d=>d.locations).sort((d,_)=>{var g,m,v,S;return(((m=(g=d.time)==null?void 0:g.getTime)==null?void 0:m.call(g))??Number.MAX_SAFE_INTEGER)-(((S=(v=_.time)==null?void 0:v.getTime)==null?void 0:S.call(v))??Number.MAX_SAFE_INTEGER)}).reduce((d,_)=>_.time===null?d.some(g=>g.id===_.id)?d:[...d,_]:d.length>0&&_.id===d[d.length-1].id?d:[...d,_],[]),relations:x.flatMap(d=>d.relations),layout:{importance:i[l.id.toString()]},status:0};return y.totalHistoricalContextWeight=G0(y,y.time).weight,y});t=o.length;for(let l=0;l<t;++l){o[l].weight=o[l].weight/e;const[u,h]=o[l].time;o[l].relations=o[l].relations.filter(f=>!f.time||f.time>=u&&f.time<=h),o[l].locations=o[l].locations.filter(f=>!f.time||f.time>=u&&f.time<=h),o[l].posts=o[l].posts.filter(f=>!f.time||f.time>=u&&f.time<=h),o[l].events=o[l].events.filter(f=>!f.time||f.time>=u&&f.time<=h);let p;if(o[l].events.forEach(f=>{for(const x of f.posts)x.rank=gi.rank(x),x.__color__=p=gi.postColorMap[x.rank]??p??gi.postColorMap[1]}),o[l].posts.forEach(f=>{f.rank=gi.rank(f),f.__color__=p=gi.postColorMap[f.rank]??p??gi.postColorMap[1]}),o[l].events.forEach(f=>{f.type=hE(f,o[l].events)}),o[l].type==="皇帝")o[l].status=13;else{let f=o[l].posts.length>0?Math.max(...o[l].posts.map(x=>x.rank)):0;f===1&&(o[l].type==="宦官"||o[l].type==="后妃")&&(f=11),o[l].status=f}}const c=new Map;for(let l=0;l<t;++l)c.set(o[l].id,o[l]);for(let l=0;l<t;++l){const u=o[l];u.events.forEach(h=>{h.__fromOtherFigure||h.relations.forEach(p=>{const f=c.get(p.id);if(f!==void 0&&f.id!==u.id){const x=structuredClone(h);x.type="相關人物",x.relations=x.relations.filter(y=>y.id!==f.id),x.description=`【${u.name}】`+x.description,x.short_description=`【${u.name}】`+x.short_description,x.relations=[{time:x.time,id:u.id,name:u.name,type:p.type,score:p.score,description:`（${f.name}）`+p.description}],x.__fromOtherFigure=!0,f.events.push(x)}})})}for(let l=0;l<t;++l){const u=o[l],h=u.time[0].getTime(),p=u.time[1].getTime();u.events=u.events.filter(f=>f.time.getTime()>=h&&f.time.getTime()<=p),u.events.sort((f,x)=>f.time.getTime()-x.time.getTime())}for(let l=0;l<t;++l){const u=o[l],h=[];for(const p of u.events){const f=h[h.length-1];f&&f.time===p.time?(f.description+=`
`+p.description,f.short_description+=`
`+p.short_description,f.locations.push(...p.locations.filter(x=>!f.locations.some(y=>y.id===x.id))),f.posts.push(...p.posts.filter(x=>!f.posts.some(y=>y.id===x.id))),f.relations.push(...p.relations.filter(x=>!f.relations.some(y=>y.id===x.id))),f.importance=Qy(f),f.size=Jy(f)):h.push(p)}u.events=h}for(let l=0;l<t;++l)o[l].events.forEach(h=>{h.importance=Qy(h),h.size=Jy(h)});return o})}class ar{constructor(){ot(this,"root");ot(this,"parent");ot(this,"width");ot(this,"height");ot(this,"baseSize")}}class fE extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r}setSize(e,i){this.width=e,this.height=i}render(){const e=It(this.root),i=this.width,r=this.height;this.renderTitle(e,i,r)}renderTitle(e,i,r){const s=r*.3,a=s*.5,o=Er.get(),c=mi.get(),l=ce.get(),u=Si.get();e.html(""),e.append("rect").attr("x",0).attr("y",0).attr("width",i).attr("height",r).style("fill",En).style("stroke",Lt).style("stroke-width",1),e.append("text").attr("x",a).attr("y",s*1.5).attr("font-size",s).style("fill",Lt).text(c.TimeScape);let h;o==="zh-cn"?h=l.length===u.length?`共统计<tspan class="count">${l.length}</tspan>个人物`:`选中了<tspan class="count">${l.length}</tspan><tspan class="total" font-size="0.6em">/${u.length}</tspan>个人物`:h=l.length===u.length?`<tspan class="count">${l.length}</tspan> figures in total`:`<tspan class="count">${l.length}</tspan><tspan class="total" font-size="0.6em">/${u.length}</tspan> figures selected`,e.append("text").attr("x",a).attr("y",s*2.6).attr("font-size",s*.6).style("fill",Lt).html(h)}listenInteraction(){ce.listen(()=>{this.render()})}}class pE extends ar{constructor(e,i,r){super();ot(this,"root");ot(this,"layoutFiguresSelected");this.root=e,this.parent=i,this.baseSize=r,this.layoutFiguresSelected={figuresUp:[],figuresDown:Wt.get()}}setSize(e,i){this.width=e,this.height=i}render(){const e=this.width,i=this.height;this.baseSize*.9;const r=It(this.root),s=(()=>{let a=r.select(".layout");return a.empty()&&(a=r.append("g").classed("layout",!0)),a})();s.attr("transform",`translate(0, ${i})`),this.renderLayout(s,e,i)}renderLayout(e,i,r){const s=Object.keys(T5),a=mi.get(),o=3,c=Math.ceil(s.length/o),l=i/o,u=l*.9,h=(l-u)/2,p=r/c,f=p*.7,x=(p-f)/2;e.selectAll(".item").data(s).join("g").classed("item",!0).attr("transform",(y,d)=>`translate(${d%o*l+h}, ${Math.floor(d/o)*p+x})`).each((y,d,_)=>{const g=It(_[d]);g.html("");const m=f*.5;g.append("circle").attr("cx",f*.5).attr("cy",f*.5).attr("r",m).style("fill","none").style("stroke",Lt).style("stroke-width",1),g.append("circle").attr("cx",f*.5).attr("cy",f*.5).attr("r",m*.6).style("fill",na.value[0]===y?fi:"#fff"),g.append("text").attr("x",f+m*.6).attr("y",f*.6).attr("font-size",m*2).attr("dominant-baseline","middle").style("fill",Lt).text(a[y]),g.style("cursor","pointer"),g.on("click",()=>{const v=y==="figureSelected"?this.layoutFiguresSelected:null;na.set([y,v])})})}listenInteraction(){na.listen(()=>{this.render()}),Wt.listen(()=>{this.render()})}}const t2=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path fill="${t}" d="M385.150849 385.662338l-128.895105 0 0-150.377622q0-49.102897 19.436563-91.556444t53.706294-74.677323 80.815185-50.637363 101.786214-18.413586q49.102897 0 94.625375 18.413586t80.815185 50.637363 56.263736 74.677323 20.971029 91.556444l0 150.377622-123.78022 0 0-121.734266q0-64.447552-35.804196-99.74026t-97.182817-35.292707q-55.240759 0-88.999001 35.292707t-33.758242 99.74026l0 121.734266zM826.053946 447.040959q27.62038 0 47.568432 19.948052t19.948052 47.568432l0 317.122877q0 27.62038-9.718282 51.66034t-26.597403 41.942058-39.896104 28.131868-50.637363 10.22977l-516.603397 0q-27.62038 0-50.125874-10.22977t-38.361638-27.108891-24.551449-39.384615-8.695305-48.07992l0-324.283716q0-27.62038 19.436563-47.568432t47.056943-19.948052l61.378621 0 128.895105 0 255.744256 0 123.78022 0 61.378621 0z"></path>
    </svg>
`,e2=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path fill="${t}" d="M768.25422 0q48.810328 0 94.061569 18.303873t80.333664 50.33565 56.436941 74.740814 21.354518 91.519364l0 150.49851-123.042701 0 0-122.025819q0-64.063555-36.099305-99.654419t-97.112214-35.590864q-54.911619 0-88.468719 35.590864t-33.5571 99.654419l0 124.059583-128.12711 0 0-152.532274q0-48.810328 19.320755-91.519364t53.386296-74.740814 80.333664-50.33565 101.179742-18.303873zM766.220457 693.513406l0 87.451837 0 47.793446q0 27.455809-9.660377 51.860973t-26.438928 41.692155-39.658391 27.455809-50.33565 10.168818l-514.542205 0q-27.455809 0-49.82721-9.660377t-38.641509-26.438928-24.913605-39.14995-8.643496-47.793446l0-323.368421q0-28.472691 19.829196-47.793446t46.268123-19.320755l629.449851 0q28.472691 0 47.793446 19.320755t19.320755 47.793446l0 179.988083z"></path>
    </svg>
`,gE=(n,t)=>`
    <svg viewBox="0 0 133 133" width="${n}" height="${n}">
        <path fill="${t}" d="M60.9,124.14l-.36-.29L58.1,122.2A122.81,122.81,0,0,1,31.23,97l-1.87-2.45a63.45,63.45,0,0,1-13-36.5V56.34A50.46,50.46,0,0,1,66.74,7.5h1.69a50.47,50.47,0,0,1,48.68,50.68v.6c-.3,15.64-7.92,31.81-22,46.76a125.07,125.07,0,0,1-22.2,18.33l-.29.25a10,10,0,0,1-11.69,0ZM65.46,16.52A41.47,41.47,0,0,0,25.34,57.87L25.45,60A54.49,54.49,0,0,0,36.52,89.11a113.79,113.79,0,0,0,29,27.26l.48.36a1.06,1.06,0,0,0,1.41,0l.51-.37a116.86,116.86,0,0,0,20.63-17c12.54-13.27,19.3-27.33,19.55-40.64v-2A41.48,41.48,0,0,0,66.9,16.5ZM47.55,58.75A19.19,19.19,0,1,1,66.74,78,19.19,19.19,0,0,1,47.55,58.75Zm9,0A10.23,10.23,0,1,0,66.74,48.5,10.23,10.23,0,0,0,56.51,58.75Z"/>
    </svg>
`,mE=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path d="M811.6 264.1H378.2c-19.8 0-36-16.2-36-36s16.2-36 36-36h433.5c19.8 0 36 16.2 36 36-0.1 19.8-16.3 36-36.1 36zM811.6 522.1H378.2c-19.8 0-36-16.2-36-36s16.2-36 36-36h433.5c19.8 0 36 16.2 36 36-0.1 19.8-16.3 36-36.1 36zM811.6 780.1H378.2c-19.8 0-36-16.2-36-36s16.2-36 36-36h433.5c19.8 0 36 16.2 36 36-0.1 19.8-16.3 36-36.1 36z" fill="${t}"></path>
        <path d="M210.2 229m-37.9 0a37.9 37.9 0 1 0 75.8 0 37.9 37.9 0 1 0-75.8 0Z" fill="${t}"></path>
        <path d="M210.2 487m-37.9 0a37.9 37.9 0 1 0 75.8 0 37.9 37.9 0 1 0-75.8 0Z" fill="${t}"></path>
        <path d="M210.2 745m-37.9 0a37.9 37.9 0 1 0 75.8 0 37.9 37.9 0 1 0-75.8 0Z" fill="${t}"></path>
    </svg>
`,n4=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path d="M846.848 85.333333h-234.666667a40.448 40.448 0 1 0 0 80.896h234.496c5.888 0 10.666667 4.778667 10.666667 10.581334V559.786667a10.666667 10.666667 0 0 1-10.666667 10.666666H203.690667L421.546667 353.28a40.362667 40.362667 0 0 0 0-57.258667 40.789333 40.789333 0 0 0-57.429334 0L111.104 548.437333A86.784 86.784 0 0 0 85.333333 610.389333c0 23.381333 9.130667 45.312 25.770667 61.866667l255.402667 254.549333a40.618667 40.618667 0 0 0 57.344 0 40.362667 40.362667 0 0 0 0-57.258666L204.970667 651.349333h641.877333C897.450667 651.349333 938.666667 610.133333 938.666667 559.786667V176.810667C938.666667 126.464 897.450667 85.333333 846.848 85.333333z" fill="${t}"></path>
    </svg>
`,yE=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path d="M572.91974805 512l242.82096754-242.82096757c16.30246778-16.30246778 16.30246778-43.75925563 0-60.91974802-16.30246778-16.30246778-43.75925563-16.30246778-60.91974802 0L512 451.08025195 269.17903243 208.25928441c-16.30246778-16.30246778-43.75925563-16.30246778-60.91974802 0-16.30246778 16.30246778-16.30246778 43.75925563 0 60.91974802L451.08025195 512l-242.82096754 242.82096757c-16.30246778 16.30246778-16.30246778 43.75925563 0 60.91974802 16.30246778 16.30246778 43.75925563 16.30246778 60.91974802 0l242.82096757-242.82096754 242.82096757 242.82096754c16.30246778 16.30246778 43.75925563 16.30246778 60.91974802 0 16.30246778-16.30246778 16.30246778-43.75925563 0-60.91974802L572.91974805 512z" fill="${t}"></path>
    </svg>
`,vE=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path d="M512 85.333333a42.666667 42.666667 0 0 1 42.56 39.466667L554.666667 128v341.333333h298.666666a42.666667 42.666667 0 0 1 3.2 85.226667L853.333333 554.666667H554.666667v341.333333a42.666667 42.666667 0 0 1-85.226667 3.2L469.333333 896V554.666667H170.666667a42.666667 42.666667 0 0 1-3.2-85.226667L170.666667 469.333333h298.666666V128a42.666667 42.666667 0 0 1 42.666667-42.666667z" fill="${t}"></path>
    </svg>
`,xE=(n,t)=>`
    <svg viewBox="0 0 1024 1024" width="${n}" height="${n}">
        <path d="M817.968553 215.897142l-169.357176 0 0-58.869782c0-25.391297-20.657482-46.048779-46.048779-46.048779l-181.125197 0c-25.391297 0-46.048779 20.657482-46.048779 46.048779l0 58.869782-169.357176 0c-25.391297 0-46.048779 20.657482-46.048779 46.048779l0 71.631434c0 25.391297 20.657482 46.048779 46.048779 46.048779l28.321022 0 0 425.947112c0 59.246359 48.200792 107.447151 107.447151 107.447151l340.40076 0c59.246359 0 107.447151-48.200792 107.447151-107.447151L789.647531 379.626133l28.321022 0c25.391297 0 46.048779-20.657482 46.048779-46.048779l0-71.631434C864.017332 236.554624 843.35985 215.897142 817.968553 215.897142zM426.553932 162.14389l170.892135 0 0 53.753251-170.892135 0L426.553932 162.14389zM738.482221 805.574269c0 31.033807-25.248034 56.281841-56.281841 56.281841L341.79962 861.85611c-31.033807 0-56.281841-25.248034-56.281841-56.281841L285.517779 379.626133l452.964442 0L738.482221 805.574269zM812.852022 328.460824l-601.704045 0 0-61.398372 203.227588 0c2.302439 0.356111 4.66116 0.542352 7.061836 0.542352l181.125197 0c2.400676 0 4.759397-0.186242 7.062859-0.542352l203.226564 0L812.852022 328.460824zM513.023306 783.320429c14.128789 0 25.582655-11.453866 25.582655-25.582655l0-288.572348c0-14.128789-11.453866-25.582655-25.582655-25.582655-14.128789 0-25.582655 11.453866-25.582655 25.582655l0 288.572348C487.440651 771.866562 498.894518 783.320429 513.023306 783.320429zM645.541459 783.320429c14.128789 0 25.582655-11.453866 25.582655-25.582655l0-288.572348c0-14.128789-11.453866-25.582655-25.582655-25.582655s-25.582655 11.453866-25.582655 25.582655l0 288.572348C619.958804 771.866562 631.41267 783.320429 645.541459 783.320429zM380.505154 783.320429c14.128789 0 25.582655-11.453866 25.582655-25.582655l0-288.572348c0-14.128789-11.453866-25.582655-25.582655-25.582655s-25.582655 11.453866-25.582655 25.582655l0 288.572348C354.922499 771.866562 366.376365 783.320429 380.505154 783.320429z" fill="${t}"></path>
    </svg>
`;class _E extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r,this.keyboardEnterEvent=this.keyboardEnterEvent.bind(this)}setSize(e,i){this.width=e,this.height=i}render(){const e=It(this.root),i=this.width,r=this.height,s=(()=>{let o=e.select(".input");return o.empty()&&(o=e.append("xhtml:div").classed("input",!0)),o})();this.renderSearchBox(s,i,r*.5);const a=(()=>{let o=e.select(".keywords");return o.empty()&&(o=e.append("xhtml:div").classed("keywords",!0)),o})();a.style("margin-top","0.5em"),this.renderKeywords(a,i,r*.5)}renderSearchBox(e,i,r){e.style("width",i+"px").style("height",r+"px").style("font-size",r*.4+"px");const s=mi.get().请输入关键词,a=(()=>{let c=e.select("input");return c.empty()&&(c=e.append("input").style("type","text").style("color",Lt)),c})();a.attr("placeholder",s),a.on("focus",()=>{window.addEventListener("keydown",this.keyboardEnterEvent)}),a.on("blur",()=>{window.removeEventListener("keydown",this.keyboardEnterEvent)});const o=(()=>{let c=e.select(".icon");return c.empty()&&(c=e.append("div").classed("icon",!0)),c})();o.html(n4("1em",Lt)),o.on("click",()=>{this.submit()})}renderKeywords(e,i,r){e.style("width",i+"px").style("height",r+"px").style("font-size",r*.4+"px");const s=Ji.get();e.selectAll(".keyword").data(s).join("div").classed("keyword",!0).each((a,o,c)=>{const l=It(c[o]);l.html(""),l.append("span").classed("keyword-text",!0).text(a),l.append("div").classed("keyword-icon",!0).html(yE("1em","#fff")).on("click",()=>{Ji.set(Ji.get().filter(u=>u!==a))})})}keyboardEnterEvent(e){e.key==="Enter"&&this.submit()}submit(){const e=this.root.querySelector("input");let i=e.value;if(i==="")return;e.value="",i=i.trim().split(/[ ;；\/、,，|]/).join("|");const r=Ji.get();r.indexOf(i)===-1?Ji.set([i,...r]):Ji.set([i,...r.filter(s=>s!==i)])}listenInteraction(){Ji.listen(()=>{this.render()}),S5.listen(e=>{console.log("infos",e)})}}const bE="FeatureCollection",wE=JSON.parse('[{"type":"Feature","properties":{"id":"65","size":"550","name":"新疆维吾尔自治区","cp":[84.9023,42.148],"childNum":18},"geometry":{"type":"Polygon","coordinates":[[[96.416,42.7588],[96.416,42.7148],[95.9766,42.4951],[96.0645,42.3193],[96.2402,42.2314],[95.9766,41.9238],[95.2734,41.6162],[95.1855,41.792],[94.5703,41.4844],[94.043,41.0889],[93.8672,40.6934],[93.0762,40.6494],[92.6367,39.6387],[92.373,39.3311],[92.373,39.1113],[92.373,39.0234],[90.1758,38.4961],[90.3516,38.2324],[90.6152,38.3203],[90.5273,37.8369],[91.0547,37.4414],[91.3184,37.0898],[90.7031,36.7822],[90.791,36.6064],[91.0547,36.5186],[91.0547,36.0791],[90.8789,36.0352],[90,36.2549],[89.9121,36.0791],[89.7363,36.0791],[89.209,36.2988],[88.7695,36.3428],[88.5938,36.4746],[87.3633,36.4307],[86.2207,36.167],[86.1328,35.8594],[85.6055,35.6836],[85.0781,35.7275],[84.1992,35.376],[83.1445,35.4199],[82.8809,35.6836],[82.4414,35.7275],[82.002,35.332],[81.6504,35.2441],[80.4199,35.4199],[80.2441,35.2881],[80.332,35.1563],[80.2441,35.2002],[79.8926,34.8047],[79.8047,34.4971],[79.1016,34.4531],[79.0137,34.3213],[78.2227,34.7168],[78.0469,35.2441],[78.0469,35.5078],[77.4316,35.4639],[76.8164,35.6396],[76.5527,35.8594],[76.2012,35.8154],[75.9375,36.0352],[76.0254,36.4746],[75.8496,36.6943],[75.498,36.7383],[75.4102,36.958],[75.0586,37.002],[74.8828,36.9141],[74.7949,37.0459],[74.5313,37.0898],[74.5313,37.2217],[74.8828,37.2217],[75.1465,37.4414],[74.8828,37.5732],[74.9707,37.749],[74.8828,38.4521],[74.3555,38.6719],[74.1797,38.6719],[74.0918,38.54],[73.8281,38.584],[73.7402,38.8477],[73.8281,38.9795],[73.4766,39.375],[73.916,39.5068],[73.916,39.6826],[73.8281,39.7705],[74.0039,40.0342],[74.8828,40.3418],[74.7949,40.5176],[75.2344,40.4297],[75.5859,40.6494],[75.7617,40.2979],[76.377,40.3857],[76.9043,41.001],[77.6074,41.001],[78.1348,41.2207],[78.1348,41.3965],[80.1563,42.0557],[80.2441,42.2754],[80.1563,42.627],[80.2441,42.8467],[80.5078,42.8906],[80.4199,43.0664],[80.7715,43.1982],[80.4199,44.165],[80.4199,44.6045],[79.9805,44.8242],[79.9805,44.9561],[81.7383,45.3955],[82.0898,45.2197],[82.5293,45.2197],[82.2656,45.6592],[83.0566,47.2412],[83.6719,47.0215],[84.7266,47.0215],[84.9023,46.8896],[85.5176,47.0654],[85.6934,47.2852],[85.5176,48.1201],[85.7813,48.4277],[86.5723,48.5596],[86.8359,48.8232],[86.748,48.9551],[86.8359,49.1309],[87.8027,49.1748],[87.8906,48.999],[87.7148,48.9111],[88.0664,48.7354],[87.9785,48.6035],[88.5059,48.3838],[88.6816,48.1641],[89.1211,47.9883],[89.5605,48.0322],[89.7363,47.8564],[90.0879,47.8564],[90.3516,47.6807],[90.5273,47.2412],[90.8789,46.9775],[91.0547,46.582],[90.8789,46.3184],[91.0547,46.0107],[90.7031,45.7471],[90.7031,45.5273],[90.8789,45.2197],[91.582,45.0879],[93.5156,44.9561],[94.7461,44.3408],[95.3613,44.2969],[95.3613,44.0332],[95.5371,43.9014],[95.8887,43.2422],[96.3281,42.9346],[96.416,42.7588]]]}},{"type":"Feature","properties":{"id":"54","size":"550","name":"西藏自治区","cp":[87.8695,31.6846],"childNum":7},"geometry":{"type":"Polygon","coordinates":[[[79.0137,34.3213],[79.1016,34.4531],[79.8047,34.4971],[79.8926,34.8047],[80.2441,35.2002],[80.332,35.1563],[80.2441,35.2881],[80.4199,35.4199],[81.6504,35.2441],[82.002,35.332],[82.4414,35.7275],[82.8809,35.6836],[83.1445,35.4199],[84.1992,35.376],[85.0781,35.7275],[85.6055,35.6836],[86.1328,35.8594],[86.2207,36.167],[87.3633,36.4307],[88.5938,36.4746],[88.7695,36.3428],[89.209,36.2988],[89.7363,36.0791],[89.3848,36.0352],[89.4727,35.9033],[89.7363,35.7715],[89.7363,35.4199],[89.4727,35.376],[89.4727,35.2441],[89.5605,34.8926],[89.8242,34.8486],[89.7363,34.6729],[89.8242,34.3652],[89.6484,34.0137],[90.0879,33.4863],[90.7031,33.1348],[91.4063,33.1348],[91.9336,32.8271],[92.1973,32.8271],[92.2852,32.7393],[92.9883,32.7393],[93.5156,32.4756],[93.7793,32.5635],[94.1309,32.4316],[94.6582,32.6074],[95.1855,32.4316],[95.0098,32.2998],[95.1855,32.3438],[95.2734,32.2119],[95.3613,32.168],[95.3613,31.9922],[95.4492,31.8164],[95.8008,31.6846],[95.9766,31.8164],[96.1523,31.5967],[96.2402,31.9482],[96.5039,31.7285],[96.8555,31.6846],[96.7676,31.9922],[97.2949,32.0801],[97.3828,32.5635],[97.7344,32.5195],[98.1738,32.3438],[98.4375,31.8604],[98.877,31.4209],[98.6133,31.2012],[98.9648,30.7617],[99.1406,29.2676],[98.9648,29.1357],[98.9648,28.8281],[98.7891,28.8721],[98.7891,29.0039],[98.7012,28.916],[98.6133,28.5205],[98.7891,28.3447],[98.7012,28.2129],[98.3496,28.125],[98.2617,28.3887],[98.1738,28.125],[97.5586,28.5205],[97.2949,28.0811],[97.3828,27.9053],[97.0313,27.7295],[96.5039,28.125],[95.7129,28.2568],[95.3613,28.125],[95.2734,27.9492],[94.2188,27.5537],[93.8672,27.0264],[93.6035,26.9385],[92.1094,26.8506],[92.0215,27.4658],[91.582,27.5537],[91.582,27.9053],[91.4063,28.0371],[91.0547,27.8613],[90.7031,28.0811],[89.8242,28.2129],[89.6484,28.1689],[89.1211,27.5977],[89.1211,27.334],[89.0332,27.2021],[88.7695,27.4219],[88.8574,27.9932],[88.6816,28.125],[88.1543,27.9053],[87.8906,27.9492],[87.7148,27.8174],[87.0996,27.8174],[86.748,28.125],[86.5723,28.125],[86.4844,27.9053],[86.1328,28.125],[86.0449,27.9053],[85.6934,28.3447],[85.6055,28.2568],[85.166,28.3447],[85.166,28.6523],[84.9023,28.5645],[84.4629,28.7402],[84.2871,28.8721],[84.1992,29.2236],[84.1113,29.2676],[83.584,29.1797],[83.2324,29.5752],[82.1777,30.0586],[82.0898,30.3223],[81.3867,30.3662],[81.2109,30.0146],[81.0352,30.2344],[80.0684,30.5859],[79.7168,30.9375],[79.0137,31.0693],[78.75,31.333],[78.8379,31.5967],[78.6621,31.8164],[78.75,31.9043],[78.4863,32.124],[78.3984,32.5195],[78.75,32.6953],[78.9258,32.3438],[79.2773,32.5635],[79.1016,33.1787],[78.6621,33.6621],[78.6621,34.1016],[78.9258,34.1455],[79.0137,34.3213]]]}},{"type":"Feature","properties":{"id":"15","size":"450","name":"内蒙古自治区","cp":[112.5977,46.3408],"childNum":12},"geometry":{"type":"Polygon","coordinates":[[[97.207,42.8027],[99.4922,42.583],[100.8105,42.6709],[101.7773,42.4951],[102.041,42.2314],[102.7441,42.1436],[103.3594,41.8799],[103.8867,41.792],[104.502,41.8799],[104.502,41.6602],[105.0293,41.5723],[105.7324,41.9238],[107.4023,42.4512],[109.4238,42.4512],[110.3906,42.7588],[111.0059,43.3301],[111.9727,43.6816],[111.9727,43.8135],[111.4453,44.3848],[111.7969,45],[111.9727,45.0879],[113.6426,44.7363],[114.1699,44.9561],[114.5215,45.3955],[115.6641,45.4395],[116.1914,45.7031],[116.2793,45.9668],[116.543,46.2744],[117.334,46.3623],[117.4219,46.582],[117.7734,46.5381],[118.3008,46.7578],[118.7402,46.7139],[118.916,46.7578],[119.0918,46.6699],[119.707,46.626],[119.9707,46.7139],[119.707,47.1973],[118.4766,47.9883],[117.8613,48.0322],[117.334,47.6807],[116.8066,47.9004],[116.1914,47.8564],[115.9277,47.6807],[115.5762,47.9004],[115.4883,48.1641],[115.8398,48.252],[115.8398,48.5596],[116.7188,49.834],[117.7734,49.5264],[118.5645,49.9219],[119.2676,50.0977],[119.3555,50.3174],[119.1797,50.3613],[119.5313,50.7568],[119.5313,50.8887],[119.707,51.0645],[120.1465,51.6797],[120.6738,51.9434],[120.7617,52.1191],[120.7617,52.251],[120.5859,52.3389],[120.6738,52.5146],[120.4102,52.6465],[120.0586,52.6025],[120.0586,52.7344],[120.8496,53.2617],[121.4648,53.3496],[121.8164,53.042],[121.2012,52.5586],[121.6406,52.4268],[121.7285,52.2949],[121.9922,52.2949],[122.168,52.5146],[122.6953,52.251],[122.6074,52.0752],[122.959,51.3281],[123.3105,51.2402],[123.6621,51.3721],[124.3652,51.2842],[124.541,51.3721],[124.8926,51.3721],[125.0684,51.6357],[125.332,51.6357],[126.0352,51.0205],[125.7715,50.7568],[125.7715,50.5371],[125.332,50.1416],[125.1563,49.834],[125.2441,49.1748],[124.8047,49.1309],[124.4531,48.1201],[124.2773,48.5156],[122.4316,47.373],[123.0469,46.7139],[123.3984,46.8896],[123.3984,46.9775],[123.4863,46.9775],[123.5742,46.8457],[123.5742,46.8896],[123.5742,46.6699],[123.0469,46.582],[123.2227,46.2305],[122.7832,46.0107],[122.6953,45.7031],[122.4316,45.8789],[122.2559,45.791],[121.8164,46.0107],[121.7285,45.7471],[121.9043,45.7031],[122.2559,45.2637],[122.0801,44.8682],[122.3438,44.2529],[123.1348,44.4727],[123.4863,43.7256],[123.3105,43.5059],[123.6621,43.374],[123.5742,43.0225],[123.3105,42.9785],[123.1348,42.8027],[122.7832,42.7148],[122.3438,42.8467],[122.3438,42.6709],[121.9922,42.7148],[121.7285,42.4512],[121.4648,42.4951],[120.498,42.0996],[120.1465,41.7041],[119.8828,42.1875],[119.5313,42.3633],[119.3555,42.2754],[119.2676,41.7041],[119.4434,41.6162],[119.2676,41.3086],[118.3887,41.3086],[118.125,41.748],[118.3008,41.792],[118.3008,42.0996],[118.125,42.0557],[117.9492,42.2314],[118.0371,42.4072],[117.7734,42.627],[117.5098,42.583],[117.334,42.4512],[116.8945,42.4072],[116.8066,42.0117],[116.2793,42.0117],[116.0156,41.792],[115.9277,41.9238],[115.2246,41.5723],[114.9609,41.6162],[114.873,42.0996],[114.5215,42.1436],[114.1699,41.792],[114.2578,41.5723],[113.9063,41.4404],[113.9941,41.2207],[113.9063,41.1328],[114.082,40.7373],[114.082,40.5176],[113.8184,40.5176],[113.5547,40.3418],[113.2031,40.3857],[112.7637,40.166],[112.3242,40.2539],[111.9727,39.5947],[111.4453,39.6387],[111.3574,39.4189],[111.0938,39.375],[111.0938,39.5947],[110.6543,39.2871],[110.127,39.4629],[110.2148,39.2871],[109.8633,39.2432],[109.9512,39.1553],[108.9844,38.3203],[109.0723,38.0127],[108.8965,37.9688],[108.8086,38.0127],[108.7207,37.7051],[108.1934,37.6172],[107.666,37.8809],[107.3145,38.1006],[106.7871,38.1885],[106.5234,38.3203],[106.9629,38.9795],[106.7871,39.375],[106.3477,39.2871],[105.9082,38.7158],[105.8203,37.793],[104.3262,37.4414],[103.4473,37.8369],[103.3594,38.0127],[103.5352,38.1445],[103.4473,38.3643],[104.2383,38.9795],[104.0625,39.4189],[103.3594,39.3311],[103.0078,39.1113],[102.4805,39.2432],[101.8652,39.1113],[102.041,38.8916],[101.7773,38.6719],[101.3379,38.7598],[101.25,39.0234],[100.9863,38.9355],[100.8105,39.4189],[100.5469,39.4189],[100.0195,39.7705],[99.4922,39.8584],[100.1074,40.2539],[100.1953,40.6494],[99.9316,41.001],[99.2285,40.8691],[99.0527,40.6934],[98.9648,40.7813],[98.7891,40.6055],[98.5254,40.7373],[98.6133,40.6494],[98.3496,40.5615],[98.3496,40.9131],[97.4707,41.4844],[97.8223,41.6162],[97.8223,41.748],[97.207,42.8027]]]}},{"type":"Feature","properties":{"id":"63","size":"800","name":"青海省","cp":[95.2402,35.4199],"childNum":8},"geometry":{"type":"Polygon","coordinates":[[[89.7363,36.0791],[89.9121,36.0791],[90,36.2549],[90.8789,36.0352],[91.0547,36.0791],[91.0547,36.5186],[90.791,36.6064],[90.7031,36.7822],[91.3184,37.0898],[91.0547,37.4414],[90.5273,37.8369],[90.6152,38.3203],[90.3516,38.2324],[90.1758,38.4961],[92.373,39.0234],[92.373,39.1113],[93.1641,39.1992],[93.1641,38.9795],[93.6914,38.9355],[93.8672,38.7158],[94.3066,38.7598],[94.5703,38.3643],[95.0098,38.4082],[95.4492,38.2764],[95.7129,38.3643],[96.2402,38.1006],[96.416,38.2324],[96.6797,38.1885],[96.6797,38.4521],[97.1191,38.584],[97.0313,39.1992],[98.1738,38.8037],[98.3496,39.0234],[98.6133,38.9355],[98.7891,39.0674],[99.1406,38.9355],[99.8438,38.3643],[100.1953,38.2764],[100.0195,38.4521],[100.1074,38.4961],[100.459,38.2764],[100.7227,38.2324],[101.1621,37.8369],[101.5137,37.8809],[101.7773,37.6172],[101.9531,37.7051],[102.1289,37.4414],[102.5684,37.1777],[102.4805,36.958],[102.6563,36.8262],[102.5684,36.7383],[102.832,36.3428],[103.0078,36.2549],[102.9199,36.0791],[102.9199,35.9033],[102.6563,35.7715],[102.832,35.5957],[102.4805,35.5957],[102.3047,35.4199],[102.3926,35.2002],[101.9531,34.8486],[101.9531,34.6289],[102.2168,34.4092],[102.1289,34.2773],[101.6895,34.1016],[100.9863,34.3652],[100.8105,34.2773],[101.25,33.6621],[101.5137,33.7061],[101.6016,33.5303],[101.7773,33.5303],[101.6895,33.3105],[101.7773,33.2227],[101.6016,33.1348],[101.1621,33.2227],[101.25,32.6953],[100.7227,32.6514],[100.7227,32.5195],[100.3711,32.7393],[100.1074,32.6514],[100.1074,32.8711],[99.8438,33.0029],[99.7559,32.7393],[99.2285,32.915],[99.2285,33.0469],[98.877,33.1787],[98.4375,34.0576],[97.8223,34.1895],[97.6465,34.1016],[97.7344,33.9258],[97.3828,33.8818],[97.4707,33.5742],[97.7344,33.3984],[97.3828,32.8711],[97.4707,32.6953],[97.7344,32.5195],[97.3828,32.5635],[97.2949,32.0801],[96.7676,31.9922],[96.8555,31.6846],[96.5039,31.7285],[96.2402,31.9482],[96.1523,31.5967],[95.9766,31.8164],[95.8008,31.6846],[95.4492,31.8164],[95.3613,31.9922],[95.3613,32.168],[95.2734,32.2119],[95.1855,32.3438],[95.0098,32.2998],[95.1855,32.4316],[94.6582,32.6074],[94.1309,32.4316],[93.7793,32.5635],[93.5156,32.4756],[92.9883,32.7393],[92.2852,32.7393],[92.1973,32.8271],[91.9336,32.8271],[91.4063,33.1348],[90.7031,33.1348],[90.0879,33.4863],[89.6484,34.0137],[89.8242,34.3652],[89.7363,34.6729],[89.8242,34.8486],[89.5605,34.8926],[89.4727,35.2441],[89.4727,35.376],[89.7363,35.4199],[89.7363,35.7715],[89.4727,35.9033],[89.3848,36.0352],[89.7363,36.0791]]]}},{"type":"Feature","properties":{"id":"51","size":"900","name":"四川省","cp":[101.9199,30.1904],"childNum":21},"geometry":{"type":"Polygon","coordinates":[[[101.7773,33.5303],[101.8652,33.5742],[101.9531,33.4424],[101.8652,33.0908],[102.4805,33.4424],[102.2168,33.9258],[102.9199,34.3213],[103.0957,34.1895],[103.1836,33.7939],[104.1504,33.6182],[104.2383,33.3984],[104.4141,33.3105],[104.3262,33.2227],[104.4141,33.0469],[104.3262,32.8711],[104.4141,32.7393],[105.2051,32.6074],[105.3809,32.7393],[105.3809,32.8711],[105.4688,32.915],[105.5566,32.7393],[106.084,32.8711],[106.084,32.7393],[106.3477,32.6514],[107.0508,32.6953],[107.1387,32.4756],[107.2266,32.4316],[107.4023,32.5195],[108.0176,32.168],[108.2813,32.2559],[108.5449,32.2119],[108.3691,32.168],[108.2813,31.9043],[108.5449,31.6846],[108.1934,31.5088],[107.9297,30.8496],[107.4902,30.8496],[107.4023,30.7617],[107.4902,30.6299],[107.0508,30.0146],[106.7871,30.0146],[106.6113,30.3223],[106.2598,30.1904],[105.8203,30.4541],[105.6445,30.2783],[105.5566,30.1025],[105.7324,29.8828],[105.293,29.5313],[105.4688,29.3115],[105.7324,29.2676],[105.8203,28.96],[106.2598,28.8721],[106.3477,28.5205],[105.9961,28.7402],[105.6445,28.4326],[105.9082,28.125],[106.1719,28.125],[106.3477,27.8174],[105.6445,27.6416],[105.5566,27.7734],[105.293,27.7295],[105.2051,27.9932],[105.0293,28.0811],[104.8535,27.9053],[104.4141,27.9492],[104.3262,28.0371],[104.4141,28.125],[104.4141,28.2568],[104.2383,28.4326],[104.4141,28.6084],[103.8867,28.6523],[103.7988,28.3008],[103.4473,28.125],[103.4473,27.7734],[102.9199,27.29],[103.0078,26.3672],[102.6563,26.1914],[102.5684,26.3672],[102.1289,26.1035],[101.8652,26.0596],[101.6016,26.2354],[101.6895,26.3672],[101.4258,26.5869],[101.4258,26.8066],[101.4258,26.7188],[101.1621,27.0264],[101.1621,27.1582],[100.7227,27.8613],[100.3711,27.8174],[100.2832,27.7295],[100.0195,28.125],[100.1953,28.3447],[99.668,28.8281],[99.4043,28.5205],[99.4043,28.1689],[99.2285,28.3008],[99.1406,29.2676],[98.9648,30.7617],[98.6133,31.2012],[98.877,31.4209],[98.4375,31.8604],[98.1738,32.3438],[97.7344,32.5195],[97.4707,32.6953],[97.3828,32.8711],[97.7344,33.3984],[97.4707,33.5742],[97.3828,33.8818],[97.7344,33.9258],[97.6465,34.1016],[97.8223,34.1895],[98.4375,34.0576],[98.877,33.1787],[99.2285,33.0469],[99.2285,32.915],[99.7559,32.7393],[99.8438,33.0029],[100.1074,32.8711],[100.1074,32.6514],[100.3711,32.7393],[100.7227,32.5195],[100.7227,32.6514],[101.25,32.6953],[101.1621,33.2227],[101.6016,33.1348],[101.7773,33.2227],[101.6895,33.3105],[101.7773,33.5303]]]}},{"type":"Feature","properties":{"id":"23","size":"700","name":"黑龙江省","cp":[126.1445,48.7156],"childNum":13},"geometry":{"type":"Polygon","coordinates":[[[121.4648,53.3496],[123.6621,53.5693],[124.8926,53.0859],[125.0684,53.2178],[125.5957,53.0859],[125.6836,52.9102],[126.123,52.7783],[126.0352,52.6025],[126.2109,52.5146],[126.3867,52.2949],[126.3867,52.207],[126.5625,52.1631],[126.4746,51.9434],[126.9141,51.3721],[126.8262,51.2842],[127.002,51.3281],[126.9141,51.1084],[127.2656,50.7568],[127.3535,50.2734],[127.6172,50.2295],[127.5293,49.8779],[127.793,49.6143],[128.7598,49.5703],[129.1113,49.3506],[129.4629,49.4385],[130.2539,48.8672],[130.6934,48.8672],[130.5176,48.6475],[130.8691,48.2959],[130.6934,48.1201],[131.0449,47.6807],[132.5391,47.7246],[132.627,47.9443],[133.0664,48.1201],[133.5059,48.1201],[134.209,48.3838],[135.0879,48.4277],[134.7363,48.252],[134.5605,47.9883],[134.7363,47.6807],[134.5605,47.4609],[134.3848,47.4609],[134.209,47.2852],[134.209,47.1533],[133.8574,46.5381],[133.9453,46.2744],[133.5059,45.835],[133.418,45.5713],[133.2422,45.5273],[133.0664,45.1318],[132.8906,45.0439],[131.9238,45.3516],[131.5723,45.0439],[131.0449,44.8682],[131.3086,44.0771],[131.2207,43.7256],[131.3086,43.4619],[130.8691,43.418],[130.5176,43.6377],[130.3418,43.9893],[129.9902,43.8574],[129.9023,44.0332],[129.8145,43.9014],[129.2871,43.8135],[129.1992,43.5938],[128.8477,43.5498],[128.4961,44.165],[128.4082,44.4727],[128.0566,44.3408],[128.0566,44.1211],[127.7051,44.1211],[127.5293,44.6045],[127.0898,44.6045],[127.002,44.7803],[127.0898,45],[126.9141,45.1318],[126.5625,45.2637],[126.0352,45.1758],[125.7715,45.3076],[125.6836,45.5273],[125.0684,45.3955],[124.8926,45.5273],[124.3652,45.4395],[124.0137,45.7471],[123.9258,46.2305],[123.2227,46.2305],[123.0469,46.582],[123.5742,46.6699],[123.5742,46.8896],[123.5742,46.8457],[123.4863,46.9775],[123.3984,46.9775],[123.3984,46.8896],[123.0469,46.7139],[122.4316,47.373],[124.2773,48.5156],[124.4531,48.1201],[124.8047,49.1309],[125.2441,49.1748],[125.1563,49.834],[125.332,50.1416],[125.7715,50.5371],[125.7715,50.7568],[126.0352,51.0205],[125.332,51.6357],[125.0684,51.6357],[124.8926,51.3721],[124.541,51.3721],[124.3652,51.2842],[123.6621,51.3721],[123.3105,51.2402],[122.959,51.3281],[122.6074,52.0752],[122.6953,52.251],[122.168,52.5146],[121.9922,52.2949],[121.7285,52.2949],[121.6406,52.4268],[121.2012,52.5586],[121.8164,53.042],[121.4648,53.3496]]]}},{"type":"Feature","properties":{"id":"62","size":"690","name":"甘肃省","cp":[99.7129,38.166],"childNum":14},"geometry":{"type":"Polygon","coordinates":[[[96.416,42.7148],[97.207,42.8027],[97.8223,41.748],[97.8223,41.6162],[97.4707,41.4844],[98.3496,40.9131],[98.3496,40.5615],[98.6133,40.6494],[98.5254,40.7373],[98.7891,40.6055],[98.9648,40.7813],[99.0527,40.6934],[99.2285,40.8691],[99.9316,41.001],[100.1953,40.6494],[100.1074,40.2539],[99.4922,39.8584],[100.0195,39.7705],[100.5469,39.4189],[100.8105,39.4189],[100.9863,38.9355],[101.25,39.0234],[101.3379,38.7598],[101.7773,38.6719],[102.041,38.8916],[101.8652,39.1113],[102.4805,39.2432],[103.0078,39.1113],[103.3594,39.3311],[104.0625,39.4189],[104.2383,38.9795],[103.4473,38.3643],[103.5352,38.1445],[103.3594,38.0127],[103.4473,37.8369],[104.3262,37.4414],[104.5898,37.4414],[104.5898,37.2217],[104.8535,37.2217],[105.293,36.8262],[105.2051,36.6943],[105.4688,36.123],[105.293,35.9912],[105.3809,35.7715],[105.7324,35.7275],[105.8203,35.5518],[105.9961,35.4639],[105.9082,35.4199],[105.9961,35.4199],[106.084,35.376],[106.2598,35.4199],[106.3477,35.2441],[106.5234,35.332],[106.4355,35.6836],[106.6992,35.6836],[106.9629,35.8154],[106.875,36.123],[106.5234,36.2549],[106.5234,36.4746],[106.4355,36.5625],[106.6113,36.7822],[106.6113,37.0898],[107.3145,37.0898],[107.3145,36.9141],[108.7207,36.3428],[108.6328,35.9912],[108.5449,35.8594],[108.6328,35.5518],[108.5449,35.2881],[107.7539,35.2881],[107.7539,35.1123],[107.8418,35.0244],[107.666,34.9365],[107.2266,34.8926],[106.9629,35.0684],[106.6113,35.0684],[106.5234,34.7607],[106.3477,34.585],[106.6992,34.3213],[106.5234,34.2773],[106.6113,34.1455],[106.4355,33.9258],[106.5234,33.5303],[105.9961,33.6182],[105.7324,33.3984],[105.9961,33.1787],[105.9082,33.0029],[105.4688,32.915],[105.3809,32.8711],[105.3809,32.7393],[105.2051,32.6074],[104.4141,32.7393],[104.3262,32.8711],[104.4141,33.0469],[104.3262,33.2227],[104.4141,33.3105],[104.2383,33.3984],[104.1504,33.6182],[103.1836,33.7939],[103.0957,34.1895],[102.9199,34.3213],[102.2168,33.9258],[102.4805,33.4424],[101.8652,33.0908],[101.9531,33.4424],[101.8652,33.5742],[101.7773,33.5303],[101.6016,33.5303],[101.5137,33.7061],[101.25,33.6621],[100.8105,34.2773],[100.9863,34.3652],[101.6895,34.1016],[102.1289,34.2773],[102.2168,34.4092],[101.9531,34.6289],[101.9531,34.8486],[102.3926,35.2002],[102.3047,35.4199],[102.4805,35.5957],[102.832,35.5957],[102.6563,35.7715],[102.9199,35.9033],[102.9199,36.0791],[103.0078,36.2549],[102.832,36.3428],[102.5684,36.7383],[102.6563,36.8262],[102.4805,36.958],[102.5684,37.1777],[102.1289,37.4414],[101.9531,37.7051],[101.7773,37.6172],[101.5137,37.8809],[101.1621,37.8369],[100.7227,38.2324],[100.459,38.2764],[100.1074,38.4961],[100.0195,38.4521],[100.1953,38.2764],[99.8438,38.3643],[99.1406,38.9355],[98.7891,39.0674],[98.6133,38.9355],[98.3496,39.0234],[98.1738,38.8037],[97.0313,39.1992],[97.1191,38.584],[96.6797,38.4521],[96.6797,38.1885],[96.416,38.2324],[96.2402,38.1006],[95.7129,38.3643],[95.4492,38.2764],[95.0098,38.4082],[94.5703,38.3643],[94.3066,38.7598],[93.8672,38.7158],[93.6914,38.9355],[93.1641,38.9795],[93.1641,39.1992],[92.373,39.1113],[92.373,39.3311],[92.6367,39.6387],[93.0762,40.6494],[93.8672,40.6934],[94.043,41.0889],[94.5703,41.4844],[95.1855,41.792],[95.2734,41.6162],[95.9766,41.9238],[96.2402,42.2314],[96.0645,42.3193],[95.9766,42.4951],[96.416,42.7148]]]}},{"type":"Feature","properties":{"id":"53","size":"1200","name":"云南省","cp":[101.0652,25.1807],"childNum":16},"geometry":{"type":"Polygon","coordinates":[[[98.1738,28.125],[98.2617,28.3887],[98.3496,28.125],[98.7012,28.2129],[98.7891,28.3447],[98.6133,28.5205],[98.7012,28.916],[98.7891,29.0039],[98.7891,28.8721],[98.9648,28.8281],[98.9648,29.1357],[99.1406,29.2676],[99.2285,28.3008],[99.4043,28.1689],[99.4043,28.5205],[99.668,28.8281],[100.1953,28.3447],[100.0195,28.125],[100.2832,27.7295],[100.3711,27.8174],[100.7227,27.8613],[101.1621,27.1582],[101.1621,27.0264],[101.4258,26.7188],[101.4258,26.8066],[101.4258,26.5869],[101.6895,26.3672],[101.6016,26.2354],[101.8652,26.0596],[102.1289,26.1035],[102.5684,26.3672],[102.6563,26.1914],[103.0078,26.3672],[102.9199,27.29],[103.4473,27.7734],[103.4473,28.125],[103.7988,28.3008],[103.8867,28.6523],[104.4141,28.6084],[104.2383,28.4326],[104.4141,28.2568],[104.4141,28.125],[104.3262,28.0371],[104.4141,27.9492],[104.8535,27.9053],[105.0293,28.0811],[105.2051,27.9932],[105.293,27.7295],[105.2051,27.3779],[104.5898,27.334],[104.4141,27.4658],[104.1504,27.2461],[103.8867,27.4219],[103.623,27.0264],[103.7109,26.9824],[103.7109,26.7627],[103.8867,26.543],[104.4141,26.6748],[104.6777,26.4111],[104.3262,25.708],[104.8535,25.2246],[104.5898,25.0488],[104.6777,24.9609],[104.502,24.7412],[104.6777,24.3457],[104.7656,24.4775],[105.0293,24.4336],[105.2051,24.082],[105.4688,24.0381],[105.5566,24.126],[105.9961,24.126],[106.1719,23.8184],[106.1719,23.5547],[105.6445,23.4229],[105.5566,23.2031],[105.293,23.3789],[104.8535,23.1592],[104.7656,22.8516],[104.3262,22.6758],[104.1504,22.8076],[103.9746,22.5439],[103.623,22.7637],[103.5352,22.5879],[103.3594,22.8076],[103.0957,22.4561],[102.4805,22.7637],[102.3047,22.4121],[101.8652,22.3682],[101.7773,22.5],[101.6016,22.1924],[101.8652,21.6211],[101.7773,21.1377],[101.6016,21.2256],[101.25,21.1816],[101.1621,21.7529],[100.6348,21.4453],[100.1074,21.4893],[99.9316,22.0605],[99.2285,22.1484],[99.4043,22.5879],[99.3164,22.7197],[99.4922,23.0713],[98.877,23.2031],[98.7012,23.9502],[98.877,24.126],[98.1738,24.082],[97.7344,23.8623],[97.5586,23.9063],[97.7344,24.126],[97.6465,24.4336],[97.5586,24.4336],[97.5586,24.7412],[97.7344,24.8291],[97.8223,25.2686],[98.1738,25.4004],[98.1738,25.6201],[98.3496,25.5762],[98.5254,25.8398],[98.7012,25.8838],[98.6133,26.0596],[98.7012,26.1475],[98.7891,26.5869],[98.7012,27.5098],[98.5254,27.6416],[98.3496,27.5098],[98.1738,28.125]]]}},{"type":"Feature","properties":{"id":"45","size":"1450","name":"广西壮族自治区","cp":[107.7813,23.6426],"childNum":14},"geometry":{"type":"Polygon","coordinates":[[[104.502,24.7412],[104.6777,24.6094],[105.2051,24.9609],[105.9961,24.6533],[106.1719,24.7852],[106.1719,24.9609],[106.875,25.1807],[107.0508,25.2686],[106.9629,25.4883],[107.2266,25.6201],[107.4902,25.2246],[107.7539,25.2246],[107.8418,25.1367],[108.1055,25.2246],[108.1934,25.4443],[108.3691,25.5322],[108.6328,25.3125],[108.6328,25.5762],[109.0723,25.5322],[108.9844,25.752],[109.3359,25.708],[109.5117,26.0156],[109.7754,25.8838],[109.9512,26.1914],[110.2148,25.9717],[110.5664,26.3232],[111.1816,26.3232],[111.2695,26.2354],[111.2695,25.8838],[111.4453,25.8398],[111.0059,25.0049],[111.0938,24.9609],[111.3574,25.1367],[111.5332,24.6533],[111.709,24.7852],[112.0605,24.7412],[111.8848,24.6533],[112.0605,24.3457],[111.8848,24.2139],[111.8848,23.9941],[111.7969,23.8184],[111.6211,23.8184],[111.6211,23.6865],[111.3574,23.4668],[111.4453,23.0273],[111.2695,22.8076],[110.7422,22.5439],[110.7422,22.2803],[110.6543,22.1484],[110.3027,22.1484],[110.3027,21.8848],[109.9512,21.8408],[109.8633,21.665],[109.7754,21.6211],[109.7754,21.4014],[109.5996,21.4453],[109.1602,21.3574],[109.248,20.874],[109.0723,20.9619],[109.0723,21.5332],[108.7207,21.5332],[108.6328,21.665],[108.2813,21.4893],[107.8418,21.6211],[107.4023,21.6211],[107.0508,21.7969],[107.0508,21.9287],[106.6992,22.0166],[106.6113,22.4121],[106.7871,22.7637],[106.6992,22.8955],[105.9082,22.9395],[105.5566,23.0713],[105.5566,23.2031],[105.6445,23.4229],[106.1719,23.5547],[106.1719,23.8184],[105.9961,24.126],[105.5566,24.126],[105.4688,24.0381],[105.2051,24.082],[105.0293,24.4336],[104.7656,24.4775],[104.6777,24.3457],[104.502,24.7412]]]}},{"type":"Feature","properties":{"id":"43","size":"1700","name":"湖南省","cp":[111.5332,27.3779],"childNum":14},"geometry":{"type":"Polygon","coordinates":[[[109.248,28.4766],[109.248,29.1357],[109.5117,29.6191],[109.6875,29.6191],[109.7754,29.751],[110.4785,29.6631],[110.6543,29.751],[110.4785,30.0146],[110.8301,30.1465],[111.7969,29.9268],[112.2363,29.5313],[112.5,29.6191],[112.6758,29.5752],[112.9395,29.7949],[113.0273,29.751],[112.9395,29.4873],[113.0273,29.4434],[113.5547,29.8389],[113.5547,29.707],[113.7305,29.5752],[113.6426,29.3115],[113.7305,29.0918],[113.9063,29.0479],[114.1699,28.8281],[114.082,28.5645],[114.2578,28.3447],[113.7305,27.9492],[113.6426,27.5977],[113.6426,27.3779],[113.8184,27.29],[113.7305,27.1143],[113.9063,26.9385],[113.9063,26.6309],[114.082,26.5869],[113.9941,26.1914],[114.2578,26.1475],[113.9941,26.0596],[113.9063,25.4443],[113.6426,25.3125],[113.2031,25.5322],[112.8516,25.3564],[113.0273,25.2246],[113.0273,24.9609],[112.8516,24.917],[112.5879,25.1367],[112.2363,25.1807],[112.1484,24.873],[112.0605,24.7412],[111.709,24.7852],[111.5332,24.6533],[111.3574,25.1367],[111.0938,24.9609],[111.0059,25.0049],[111.4453,25.8398],[111.2695,25.8838],[111.2695,26.2354],[111.1816,26.3232],[110.5664,26.3232],[110.2148,25.9717],[109.9512,26.1914],[109.7754,25.8838],[109.5117,26.0156],[109.4238,26.2793],[109.248,26.3232],[109.4238,26.5869],[109.3359,26.7188],[109.5117,26.8066],[109.5117,27.0264],[109.3359,27.1582],[108.8965,27.0264],[108.8086,27.1143],[109.4238,27.5977],[109.3359,27.9053],[109.3359,28.2568],[109.248,28.4766]]]}},{"type":"Feature","properties":{"id":"61","size":"1150","name":"陕西省","cp":[109.5996,35.7396],"childNum":10},"geometry":{"type":"Polygon","coordinates":[[[105.4688,32.915],[105.9082,33.0029],[105.9961,33.1787],[105.7324,33.3984],[105.9961,33.6182],[106.5234,33.5303],[106.4355,33.9258],[106.6113,34.1455],[106.5234,34.2773],[106.6992,34.3213],[106.3477,34.585],[106.5234,34.7607],[106.6113,35.0684],[106.9629,35.0684],[107.2266,34.8926],[107.666,34.9365],[107.8418,35.0244],[107.7539,35.1123],[107.7539,35.2881],[108.5449,35.2881],[108.6328,35.5518],[108.5449,35.8594],[108.6328,35.9912],[108.7207,36.3428],[107.3145,36.9141],[107.3145,37.0898],[107.3145,37.6172],[107.666,37.8809],[108.1934,37.6172],[108.7207,37.7051],[108.8086,38.0127],[108.8965,37.9688],[109.0723,38.0127],[108.9844,38.3203],[109.9512,39.1553],[109.8633,39.2432],[110.2148,39.2871],[110.127,39.4629],[110.6543,39.2871],[111.0938,39.5947],[111.0938,39.375],[111.1816,39.2432],[110.918,38.7158],[110.8301,38.4961],[110.4785,38.1885],[110.4785,37.9688],[110.8301,37.6611],[110.3906,37.002],[110.4785,36.123],[110.5664,35.6396],[110.2148,34.8926],[110.2148,34.6729],[110.3906,34.585],[110.4785,34.2334],[110.6543,34.1455],[110.6543,33.8379],[111.0059,33.5303],[111.0059,33.2666],[110.7422,33.1348],[110.5664,33.2666],[110.3027,33.1787],[109.5996,33.2666],[109.4238,33.1348],[109.7754,33.0469],[109.7754,32.915],[110.127,32.7393],[110.127,32.6074],[109.6875,32.6074],[109.5117,32.4316],[109.5996,31.7285],[109.248,31.7285],[109.0723,31.9482],[108.5449,32.2119],[108.2813,32.2559],[108.0176,32.168],[107.4023,32.5195],[107.2266,32.4316],[107.1387,32.4756],[107.0508,32.6953],[106.3477,32.6514],[106.084,32.7393],[106.084,32.8711],[105.5566,32.7393],[105.4688,32.915]]]}},{"type":"Feature","properties":{"id":"44","size":"1600","name":"广东省","cp":[113.4668,22.8076],"childNum":21},"geometry":{"type":"Polygon","coordinates":[[[109.7754,21.4014],[109.7754,21.6211],[109.8633,21.665],[109.9512,21.8408],[110.3027,21.8848],[110.3027,22.1484],[110.6543,22.1484],[110.7422,22.2803],[110.7422,22.5439],[111.2695,22.8076],[111.4453,23.0273],[111.3574,23.4668],[111.6211,23.6865],[111.6211,23.8184],[111.7969,23.8184],[111.8848,23.9941],[111.8848,24.2139],[112.0605,24.3457],[111.8848,24.6533],[112.0605,24.7412],[112.1484,24.873],[112.2363,25.1807],[112.5879,25.1367],[112.8516,24.917],[113.0273,24.9609],[113.0273,25.2246],[112.8516,25.3564],[113.2031,25.5322],[113.6426,25.3125],[113.9063,25.4443],[113.9941,25.2686],[114.6094,25.4004],[114.7852,25.2686],[114.6973,25.1367],[114.4336,24.9609],[114.1699,24.6973],[114.4336,24.5215],[115.4004,24.7852],[115.8398,24.5654],[115.752,24.7852],[115.9277,24.917],[116.2793,24.7852],[116.3672,24.873],[116.543,24.6094],[116.7188,24.6533],[116.9824,24.1699],[116.9824,23.9063],[117.1582,23.5547],[117.334,23.2471],[116.8945,23.3789],[116.6309,23.1152],[116.543,22.8516],[115.9277,22.7197],[115.6641,22.7637],[115.5762,22.6318],[115.0488,22.6758],[114.6094,22.3682],[114.3457,22.5439],[113.9941,22.5],[113.8184,22.1924],[114.3457,22.1484],[114.4336,22.0166],[114.082,21.9287],[113.9941,21.7969],[113.5547,22.0166],[113.1152,21.8408],[112.9395,21.5771],[112.4121,21.4453],[112.2363,21.5332],[111.5332,21.4893],[111.2695,21.3574],[110.7422,21.3574],[110.6543,21.2256],[110.7422,20.918],[110.4785,20.874],[110.6543,20.2588],[110.5664,20.2588],[110.3906,20.127],[110.0391,20.127],[109.8633,20.127],[109.8633,20.3027],[109.5996,20.918],[109.7754,21.4014],[109.7754,21.4014]],[[113.5986,22.1649],[113.6096,22.1265],[113.5547,22.11],[113.5437,22.2034],[113.5767,22.2034],[113.5986,22.1649]]]}},{"type":"Feature","properties":{"id":"22","size":"1120","name":"吉林省","cp":[125.7746,43.5938],"childNum":9},"geometry":{"type":"Polygon","coordinates":[[[123.2227,46.2305],[123.9258,46.2305],[124.0137,45.7471],[124.3652,45.4395],[124.8926,45.5273],[125.0684,45.3955],[125.6836,45.5273],[125.7715,45.3076],[126.0352,45.1758],[126.5625,45.2637],[126.9141,45.1318],[127.0898,45],[127.002,44.7803],[127.0898,44.6045],[127.5293,44.6045],[127.7051,44.1211],[128.0566,44.1211],[128.0566,44.3408],[128.4082,44.4727],[128.4961,44.165],[128.8477,43.5498],[129.1992,43.5938],[129.2871,43.8135],[129.8145,43.9014],[129.9023,44.0332],[129.9902,43.8574],[130.3418,43.9893],[130.5176,43.6377],[130.8691,43.418],[131.3086,43.4619],[131.3086,43.3301],[131.1328,42.9346],[130.4297,42.7148],[130.6055,42.6709],[130.6055,42.4512],[130.2539,42.7588],[130.2539,42.8906],[130.166,42.9785],[129.9023,43.0225],[129.7266,42.4951],[129.375,42.4512],[128.9355,42.0117],[128.0566,42.0117],[128.3203,41.5723],[128.1445,41.3525],[127.0898,41.5283],[127.1777,41.5723],[126.9141,41.792],[126.6504,41.6602],[126.4746,41.3965],[126.123,40.957],[125.6836,40.8691],[125.5957,40.9131],[125.7715,41.2207],[125.332,41.6602],[125.332,41.9678],[125.4199,42.0996],[125.332,42.1436],[124.8926,42.8027],[124.8926,43.0664],[124.7168,43.0664],[124.4531,42.8467],[124.2773,43.2422],[123.8379,43.4619],[123.6621,43.374],[123.3105,43.5059],[123.4863,43.7256],[123.1348,44.4727],[122.3438,44.2529],[122.0801,44.8682],[122.2559,45.2637],[121.9043,45.7031],[121.7285,45.7471],[121.8164,46.0107],[122.2559,45.791],[122.4316,45.8789],[122.6953,45.7031],[122.7832,46.0107],[123.2227,46.2305]]]}},{"type":"Feature","properties":{"id":"13","size":"1300","name":"河北省","cp":[115.4004,39.4688],"childNum":11},"geometry":{"type":"MultiPolygon","coordinates":[[[[114.5215,39.5068],[114.3457,39.8584],[113.9941,39.9902],[114.5215,40.3418],[114.3457,40.3857],[114.2578,40.6055],[114.082,40.7373],[113.9063,41.1328],[113.9941,41.2207],[113.9063,41.4404],[114.2578,41.5723],[114.1699,41.792],[114.5215,42.1436],[114.873,42.0996],[114.9609,41.6162],[115.2246,41.5723],[115.9277,41.9238],[116.0156,41.792],[116.2793,42.0117],[116.8066,42.0117],[116.8945,42.4072],[117.334,42.4512],[117.5098,42.583],[117.7734,42.627],[118.0371,42.4072],[117.9492,42.2314],[118.125,42.0557],[118.3008,42.0996],[118.3008,41.792],[118.125,41.748],[118.3887,41.3086],[119.2676,41.3086],[118.8281,40.8252],[119.2676,40.5176],[119.5313,40.5615],[119.707,40.1221],[119.8828,39.9463],[119.5313,39.6826],[119.4434,39.4189],[118.916,39.0674],[118.4766,38.9355],[118.125,39.0234],[118.0371,39.1992],[118.0371,39.2432],[117.8613,39.4189],[117.9492,39.5947],[117.6855,39.5947],[117.5098,39.7705],[117.5098,39.9902],[117.6855,39.9902],[117.6855,40.0781],[117.4219,40.21],[117.2461,40.5176],[117.4219,40.6494],[116.9824,40.6934],[116.6309,41.0449],[116.3672,40.9131],[116.4551,40.7813],[116.1914,40.7813],[116.1035,40.6055],[115.752,40.5615],[115.9277,40.2539],[115.4004,39.9463],[115.4883,39.6387],[115.752,39.5068],[116.1914,39.5947],[116.3672,39.4629],[116.543,39.5947],[116.8066,39.5947],[116.8945,39.1113],[116.7188,38.9355],[116.7188,38.8037],[117.2461,38.54],[117.5977,38.6279],[117.9492,38.3203],[117.4219,37.8369],[116.8066,37.8369],[116.4551,37.4854],[116.2793,37.5732],[116.2793,37.3535],[116.0156,37.3535],[115.752,36.9141],[115.3125,36.5186],[115.4883,36.167],[115.3125,36.0791],[115.1367,36.2109],[114.9609,36.0791],[114.873,36.123],[113.7305,36.3428],[113.4668,36.6504],[113.7305,36.8701],[113.7305,37.1338],[114.1699,37.6611],[113.9941,37.7051],[113.8184,38.1445],[113.5547,38.2764],[113.5547,38.54],[113.8184,38.8037],[113.8184,38.9355],[113.9063,39.0234],[114.3457,39.0674],[114.5215,39.5068]]],[[[117.2461,40.0781],[117.1582,39.8145],[117.1582,39.6387],[116.8945,39.6826],[116.8945,39.8145],[116.8066,39.9902],[117.2461,40.0781]]]]}},{"type":"Feature","properties":{"id":"42","size":"1500","name":"湖北省","cp":[112.2363,31.1572],"childNum":17},"geometry":{"type":"Polygon","coordinates":[[[110.2148,31.1572],[110.127,31.377],[109.6875,31.5527],[109.7754,31.6846],[109.5996,31.7285],[109.5117,32.4316],[109.6875,32.6074],[110.127,32.6074],[110.127,32.7393],[109.7754,32.915],[109.7754,33.0469],[109.4238,33.1348],[109.5996,33.2666],[110.3027,33.1787],[110.5664,33.2666],[110.7422,33.1348],[111.0059,33.2666],[111.5332,32.6074],[112.3242,32.3438],[113.2031,32.4316],[113.4668,32.2998],[113.7305,32.4316],[113.8184,31.8604],[113.9941,31.7725],[114.1699,31.8604],[114.5215,31.7725],[114.6094,31.5527],[114.7852,31.4648],[115.1367,31.5967],[115.2246,31.4209],[115.4004,31.4209],[115.5762,31.2012],[116.0156,31.0254],[115.752,30.6738],[116.1035,30.1904],[116.1035,29.8389],[115.9277,29.707],[115.4883,29.7949],[114.873,29.3994],[114.2578,29.3555],[113.9063,29.0479],[113.7305,29.0918],[113.6426,29.3115],[113.7305,29.5752],[113.5547,29.707],[113.5547,29.8389],[113.0273,29.4434],[112.9395,29.4873],[113.0273,29.751],[112.9395,29.7949],[112.6758,29.5752],[112.5,29.6191],[112.2363,29.5313],[111.7969,29.9268],[110.8301,30.1465],[110.4785,30.0146],[110.6543,29.751],[110.4785,29.6631],[109.7754,29.751],[109.6875,29.6191],[109.5117,29.6191],[109.248,29.1357],[109.0723,29.3555],[108.9844,29.3115],[108.6328,29.8389],[108.457,29.7949],[108.5449,30.2344],[108.457,30.4102],[108.6328,30.5859],[108.8086,30.498],[109.0723,30.6299],[109.1602,30.542],[109.248,30.6299],[109.4238,30.542],[109.8633,30.8936],[110.0391,30.8057],[110.2148,31.1572]]]}},{"type":"Feature","properties":{"id":"52","size":"2000","name":"贵州省","cp":[106.6113,26.9385],"childNum":9},"geometry":{"type":"Polygon","coordinates":[[[104.1504,27.2461],[104.4141,27.4658],[104.5898,27.334],[105.2051,27.3779],[105.293,27.7295],[105.5566,27.7734],[105.6445,27.6416],[106.3477,27.8174],[106.1719,28.125],[105.9082,28.125],[105.6445,28.4326],[105.9961,28.7402],[106.3477,28.5205],[106.5234,28.5645],[106.4355,28.7842],[106.5234,28.7842],[106.6113,28.6523],[106.6113,28.5205],[106.6992,28.4766],[106.875,28.7842],[107.4023,28.8721],[107.4023,29.1797],[107.5781,29.2236],[107.8418,29.1357],[107.8418,29.0039],[108.2813,29.0918],[108.3691,28.6523],[108.5449,28.6523],[108.5449,28.3887],[108.7207,28.4766],[108.7207,28.2129],[109.0723,28.2129],[109.248,28.4766],[109.3359,28.2568],[109.3359,27.9053],[109.4238,27.5977],[108.8086,27.1143],[108.8965,27.0264],[109.3359,27.1582],[109.5117,27.0264],[109.5117,26.8066],[109.3359,26.7188],[109.4238,26.5869],[109.248,26.3232],[109.4238,26.2793],[109.5117,26.0156],[109.3359,25.708],[108.9844,25.752],[109.0723,25.5322],[108.6328,25.5762],[108.6328,25.3125],[108.3691,25.5322],[108.1934,25.4443],[108.1055,25.2246],[107.8418,25.1367],[107.7539,25.2246],[107.4902,25.2246],[107.2266,25.6201],[106.9629,25.4883],[107.0508,25.2686],[106.875,25.1807],[106.1719,24.9609],[106.1719,24.7852],[105.9961,24.6533],[105.2051,24.9609],[104.6777,24.6094],[104.502,24.7412],[104.6777,24.9609],[104.5898,25.0488],[104.8535,25.2246],[104.3262,25.708],[104.6777,26.4111],[104.4141,26.6748],[103.8867,26.543],[103.7109,26.7627],[103.7109,26.9824],[103.623,27.0264],[103.8867,27.4219],[104.1504,27.2461]]]}},{"type":"Feature","properties":{"id":"37","size":"1500","name":"山东省","cp":[118.7402,36.4307],"childNum":17},"geometry":{"type":"Polygon","coordinates":[[[115.4883,36.167],[115.3125,36.5186],[115.752,36.9141],[116.0156,37.3535],[116.2793,37.3535],[116.2793,37.5732],[116.4551,37.4854],[116.8066,37.8369],[117.4219,37.8369],[117.9492,38.3203],[118.125,38.1445],[118.916,38.1445],[119.3555,37.6611],[119.0039,37.5293],[119.0039,37.3535],[119.3555,37.1338],[119.707,37.1338],[119.8828,37.3975],[120.498,37.8369],[120.5859,38.1445],[120.9375,38.4521],[121.0254,37.8369],[121.2012,37.6611],[121.9043,37.4854],[122.168,37.6172],[122.2559,37.4854],[122.6074,37.4854],[122.6953,37.3535],[122.6074,36.9141],[122.4316,36.7822],[121.8164,36.8701],[121.7285,36.6943],[121.1133,36.6064],[121.1133,36.4307],[121.377,36.2549],[120.7617,36.167],[120.9375,35.8594],[120.6738,36.0352],[119.707,35.4639],[119.9707,34.9805],[119.3555,35.0244],[119.2676,35.1123],[118.916,35.0244],[118.7402,34.7168],[118.4766,34.6729],[118.3887,34.4092],[118.2129,34.4092],[118.125,34.6289],[117.9492,34.6729],[117.5977,34.4531],[117.334,34.585],[117.2461,34.4531],[116.8066,34.9365],[116.4551,34.8926],[116.3672,34.6289],[116.1914,34.585],[115.5762,34.585],[115.4004,34.8486],[114.7852,35.0684],[115.0488,35.376],[115.2246,35.4199],[115.4883,35.7275],[116.1035,36.0791],[115.3125,35.8154],[115.4883,36.167]]]}},{"type":"Feature","properties":{"id":"36","size":"1700","name":"江西省","cp":[116.0156,27.29],"childNum":11},"geometry":{"type":"Polygon","coordinates":[[[114.2578,28.3447],[114.082,28.5645],[114.1699,28.8281],[113.9063,29.0479],[114.2578,29.3555],[114.873,29.3994],[115.4883,29.7949],[115.9277,29.707],[116.1035,29.8389],[116.2793,29.7949],[116.7188,30.0586],[116.8945,29.9268],[116.7188,29.751],[116.7188,29.6191],[117.1582,29.707],[117.0703,29.8389],[117.1582,29.9268],[117.5098,29.6191],[118.0371,29.5752],[118.2129,29.3994],[118.0371,29.1797],[118.0371,29.0479],[118.3887,28.7842],[118.4766,28.3447],[118.4766,28.3008],[118.3008,28.0811],[117.7734,27.8174],[117.5098,27.9932],[116.9824,27.6416],[117.1582,27.29],[117.0703,27.1143],[116.543,26.8066],[116.6309,26.4551],[116.3672,26.2354],[116.4551,26.1035],[116.1914,25.8838],[116.0156,25.2686],[115.8398,25.2246],[115.9277,24.917],[115.752,24.7852],[115.8398,24.5654],[115.4004,24.7852],[114.4336,24.5215],[114.1699,24.6973],[114.4336,24.9609],[114.6973,25.1367],[114.7852,25.2686],[114.6094,25.4004],[113.9941,25.2686],[113.9063,25.4443],[113.9941,26.0596],[114.2578,26.1475],[113.9941,26.1914],[114.082,26.5869],[113.9063,26.6309],[113.9063,26.9385],[113.7305,27.1143],[113.8184,27.29],[113.6426,27.3779],[113.6426,27.5977],[113.7305,27.9492],[114.2578,28.3447]]]}},{"type":"Feature","properties":{"id":"41","size":"1700","name":"河南省","cp":[113.0668,33.8818],"childNum":17},"geometry":{"type":"Polygon","coordinates":[[[110.3906,34.585],[110.8301,34.6289],[111.1816,34.8047],[111.5332,34.8486],[111.7969,35.0684],[112.0605,35.0684],[112.0605,35.2881],[112.7637,35.2002],[113.1152,35.332],[113.6426,35.6836],[113.7305,36.3428],[114.873,36.123],[114.9609,36.0791],[115.1367,36.2109],[115.3125,36.0791],[115.4883,36.167],[115.3125,35.8154],[116.1035,36.0791],[115.4883,35.7275],[115.2246,35.4199],[115.0488,35.376],[114.7852,35.0684],[115.4004,34.8486],[115.5762,34.585],[116.1914,34.585],[116.1914,34.4092],[116.543,34.2773],[116.6309,33.9258],[116.1914,33.7061],[116.0156,33.9697],[115.6641,34.0576],[115.5762,33.9258],[115.5762,33.6621],[115.4004,33.5303],[115.3125,33.1787],[114.873,33.1348],[114.873,33.0029],[115.1367,32.8711],[115.2246,32.6074],[115.5762,32.4316],[115.8398,32.5195],[115.9277,31.7725],[115.4883,31.6846],[115.4004,31.4209],[115.2246,31.4209],[115.1367,31.5967],[114.7852,31.4648],[114.6094,31.5527],[114.5215,31.7725],[114.1699,31.8604],[113.9941,31.7725],[113.8184,31.8604],[113.7305,32.4316],[113.4668,32.2998],[113.2031,32.4316],[112.3242,32.3438],[111.5332,32.6074],[111.0059,33.2666],[111.0059,33.5303],[110.6543,33.8379],[110.6543,34.1455],[110.4785,34.2334],[110.3906,34.585]]]}},{"type":"Feature","properties":{"id":"21","size":"1500","name":"辽宁省","cp":[122.0438,41.0889],"childNum":14},"geometry":{"type":"Polygon","coordinates":[[[119.2676,41.3086],[119.4434,41.6162],[119.2676,41.7041],[119.3555,42.2754],[119.5313,42.3633],[119.8828,42.1875],[120.1465,41.7041],[120.498,42.0996],[121.4648,42.4951],[121.7285,42.4512],[121.9922,42.7148],[122.3438,42.6709],[122.3438,42.8467],[122.7832,42.7148],[123.1348,42.8027],[123.3105,42.9785],[123.5742,43.0225],[123.6621,43.374],[123.8379,43.4619],[124.2773,43.2422],[124.4531,42.8467],[124.7168,43.0664],[124.8926,43.0664],[124.8926,42.8027],[125.332,42.1436],[125.4199,42.0996],[125.332,41.9678],[125.332,41.6602],[125.7715,41.2207],[125.5957,40.9131],[125.6836,40.8691],[124.541,40.21],[124.1016,39.6826],[123.3984,39.6826],[123.1348,39.4189],[123.1348,39.0234],[122.0801,39.0234],[121.5527,38.7158],[121.1133,38.6719],[120.9375,38.9795],[121.377,39.1992],[121.2012,39.5508],[122.0801,40.3857],[121.9922,40.6934],[121.7285,40.8252],[121.2012,40.8252],[120.5859,40.21],[119.8828,39.9463],[119.707,40.1221],[119.5313,40.5615],[119.2676,40.5176],[118.8281,40.8252],[119.2676,41.3086]]]}},{"type":"Feature","properties":{"id":"14","size":"1450","name":"山西省","cp":[112.4121,37.6611],"childNum":11},"geometry":{"type":"Polygon","coordinates":[[[110.918,38.7158],[111.1816,39.2432],[111.0938,39.375],[111.3574,39.4189],[111.4453,39.6387],[111.9727,39.5947],[112.3242,40.2539],[112.7637,40.166],[113.2031,40.3857],[113.5547,40.3418],[113.8184,40.5176],[114.082,40.5176],[114.082,40.7373],[114.2578,40.6055],[114.3457,40.3857],[114.5215,40.3418],[113.9941,39.9902],[114.3457,39.8584],[114.5215,39.5068],[114.3457,39.0674],[113.9063,39.0234],[113.8184,38.9355],[113.8184,38.8037],[113.5547,38.54],[113.5547,38.2764],[113.8184,38.1445],[113.9941,37.7051],[114.1699,37.6611],[113.7305,37.1338],[113.7305,36.8701],[113.4668,36.6504],[113.7305,36.3428],[113.6426,35.6836],[113.1152,35.332],[112.7637,35.2002],[112.0605,35.2881],[112.0605,35.0684],[111.7969,35.0684],[111.5332,34.8486],[111.1816,34.8047],[110.8301,34.6289],[110.3906,34.585],[110.2148,34.6729],[110.2148,34.8926],[110.5664,35.6396],[110.4785,36.123],[110.3906,37.002],[110.8301,37.6611],[110.4785,37.9688],[110.4785,38.1885],[110.8301,38.4961],[110.918,38.7158]]]}},{"type":"Feature","properties":{"id":"34","size":"1700","name":"安徽省","cp":[117.2461,32.0361],"childNum":17},"geometry":{"type":"Polygon","coordinates":[[[116.6309,33.9258],[116.543,34.2773],[116.1914,34.4092],[116.1914,34.585],[116.3672,34.6289],[116.8945,34.4092],[117.1582,34.0576],[117.5977,34.0137],[117.7734,33.7061],[118.125,33.75],[117.9492,33.2227],[118.0371,33.1348],[118.2129,33.2227],[118.3008,32.7832],[118.7402,32.7393],[118.916,32.959],[119.1797,32.8271],[119.1797,32.4756],[118.5645,32.5635],[118.6523,32.2119],[118.4766,32.168],[118.3887,31.9482],[118.916,31.5527],[118.7402,31.377],[118.8281,31.2451],[119.3555,31.2891],[119.4434,31.1572],[119.6191,31.1133],[119.6191,31.0693],[119.4434,30.6738],[119.2676,30.6299],[119.3555,30.4102],[118.916,30.3223],[118.916,29.9707],[118.7402,29.707],[118.2129,29.3994],[118.0371,29.5752],[117.5098,29.6191],[117.1582,29.9268],[117.0703,29.8389],[117.1582,29.707],[116.7188,29.6191],[116.7188,29.751],[116.8945,29.9268],[116.7188,30.0586],[116.2793,29.7949],[116.1035,29.8389],[116.1035,30.1904],[115.752,30.6738],[116.0156,31.0254],[115.5762,31.2012],[115.4004,31.4209],[115.4883,31.6846],[115.9277,31.7725],[115.8398,32.5195],[115.5762,32.4316],[115.2246,32.6074],[115.1367,32.8711],[114.873,33.0029],[114.873,33.1348],[115.3125,33.1787],[115.4004,33.5303],[115.5762,33.6621],[115.5762,33.9258],[115.6641,34.0576],[116.0156,33.9697],[116.1914,33.7061],[116.6309,33.9258]]]}},{"type":"Feature","properties":{"id":"35","size":"2000","name":"福建省","cp":[118.3008,25.9277],"childNum":9},"geometry":{"type":"Polygon","coordinates":[[[118.4766,28.3008],[118.8281,28.2568],[118.7402,28.0371],[118.916,27.4658],[119.2676,27.4219],[119.6191,27.6855],[119.7949,27.29],[120.2344,27.4219],[120.4102,27.1582],[120.7617,27.0264],[120.6738,26.8945],[120.2344,26.8506],[120.2344,26.7188],[120.4102,26.6748],[120.498,26.3672],[120.2344,26.2793],[120.4102,26.1475],[120.0586,26.1914],[119.9707,25.9277],[119.7949,25.9277],[119.9707,25.4004],[119.7949,25.2686],[119.5313,25.1367],[119.4434,25.0049],[119.2676,25.0928],[118.916,24.8291],[118.6523,24.5215],[118.4766,24.5215],[118.4766,24.4336],[118.2129,24.3457],[118.2129,24.1699],[117.8613,23.9941],[117.7734,23.7744],[117.5098,23.5986],[117.1582,23.5547],[116.9824,23.9063],[116.9824,24.1699],[116.7188,24.6533],[116.543,24.6094],[116.3672,24.873],[116.2793,24.7852],[115.9277,24.917],[115.8398,25.2246],[116.0156,25.2686],[116.1914,25.8838],[116.4551,26.1035],[116.3672,26.2354],[116.6309,26.4551],[116.543,26.8066],[117.0703,27.1143],[117.1582,27.29],[116.9824,27.6416],[117.5098,27.9932],[117.7734,27.8174],[118.3008,28.0811],[118.4766,28.3008]]]}},{"type":"Feature","properties":{"id":"33","size":"2100","name":"浙江省","cp":[120.498,29.0918],"childNum":11},"geometry":{"type":"Polygon","coordinates":[[[118.2129,29.3994],[118.7402,29.707],[118.916,29.9707],[118.916,30.3223],[119.3555,30.4102],[119.2676,30.6299],[119.4434,30.6738],[119.6191,31.0693],[119.6191,31.1133],[119.9707,31.1572],[120.498,30.8057],[120.9375,31.0254],[121.2891,30.6738],[121.9922,30.8057],[122.6953,30.8936],[122.8711,30.7178],[122.959,30.1465],[122.6074,30.1025],[122.6074,29.9268],[122.168,29.5313],[122.3438,28.8721],[121.9922,28.8721],[121.9922,28.4326],[121.7285,28.3447],[121.7285,28.2129],[121.4648,28.2129],[121.5527,28.0371],[121.2891,27.9492],[121.1133,27.4219],[120.6738,27.334],[120.6738,27.1582],[120.9375,27.0264],[120.7617,27.0264],[120.4102,27.1582],[120.2344,27.4219],[119.7949,27.29],[119.6191,27.6855],[119.2676,27.4219],[118.916,27.4658],[118.7402,28.0371],[118.8281,28.2568],[118.4766,28.3008],[118.4766,28.3447],[118.3887,28.7842],[118.0371,29.0479],[118.0371,29.1797],[118.2129,29.3994]]]}},{"type":"Feature","properties":{"id":"32","size":"1950","name":"江苏省","cp":[118.8586,32.915],"childNum":13},"geometry":{"type":"Polygon","coordinates":[[[116.3672,34.6289],[116.4551,34.8926],[116.8066,34.9365],[117.2461,34.4531],[117.334,34.585],[117.5977,34.4531],[117.9492,34.6729],[118.125,34.6289],[118.2129,34.4092],[118.3887,34.4092],[118.4766,34.6729],[118.7402,34.7168],[118.916,35.0244],[119.2676,35.1123],[119.3555,35.0244],[119.3555,34.8486],[119.707,34.585],[120.3223,34.3652],[120.9375,33.0469],[121.0254,32.6514],[121.377,32.4756],[121.4648,32.168],[121.9043,31.9922],[121.9922,31.6846],[121.9922,31.5967],[121.2012,31.8604],[121.1133,31.7285],[121.377,31.5088],[121.2012,31.4648],[120.9375,31.0254],[120.498,30.8057],[119.9707,31.1572],[119.6191,31.1133],[119.4434,31.1572],[119.3555,31.2891],[118.8281,31.2451],[118.7402,31.377],[118.916,31.5527],[118.3887,31.9482],[118.4766,32.168],[118.6523,32.2119],[118.5645,32.5635],[119.1797,32.4756],[119.1797,32.8271],[118.916,32.959],[118.7402,32.7393],[118.3008,32.7832],[118.2129,33.2227],[118.0371,33.1348],[117.9492,33.2227],[118.125,33.75],[117.7734,33.7061],[117.5977,34.0137],[117.1582,34.0576],[116.8945,34.4092],[116.3672,34.6289]]]}},{"type":"Feature","properties":{"id":"50","size":"2380","name":"重庆市","cp":[107.7539,30.1904],"childNum":40},"geometry":{"type":"Polygon","coordinates":[[[108.5449,31.6846],[108.2813,31.9043],[108.3691,32.168],[108.5449,32.2119],[109.0723,31.9482],[109.248,31.7285],[109.5996,31.7285],[109.7754,31.6846],[109.6875,31.5527],[110.127,31.377],[110.2148,31.1572],[110.0391,30.8057],[109.8633,30.8936],[109.4238,30.542],[109.248,30.6299],[109.1602,30.542],[109.0723,30.6299],[108.8086,30.498],[108.6328,30.5859],[108.457,30.4102],[108.5449,30.2344],[108.457,29.7949],[108.6328,29.8389],[108.9844,29.3115],[109.0723,29.3555],[109.248,29.1357],[109.248,28.4766],[109.0723,28.2129],[108.7207,28.2129],[108.7207,28.4766],[108.5449,28.3887],[108.5449,28.6523],[108.3691,28.6523],[108.2813,29.0918],[107.8418,29.0039],[107.8418,29.1357],[107.5781,29.2236],[107.4023,29.1797],[107.4023,28.8721],[106.875,28.7842],[106.6992,28.4766],[106.6113,28.5205],[106.6113,28.6523],[106.5234,28.7842],[106.4355,28.7842],[106.5234,28.5645],[106.3477,28.5205],[106.2598,28.8721],[105.8203,28.96],[105.7324,29.2676],[105.4688,29.3115],[105.293,29.5313],[105.7324,29.8828],[105.5566,30.1025],[105.6445,30.2783],[105.8203,30.4541],[106.2598,30.1904],[106.6113,30.3223],[106.7871,30.0146],[107.0508,30.0146],[107.4902,30.6299],[107.4023,30.7617],[107.4902,30.8496],[107.9297,30.8496],[108.1934,31.5088],[108.5449,31.6846]]]}},{"type":"Feature","properties":{"id":"64","size":"2100","name":"宁夏回族自治区","cp":[105.9961,37.3096],"childNum":5},"geometry":{"type":"Polygon","coordinates":[[[104.3262,37.4414],[105.8203,37.793],[105.9082,38.7158],[106.3477,39.2871],[106.7871,39.375],[106.9629,38.9795],[106.5234,38.3203],[106.7871,38.1885],[107.3145,38.1006],[107.666,37.8809],[107.3145,37.6172],[107.3145,37.0898],[106.6113,37.0898],[106.6113,36.7822],[106.4355,36.5625],[106.5234,36.4746],[106.5234,36.2549],[106.875,36.123],[106.9629,35.8154],[106.6992,35.6836],[106.4355,35.6836],[106.5234,35.332],[106.3477,35.2441],[106.2598,35.4199],[106.084,35.376],[105.9961,35.4199],[106.084,35.4639],[105.9961,35.4639],[105.8203,35.5518],[105.7324,35.7275],[105.3809,35.7715],[105.293,35.9912],[105.4688,36.123],[105.2051,36.6943],[105.293,36.8262],[104.8535,37.2217],[104.5898,37.2217],[104.5898,37.4414],[104.3262,37.4414]]]}},{"type":"Feature","properties":{"id":"46","size":"4500","name":"海南省","cp":[109.9512,19.2041],"childNum":18},"geometry":{"type":"Polygon","coordinates":[[[108.6328,19.3799],[109.0723,19.6436],[109.248,19.9512],[109.5996,20.0391],[110.0391,20.127],[110.3906,20.127],[110.5664,20.2588],[110.6543,20.2588],[111.0938,19.9512],[111.2695,19.9951],[110.6543,19.1602],[110.5664,18.6768],[110.2148,18.5889],[110.0391,18.3691],[109.8633,18.3691],[109.6875,18.1055],[108.9844,18.2813],[108.6328,18.457],[108.6328,19.3799]]]}},{"type":"Feature","properties":{"id":"71","size":"3000","name":"台湾省","cp":[120.0254,23.5986],"childNum":1},"geometry":{"type":"Polygon","coordinates":[[[121.9043,25.0488],[121.9922,25.0049],[121.8164,24.7412],[121.9043,24.5654],[121.6406,24.0381],[121.377,23.1152],[121.0254,22.6758],[120.8496,22.0605],[120.7617,21.9287],[120.6738,22.3242],[120.2344,22.5879],[120.0586,23.0713],[120.1465,23.6865],[121.0254,25.0488],[121.5527,25.3125],[121.9043,25.0488]]]}},{"type":"Feature","properties":{"id":"11","size":"5000","name":"北京市","cp":[116.4551,40.2539],"childNum":19},"geometry":{"type":"Polygon","coordinates":[[[117.4219,40.21],[117.334,40.1221],[117.2461,40.0781],[116.8066,39.9902],[116.8945,39.8145],[116.8945,39.6826],[116.8066,39.5947],[116.543,39.5947],[116.3672,39.4629],[116.1914,39.5947],[115.752,39.5068],[115.4883,39.6387],[115.4004,39.9463],[115.9277,40.2539],[115.752,40.5615],[116.1035,40.6055],[116.1914,40.7813],[116.4551,40.7813],[116.3672,40.9131],[116.6309,41.0449],[116.9824,40.6934],[117.4219,40.6494],[117.2461,40.5176],[117.4219,40.21]]]}},{"type":"Feature","properties":{"id":"12","size":"5000","name":"天津市","cp":[117.4219,39.4189],"childNum":18},"geometry":{"type":"Polygon","coordinates":[[[116.8066,39.5947],[116.8945,39.6826],[117.1582,39.6387],[117.1582,39.8145],[117.2461,40.0781],[117.334,40.1221],[117.4219,40.21],[117.6855,40.0781],[117.6855,39.9902],[117.5098,39.9902],[117.5098,39.7705],[117.6855,39.5947],[117.9492,39.5947],[117.8613,39.4189],[118.0371,39.2432],[118.0371,39.1992],[117.8613,39.1113],[117.5977,38.6279],[117.2461,38.54],[116.7188,38.8037],[116.7188,38.9355],[116.8945,39.1113],[116.8066,39.5947]]]}},{"type":"Feature","properties":{"id":"31","size":"7500","name":"上海市","cp":[121.4648,31.2891],"childNum":19},"geometry":{"type":"Polygon","coordinates":[[[120.9375,31.0254],[121.2012,31.4648],[121.377,31.5088],[121.1133,31.7285],[121.2012,31.8604],[121.9922,31.5967],[121.9043,31.1572],[121.9922,30.8057],[121.2891,30.6738],[120.9375,31.0254]]]}},{"type":"Feature","properties":{"id":"81","size":"18000","name":"香港特别行政区","cp":[114.1178,22.3242],"childNum":1},"geometry":{"type":"Polygon","coordinates":[[[114.6094,22.4121],[114.5215,22.1484],[114.3457,22.1484],[113.9063,22.1484],[113.8184,22.1924],[113.9063,22.4121],[114.1699,22.5439],[114.3457,22.5439],[114.4336,22.5439],[114.4336,22.4121],[114.6094,22.4121]]]}},{"type":"Feature","properties":{"id":"82","size":"27","name":"澳门特别行政区","cp":[111.5547,22.1484],"childNum":1},"geometry":{"type":"Polygon","coordinates":[[[113.5986,22.1649],[113.6096,22.1265],[113.5547,22.11],[113.5437,22.2034],[113.5767,22.2034],[113.5986,22.1649]]]}}]'),i2={type:bE,features:wE};var Zf=new Map,CE=new Map,SE=new Map;function TE(n,t,e){const i=n.length;let r="",s=0,a=!1;for(;s<i;){const o=n[s];if(e&&e.has(o)){const[c,l]=e.get(o),u=n.slice(s);for(const[h,p]of c.entries())if(u.startsWith(p)){r+=l[h],s+=p.length,a=!0;break}}a?a=!1:(r+=t.get(o)||o,s+=1)}return r}var n2="‘『 ’』 “「 ”」 ″〞 〓═ 㐷傌 㐹㑶 㐽偑 㑇㑳 㑈倲 㑔㑯 㑩儸 㓆𠗣 㓥劏 㓰劃 㔉劚 㖊噚 㖞喎 㘎㘚 㚯㜄 㛀媰 㛟𡞵 㛠𡢃 㛣㜏 㛤孋 㛿𡠹 㟆㠏 㟜𡾱 㟥嵾 㡎幓 㤘㥮 㤽懤 㥪慺 㧏掆 㧐㩳 㧑撝 㧟擓 㧰擽 㨫㩜 㭎棡 㭏椲 㭣𣙎 㭤樢 㭴樫 㱩殰 㱮殨 㲿瀇 㳔濧 㳕灡 㳠澾 㳡濄 㳢𣾷 㳽瀰 㴋潚 㶉鸂 㶶燶 㶽煱 㺍獱 㻅璯 㻏𤫩 㻘𤪺 䀥䁻 䁖瞜 䂵碽 䃅磾 䅉稏 䅟穇 䅪𥢢 䇲筴 䉤籔 䌶䊷 䌷紬 䌸縳 䌹絅 䌺䋙 䌻䋚 䌼綐 䌽綵 䌾䋻 䌿䋹 䍀繿 䍁繸 䍠䍦 䎬䎱 䏝膞 䑽𦪙 䓓薵 䓕薳 䓖藭 䓨罃 䗖螮 䘛𧝞 䘞𧜗 䙊𧜵 䙌䙡 䙓襬 䜣訢 䜤鿁 䜥𧩙 䜧䜀 䜩讌 䝙貙 䞌𧵳 䞍䝼 䞎𧶧 䞐賰 䟢躎 䢀𨊰 䢁𨊸 䢂𨋢 䥺釾 䥽鏺 䥾䥱 䥿𨯅 䦀𨦫 䦁𨧜 䦂䥇 䦃鐯 䦅鐥 䦆钁 䦶䦛 䦷䦟 䩄靦 䭪𩞯 䯃𩣑 䯄騧 䯅䯀 䲝䱽 䲞𩶘 䲟鮣 䲠鰆 䲡鰌 䲢鰧 䲣䱷 䴓鳾 䴔鵁 䴕鴷 䴖鶄 䴗鶪 䴘鷉 䴙鸊 䶮龑 万萬 与與 丑醜 专專 业業 丛叢樷 东東 丝絲 丢丟 两兩 严嚴 丧喪 个個箇 丰豐 临臨 为爲為 丽麗 举舉擧 么麼麽 义義 乌烏 乐樂 乔喬 习習 乡鄉鄕 书書 买買 乱亂 了瞭 争爭 于於 亏虧 云雲 亘亙 亚亞 产產産 亩畝 亲親 亵褻 亸嚲軃 亿億 仅僅 仆僕 仇讎 从從 仑侖崙 仓倉 仪儀 们們 价價 仿彷 众衆眾 优優 伙夥 会會 伛傴 伞傘繖 伟偉 传傳 伡俥 伣俔 伤傷 伥倀 伦倫 伧傖 伪僞偽 伫佇 体體躰 余餘 佛彿 佣傭 佥僉 侠俠 侣侶 侥僥 侦偵 侧側 侨僑 侩儈 侪儕 侬儂 侭儘 俊儁 俣俁 俦儔 俨儼 俩倆 俪儷 俫倈 俭儉 修脩 借藉 债債 倾傾 偬傯 偻僂 偾僨 偿償 傤儎 傥儻 傧儐 储儲 傩儺 僵殭 儿兒 克剋 兑兌 兖兗 党黨 兰蘭 关關関 兴興 兹茲玆 养養 兽獸 冁囅 内內 冈岡 册冊 写寫 军軍 农農辳 冬鼕 冯馮 冲衝沖 决決 况況 冻凍 净淨凈 凄悽淒 准準 凉涼 凌淩 减減 凑湊 凛凜 几幾 凤鳳 凫鳧鳬 凭憑凴 凯凱 凶兇 出齣 击擊 凿鑿 刍芻 划劃畫 刘劉 则則 刚剛 创創 删刪 别別彆 刬剗 刭剄 刮颳 制製 刹剎 刽劊 刾㓨 刿劌 剀剴 剂劑 剐剮 剑劍劒 剥剝 剧劇 劝勸 办辦 务務 劢勱 动動 励勵 劲勁 劳勞 势勢 勋勳勛 勚勩 匀勻 匦匭 匮匱 区區 医醫毉 千韆 升升昇陞 华華 协協 单單 卖賣 卜蔔 占佔 卢盧 卤滷鹵 卧臥 卫衛衞 却卻 卷捲 卺巹 厂厂廠厰 厅廳厛 历歷曆厤 厉厲 压壓 厌厭 厍厙 厐龎 厕廁厠 厘釐 厢廂 厣厴 厦廈 厨廚 厩廄 厮廝 县縣 叁叄 参參蔘葠蓡 叆靉 叇靆 双雙 发發髮 变變 叙敘敍 叠疊曡 只隻衹 台台臺檯颱 叶葉 号號 叹嘆歎 叽嘰 吁吁籲訏 吃喫 合閤 吊弔 同衕 后後 向向嚮曏 吓嚇 吕呂 吗嗎 吨噸 听聽聼 启啓啟 吴吳 呐吶 呒嘸 呓囈讛 呕嘔 呖嚦 呗唄 员員 呙咼 呛嗆 呜嗚 周周週賙 咏詠 咙嚨 咛嚀 咝噝 咤吒 咨諮 咸鹹 咽嚥 哄鬨 响響 哑啞 哒噠 哓嘵 哔嗶 哕噦 哗譁嘩 哙噲 哜嚌 哝噥 哟喲 唇脣 唛嘜 唝嗊 唠嘮 唡啢 唢嗩 唤喚 啧嘖 啬嗇 啭囀 啮齧嚙 啯嘓 啰囉 啴嘽 啸嘯歗 喂餵 喷噴 喽嘍 喾嚳 嗫囁 嗳噯 嘘噓 嘤嚶 嘱囑 噜嚕 噪譟 嚣囂嚻 回迴 团團糰 园園 困睏 囱囪 围圍 囵圇 国國囯 图圖 圆圓 圣聖 圹壙 场場塲 坏壞 块塊 坚堅 坛壇罈墰壜罎 坜壢 坝壩垻 坞塢隖 坟墳 坠墜 垄壟壠 垅壠壟 垆壚罏 垒壘 垦墾 垩堊 垫墊 垭埡 垯墶 垱壋 垲塏 垴堖 埘塒 埙壎塤 埚堝 堑塹 堕墮 塆壪 墙牆墻 壮壯 声聲 壳殼殻 壶壺 壸壼 处處処 备備 复復複覆 够夠 夫伕 头頭 夸誇 夹夾裌 夺奪 奁奩匲匳籢 奂奐 奋奮 奖獎奬 奥奧 奸姦 妆妝粧 妇婦 妈媽 妩嫵娬 妪嫗 妫嬀媯 姗姍 姜薑 姹奼 娄婁 娅婭 娆嬈 娇嬌 娈孌 娘孃 娱娛 娲媧 娴嫺嫻 婳嫿 婴嬰 婵嬋 婶嬸 媪媼 媭嬃 嫒嬡 嫔嬪 嫱嬙 嬷嬤 孙孫 学學 孪孿 宁寧甯 它牠 宝寶 实實 宠寵 审審讅 宪憲 宫宮 家傢 宽寬 宾賓賔 寝寢 对對 寻尋 导導 寿壽夀 将將 尔爾 尘塵 尝嘗嚐 尧堯 尴尷尲 尸屍 尽盡儘 局侷 层層 屃屓屭 屉屜 届屆 属屬 屡屢 屦屨 屿嶼 岁歲嵗𡻕 岂豈 岖嶇 岗崗 岘峴 岚嵐 岛島 岩巖 岭嶺 岳嶽 岽崬崠 岿巋 峃嶨 峄嶧 峡峽 峣嶢 峤嶠 峥崢 峦巒 峰峯 崂嶗 崃崍 崄嶮 崭嶄 嵘嶸 嵚嶔 嵝嶁 巅巔 巨鉅 巩鞏 巯巰 币幣 布佈 帅帥 师師 帏幃 帐帳 帘簾 帜幟 带帶 帧幀 席蓆 帮幫 帱幬 帻幘 帼幗 幂冪 干幹乾榦 并並併竝 幸倖 广廣 庄莊 庆慶 床牀 庐廬 庑廡 库庫 应應 庙廟 庞龐 废廢 庵菴 庼廎 廪廩 开開𫔭 异異 弃棄 弑弒 张張 弥彌瀰 弦絃 弪弳 弯彎 弹彈 强強彊 归歸 当當噹儅 录錄彔録 彟彠 彦彥 彨彲 彩綵 彻徹 征徵 径徑逕 徕徠 御禦 忆憶 忏懺 志誌 忧憂 念唸 忾愾 怀懷 态態 怂慫 怃憮 怄慪 怅悵 怆愴 怜憐 总總縂 怼懟 怿懌 恋戀 恒恆 恤卹 恳懇 恶惡噁 恸慟 恹懨懕 恺愷 恻惻 恼惱 恽惲 悦悅 悫愨慤 悬懸 悭慳 悮悞 悯憫 惊驚 惧懼 惨慘 惩懲 惫憊 惬愜 惭慚慙 惮憚 惯慣 愈癒 愠慍 愤憤 愦憒 愿願𫖸 慑懾慴 慭憖 懑懣 懒懶嬾 懔懍 戆戇 戋戔 戏戲戯 戗戧 战戰𢧐 戚慼 戬戩 戯戱 户戶 才纔 扎紮紥 扑撲 托託 扣釦 执執 扩擴 扪捫 扫掃 扬揚敭颺 扰擾 折摺 抚撫 抛拋 抟摶 抠摳 抡掄 抢搶 护護 报報 抵牴 担擔 拐拐柺枴 拟擬 拢攏 拣揀 拥擁 拦攔 拧擰 拨撥 择擇 挂掛 挚摯 挛攣 挜掗 挝撾 挞撻 挟挾 挠撓 挡擋攩 挢撟 挣掙 挤擠 挥揮 挦撏 挨捱 挽輓 捝挩 捞撈 损損 捡撿 换換 捣搗擣 据據 掳擄 掴摑 掷擲 掸撣 掺摻 掼摜 揽攬 揾搵 揿撳搇 搀攙 搁擱 搂摟 搄揯 搅攪 搜蒐 携攜擕 摄攝 摅攄 摆擺襬 摇搖 摈擯 摊攤 撄攖 撑撐 撵攆 撷擷 撸擼 撺攛 擜㩵 擞擻 攒攢儹欑 敌敵 敚敓 敛斂歛 敩斆 数數 斋齋 斓斕 斗鬥 斩斬 断斷 旋鏇 无無 旧舊 时時 旷曠 旸暘 昆崑 昙曇 昵暱 昼晝 昽曨 显顯 晋晉 晒曬 晓曉 晔曄 晕暈 晖暉 暂暫 暅𣈶 暗闇 暧曖 曲曲麴麯 术術朮 朱硃 朴樸 机機 杀殺 杂雜襍 权權 杆桿 杠槓 条條 来來 杨楊 杩榪 杯盃 杰傑 松鬆 板闆 极極 构構搆 枞樅 枢樞 枣棗 枥櫪 枧梘 枨棖 枪槍 枫楓 枭梟 柜櫃 柠檸 柽檉 栀梔 栅柵 标標 栈棧 栉櫛 栊櫳 栋棟 栌櫨 栎櫟 栏欄 树樹 栖棲 栗慄 样樣 核覈 栾欒 桠椏 桡橈 桢楨 档檔 桤榿 桥橋 桦樺 桧檜 桨槳 桩樁 桪樳 梁樑 梦夢 梼檮 梾棶 梿槤 检檢 棁梲 棂欞櫺 椁槨 椝槼 椟櫝匵 椠槧 椢槶 椤欏 椫樿 椭橢 椮槮 楼樓 榄欖 榅榲 榇櫬 榈櫚 榉櫸欅 榝樧 槚檟 槛檻 槟檳 槠櫧 横橫 樯檣艢 樱櫻 橥櫫 橱櫥 橹櫓艣艪 橼櫞 檩檁 欢歡懽 欤歟 欧歐 欲慾 歼殲 殁歿 殇殤 残殘 殒殞 殓殮 殚殫 殡殯 殴毆 毁毀燬譭 毂轂 毕畢 毙斃 毡氈氊 毵毿 毶𣯶 氇氌 气氣 氢氫 氩氬 氲氳 汇匯彙滙 汉漢 汤湯 汹洶 沄澐 沈瀋 沟溝 没沒 沣灃 沤漚 沥瀝 沦淪 沧滄 沨渢 沩潙溈 沪滬 沾霑 泛泛氾汎 泞濘 注註 泪淚 泶澩 泷瀧 泸瀘 泺濼 泻瀉 泼潑 泽澤 泾涇 洁潔 洒灑 洼窪 浃浹 浅淺 浆漿 浇澆 浈湞 浉溮 浊濁 测測 浍澮 济濟 浏瀏 浐滻 浑渾 浒滸 浓濃 浔潯 浕濜 涂涂塗凃 涌湧 涚涗 涛濤 涝澇 涞淶 涟漣 涠潿 涡渦 涢溳 涣渙 涤滌 润潤 涧澗 涨漲 涩澀澁 淀澱 渊淵 渌淥 渍漬 渎瀆凟 渐漸 渑澠 渔漁 渖瀋 渗滲 温溫 游遊 湾灣 湿溼濕 溁濚 溃潰 溅濺 溆漵 溇漊 滗潷 滚滾 滞滯 滟灩灧 滠灄 满滿 滢瀅 滤濾 滥濫 滦灤 滨濱 滩灘 滪澦 漓灕 潆瀠 潇瀟 潋瀲 潍濰 潜潛 潴瀦 澛瀂 澜瀾 濑瀨 濒瀕 灏灝 灭滅 灯燈 灵靈霛 灶竈 灾災 灿燦 炀煬 炉爐鑪 炖燉 炜煒 炝熗 点點 炼煉鍊 炽熾 烁爍 烂爛 烃烴 烛燭 烟煙菸 烦煩 烧燒 烨燁爗 烩燴 烫燙 烬燼 热熱 焕煥 焖燜 焘燾 煴熅 熏燻 爱愛 爷爺 牍牘 牦犛氂 牵牽 牺犧 犊犢 状狀 犷獷 犸獁 犹猶 狈狽 狝獮 狞獰 独獨 狭狹 狮獅 狯獪 狰猙 狱獄 狲猻 猃獫 猎獵 猕獼 猡玀 猪豬 猫貓 猬蝟 献獻 獭獺 玑璣 玙璵 玚瑒 玛瑪 玩翫 玮瑋 环環 现現 玱瑲 玺璽 珐琺 珑瓏 珰璫 珲琿 琎璡 琏璉 琐瑣 琼瓊 瑶瑤 瑷璦 瑸璸 璇璿 璎瓔 瓒瓚 瓮甕罋 瓯甌 电電 画畫畵 畅暢 畴疇 疖癤 疗療 疟瘧 疠癘 疡瘍 疬癧鬁 疭瘲 疮瘡 疯瘋 疱皰 疴痾屙 症癥 痈癰 痉痙 痒癢 痖瘂 痨癆 痪瘓 痫癇 痴癡 瘅癉 瘆瘮 瘗瘞 瘘瘻瘺 瘪癟 瘫癱 瘾癮 瘿癭 癞癩 癣癬 癫癲 皂皁 皑皚 皱皺 皲皸 盏盞 盐鹽 监監 盖蓋 盗盜 盘盤槃磐 眍瞘 眦眥 眬矓 睁睜 睐睞 睑瞼 瞆瞶 瞒瞞 瞩矚 矩榘 矫矯 矶磯 矾礬 矿礦鑛 砀碭 码碼 砖磚塼甎 砗硨 砚硯 砜碸 砺礪 砻礱 砾礫 础礎 硁硜 硕碩 硖硤 硗磽墝 硙磑 硚礄 确確 硵磠 硷礆鹼 碍礙 碛磧 碜磣硶 碱鹼堿 礼禮 祃禡 祎禕 祢禰 祯禎 祷禱 祸禍 禀稟 禄祿 禅禪 离離 私俬 秃禿 秆稈 秋鞦 种種 秘祕 积積 称稱 秽穢 秾穠 稆穭 税稅 稣穌 稳穩 穑穡 穞穭 穷窮 窃竊 窍竅 窎窵 窑窯窰 窜竄 窝窩 窥窺闚 窦竇 窭窶 竖豎竪 竞競 笃篤 笋筍 笔筆 笕筧 笺箋牋 笼籠 笾籩 筑築 筚篳 筛篩 筜簹 筝箏 筹籌 筼篔 签籤簽 筿篠 简簡 箓籙 箦簀 箧篋 箨籜 箩籮 箪簞 箫簫 篑簣 篓簍 篮籃 篯籛 篱籬 簖籪 籁籟 籴糴 类類 籼秈 粜糶 粝糲 粤粵 粪糞 粮糧 粽糉 糁糝 糇餱 糍餈 系系係繫 紧緊 絷縶 緼縕 縆緪 纟糹糸 纠糾 纡紆 红紅 纣紂 纤纖縴 纥紇 约約 级級 纨紈 纩纊 纪紀 纫紉 纬緯 纭紜 纮紘 纯純 纰紕 纱紗 纲綱 纳納 纴紝絍 纵縱 纶綸 纷紛 纸紙 纹紋 纺紡 纻紵 纼紖 纽紐 纾紓 线綫缐線 绀紺 绁紲絏緤 绂紱 练練 组組 绅紳 细細 织織 终終 绉縐 绊絆 绋紼 绌絀 绍紹 绎繹 经經 绐紿 绑綁 绒絨毧羢 结結 绔絝 绕繞 绖絰 绗絎 绘繪 给給 绚絢 绛絳 络絡 绝絕絶 绞絞 统統 绠綆 绡綃 绢絹 绣繡綉 绤綌 绥綏 绦絛縧縚 继繼 绨綈 绩績勣 绪緒 绫綾 绬緓 续續 绮綺 绯緋 绰綽 绱鞝緔 绲緄 绳繩 维維 绵綿緜 绶綬 绷繃綳 绸綢 绹綯 绺綹 绻綣 综綜 绽綻 绾綰 绿綠緑 缀綴 缁緇 缂緙 缃緗 缄緘 缅緬 缆纜 缇緹 缈緲 缉緝 缊縕緼 缋繢 缌緦 缍綞 缎緞 缏緶 缑緱 缒縋 缓緩 缔締 缕縷 编編 缗緡緍 缘緣 缙縉 缚縛 缛縟 缜縝 缝縫 缞縗 缟縞 缠纏 缡縭 缢縊 缣縑 缤繽 缥縹 缦縵 缧縲 缨纓 缩縮 缪繆 缫繅 缬纈 缭繚 缮繕 缯繒 缰繮韁 缱繾 缲繰 缳繯 缴繳 缵纘 罂罌甖 网網 罗羅儸 罚罰罸 罢罷 罴羆 羁羈 羟羥 羡羨 群羣 翘翹 翙翽 翚翬 耢耮 耧耬 耸聳 耻恥 聂聶 聋聾 职職 聍聹 联聯 聩聵 聪聰 肃肅 肠腸 肤膚 肮骯 肴餚 肾腎 肿腫 胀脹 胁脅脇 胄冑 胆膽 背揹 胜勝 胡胡鬍衚 胧朧 胨腖 胪臚 胫脛 胶膠 脉脈 脍膾 脏髒臟 脐臍 脑腦 脓膿 脔臠 脚腳 脱脫 脶腡 脸臉 腊臘 腌醃 腘膕 腭齶 腻膩 腼靦 腽膃 腾騰 膑臏 膻羶 臜臢 致緻 舆輿 舍捨 舣艤 舰艦 舱艙 舻艫 艰艱 艳豔艷 艺藝 节節 芈羋 芗薌 芜蕪 芦蘆 芸蕓 苁蓯 苇葦 苈藶 苋莧 苌萇 苍蒼 苎苧 苏蘇甦囌 苔薹 苧薴 苹蘋 范範 茎莖 茏蘢 茑蔦 茔塋 茕煢 茧繭 荆荊 荐薦 荙薘 荚莢 荛蕘 荜蓽 荝萴 荞蕎 荟薈 荠薺 荡蕩盪 荣榮 荤葷 荥滎 荦犖 荧熒 荨蕁 荩藎 荪蓀 荫蔭廕 荬蕒 荭葒 荮葤 药藥葯 莅蒞涖 莱萊 莲蓮 莳蒔 莴萵 莶薟 获獲穫 莸蕕 莹瑩 莺鶯鸎 莼蓴蒓 萚蘀 萝蘿 萤螢 营營 萦縈 萧蕭 萨薩 葱蔥 蒀蒕 蒇蕆 蒉蕢 蒋蔣 蒌蔞 蒏醟 蒙蒙矇濛懞 蓝藍 蓟薊 蓠蘺 蓣蕷 蓥鎣 蓦驀 蔂虆 蔑衊 蔷薔 蔹蘞 蔺藺 蔼藹 蕰薀 蕲蘄 蕴蘊藴 薮藪 藓蘚 藴蘊 蘖櫱 虏虜 虑慮 虚虛 虫蟲 虬虯 虮蟣 虱蝨 虽雖 虾蝦 虿蠆 蚀蝕 蚁蟻螘 蚂螞 蚃蠁 蚕蠶 蚝蠔 蚬蜆 蛊蠱 蛎蠣 蛏蟶 蛮蠻 蛰蟄 蛱蛺 蛲蟯 蛳螄 蛴蠐 蜕蛻 蜗蝸 蜡蠟 蝇蠅 蝈蟈 蝉蟬 蝎蠍 蝼螻 蝾蠑 螀螿 螨蟎 蟏蠨 衅釁 衔銜啣 补補 表錶 衬襯 衮袞 袄襖 袅嫋裊嬝 袆褘 袜襪韤 袭襲 袯襏 装裝 裆襠 裈褌 裢褳 裣襝 裤褲 裥襉襇 褛褸 褴襤 襕襴幱 见見 观觀 觃覎 规規槼 觅覓覔 视視眎眡 觇覘 览覽 觉覺 觊覬 觋覡 觌覿 觍覥 觎覦 觏覯 觐覲 觑覷覰覻 觞觴 触觸 觯觶 訚誾 詟讋 誉譽 誊謄 讠訁 计計 订訂 讣訃 认認 讥譏 讦訐 讧訌 讨討 让讓 讪訕 讫訖 讬託 训訓 议議 讯訊 记記 讱訒 讲講 讳諱 讴謳 讵詎 讶訝 讷訥 许許 讹訛譌 论論 讻訩詾 讼訟 讽諷 设設 访訪 诀訣 证證証 诂詁 诃訶 评評 诅詛 识識 诇詗 诈詐 诉訴 诊診 诋詆 诌謅 词詞 诎詘 诏詔 诐詖 译譯 诒詒 诓誆 诔誄 试試 诖詿 诗詩 诘詰 诙詼 诚誠 诛誅 诜詵 话話 诞誕 诟詬 诠詮 诡詭 询詢 诣詣 诤諍 该該 详詳 诧詫 诨諢 诩詡 诪譸 诫誡 诬誣 语語 诮誚 误誤 诰誥 诱誘 诲誨 诳誑 说說説 诵誦 诶誒 请請 诸諸 诹諏 诺諾 读讀 诼諑 诽誹 课課 诿諉 谀諛 谁誰 谂諗 调調 谄諂 谅諒 谆諄 谇誶 谈談 谉讅 谊誼 谋謀 谌諶訦 谍諜 谎謊 谏諫 谐諧 谑謔 谒謁 谓謂 谔諤 谕諭 谖諼 谗讒 谘諮 谙諳 谚諺 谛諦 谜謎 谝諞 谞諝 谟謨 谠讜 谡謖 谢謝 谣謠謡 谤謗 谥諡謚 谦謙 谧謐 谨謹 谩謾 谪謫讁 谫譾謭 谬謬 谭譚 谮譖 谯譙 谰讕 谱譜 谲譎 谳讞 谴譴 谵譫 谶讖 谷穀 豮豶 贝貝 贞貞 负負 贠貟 贡貢 财財 责責 贤賢 败敗 账賬 货貨 质質 贩販 贪貪 贫貧 贬貶 购購 贮貯 贯貫 贰貳 贱賤 贲賁 贳貰 贴貼 贵貴 贶貺 贷貸 贸貿 费費 贺賀 贻貽 贼賊 贽贄 贾賈 贿賄 赀貲 赁賃 赂賂 赃贓贜賍 资資 赅賅 赆贐賮 赇賕 赈賑 赉賚 赊賒 赋賦 赌賭 赍齎賫 赎贖 赏賞 赐賜 赑贔 赒賙 赓賡 赔賠 赕賧 赖賴 赗賵 赘贅 赙賻 赚賺 赛賽 赜賾 赝贗贋 赞贊讚賛 赟贇 赠贈 赡贍 赢贏 赣贛 赪赬 赵趙 赶趕 趋趨 趱趲 趸躉 跃躍 跄蹌 跖蹠 跞躒 践踐 跶躂 跷蹺 跸蹕 跹躚 跻躋 踌躊 踪蹤 踬躓 踯躑 蹑躡 蹒蹣 蹰躕 蹿躥 躏躪 躜躦 躯軀 輼轀 车車 轧軋 轨軌 轩軒 轪軑 轫軔 转轉 轭軛 轮輪 软軟輭 轰轟 轱軲 轲軻 轳轤 轴軸 轵軹 轶軼 轷軤 轸軫 轹轢 轺軺 轻輕 轼軾 载載 轾輊 轿轎 辀輈 辁輇 辂輅 较較 辄輒 辅輔 辆輛 辇輦 辈輩 辉輝煇 辊輥 辋輞 辌輬 辍輟 辎輜 辏輳 辐輻 辑輯 辒轀輼 输輸 辔轡 辕轅 辖轄鎋 辗輾 辘轆 辙轍 辚轔 辞辭辤 辟闢 辩辯 辫辮 边邊 辽遼 达達 迁遷 过過 迈邁 运運 还還 这這 进進 远遠 违違 连連 迟遲 迩邇 迳逕 迹跡蹟 适適 选選 逊遜 递遞 逦邐 逻邏 遗遺 遥遙 邓鄧 邝鄺 邬鄔 邮郵 邹鄒 邺鄴 邻鄰隣 郁鬱 郏郟 郐鄶 郑鄭 郓鄆 郦酈 郧鄖 郸鄲 酂酇 酝醞醖 酦醱 酱醬 酸痠 酽釅 酾釃 酿釀 醖醞 采采採寀埰 释釋 里裏裡 鉴鑑鑒鋻 銮鑾 錾鏨 钅釒 钆釓 钇釔 针針鍼 钉釘 钊釗 钋釙 钌釕 钍釷 钎釺 钏釧 钐釤 钑鈒 钒釩 钓釣 钔鍆 钕釹 钖鍚 钗釵 钘鈃 钙鈣 钚鈈 钛鈦 钜鉅 钝鈍 钞鈔 钟鍾鐘鈡 钠鈉 钡鋇 钢鋼 钣鈑 钤鈐 钥鑰鈅籥 钦欽 钧鈞 钨鎢 钩鉤鈎 钪鈧 钫鈁鍅 钬鈥 钭鈄 钮鈕 钯鈀 钰鈺 钱錢 钲鉦 钳鉗 钴鈷 钵鉢缽 钶鈳 钷鉕 钸鈽 钹鈸 钺鉞 钻鑽鉆 钼鉬 钽鉭 钾鉀 钿鈿 铀鈾 铁鐵鉄銕 铂鉑 铃鈴 铄鑠 铅鉛 铆鉚 铇鉋 铈鈰 铉鉉 铊鉈 铋鉍 铌鈮 铍鈹 铎鐸 铏鉶 铐銬 铑銠 铒鉺 铓鋩 铔錏 铕銪 铖鋮 铗鋏 铘鋣 铙鐃 铚銍 铛鐺 铜銅 铝鋁 铞銱 铟銦 铠鎧 铡鍘 铢銖 铣銑 铤鋌 铥銩 铦銛 铧鏵 铨銓 铩鎩 铪鉿 铫銚 铬鉻 铭銘 铮錚 铯銫 铰鉸 铱銥 铲鏟剷 铳銃 铴鐋 铵銨 银銀 铷銣 铸鑄 铹鐒 铺鋪舖 铻鋙 铼錸 铽鋱 链鏈鍊 铿鏗 销銷 锁鎖 锂鋰 锃鋥 锄鋤耡 锅鍋 锆鋯 锇鋨 锈鏽銹 锉銼 锊鋝 锋鋒 锌鋅 锍鋶 锎鐦 锏鐧 锐銳鋭 锑銻 锒鋃 锓鋟 锔鋦 锕錒 锖錆 锗鍺 锘鍩 错錯 锚錨 锛錛 锜錡 锝鍀 锞錁 锟錕 锠錩 锡錫 锢錮 锣鑼 锤錘鎚 锥錐 锦錦 锧鑕 锨鍁 锩錈 锪鍃 锫錇鉳 锬錟 锭錠 键鍵 锯鋸 锰錳 锱錙 锲鍥 锳鍈 锴鍇 锵鏘 锶鍶 锷鍔 锸鍤 锹鍬鍫 锻鍛 锼鎪 锽鍠 锾鍰 锿鎄 镀鍍 镁鎂 镂鏤 镃鎡 镄鐨 镅鎇 镆鏌 镇鎮鎭 镈鎛 镉鎘 镊鑷 镋钂鎲 镌鐫鎸 镍鎳 镎鎿錼 镏鎦 镐鎬 镑鎊 镒鎰 镓鎵 镔鑌 镕鎔 镖鏢 镗鏜 镘鏝 镙鏍 镚鏰 镛鏞 镜鏡 镝鏑 镞鏃 镟鏇 镠鏐 镡鐔 镢钁鐝 镣鐐 镤鏷 镥鑥 镦鐓 镧鑭 镨鐠 镩鑹 镪鏹 镫鐙 镬鑊 镭鐳 镮鐶 镯鐲鋜 镰鐮鎌 镱鐿 镲鑔 镳鑣 镴鑞 镵鑱 镶鑲 长長 门門 闩閂 闪閃 闫閆 闬閈 闭閉 问問 闯闖 闰閏 闱闈 闲閒閑 闳閎 间間 闵閔 闶閌 闷悶 闸閘牐 闹鬧閙 闺閨 闻聞 闼闥 闽閩 闾閭 闿闓 阀閥 阁閣 阂閡 阃閫 阄鬮 阅閱閲 阆閬 阇闍 阈閾 阉閹 阊閶 阋鬩 阌閿 阍閽 阎閻 阏閼 阐闡 阑闌 阒闃 阓闠 阔闊濶 阕闋 阖闔 阗闐 阘闒 阙闕 阚闞 阛闤 队隊 阳陽 阴陰隂 阵陣 阶階堦 际際 陆陸 陇隴 陈陳 陉陘 陕陝 陦隯 陧隉 陨隕 险險 随隨 隐隱 隶隸隷 隽雋 难難 雇僱 雏雛 雕雕𫛲鵰彫琱 雠讎讐 雳靂 雾霧 霁霽 霉黴 霡霢 霭靄 靓靚 靔靝 静靜 面面麪麫麵 靥靨 鞑韃 鞒鞽 鞯韉 鞲韝 韦韋 韧韌靭 韨韍 韩韓 韪韙 韫韞 韬韜 韵韻 页頁 顶頂 顷頃 顸頇 项項 顺順 须須鬚 顼頊 顽頑 顾顧 顿頓 颀頎 颁頒 颂頌 颃頏 预預 颅顱 领領 颇頗 颈頸 颉頡 颊頰 颋頲 颌頜 颍潁 颎熲 颏頦 颐頤 频頻 颒頮 颓頹頽穨 颔頷 颕頴 颖穎 颗顆 题題 颙顒 颚顎 颛顓 颜顏顔 额額 颞顳 颟顢 颠顛 颡顙 颢顥 颣纇 颤顫 颥顬 颦顰 颧顴 风風 飏颺 飐颭 飑颮 飒颯 飓颶 飔颸 飕颼 飖颻 飗飀 飘飄飃 飙飆飇飈 飚飈飆 飞飛 飨饗 餍饜 饣飠 饤飣 饥飢饑 饦飥 饧餳 饨飩 饩餼 饪飪 饫飫 饬飭 饭飯 饮飲 饯餞 饰飾 饱飽 饲飼 饳飿 饴飴 饵餌 饶饒 饷餉 饸餄 饹餎 饺餃 饻餏 饼餅 饽餑 饾餖 饿餓 馀餘 馁餒 馂餕 馃餜 馄餛 馅餡 馆館舘 馇餷 馈饋餽 馉餶 馊餿 馋饞 馌饁 馍饃饝 馎餺 馏餾 馐饈 馑饉 馒饅 馓饊 馔饌 馕饢 马馬 驭馭 驮馱 驯馴 驰馳 驱驅敺 驲馹 驳駁駮 驴驢 驵駔 驶駛 驷駟 驸駙 驹駒 驺騶 驻駐 驼駝 驽駑 驾駕 驿驛 骀駘 骁驍 骂罵駡 骃駰 骄驕 骅驊 骆駱 骇駭 骈駢 骉驫 骊驪 骋騁 验驗騐 骍騂 骎駸 骏駿 骐騏 骑騎 骒騍 骓騅 骔騌 骕驌 骖驂 骗騙騗 骘騭 骙騤 骚騷 骛騖 骜驁 骝騮 骞騫 骟騸 骠驃 骡騾驘 骢驄 骣驏 骤驟 骥驥 骦驦 骧驤 髅髏 髋髖 髌髕 鬓鬢髩 鬶鬹 魇魘 魉魎 鱼魚 鱽魛 鱾魢 鱿魷 鲀魨 鲁魯 鲂魴 鲃䰾 鲄魺 鲅鮁 鲆鮃 鲇鮎鯰 鲈鱸 鲉鮋 鲊鮓 鲋鮒 鲌鮊 鲍鮑 鲎鱟 鲏鮍 鲐鮐 鲑鮭 鲒鮚 鲓鮳 鲔鮪 鲕鮞 鲖鮦 鲗鰂 鲘鮜 鲙鱠 鲚鱭 鲛鮫 鲜鮮 鲝鮺 鲞鯗鮝 鲟鱘 鲠鯁骾 鲡鱺 鲢鰱 鲣鰹 鲤鯉 鲥鰣 鲦鰷 鲧鯀鮌 鲨鯊 鲩鯇 鲪鮶 鲫鯽 鲬鯒 鲭鯖 鲮鯪 鲯鯕 鲰鯫 鲱鯡 鲲鯤 鲳鯧 鲴鯝 鲵鯢 鲶鯰 鲷鯛 鲸鯨 鲹鰺鯵 鲺鯴 鲻鯔 鲼鱝 鲽鰈 鲾鰏 鲿鱨 鳀鯷鮷 鳁鰮鰛 鳂鰃 鳃鰓 鳄鱷鰐 鳅鰍鰌 鳆鰒 鳇鰉 鳈鰁 鳉鱂 鳊鯿 鳋鰠 鳌鰲鼇 鳍鰭 鳎鰨 鳏鰥 鳐鰩 鳑鰟 鳒鰜 鳓鰳 鳔鰾 鳕鱈 鳖鱉鼈 鳗鰻 鳘鰵 鳙鱅 鳚䲁 鳛鰼 鳜鱖 鳝鱔鱓 鳞鱗 鳟鱒 鳠鱯 鳡鱤 鳢鱧 鳣鱣 鳤䲘 鸟鳥 鸠鳩 鸡雞鷄 鸢鳶 鸣鳴 鸤鳲 鸥鷗 鸦鴉鵶 鸧鶬 鸨鴇 鸩鴆 鸪鴣 鸫鶇 鸬鸕 鸭鴨 鸮鴞 鸯鴦 鸰鴒 鸱鴟 鸲鴝 鸳鴛 鸴鷽鴬 鸵鴕 鸶鷥 鸷鷙 鸸鴯 鸹鴰 鸺鵂 鸻鴴 鸼鵃 鸽鴿 鸾鸞 鸿鴻 鹀鵐 鹁鵓 鹂鸝 鹃鵑 鹄鵠 鹅鵝鵞 鹆鵒 鹇鷳鷴鷼 鹈鵜 鹉鵡 鹊鵲 鹋鶓 鹌鵪 鹍鵾鶤 鹎鵯 鹏鵬 鹐鵮 鹑鶉 鹒鶊 鹓鵷 鹔鷫 鹕鶘 鹖鶡 鹗鶚 鹘鶻 鹙鶖 鹚鷀鶿 鹛鶥 鹜鶩 鹝鷊 鹞鷂 鹟鶲 鹠鶹 鹡鶺 鹢鷁 鹣鶼 鹤鶴 鹥鷖 鹦鸚 鹧鷓 鹨鷚 鹩鷯 鹪鷦 鹫鷲 鹬鷸 鹭鷺 鹮䴉 鹯鸇 鹰鷹 鹱鸌 鹲鸏 鹳鸛 鹴鸘 鹾鹺 麦麥 麸麩 麹麴 麺麪麵 麽麼 黄黃 黉黌 黡黶 黩黷 黪黲 黾黽 鼋黿 鼌鼂 鼍鼉 鼹鼴 齐齊 齑齏 齿齒 龀齔 龁齕 龂齗 龃齟 龄齡 龅齙 龆齠 龇齜 龈齦 龉齬 龊齪 龋齲 龌齷 龙龍 龚龔 龛龕 龟龜 鿎䃮 鿏䥑 鿒鿓 鿔鎶 𠀾𠁞 𠆲儣 𠆿𠌥 𠇹俓 𠉂㒓 𠉗𠏢 𠋆儭 𠚳𠠎 𠛅剾 𠛆𠞆 𠛾𪟖 𠡠勑 𠮶嗰 𠯟哯 𠯠噅 𠰱㘉 𠰷嚧 𠱞囃 𠲥𡅏 𠴛𡃕 𠴢𡄔 𠵸𡄣 𠵾㗲 𡋀𡓾 𡋗𡑭 𡋤壗 𡍣𡔖 𡒄壈 𡝠㜷 𡞋㜗 𡞱㜢 𡠟孎 𡥧孻 𡭜𡮉 𡭬𡮣 𡳃𡳳 𡳒𦘧 𡶴嵼 𡸃𡽗 𡺃嶈 𡺄嶘 𢋈㢝 𢗓㦛 𢘙𢤱 𢘝𢣚 𢘞𢣭 𢙏愻 𢙐憹 𢙑𢠼 𢙒憢 𢙓懀 𢛯㦎 𢠁懎 𢢐𤢻 𢫊𢷮 𢫞𢶫 𢫬摋 𢬍擫 𢬦𢹿 𢭏擣 𢽾斅 𣃁斸 𣆐曥 𣈣𣋋 𣍨𦢈 𣍯腪 𣍰脥 𣎑臗 𣏢槫 𣐕桱 𣐤欍 𣑶𣠲 𣒌楇 𣓿橯 𣔌樤 𣗊樠 𣗋欓 𣗙㰙 𣘐㯤 𣘓𣞻 𣘴檭 𣘷𣝕 𣚚欘 𣞎𣠩 𣨼殢 𣭤𣯴 𣯣𣯩 𣱝氭 𣲗湋 𣲘潕 𣳆㵗 𣶩澅 𣶫𣿉 𣶭𪷓 𣷷𤅶 𣸣濆 𣺼灙 𣺽𤁣 𣽷瀃 𤆡熓 𤆢㷍 𤇃爄 𤇄熌 𤇭爖 𤇹熚 𤈶熉 𤈷㷿 𤊀𤒎 𤊰𤓩 𤋏熡 𤎺𤓎㸇 𤎻𤑳 𤙯𤛮 𤝢𤢟 𤞃獩 𤞤玁 𤠋㺏 𤦀瓕 𤩽瓛 𤳄𤳸 𤶊癐 𤶧𤸫 𤻊㿗 𤽯㿧 𤾀皟 𤿲麬 𥁢䀉 𥅘𥌃 𥅴䀹 𥅿𥊝 𥆧瞤 𥇢䁪 𥎝䂎 𥐟礒 𥐯𥖅 𥐰𥕥 𥐻碙 𥞦𥞵 𥧂𥨐 𥩟竚 𥩺𥪂 𥫣籅 𥬀䉙 𥬞籋 𥬠篘 𥭉𥵊 𥮋𥸠 𥮜䉲 𥮾篸 𥱔𥵃 𥹥𥼽 𥺅䊭 𥺇𥽖 𦈈𥿊 𦈉緷 𦈋綇 𦈌綀 𦈎繟 𦈏緍 𦈐縺 𦈑緸 𦈒𦂅 𦈓䋿 𦈔縎 𦈕緰 𦈖䌈 𦈗𦃄 𦈘䌋 𦈙䌰 𦈚縬 𦈛繓 𦈜䌖 𦈝繏 𦈞䌟 𦈟䌝 𦈠䌥 𦈡繻 𦍠䍽 𦛨朥 𦝼膢 𦟗𦣎 𦨩𦪽 𦰏蓧 𦰴䕳 𦶟爇 𦶻𦾟 𦻕蘟 𧉐𧕟 𧉞䗿 𧌥𧎈 𧏖蠙 𧏗蠀 𧑏蠾 𧒭𧔥 𧜭䙱 𧝝襰 𧝧𧟀 𧮪詀 𧳕𧳟 𧹑䞈 𧹒買 𧹓𧶔 𧹔賬 𧹕䝻 𧹖賟 𧹗贃 𧿈𨇁 𨀁躘 𨀱𨄣 𨁴𨅍 𨂺𨈊 𨄄𨈌 𨅛䠱 𨅫𨇞 𨅬躝 𨉗軉 𨐅軗 𨐆𨊻 𨐇𨏠 𨐈輄 𨐉𨎮 𨐊𨏥 𨑹䢨 𨟳𨣞 𨠨𨣧 𨡙𨢿 𨡺𨣈 𨤰𨤻 𨰾鎷 𨰿釳 𨱀𨥛 𨱁鈠 𨱂鈋 𨱃鈲 𨱄鈯 𨱅鉁 𨱆龯 𨱇銶 𨱈鋉 𨱉鍄 𨱊𨧱 𨱋錂 𨱌鏆 𨱍鎯 𨱎鍮 𨱏鎝 𨱐𨫒 𨱑鐄 𨱒鏉 𨱓鐎 𨱔鐏 𨱕𨮂 𨱖䥩 𨷿䦳 𨸀𨳕 𨸁𨳑 𨸂閍 𨸃閐 𨸄䦘 𨸅𨴗 𨸆𨵩 𨸇𨵸 𨸉𨶀 𨸊𨶏 𨸋𨶲 𨸌𨶮 𨸎𨷲 𨸘𨽏 𨸟䧢 𩏼䪏 𩏽𩏪 𩏾𩎢 𩏿䪘 𩐀䪗 𩓋顂 𩖕𩓣 𩖖顃 𩖗䫴 𩙥颰 𩙦𩗀 𩙧䬞 𩙨𩘹 𩙩𩘀 𩙪颷 𩙫颾 𩙬𩘺 𩙭𩘝 𩙮䬘 𩙯䬝 𩙰𩙈 𩟿𩚛 𩠀𩚥 𩠁𩚵 𩠂𩛆 𩠃𩛩 𩠅𩟐 𩠆𩜦 𩠇䭀 𩠈䭃 𩠉𩜇 𩠊𩜵 𩠋𩝔 𩠌餸 𩠎𩞄 𩠏𩞦 𩠠𩠴 𩡖𩡣 𩧦𩡺 𩧨駎 𩧩𩤊 𩧪䮾 𩧫駚 𩧬𩢡 𩧭䭿 𩧮𩢾 𩧯驋 𩧰䮝 𩧱𩥉 𩧲駧 𩧳𩢸 𩧴駩 𩧵𩢴 𩧶𩣏 𩧸𩣫 𩧺駶 𩧻𩣵 𩧼𩣺 𩧿䮠 𩨀騔 𩨁䮞 𩨂驄 𩨃騝 𩨄騪 𩨅𩤸 𩨆𩤙 𩨇䮫 𩨈騟 𩨉𩤲 𩨊騚 𩨋𩥄 𩨌𩥑 𩨍𩥇 𩨎龭 𩨏䮳 𩨐𩧆 𩩈䯤 𩬣𩭙 𩬤𩰀 𩭹鬖 𩯒𩯳 𩰰𩰹 𩲒𩳤 𩴌𩴵 𩽹魥 𩽺𩵩 𩽻𩵹 𩽼鯶 𩽽𩶱 𩽾鮟 𩽿𩶰 𩾁鯄 𩾂䲖 𩾃鮸 𩾄𩷰 𩾅𩸃 𩾆𩸦 𩾇鯱 𩾈䱙 𩾊䱬 𩾋䱰 𩾌鱇 𩾎𩽇 𪉂䲰 𪉃鳼 𪉄𩿪 𪉅𪀦 𪉆鴲 𪉈鴜 𪉉𪁈 𪉊鷨 𪉋𪀾 𪉌𪁖 𪉍鵚 𪉎𪂆 𪉏𪃏 𪉐𪃍 𪉑鷔 𪉒𪄕 𪉔𪄆 𪉕𪇳 𪎈䴬 𪎉麲 𪎊麨 𪎋䴴 𪎌麳 𪑅䵳 𪔭𪔵 𪚏𪘀 𪚐𪘯 𪜎𠿕 𪞝凙 𪟎㔋 𪟝勣 𪠀𧷎 𪠟㓄 𪠡𠬙 𪠳唓 𪠵㖮 𪠸嚛 𪠺𠽃 𪡀嘺 𪡃嘪 𪡋噞 𪡏嗹 𪡛㗿 𪡞嘳 𪡺𡃄 𪢌㘓 𪢐𡃤 𪢒𡂡 𪢕嚽 𪢖𡅯 𪢠囒 𪢮圞 𪢸墲 𪣆埬 𪣒堚 𪣻塿 𪤄𡓁 𪤚壣 𪥠𧹈 𪥫孇 𪥰嬣 𪥿嬻 𪧀孾 𪧘寠 𪨊㞞 𪨗屩 𪨧崙 𪨩𡸗 𪨶輋 𪨷巗 𪨹𡹬 𪩇㟺 𪩎巊 𪩘巘 𪩛𡿖 𪩷幝 𪩸幩 𪪏廬 𪪑㢗 𪪞廧 𪪴𢍰 𪪼彃 𪫌徿 𪫡𢤩 𪫷㦞 𪫺憸 𪬚𢣐 𪬯𢤿 𪭝𢯷 𪭢摐 𪭧擟 𪭯𢶒 𪭵掚 𪭾撊 𪮃㨻 𪮋㩋 𪮖撧 𪮳𢺳 𪮶攋 𪯋㪎 𪰶曊 𪱥膹 𪱷梖 𪲎櫅 𪲔欐 𪲛檵 𪲮櫠 𪳍欇 𪳗𣜬 𪴙欑 𪵑毊 𪵣霼 𪵱濿 𪶄溡 𪶒𤄷 𪶮𣽏 𪷍㵾 𪷽灒 𪸕熂 𪸩煇 𪹀𤑹 𪹠𤓌 𪹳爥 𪹹𤒻 𪺣𤘀 𪺪𤜆 𪺭犞 𪺷獊 𪺸𤠮 𪺻㺜 𪺽猌 𪻐瑽 𪻨瓄 𪻲瑻 𪻺璝 𪼋㻶 𪼴𤬅 𪽈畼 𪽝𤳷 𪽪痮 𪽭𤷃 𪽮㿖 𪽴𤺔 𪽷瘱 𪾔盨 𪾢睍 𪾣眝 𪾦矑 𪾸矉 𪿊𥏝 𪿞𥖲 𪿫礮 𪿵𥗇 𫀌𥜰 𫀓𥜐 𫀨䅐 𫀬䅳 𫀮𥢷 𫁂䆉 𫁟竱 𫁡鴗 𫁱𥶽 𫁲䉑 𫁳𥯤 𫁷䉶 𫁺𥴼 𫂃簢 𫂆簂 𫂈䉬 𫂖𥴨 𫂿𥻦 𫃗𩏷 𫄙糺 𫄚䊺 𫄛紟 𫄜䋃 𫄝𥾯 𫄞䋔 𫄟絁 𫄠絙 𫄡絧 𫄢絥 𫄣繷 𫄤繨 𫄥纚 𫄦𦀖 𫄧綖 𫄨絺 𫄩䋦 𫄪𦅇 𫄫綟 𫄬緤 𫄭緮 𫄮䋼 𫄯𦃩 𫄰縍 𫄱繬 𫄲縸 𫄳縰 𫄴繂 𫄵𦅈 𫄶繈 𫄷繶 𫄸纁 𫄹纗 𫅅䍤 𫅗羵 𫅥𦒀 𫅭䎙 𫅼𦔖 𫆏聻 𫆝𦟼 𫆫𦡝 𫇘𦧺 𫇛艣 𫇪𦱌 𫇭蔿蒍 𫇴蒭 𫇽蕽 𫈉蕳 𫈎葝 𫈟蔯 𫈵蕝 𫉁薆 𫉄藷 𫊪䗅 𫊮蠦 𫊸蟜 𫊹𧒯 𫊻蟳 𫋇蟂 𫋌蟘 𫋲䙔 𫋷襗 𫋹襓 𫋻襘 𫌀襀 𫌇襵 𫌋𧞫 𫌨覼 𫌪覛 𫌫𧡴 𫌬𧢄 𫌭覹 𫌯䚩 𫍐𧭹 𫍙訑 𫍚訞 𫍛訜 𫍜詓 𫍝諫 𫍞𧦝 𫍟𧦧 𫍠䛄 𫍡詑 𫍢譊 𫍣詷 𫍤譑 𫍥誂 𫍦譨 𫍧誺 𫍨誫 𫍩諣 𫍪誋 𫍫䛳 𫍬誷 𫍭𧩕 𫍮誳 𫍯諴 𫍰諰 𫍱諯 𫍲謏 𫍳諥 𫍴謱 𫍵謸 𫍶𧩼 𫍷謉 𫍸謆 𫍹謯 𫍺𧫝 𫍻譆 𫍼𧬤 𫍽譞 𫍾𧭈 𫍿譾 𫎆豵 𫎌貗 𫎦贚 𫎧䝭 𫎨𧸘 𫎩賝 𫎪䞋 𫎫贉 𫎬贑 𫎭䞓 𫎱䟐 𫎳䟆 𫎸𧽯 𫎺䟃 𫏃䠆 𫏆蹳 𫏋蹻 𫏌𨂐 𫏐蹔 𫏑𨇽 𫏕𨆪 𫏞𨇰 𫏨𨇤 𫐄軏 𫐅軕 𫐆轣 𫐇軜 𫐈軷 𫐉軨 𫐊軬 𫐋𨎌 𫐌軿 𫐍𨌈 𫐎輢 𫐏輖 𫐐輗 𫐑輨 𫐒輷 𫐓輮 𫐔𨍰 𫐕轊 𫐖轇 𫐗轐 𫐘轗 𫐙轠 𫐷遱 𫑘鄟 𫑡鄳 𫑷醶 𫓥釟 𫓦釨 𫓧鈇 𫓨鈛 𫓩鏦 𫓪鈆 𫓫𨥟 𫓬鉔 𫓭鉠 𫓮𨪕 𫓯銈 𫓰銊 𫓱鐈 𫓲銁 𫓳𨰋 𫓴鉾 𫓵鋠 𫓶鋗 𫓷𫒡 𫓸錽 𫓹錤 𫓺鐪 𫓻錜 𫓼𨨛 𫓽錝 𫓾錥 𫓿𨨢 𫔀鍊 𫔁鐼 𫔂鍉 𫔃𨰲 𫔄鍒 𫔅鎍 𫔆䥯 𫔇鎞 𫔈鎙 𫔉𨰃 𫔊鏥 𫔋䥗 𫔌鏾 𫔍鐇 𫔎鐍 𫔏𨬖 𫔐𨭸 𫔑𨭖 𫔒𨮳 𫔓𨯟 𫔔鑴 𫔕𨰥 𫔖𨲳 𫔮閒 𫔯閗 𫔰閞 𫔲𨴹 𫔴閵 𫔵䦯 𫔶闑 𫔽𨼳 𫕚𩀨 𫕥霣 𫕨𩅙 𫖃靧 𫖅䪊 𫖇鞾 𫖑𩎖 𫖒韠 𫖓𩏂 𫖔韛 𫖕韝 𫖖𩏠 𫖪𩑔 𫖫䪴 𫖬䪾 𫖭𩒎 𫖮顗 𫖯頫 𫖰䫂 𫖱䫀 𫖲䫟 𫖳頵 𫖴𩔳 𫖵𩓥 𫖶顅 𫖷𩔑 𫖹顣 𫖺䫶 𫗇䫻 𫗈𩗓 𫗉𩗴 𫗊䬓 𫗋飋 𫗚𩟗 𫗞飦 𫗟䬧 𫗠餦 𫗡𩚩 𫗢飵 𫗣飶 𫗤𩛌 𫗥餫 𫗦餔 𫗧餗 𫗨𩛡 𫗩饠 𫗪餧 𫗫餬 𫗬餪 𫗭餵 𫗮餭 𫗯餱 𫗰䭔 𫗱䭑 𫗳𩝽 𫗴饘 𫗵饟 𫘛馯 𫘜馼 𫘝駃 𫘞駞 𫘟駊 𫘠駤 𫘡駫 𫘣駻 𫘤騃 𫘥騉 𫘦騊 𫘧騄 𫘨騠 𫘩騜 𫘪騵 𫘫騴 𫘬騱 𫘭騻 𫘮䮰 𫘯驓 𫘰驙 𫘱驨 𫘽鬠 𫙂𩯁 𫚈鱮 𫚉魟 𫚊鰑 𫚋鱄 𫚌魦 𫚍魵 𫚎𩶁 𫚏䱁 𫚐䱀 𫚑鮅 𫚒鮄 𫚓鮤 𫚔鮰 𫚕鰤 𫚖鮆 𫚗鮯 𫚘𩻮 𫚙鯆 𫚚鮿 𫚛鮵 𫚜䲅 𫚝𩸄 𫚞鯬 𫚟𩸡 𫚠䱧 𫚡鯞 𫚢鰋 𫚣鯾 𫚤鰦 𫚥鰕 𫚦鰫 𫚧鰽 𫚨𩻗 𫚩𩻬 𫚪鱊 𫚫鱢 𫚬𩼶 𫚭鱲 𫛚鳽 𫛛鳷 𫛜鴀 𫛝鴅 𫛞鴃 𫛟鸗 𫛠𩿤 𫛡鴔 𫛢鸋 𫛣鴥 𫛤鴐 𫛥鵊 𫛦鴮 𫛧𪀖 𫛨鵧 𫛩鴳 𫛪鴽 𫛫鶰 𫛬䳜 𫛭鵟 𫛮䳤 𫛯鶭 𫛰䳢 𫛱鵫 𫛳鵩 𫛴鷤 𫛵鶌 𫛶鶒 𫛷鶦 𫛸鶗 𫛹𪃧 𫛺䳧 𫛻𪃒 𫛼䳫 𫛽鷅 𫛾𪆷 𫜀鷐 𫜁鷩 𫜂𪅂 𫜃鷣 𫜄鷷 𫜅䴋 𫜊𪉸 𫜑麷 𫜒䴱 𫜓𪌭 𫜔䴽 𫜕𪍠 𫜙䵴 𫜟𪓰 𫜨䶕 𫜩齧 𫜪齩 𫜫𫜦 𫜬齰 𫜭齭 𫜮齴 𫜯𪙏 𫜰齾 𫜲龓 𫜳䶲 𫝈㑮 𫝋𠐊 𫝦㛝 𫝧㜐 𫝨媈 𫝩嬦 𫝪𡟫 𫝫婡 𫝬嬇 𫝭孆 𫝮孄 𫝵嶹 𫞅𦠅 𫞗潣 𫞚澬 𫞛㶆 𫞝灍 𫞠爧 𫞡爃 𫞢𤛱 𫞣㹽 𫞥珼 𫞦璾 𫞧𤩂 𫞨璼 𫞩璊 𫞷𥢶 𫟃絍 𫟄綋 𫟅綡 𫟆緟 𫟇𦆲 𫟑䖅 𫟕䕤 𫟞訨 𫟟詊 𫟠譂 𫟡誴 𫟢䜖 𫟤䡐 𫟥䡩 𫟦䡵 𫟫𨞺 𫟬𨟊 𫟲釚 𫟳釲 𫟴鈖 𫟵鈗 𫟶銏 𫟷鉝 𫟸鉽 𫟹鉷 𫟺䤤 𫟻銂 𫟼鐽 𫟽𨧰 𫟾𨩰 𫟿鎈 𫠀䥄 𫠁鑉 𫠂閝 𫠅韚 𫠆頍 𫠇𩖰 𫠈䫾 𫠊䮄 𫠋騼 𫠌𩦠 𫠏𩵦 𫠐魽 𫠑䱸 𫠒鱆 𫠖𩿅 𫠜齯 𫢸僤 𫧃𣍐 𫧮𪋿 𫫇噁 𫬐㘔 𫭟塸 𫭢埨 𫭼𡑍 𫮃墠 𫰛娙 𫵷㠣 𫶇嵽 𫷷廞 𫸩彄 𬀩暐 𬀪晛 𬂩梜 𬃊櫍 𬇕澫 𬇙浿 𬇹漍 𬉼熰 𬊈燖 𬊤燀 𬍛瓅 𬍡璗 𬍤璕 𬒈礐 𬒗𥗽 𬕂篢 𬘓紃 𬘘紞 𬘡絪 𬘩綎 𬘫綄 𬘬綪 𬘭綝 𬘯綧 𬙂縯 𬙊纆 𬙋纕 𬜬蔄 𬜯䓣 𬞟蘋 𬟁虉 𬟽蝀 𬣙訏 𬣞詝 𬣡諓 𬣳詪 𬤇諲 𬤊諟 𬤝譓 𬨂軝 𬨎輶 𬩽鄩 𬪩醲 𬬩釴 𬬭錀 𬬮鋹 𬬱釿 𬬸鉥 𬬹鉮 𬬻鑪 𬬿鉊 𬭁鉧 𬭊𨧀 𬭎鋐 𬭚錞 𬭛𨨏 𬭤鍭 𬭩鎓 𬭬鏏 𬭭鏚 𬭯䥕 𬭳𨭎 𬭶𨭆 𬭸鏻 𬭼鐩 𬮱闉 𬮿隑 𬯀隮 𬯎隤 𬱖頔 𬱟頠 𬳵駓 𬳶駉 𬳽駪 𬳿駼 𬴂騑 𬴃騞 𬴊驎 𬶋鮈 𬶍鮀 𬶏鮠 𬶐鮡 𬶟鯻 𬶠鰊 𬶨鱀 𬶭鰶 𬶮鱚 𬷕鵏 𬸘鶠 𬸚鸑 𬸣鶱 𬸦鷟 𬸪鷭 𬸯鷿 𬹼齘 𬺈齮 𬺓齼 𰬸繐 𰰨菕 𰶎譅 𰾄鋂 𰾭鑀 𱊜𪈼 即卽 冢塚 挲挱 教敎 旗旂 既旣 查査 棋棊 污汙汚 溯泝遡 泄洩 呆獃 真眞 埼碕 棱稜 蓑簑 捆綑 累纍 逾踰 踊踴 糖醣 坂阪 飧飱 糊餬 丬爿 乃乃廼迺 乘乘乗 你妳 俞兪 併倂 偷偸 傻儍 兔兔兎 凼氹 劫劫刦刧刼 剁剁刴 剩剰 勐猛 吞呑 吣唚 咔哢 咴噅 哲喆 唣唕 唧喞 嗬呵 噼劈 嚏嚔 嚯謔 囟顖 圈圏 垛垜 垧坰 埝墊 埯垵 填填塡 增增増 孳孶 尚尚尙 屏屛 岙嶴 峨峩 嵛崳 嵴脊 巢巣 帡帲 幞襆 廻廽 彛彜 彝彞 德德徳 惠惠恵 愍湣 愣楞 慎慎愼 恿慂 憷怵 拂拂払 扦扡 抬擡 拜拝 挆挆挅 搃捴揔摠 捶搥 捻撚 揸摣 捂摀 撯擆 扷擙 挙擧 旂旂 札劄 朵朶 果菓 枳樴 桊棬 概槪 枟橒 每每毎 沓遝 涉渉 清清淸 溉漑 漤濫 灌灌潅 沵濔 沋瀀 炮礟 焰焰焔 煅煆 煳糊 煺退 熘溜 燷燣 毀燬譭 犭犬 狍麅 狸貍 珉瑉 珏玨 琅瑯 瓶甁 留留畄 畲佘 麻麻痲蔴 癝癛 癯臒 眯瞇 砲礮 硅矽 碹镟 稻稻稲 穗穗穂 筋觔 簮簮簪 檐簷 糕餻 粧糚 羶羶羴 翱翺 肷膁 胼腁 艹艸 苘檾 莜蓧 着著 蓘蔉 薰薰薫 藁槁 蕏藸 薫蘍 蛔蜖 蛧蝄 霸霸覇 獏貘 獾貛 跺跺跥 躲躲躱 迎迎迊 迸逬 迴逥 迶遀 郄郤 陷陷陥 萑雈 青青靑 鞴韝 黑黒 鼗鼗鞀鞉 鼠鼡 齄齇 𢯎𢯎 襁繈繦";function kE(n,t=!1){return TE(n,Zf,t?SE:void 0)}(function(){let n=1,t=n2[0];for(;n<14349;){const e=n2[n];n++,t?e!==" "?(!Zf.has(t)&&Zf.set(t,e),CE.set(e,t)):t="":t=e}})();const ME=rn.defaultAddress,El=2e3,AE=ue([Si,$u],(n,t)=>Eu().value(e=>{const{center:i,locate:r}=t.get(e.id);return r===null?-1:Pi.distanceBetween(i,r)}).domain([0,El]).thresholds(Ta(0,El,50))(n)),EE=ue([ce,$u],(n,t)=>Eu().value(e=>{const{center:i,locate:r}=t.get(e.id);return r===null?-1:Pi.distanceBetween(i,r)}).domain([0,El]).thresholds(Ta(0,El,50))(n)),Bd=ne(!0);let zd=!1;class PE extends ar{constructor(e,i,r){super();ot(this,"root");ot(this,"mapData");ot(this,"center");ot(this,"input");this.root=e,this.parent=i,this.baseSize=r,this.mapData=i2,this.center={x:87,y:17,width:40,height:32}}setSize(e,i){this.width=e,this.height=i}render(){const e=It(this.root),i=this.width,r=this.height;this.baseSize;const s=(()=>{let P=e.select(".switch");return P.empty()&&(P=e.append("g").classed("switch",!0)),P})(),a=0,o=0,c=r*.67,l=c*.13;s.attr("transform",`translate(${a}, ${o})`),this.renderSwitch(s,c,l);const u=(()=>{let P=e.select(".map");return P.empty()&&(P=e.append("svg").classed("map",!0)),P})(),h=0,p=l+r*.02,f=c,x=f;u.attr("x",h).attr("y",p).attr("width",f).attr("height",x),this.renderMap(u,f,x);const y=(()=>{let P=e.select(".location-name");return P.empty()&&(P=e.append("g").classed("location-name",!0)),P})(),d=h,_=p+x,g=f,m=r*.14;y.attr("transform",`translate(${d}, ${_})`),this.renderLocationName(y,g,m);const v=(()=>{let P=e.select(".barchart");return P.empty()&&(P=e.append("g").classed("barchart",!0)),P})(),S=h+f+i*.02,M=p,w=i*.98-f,L=r*.65;v.attr("transform",`translate(${S}, ${M})`),this.renderBarchart(v,w,L)}renderSwitch(e,i,r){const s=De.get(),a=mi.get(),o=["birth","been"],c=i/o.length;e.selectAll(".item").data(o).join("g").classed("item",!0).attr("transform",(l,u)=>`translate(${c*u}, 0)`).each((l,u,h)=>{const p=It(h[u]),f=r;p.html(""),p.append("circle").attr("cx",f*.5).attr("cy",f*.5).attr("r",f*.4).attr("stroke",Lt).attr("stroke-width",1).attr("fill","#fff"),p.append("circle").attr("cx",f*.5).attr("cy",f*.5).attr("r",f*.2).attr("fill",s.mode===l?Lt:"#fff"),p.append("text").attr("x",f*1.2).attr("y",f*.5).attr("font-size",f).attr("dominant-baseline","middle").attr("fill",Lt).text(a[l]),p.style("cursor","pointer").on("click",()=>{s.mode!==l&&De.set({...s,mode:l})})})}renderMap(e,i,r){const s=i;this.mapData,this.center;const o=De.get().location,c=(()=>{let g=e.select(".map");return g.empty()&&(g=e.append("svg").classed("map",!0)),g})();c.attr("width",s).attr("height",s),c.html(`
            <defs>
            <clipPath id="clip">
                <rect
                    x="0"
                    y="0"
                    width="${s}"
                    height="${s}"
                    rx="${s*.07}"
                    ry="${s*.07}"
                />
            </clipPath>
            </defs>
        `),c.append("rect").classed("border",!0).attr("x",0).attr("y",0).attr("width",s).attr("height",s).attr("rx",s*.07).attr("ry",s*.07).attr("fill","#fff").attr("stroke","#ddd").attr("stroke-width",1);let l=88,u=126,h=19,p=47;const f=qb().fitExtent([[0,0],[s,s]],{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"MultiPoint",coordinates:[[l,h],[u,h],[u,p],[l,p]]}}]}),x=Ob().projection(f);c.selectAll("path.geojson").data(i2.features).join("path").classed("geojson",!0).attr("d",g=>x(g)).attr("fill","none").attr("stroke",fi).attr("stroke-width",.5);const[y,d]=f([o.coordinate.longitude,o.coordinate.latitude]),_=Math.min(i,r)*.2;c.append("g").classed("location-icon",!0).attr("transform",`translate(${y-_*.5}, ${d-_})`).html(gE(_,Lt))}renderLocationName(e,i,r){const s=De.get(),a=mi.get(),o=s.location,c=Math.max(12,this.baseSize),l=Math.min(c*1.2,r),u=l*.8,h=(()=>{let d=e.select(".input-wrapper");return d.empty()&&(d=e.append("foreignObject").classed("input-wrapper",!0)),d})();h.attr("width",i).attr("height",l*1.5);const p=(()=>{let d=h.select("div");return d.empty()&&(d=h.append("xhtml:div").style("color",Lt)),d})();p.style("font-size",c+"px");const f=(()=>{let d=p.select("input");return d.empty()&&(d=p.append("input").attr("type","text").attr("placeholder","输入地点").style("color",Lt).style("text-align","center"),this.input=d),d})();f.style("font-size",u+"px").style("line-height",l+"px").property("value",o.name==="[Capital]"?a[o.name]:o.name);const x=(()=>{let d=e.select(".list-wrapper");return d.empty()&&(d=e.append("foreignObject").classed("list-wrapper",!0)),d})();x.attr("y",l*1.5).attr("width",i).attr("height",l*6.2).style("display","none");const y=(()=>{let d=x.select("div");return d.empty()&&(d=x.append("xhtml:div").style("color",Lt)),d})();y.style("padding","0.1em 0.5em").style("box-sizing","border-box").style("height","100%").style("background-color","#fff").style("max-height",l*6.18+"px").style("overflow-y","auto").style("border",`1px solid ${Lt}`).style("border-radius","0.1em").style("font-size",c+"px").style("line-height",l+"px"),f.on("focus",()=>{x.style("display","block"),y.style("display","block");const d=f.property("value").trim(),_=this.getLocationSuggestions(d);this._renderLocationSuggestions(y,_)}),f.on("focusout",d=>{zd||(x.style("display","none"),y.style("display","none"))}),f.on("input",()=>{const d=f.property("value").trim(),_=this.getLocationSuggestions(d);f.property("value",d),this._renderLocationSuggestions(y,_)})}renderBarchart(e,i,r){const s=AE.get(),a=EE.get(),o=Bd.get(),c=De.get(),l=i*1,u=l/a.length,h=u*.95,p=r*.7,f=r*.7,x=r*.3,y=ji().domain([a[0].x0,a[a.length-1].x1]).range([0,l]),d=ji().domain([0,i0(o?s:a,L=>L.length)]).range([0,p]);e.html("");const _=(()=>{let L=e.select(".axis");return L.empty()&&(L=e.append("g").classed("axis",!0)),L})();(()=>{let L=_.select(".line");return L.empty()&&(L=_.append("line").classed("line",!0)),L})().attr("x1",0).attr("y1",f).attr("x2",l).attr("y2",f).attr("stroke",Lt).attr("stroke-width",1),_.selectAll(".tick").data(Ta(0,El,500)).join("g").classed("tick",!0).attr("transform",(L,P)=>`translate(${y(L)}, ${f})`).each((L,P,N)=>{const k=It(N[P]);k.html(""),k.append("line").attr("y2","0.3em").attr("stroke",Lt).attr("stroke-width",1),k.append("text").attr("x",0).attr("y","1.6em").attr("font-size","0.6em").attr("fill",Lt).attr("text-anchor","middle").style("user-select","none").text(L)});const m=(()=>{let L=e.select(".y-axis");return L.empty()&&(L=e.append("g").classed("y-axis",!0)),L})();m.attr("transform",`translate(${l}, 0)`).html(""),m.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",p).attr("stroke",Lt).attr("stroke-width",1),m.append("line").classed("tick",!0).attr("x1",0).attr("y1",0).attr("x2","-0.3em").attr("y2",0).attr("stroke",Lt).attr("stroke-width",1),m.append("text").attr("x","-0.8em").attr("y","0.1em").attr("font-size","0.8em").attr("fill",Lt).attr("text-anchor","end").style("user-select","none").text(d.domain()[1]);const v=(()=>{let L=e.select(".bars");return L.empty()&&(L=e.append("g").classed("bars",!0)),L})();v.selectAll(".background-bar").data(o?s:[]).join("g").classed("background-bar",!0).attr("transform",(L,P)=>`translate(${P*u}, ${f-p})`).each((L,P,N)=>{const k=It(N[P]),D=d(L.length);k.html(""),k.append("rect").attr("x",0).attr("y",p-D).attr("width",h).attr("height",D).attr("fill","#ccc")}),v.selectAll(".bar").data(a).join("g").classed("bar",!0).attr("transform",(L,P)=>`translate(${P*u}, ${f-p})`).each((L,P,N)=>{const k=It(N[P]),D=d(L.length),C=Sa.distanceColorMap(L.x0);k.html(""),k.append("rect").attr("x",0).attr("y",p-D).attr("width",h).attr("height",D).attr("fill",C)}),v.selectAll(".mask").data([1]).join("rect").classed("mask",!0).attr("width",l).attr("height",p).style("opacity",0).style("cursor","crosshair").on("click",()=>{Bd.set(!o)});const S=(()=>{let L=e.select(".brush");return L.empty()&&(L=e.append("g").classed("brush",!0)),L})();S.attr("transform",`translate(0, ${f})`);const M=(()=>{let L=S.select(".rect");return L.empty()&&(L=S.append("rect").classed("rect",!0)),L})();M.attr("x",0).attr("y",0).attr("width",y(c.distance)).attr("height",x).attr("fill",fi).attr("fill-opacity",.3).attr("pointer-events","all");const w=(()=>{let L=S.select(".mask");return L.empty()&&(L=S.append("rect").classed("mask",!0)),L})();w.attr("x",0).attr("y",0).attr("width",l).attr("height",x).attr("fill","none").attr("pointer-events","all").style("cursor","ew-resize").on("click",L=>{const P=ri(L,w.node())[0],N=Math.max(0,Math.min(rn.maxDistance,y.invert(P)));De.set({...c,distance:N}),M.attr("width",P)}).call(Yc().on("drag",L=>{const P=ri(L,w.node())[0];M.attr("width",P)}).on("end",L=>{const P=ri(L,w.node())[0],N=Math.max(1,Math.min(rn.maxDistance,y.invert(P)));De.set({...c,distance:N}),this.renderBarchart(e,i,r)}))}_renderLocationSuggestions(e,i){e.selectAll("div.item").data(i).join("div").classed("item",!0).style("cursor","pointer").text(r=>r.name).on("mouseover",function(){It(this).style("background-color",En)}).on("mouseout",function(){It(this).style("background-color","transparent")}).on("mousedown",()=>{zd=!0}).on("mouseup",()=>{zd=!1}).on("click",(r,s)=>{De.set({...De.get(),location:s}),this.input.property("value",s.name),e.style("display","none")})}getLocationSuggestions(e){const i=mi.get(),r=ME;r.name=i["[Capital]"];const s=[r].concat(EC.get()),a=kE(e);return s.filter(o=>o.name.includes(e)||o.name.includes(a))}listenInteraction(){De.listen(()=>{this.render()}),ce.listen(()=>{this.render()}),Bd.listen(()=>{this.render()})}}const DE=ue([Si,ce],(n,t)=>n.length!==t.length);class LE extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r}setSize(e,i){this.width=e,this.height=i,this.root.setAttribute("width",e.toString()),this.root.setAttribute("height",i.toString())}render(){const e=It(this.root);this.width,this.height;const i=(()=>{let l=e.select("div.post-filter-container");return l.empty()&&(l=e.append("xhtml:div").classed("post-filter-container",!0).style("width","100%").style("height","100%").style("overflow","auto hidden")),l})();i.style("font-size","12px");const r=_u.get()[0],s=xn.get(),a=DE.get(),o=[];let c=s??r;do o.unshift(c);while(c=c.parent,c!==null);c=null,o.forEach((l,u)=>{o[u]=c===null?r:c.children.find(h=>h.value.name===l.value.name),c=o[u]}),i.selectAll("div.post-filter-list-wrapper").data(o.filter(l=>"children"in l)).join("div").classed("post-filter-list-wrapper",!0).selectAll("div.post-filter-list").data(l=>[l]).join("div").classed("post-filter-list",!0).each((l,u,h)=>{It(h[u]).selectAll("div.post-filter-item").data(l.children).join("div").classed("post-filter-item",!0).classed("post-filter-item-selected",f=>o.includes(f)).each((f,x,y)=>{const d=It(y[x]);d.html("");const _=d.append("div").classed("post-icon",!0);"children"in f&&_.html(mE("1em","currentColor")),d.append("div").classed("post-name",!0).text(f.value.name),d.append("div").classed("post-count",!0).html(a?`${f.figFilteredCount}<span class="total">/${f.figCount}</span>`:`${f.figCount}`)}).on("mouseenter",function(){It(this).classed("post-filter-item-hovered",!0)}).on("mouseleave",function(){It(this).classed("post-filter-item-hovered",!1)}).on("click",(f,x)=>{var d;const y=((d=xn.get())==null?void 0:d.value.id)===x.value.id?null:x;xn.set(y),setTimeout(()=>{const _=i.node();_.scrollTo({left:_.scrollWidth??0,behavior:"smooth"})},0)})})}listenInteraction(){_u.listen(()=>{this.render()})}}const r4=ue([Si],n=>{const t=new Set;for(const e of n)t.add(e.type);return Array.from(t).sort()});function s4(n,t){const e=new Map;for(const i of n)e.set(i,{count:0});for(const i of t){const r=i.type;e.has(r)&&e.get(r).count++}return Array.from(e.entries()).map(([i,r])=>({type:i,...r})).sort((i,r)=>r.count-i.count)}const RE=ue([r4,Si],(n,t)=>s4(n,t)),IE=ue([r4,ce],(n,t)=>s4(n,t)),NE=ue([Si,ce],(n,t)=>n.length!==t.length),FE=ne(!0);class OE extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r}setSize(e,i){this.width=e,this.height=i}render(){const e=RE.get(),i=new Map(e.map((_,g)=>[_.type,g])),r=IE.get().sort((_,g)=>i.get(_.type)-i.get(g.type)),s=FE.get(),a=NE.get(),o=Bs.get(),c=Er.get(),l=mi.get(),u=It(this.root),h=this.width,p=this.height,f=p/r.length,x=c==="zh-cn"?f*2:f*3.6,y=h-x,d=ji().domain([0,i0(s?e:r,_=>_.count)]).range([0,y]);u.selectAll(".background-bar").data(s?e:[]).join("g").classed("background-bar",!0).attr("transform",(_,g)=>`translate(0, ${g*f})`).each((_,g,m)=>{const v=It(m[g]),S=d(_.count);v.html(""),v.append("rect").attr("x",x).attr("width",S).attr("height",f*.8).attr("fill","#ccc")}),u.selectAll(".bar").data(r).join("g").classed("bar",!0).attr("transform",(_,g)=>`translate(0, ${g*f})`).each((_,g,m)=>{const v=It(m[g]),S=o===null||o===_.type,M=d(_.count),w=M>y-f*2,L=_.count,P=e.find(N=>N.type===_.type).count;v.html(""),v.append("text").attr("x",x).attr("dominant-baseline","middle").attr("text-anchor","end").attr("dx","-0.3em").attr("dy","0.7em").attr("font-size",f*.7).text(l[_.type]).style("fill",Lt),v.append("rect").attr("x",x).attr("width",M).attr("height",f*.8).attr("fill",Lt),v.append("text").attr("x",x+M).attr("dx",w?"-0.3em":"0.3em").attr("text-anchor",w?"end":"start").attr("fill",w?"#fff":Lt).attr("dominant-baseline","middle").attr("dy","0.7em").attr("font-size",f*.7).html(s&&a?`${L}<tspan font-size="0.6em">/${P}</tspan>`:`${L}`),v.style("cursor","pointer").style("opacity",S?1:.3).on("click",()=>{Bs.get()===_.type?Bs.set(null):Bs.set(_.type)})})}listenInteraction(){Bs.listen(()=>{this.render()}),ce.listen(()=>{this.render()})}}class BE extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r}setSize(e,i){this.width=e,this.height=i}render(){It(this.root),this.width,this.height}listenInteraction(){}}const zE=ue([ce],n=>Eu().value(t=>t.weight).domain([0,1]).thresholds(Ta(0,1,.01))(n)),HE=ue([Si],n=>Eu().value(t=>t.weight).domain([0,1]).thresholds(Ta(0,1,.01))(n)),GE=ue([Si,ce],(n,t)=>n.length!==t.length),Hd=ne(!0);class WE extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r}setSize(e,i){this.width=e,this.height=i}render(){const e=It(this.root),i=this.width,r=this.height,s=(()=>{const o=e.select(".histogram");return o.empty()?e.append("g").classed("histogram",!0):o})();s.attr("transform","translate(0, 0)"),this.renderHistogram(s,i,r*.7);const a=(()=>{const o=e.select(".brush");return o.empty()?e.append("g").classed("brush",!0):o})();a.attr("transform",`translate(0, ${r*.71})`),this.renderBrush(a,i,r*.29)}renderHistogram(e,i,r){const s=zE.get(),a=HE.get();GE.get();const o=Hd.get(),c=this.baseSize*.7,l=i/a.length,u=ji().domain([0,1]).range([0,i]),h=h3().exponent(.5).domain([0,i0(o?a:s,_=>_.length)]).range([0,r]),p=(()=>{let _=e.select(".x-axis");return _.empty()&&(_=e.append("g").classed("x-axis",!0)),_})();p.html(""),p.attr("transform",`translate(0, ${r})`),p.append("line").attr("x1",0).attr("x2",i).attr("y1",0).attr("y2",0).style("stroke",Lt),p.selectAll(".tick").data(Ta(0,1,.1).map(_=>Number(_.toFixed(1)))).join("g").classed("tick",!0).attr("transform",_=>`translate(${u(_)}, 0)`).each((_,g,m)=>{const v=It(m[g]);v.html(""),v.attr("font-size",c),v.append("line").attr("y2","0.3em").attr("stroke-width",1).attr("stroke",Lt),v.append("text").attr("dy","0.4em").attr("dominant-baseline","hanging").attr("text-anchor","middle").style("user-select","none").attr("fill",Lt).text(_)});const f=(()=>{let _=e.select(".y-axis");return _.empty()&&(_=e.append("g").classed("y-axis",!0)),_})();f.html(""),f.attr("transform","translate(0, 0)"),f.append("line").attr("x1",i).attr("x2",i).attr("y1",0).attr("y2",r).style("stroke",Lt);const x=f.append("g").classed("tick",!0).attr("font-size",c).attr("transform",`translate(${i}, 0)`);x.append("line").attr("x2","-0.3em").attr("stroke-width",1).attr("stroke",Lt),x.append("text").attr("font-size",c).attr("x","-0.4em").attr("text-anchor","end").attr("fill",Lt).attr("dominant-baseline","middle").style("user-select","none").text(h.domain()[1]),(()=>{let _=e.select(".background-bar");return _.empty()&&(_=e.append("g").classed("background-bar",!0)),_})().selectAll(".background-bar").data(o?a:[]).join("rect").classed("background-bar",!0).attr("transform",_=>`translate(${u((_.x0+_.x1)*.5)}, 0)`).attr("x",-l*.45).attr("width",l*.9).attr("y",_=>r-h(_.length)).attr("height",_=>h(_.length)).attr("fill","#ccc"),(()=>{let _=e.select(".foreground-bar");return _.empty()&&(_=e.append("g").classed("foreground-bar",!0)),_})().selectAll(".bar").data(s).join("rect").classed("bar",!0).attr("transform",_=>`translate(${u((_.x0+_.x1)*.5)}, 0)`).attr("x",-l*.45).attr("width",l*.9).attr("y",_=>r-h(_.length)).attr("height",_=>h(_.length)).attr("fill",fi),e.selectAll(".mask").data([1],_=>_).join("rect").attr("width",i).attr("height",r).style("opacity",0).attr("cursor","crosshair").on("click",()=>{Hd.set(!o)})}renderBrush(e,i,r){Bc.get();const s=ji().domain([0,1]).range([0,i]),a=K_().extent([[0,0],[i,r]]).on("brush",()=>{e.select(".selection").attr("fill",fi)}).on("end",c=>{const l=c.selection;if(l){const[u,h]=l.map(s.invert);Bc.set([u,h])}else Bc.set(null)});(()=>{let c=e.select(".brush");return c.empty()&&(c=e.append("g").classed("brush",!0)),c})().call(a)}listenInteraction(){ce.listen(()=>{this.render()}),Hd.listen(()=>{this.render()})}}const ll=class ll extends ar{constructor(e,i,r){super();ot(this,"root");this.root=e,this.parent=i,this.baseSize=r}setSize(e,i){this.width=e,this.height=i}render(){const e=It(this.root),i=(()=>{let o=e.select(".container");return o.empty()&&(o=e.append("xhtml:div").classed("container",!0)),o})(),r=Es.get();(()=>{let o=i.select(".bookmark-container");return o.empty()&&(o=i.append("xhtml:div").classed("bookmark-container",!0)),o})().selectAll("div.bookmark").data(r).join("div").classed("bookmark",!0).each((o,c,l)=>{const u=l[c],h=(()=>{let d=u.querySelector("div.snapshot");return d||(d=document.createElement("div"),d.classList.add("snapshot"),u.appendChild(d)),d})();h.replaceChildren(o.screenshot);const p=(()=>{let d=u.querySelector("div.description");return d||(d=document.createElement("div"),d.classList.add("description"),u.appendChild(d)),d})();p.textContent=o.name;const f=(()=>{let d=u.querySelector("div.footer");return d||(d=document.createElement("div"),d.classList.add("footer"),u.appendChild(d)),d})(),x=(()=>{let d=u.querySelector("div.delete");return d||(d=document.createElement("div"),d.classList.add("delete"),d.classList.add("icon"),d.innerHTML=xE("1em","currentColor"),f.appendChild(d)),d})();x.onclick=()=>{this.remove(o.id)};const y=(()=>{let d=u.querySelector("div.jump-to");return d||(d=document.createElement("div"),d.classList.add("jump-to"),d.classList.add("icon"),d.innerHTML=n4("1em","currentColor"),f.appendChild(d)),d})();y.onclick=()=>{$0.emit("book-mark",o.transform)},u.replaceChildren(h,p,f)});const a=(()=>{let o=i.select(".bookmark-add-container");return o.empty()&&(o=i.append("xhtml:div").classed("bookmark-add-container",!0)),o})();(()=>{let o=a.select(".bookmark-add-icon");return o.empty()&&(o=a.append("svg").classed("bookmark-add-icon",!0),o.html(vE("1em","currentColor"))),o})(),a.on("click",()=>{this.add()})}add(){this.snapshot(500,400).then(e=>{const i={id:ll.counter++,name:`Bookmark ${ll.counter}`,transform:C5.get(),screenshot:e,viewMode:Ze.get()};Es.set([...Es.get(),i]);const r=this.root.querySelector(".bookmark-container");r.scrollTo({left:r.scrollWidth,behavior:"smooth"})})}remove(e){var r;const i=Es.get();e===void 0&&(e=(r=i[i.length-1])==null?void 0:r.id),Es.set(i.filter(s=>s.id!==e))}async snapshot(e=800,i=800){const r=document.querySelector("div.labels"),s=r.getBoundingClientRect(),a=window.devicePixelRatio||1,o=w5.get();if(!o)return document.createElement("canvas");const c=document.createElement("canvas");c.width=Math.round(e*a),c.height=Math.round(i*a);const l=c.getContext("2d");l.scale(a,a),l.fillStyle="#fff",l.fillRect(0,0,e,i);const u=Math.min(e,i*(s.width/s.height)),h=Math.min(i,e*(s.height/s.width)),p=(e-u)/2,f=(i-h)/2,x=o.renderer.canvas,y={x:0,y:0,width:x.width,height:x.height};l.drawImage(x,y.x,y.y,y.width,y.height,p,f,u,h);const d=Array.from(r.querySelectorAll("canvas"))[1],_=d.getBoundingClientRect(),g={x:_.x-s.x,y:_.y-s.y,width:d.width,height:d.height};return l.drawImage(d,g.x,g.y,g.width,g.height,p,f,u,h),c}listenInteraction(){let e=!0;document.addEventListener("keydown",i=>{e&&((i.key==="="||i.key==="+")&&(this.add(),e=!1),(i.key==="-"||i.key==="_")&&this.remove())}),document.addEventListener("keyup",i=>{e=!0}),Es.listen(()=>{this.render()})}};ot(ll,"counter",0);let Qf=ll;new ba;const cl=class cl{static renderSVG(t,e,i){t.html("");const r=cl.$height.get(),s=r*.6;t.append("rect").attr("x",0).attr("y",0).attr("width",i).attr("height",r).attr("fill",En).attr("stroke",null).attr("rx",r*.05).attr("ry",r*.05),t.append("text").attr("x","0.3em").attr("y",r/2).attr("font-size",s).attr("dominant-baseline","middle").attr("fill",Lt).attr("dy","0.1em").text(e)}static renderDiv(t,e,i){t.html("");const r=cl.$height.get(),s=r*.6;t.append("div").style("width",i+"px").style("height",r+"px").style("font-size",s+"px").style("line-height",r+"px").style("color",Lt).style("background-color",En).style("border-radius",r*.05+"px").append("span").style("padding-left","0.3em").text(e)}};ot(cl,"$height",ue([Tl],t=>t.height*.03));let Sr=cl;class $E{constructor(t){ot(this,"props");ot(this,"root",null);ot(this,"baseSize");ot(this,"layoutController");ot(this,"title");ot(this,"bookmarks");ot(this,"keywordSearcher");ot(this,"weightFilter");ot(this,"locationFilter");ot(this,"postFilter");ot(this,"typeFilter");ot(this,"legend");this.props=Object.assign({x:0,y:0,width:100,height:300},t),this.baseSize=Math.min(this.props.width,this.props.height)*.05}initialize(){this.listenInteraction()}setRoot(t){this.root=t,(()=>{let h=t.querySelector(".border");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("border")),h})(),(()=>{let h=t.querySelector(".layout-title");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("layout-title")),h})();const e=(()=>{let h=t.querySelector("g.layout-controller");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("layout-controller")),h})();this.layoutController=new pE(e,this,this.baseSize);const i=(()=>{let h=t.querySelector("g.title");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("title")),h})();this.title=new fE(i,this,this.baseSize),(()=>{let h=t.querySelector(".bookmark-title");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("bookmark-title")),h})();const r=(()=>{let h=t.querySelector("foreignObject.bookmarks");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),h.classList.add("bookmarks")),h})();this.bookmarks=new Qf(r,this,this.baseSize),(()=>{let h=t.querySelector(".filter-title");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("filter-title")),h})();const s=(()=>{let h=t.querySelector("foreignObject.keyword-search-box");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),h.classList.add("keyword-search-box")),h})();this.keywordSearcher=new _E(s,this,this.baseSize);const a=(()=>{let h=t.querySelector("g.weight-filter");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("weight-filter")),h})();this.weightFilter=new WE(a,this,this.baseSize);const o=(()=>{let h=t.querySelector("foreignObject.post-filter");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),h.classList.add("post-filter")),h})();this.postFilter=new LE(o,this,this.baseSize);const c=(()=>{let h=t.querySelector("g.type-filter");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("type-filter")),h})();this.typeFilter=new OE(c,this,this.baseSize);const l=(()=>{let h=t.querySelector("g.legend");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("legend")),h})();this.legend=new BE(l,this,this.baseSize);const u=(()=>{let h=t.querySelector("g.location-filter");return h===null&&(h=t.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),h.classList.add("location-filter")),h})();this.locationFilter=new PE(u,this,this.baseSize),this.initialize()}render(t={}){const e=It(this.root),i=mi.get(),r=this.props.width;this.props.height;const s=this.baseSize,a=s*1,o=r-a*2;if(e.empty())return;if(t.renderBorder){const h=(()=>{let p=e.select(".border");return p.empty()&&(p=e.append("g").classed("border",!0)),p})();this.renderBorder(h)}t.renderTitle&&(this.title.root.setAttribute("transform","translate(0, 0)"),this.title.setSize(r,s*8),this.title.render());const c=(()=>{let h=e.select(".layout-title");return h.empty()&&(h=e.append("g").classed("layout-title",!0)),h})();c.attr("transform",`translate(${a}, ${s*8.5})`),Sr.renderSVG(c,i.layout,o),t.renderLayout&&(this.layoutController.root.setAttribute("transform",`translate(${a}, ${s*10})`),this.layoutController.setSize(o,s*1.3),this.layoutController.render());const l=(()=>{let h=e.select(".bookmark-title");return h.empty()&&(h=e.append("g").classed("bookmark-title",!0)),h})();l.attr("transform",`translate(${a}, ${s*13})`),Sr.renderSVG(l,i.bookmarks,o),t.renderBookmarks&&(this.bookmarks.root.setAttribute("width",o+"px"),this.bookmarks.root.setAttribute("height",s*8+"px"),this.bookmarks.root.setAttribute("transform",`translate(${a}, ${s*15.5})`),this.bookmarks.setSize(o,s*8),this.bookmarks.render());const u=(()=>{let h=e.select(".filter-title");return h.empty()&&(h=e.append("g").classed("filter-title",!0)),h})();u.attr("transform",`translate(${a}, ${s*24})`),Sr.renderSVG(u,i["data filters"],o),t.renderKeywordSearcher&&(this.keywordSearcher.root.setAttribute("width",o+"px"),this.keywordSearcher.root.setAttribute("height",s*6+"px"),this.keywordSearcher.root.setAttribute("transform",`translate(${a}, ${s*26.5})`),this.keywordSearcher.setSize(o,s*6),this.keywordSearcher.render()),t.renderWeightFilter&&(this.weightFilter.root.setAttribute("transform",`translate(${a}, ${s*32})`),this.weightFilter.setSize(o,s*3),this.weightFilter.render()),t.renderLocationFilter&&(this.locationFilter.root.setAttribute("transform",`translate(${a}, ${s*36})`),this.locationFilter.setSize(o,s*11),this.locationFilter.render()),t.renderPostFilter&&(this.postFilter.root.setAttribute("transform",`translate(${a}, ${s*47})`),this.postFilter.setSize(o,s*11),this.postFilter.render()),t.renderTypeFilter&&(this.typeFilter.root.setAttribute("transform",`translate(${a}, ${s*59})`),this.typeFilter.setSize(o,s*12),this.typeFilter.render()),t.renderLegend&&(this.legend.root.setAttribute("transform",`translate(${a}, ${s*72})`),this.legend.setSize(o,s*12),this.legend.render())}renderBorder(t){const{width:e,height:i}=this.props;t.html(""),t.append("rect").attr("x",0).attr("y",0).attr("width",e).attr("height",i).style("fill","none").style("stroke",Lt).style("stroke-width",1)}listenInteraction(){this.title.listenInteraction(),this.layoutController.listenInteraction(),this.bookmarks.listenInteraction(),this.keywordSearcher.listenInteraction(),this.weightFilter.listenInteraction(),this.locationFilter.listenInteraction(),this.postFilter.listenInteraction(),this.typeFilter.listenInteraction(),this.legend.listenInteraction()}update(){}}const UE=new Array(Object.entries(Vr.get()).length).fill(0),YE=new Array(Object.entries(vr.get()).length).fill(0);let r2=re.get();const Qi=ne(null),Xo=ne(1);let Gd=new Set,Jf;const Us=ue([ce,Xo,bu,Te],(n,t,e,i)=>{let r=new Set(n.map(l=>l.id)),s=[...Gd].every(l=>r.has(l))&&[...r].every(l=>Gd.has(l));if(!t&&s)return Jf;Gd=r;let a;if(i===null)a=new Array(n.length).fill(0).map((l,u)=>u).sort((l,u)=>e[u].weight-e[l].weight);else{const l=re.get();a=new Array(n.length).fill(0).map((u,h)=>h).sort((u,h)=>{const p=l.indexOf(n[u]),f=l.indexOf(n[h]);return p!==-1&&f!==-1?p-f:p!==-1?-1:f!==-1?1:i[h].weight-i[u].weight||e[h].weight-e[u].weight})}const o=new Map;a.forEach((l,u)=>{o.set(u,l)});const c=a.map(l=>n[l]);return c.idx2OriginIdx=o,Jf=c,c});function jE(n,t){function e(l){l=l.replace("#",""),l.length===3&&(l=l.split("").map(f=>f+f).join(""));const u=parseInt(l.slice(0,2),16)/255,h=parseInt(l.slice(2,4),16)/255,p=parseInt(l.slice(4,6),16)/255;return[u,h,p]}const[i,r,s]=e(t),a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"filter");o.setAttribute("id",n);const c=document.createElementNS(a,"feColorMatrix");return c.setAttribute("type","matrix"),c.setAttribute("values",`
    ${i} 0 0 0 0
    0 ${r} 0 0 0
    0 0 ${s} 0 0
    0 0 0 1 0
  `.trim().replace(/\s+/g," ")),o.appendChild(c),o}const s2=ue([Us],n=>new Array(n.length).fill(0).map((t,e)=>e)),Ns=new ba;class XE{constructor(t){ot(this,"props");ot(this,"root",null);ot(this,"baseSize");ot(this,"tableX",{x0:0,x1:0,xWeight:0,wWeight:0,hContext:{},whContext:{},x2:0,fContext:{},wfContext:{},x3:0,h0:0,h:0,H:0});ot(this,"scrollY",0);ot(this,"switchLock",!1);this.props=Object.assign({x:0,y:0,width:100,height:300},t),this.baseSize=Math.min(this.props.width,this.props.height)*.042}initialize(){const t=document.createElementNS("http://www.w3.org/2000/svg","defs");for(const e of Os){const i=jE(`filter-${e}`,e);t.appendChild(i)}this.root.appendChild(t),this.listenInteraction(),Jf=Us.get()}setRoot(t){this.root=t,this.initialize()}render(t={}){const e=It(this.root);if(e.empty())return;const i=mi.get(),r=this.baseSize*.3,s=this.props.height*.01,a=this.props.height*.06,o=this.props.height*.06,c=this.props.height*.1,l=this.props.height*.31,u=this.props.height*.42,h=u+Sr.$height.get()+r,p=this.props.height*.99-h,f=this.props.height*.45,x=p-f;if(t.updateTablePosition&&this.updateTablePosition(),t.renderBorder){const M=(()=>{let w=e.select(".border");return w.empty()&&(w=e.append("div").classed("border",!0)),w})();this.renderBorder(M)}if(t.renderSearchBox){const M=(()=>{let w=e.select(".search-box");return w.empty()&&(w=e.append("div").style("position","absolute").classed("search-box",!0)),w})();M.style("width",`${this.props.width-r*2}px`).style("height",`${a}px`).style("left",`${r}px`).style("top",`${s}px`),this.renderSearchBox(M,{y:s,height:a})}const y=(()=>{let M=e.select(".selected-figure-title");return M.empty()&&(M=e.append("div").style("position","absolute").classed("selected-figure-title",!0)),M})();if(y.style("left",`${r}px`).style("top",`${o}px`),Sr.renderDiv(y,i["selected figure info"],this.props.width-r*2),t.renderSelectedFigure){const M=(()=>{let N=e.select(".figure-container");return N.empty()&&(N=e.append("div").classed("figure-container",!0).style("position","absolute").style("overflow","hidden")),N})();M.style("left",`${r}px`).style("top",`${c}px`).style("width",`${this.props.width-r*2}px`).style("height",`${l}px`);const w=(()=>{let N=M.select(".container-content");return N.empty()&&(N=M.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("container-content",!0).style("width","100%").style("height","100%").style("display","flex").style("flex-direction","column").style("gap","0.5em")),N})(),L=(()=>{let N=w.select(".selected-figures-list");return N.empty()&&(N=w.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("selected-figures-list",!0)),N})(),P=(()=>{let N=w.select(".selected-figures");return N.empty()&&(N=w.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).style("display","flex").style("flex-direction","column").classed("selected-figures",!0)),N})();L.style("width",this.props.width-r*2+"px"),P.style("width",this.props.width-r*2+"px").style("min-height",0).style("flex-grow","1"),this.renderSelectedFigureList(L,{y:0,height:this.props.height*.07}),this.renderSelectedFigure(P,{y:0,height:this.props.height*.21})}const d=(()=>{let M=e.select(".list-title");return M.empty()&&(M=e.append("div").style("position","absolute").classed("list-title",!0)),M})();d.style("left",`${r}px`).style("top",`${u}px`),Sr.renderDiv(d,i["context info"],this.props.width-r*2);const _=(()=>{let M=e.select(".container");return M.empty()&&(M=e.append("div").style("position","absolute").classed("container",!0)),M})();_.style("left",`${r}px`).style("top",`${h}px`).style("width",`${this.props.width-r*2}px`).style("height",`${p}px`);const g=(()=>{let M=_.select(".container-content");return M.empty()&&(M=_.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("container-content",!0).style("display","grid").style("flex-direction","column").style("overflow","hidden")),M})();g.style("width",this.props.width-r*2+"px").style("height",p+"px").style("grid-template-columns",`${Math.min(this.tableX.x1,this.props.width*.2)}px auto`).style("grid-template-rows",`${x}px auto`).style("gap",`${this.baseSize}px ${r}px`);const m=(()=>{let M=g.select(".context-controller");return M.empty()&&(M=g.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).style("grid-row","1").style("grid-column","2").style("overflow","auto hidden").append("svg").classed("context-controller",!0)),M})(),v=(()=>{let M=g.select(".figures");return M.empty()&&(M=g.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).style("width","100%").style("grid-row","2").style("grid-column","1").style("overflow","scroll hidden").append("svg").classed("figures",!0)),M})(),S=(()=>{let M=g.select(".figure-bars");return M.empty()&&(M=g.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).style("width","100%").style("grid-row","2").style("grid-column","2").style("overflow","auto hidden").append("svg").classed("figure-bars",!0)),M})();t.renderContextController&&(m.attr("x",this.tableX.x1).attr("y",0).attr("width",this.tableX.x3-this.tableX.x1).attr("height",x),this.renderContextController(m,{y:h,height:x}),It(m.node().parentNode).on("scroll",M=>{S.node().parentNode.scrollLeft=M.target.scrollLeft})),t.renderFigures&&(v.attr("x",0).attr("y",0).attr("width",this.tableX.x1).attr("height",f),this.renderFigureNames(v,{y:0,height:f}),S.attr("x",this.tableX.x1).attr("y",0).attr("width",this.tableX.x3-this.tableX.x1).attr("height",f),this.renderFigureBars(S,{y:0,height:f}),It(v.node().parentNode).on("wheel",M=>{this.scrollY=Math.min(this.tableX.H-f,Math.max(0,this.scrollY+M.deltaY)),this.renderFigureNames(v,{y:0,height:f}),this.renderFigureBars(S,{y:0,height:f})}),It(S.node().parentNode).on("wheel",M=>{this.scrollY=Math.min(this.tableX.H-f,Math.max(0,this.scrollY+M.deltaY)),this.renderFigureNames(v,{y:0,height:f}),this.renderFigureBars(S,{y:0,height:f})}).on("scroll",M=>{m.node().parentNode.scrollLeft=M.target.scrollLeft}))}updateTablePosition(){const t=this.baseSize,e=t*.3,i=Vr.get(),r=vr.get(),s=mi.get(),a=Us.get();let o=0;const c=Math.max(...a.map(S=>Ns.visualWidth(S.name,t)),0);o+=c;const l=o;o+=e;const u=Ns.visualWidth(s.weight,t),h=o+u*.5;o+=u+e;const p={},f={};Object.keys(i).forEach(S=>{const M=s[S],w=Ns.visualWidth(M,t),L=o+w*.5;o+=w+e,p[S]=L,f[S]=w});const x=o+t*.5;o+=t;const y={},d={};Object.keys(r).forEach(S=>{const M=s[S],w=Ns.visualWidth(M,t),L=o+w*.5;o+=w+e,y[S]=L,d[S]=w});const _=o-e,g=0,m=t*2,v=g*2+m*ce.get().length;this.tableX={x0:e,x1:l,xWeight:h,wWeight:u,hContext:p,whContext:f,x2:x,fContext:y,wfContext:d,x3:_,h0:g,h:m,H:v}}renderBorder(t){const{width:e,height:i}=this.props;t.html(""),t.append("div").classed("border",!0).style("width",`${e}px`).style("height",`${i}px`).style("position","absolute").style("left","0px").style("top","0px").style("border",`1px solid ${Lt}`).style("box-sizing","border-box").style("pointer-events","none")}renderSearchBox(t,e){const i=ce.get(),r=mi.get();let s=t.select(".search-box-container");s.empty()&&(s=t.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("search-box-container",!0).classed("layui-form",!0).style("width","100%").style("height","100%").style("display","flex").style("flex-direction","column").style("gap","0.5em"));let a=s.select(".search-box");a.empty()&&(a=s.append("select").classed("search-box",!0).attr("lay-search","{caseSensitive:true}").attr("lay-filter","figure-search")),a.selectAll("option").data(i).join("option").attr("value",o=>o.id).text(o=>o.name),a.insert("option",":first-child").attr("value","").text(r["enter figure name"]).attr("selected","selected"),layui.use(["form"],function(){const o=layui.form;o.render("select"),o.on("select(figure-search)",c=>{if(c.value==="")return;const l=Number.parseInt(c.value),u=i.find(p=>p.id===l),h=Wt.get();h.find(p=>p.id===u.id)===void 0&&Wt.set([...h,u]),Qi.set(u)})})}renderSelectedFigureList(t,e){const i=re.get(),r=ra.get();(()=>{let a=t.select(".figure-list");return a.empty()&&(a=t.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("figure-list",!0).style("display","flex").style("gap","0.5em").style("flex-direction","row")),a})().selectAll("div").data(i).join("div").classed("figure-item",!0).style("border-color",a=>r.get(a.id)).style("font-size",`${this.baseSize}px`).style("background-color",a=>Qi.get()===a?r.get(a.id):null).style("color",a=>Qi.get()===a?"#fff":r.get(a.id)).text(a=>a.name).on("click",(a,o)=>{Qi.set(o)})}renderSelectedFigure(t,e){const i=Qi.get(),r=Ji.get(),s=new RegExp(r.join("|"),"gi"),a=mi.get();if(i===null){t.html("");return}const o=this.baseSize,c=i.locations,l=(()=>{let h=t.select(".figure-info");return h.empty()&&(h=t.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("figure-info",!0)),h})();l.node().innerText=i.description,(()=>{let h=t.select(".figure-events");return h.empty()&&(h=t.append(()=>document.createElementNS("http://www.w3.org/1999/xhtml","div")).classed("figure-events",!0)),h})().selectAll(".figure-event").data(i.events).join("div").classed("figure-event",!0).style("font-size",`${o}px`).each((h,p,f)=>{const x=It(f[p]),y=c.find((M,w)=>{let L=M.time;if(L===null)return!1;let P=w<c.length-1&&c[w+1].time!==null?c[w+1].time:i.time[1];return L<=h.time&&P>h.time}),d=(y==null?void 0:y.name)??a.unknown;x.html(""),x.append("div").classed("item-timeline",!0).classed("item-timeline-first",p===0),x.append("div").classed("item-node",!0).style("background-color",fi);const _=x.append("div").classed("event-body",!0).classed("event-title",!0).style("color",fi);_.append("span").classed("event-date",!0).text(`${h.time.getFullYear()}-${h.time.getMonth()+1}-${h.time.getDate()}`),_.append("span").classed("event-location",!0).style("margin-left","0.5em").text(d).on("click",()=>{y&&De.set({...De.get(),location:y})});const g=x.append("div").classed("event-body",!0).classed("event-text",!0).style("color","#555");h.type!==null&&g.append("span").classed("event-type-icon",!0).style("background-color",Lt).text(h.type),g.append("span").html(h.description.replaceAll(s,M=>`<span class="keyword">${M}</span>`));const m=x.append("div").classed("event-body",!0).classed("event-posts",!0);m.selectAll("div").data(h.posts).join("div").classed("event-post",!0).each((M,w,L)=>{const P=It(L[w]);P.html(""),P.append("div").classed("event-post-name",!0).property("--color",gi.postColorMap[M.rank]).text(M.name).on("click",()=>{var C,T;const D=_u.get()[1].find(A=>A.value.id===M.id);((T=(C=xn.get())==null?void 0:C.value)==null?void 0:T.id)===M.id?xn.set(null):xn.set(D)}).node().style.setProperty("--color",gi.postColorMap[M.rank]),P.selectAll(".event-post-institution").data(M.institutions).join("div").classed("event-post-institution",!0).text(k=>k.name).on("click",(k,D)=>{var A,E;const C=_u.get()[1],T=C.find(I=>I.value.id===D.id);console.log(T,C,D),((E=(A=xn.get())==null?void 0:A.value)==null?void 0:E.id)===D.id?xn.set(null):xn.set(T)})}),h.posts.length===0&&m.style("display","none");const v=x.append("div").classed("event-body",!0).classed("related-figures",!0),S=_5;v.selectAll(".related-figure").data(h.relations).join("div").classed("related-figure",!0).each((M,w,L)=>{const P=It(L[w]);P.html(""),P.append("div").classed("related-type",!0).style("background-color",S.get(M.score)??S.get(0)).text(M.type),P.append("div").classed("related-name",!0).text(M.name).on("click",()=>{const N=Wt.get(),k=N.findIndex(T=>T.id===M.id);if(k!==-1){this.switchLock=!0,N.splice(k,1),Wt.set(N.slice());return}const C=ce.get().find(T=>T.id===M.id);C&&(this.switchLock=!0,Wt.set([...N,C]))}),P.append("div").classed("related-description",!0).text(M.description)})})}scrollToEvent(t){if(Qi.get()===null)return;const r=It(this.root).select(".figure-events").selectAll(".figure-event").nodes()[t];r&&(r.scrollIntoView({behavior:"smooth",block:"nearest"}),new IntersectionObserver((a,o)=>{a[0].isIntersecting&&(o.disconnect(),r.querySelector(".event-text").animate([{backgroundColor:fi},{backgroundColor:"transparent"}],{duration:500,fill:"forwards"}))},{threshold:.9}).observe(r))}renderContextController(t,e){const i=e.height,r=this.tableX.x1,s=Er.get(),a=mi.get(),o=Vr.get(),c=vr.get(),l=s==="zh-cn"?this.baseSize:this.baseSize*.75,u=(()=>{const v=t.select(".historical-context");return v.empty()?t.append("g").classed("historical-context",!0):v})(),h=(()=>{const v=t.select(".figure-context");return v.empty()?t.append("g").classed("figure-context",!0):v})(),p=Array.from(Object.keys(o)).map(v=>{const S=a[v],M=Ns.visualWidth(S,l),w=o[v];return{key:v,name:S,nameWidth:M,value:w}}),f=Array.from(Object.keys(c)).map(v=>{const S=a[v],M=Ns.visualWidth(S,l),w=c[v];return{key:v,name:S,nameWidth:M,value:w}});let x=l*1.2,y=i-l*2.7;const d=this.tableX;if(y<0)throw new Error("Please allocate enough height or smaller width for the right sidebar.");function _(v,S,M,w,L,P,N){const k=l*.8,D=(()=>{let E=v.select(".lock-icon");return E.empty()&&(E=v.append("g").classed("lock-icon",!0).style("cursor","pointer").on("click",()=>{P[w]=1-P[w],E.html(P[w]?t2(k,Lt):e2(k,fi))})),E})();D.html(P[w]?t2(k,Lt):e2(k,fi)),D.attr("transform",`translate(${-k*.5}, 0)`),(()=>{let E=v.select(".line");return E.empty()&&(E=v.append("line").classed("line",!0).style("stroke",Lt).style("stroke-width",1)),E})().attr("x1",0).attr("y1",x).attr("x2",0).attr("y2",x+y),(()=>{let E=v.select(".slider");return E.empty()&&(E=v.append("circle").classed("slider",!0).style("fill",Lt).style("cursor","pointer"),E.call(Yc().on("drag",I=>{const B=ri(I,v)[1]-e.y;console.log("y",B);const $=L.reduce((j,et,V)=>et.key===M.key||!P[V]?j:j+et.value,0),Y=L.reduce((j,et,V)=>et.key===M.key||P[V]?j:j+et.value,0),q=P.every((j,et)=>j||et===w)?M.value:0,G=1-$,F=Math.max(q,Math.min(G,(y-B)/y)),U=F-M.value;M.value=F;for(let j=0;j<L.length;++j){const et=L[j];et.key===M.key||P[j]||(et.value=et.value-U*et.value/(Y||1))}S.selectAll(".slider").attr("cy",function(j){return x+y*(1-j.value)})}).on("end",()=>{N(L)}))),E})().attr("cx",0).attr("cy",x+y*(1-M.value)).attr("r",l*.3),(()=>{let E=v.select(".name");return E.empty()&&(E=v.append("text").classed("name",!0).style("font-size",l).style("fill",Lt)),E})().attr("x",0).attr("y",i-l).attr("text-anchor","middle").attr("dominant-baseline","hanging").text(M.name)}(()=>{let v=u.select(".weight-item");return v.empty()&&(v=u.append("g").classed("weight-item",!0)),v})().attr("transform",`translate(${d.xWeight-r}, 0)`).html(`<text x="0" y="${i-l}" text-anchor="middle" dominant-baseline="hanging" style="font-size: ${l}px; fill: ${Lt}">${a.weight}</text>`),u.selectAll(".item").data(p).join("g").classed("item",!0).attr("transform",(v,S)=>`translate(${d.hContext[v.key]-r}, 0)`).each((v,S,M)=>{const w=It(M[S]);_(w,u,v,S,p,UE,L=>{const P={};for(let N=0;N<L.length;++N)P[L[N].key]=L[N].value;this.updateTotalHistoricalContextWeight(P),Vr.set(P)})}),(()=>{let v=t.select(".split-line");return v.empty()&&(v=t.append("line").classed("split-line",!0).style("stroke",Lt).style("stroke-width",1)),v})().attr("x1",d.x2-r).attr("y1",0).attr("x2",d.x2-r).attr("y2",i).attr("stroke-dasharray","5,5"),h.selectAll(".item").data(f).join("g").classed("item",!0).attr("transform",(v,S)=>`translate(${d.fContext[v.key]-r}, 0)`).each((v,S,M)=>{const w=It(M[S]);_(w,h,v,S,f,YE,L=>{const P={};for(let N=0;N<L.length;++N)P[L[N].key]=L[N].value;for(const N of Object.keys(P))P[N]<1e-6&&(P[N]=0);vr.set(P)})})}renderFigureNames(t,e){const i=e.height,r=Us.get(),s=s2.get().filter(c=>{const l=this.tableX.h*c;return this.tableX.h*(c+1)>=this.scrollY&&l<=this.scrollY+i}),a=ra.get(),o=Wt.get();t.selectAll(".name").data(s,c=>c).join("g").classed("name",!0).attr("transform",(c,l)=>{const u=this.tableX.x0,h=this.tableX.h*c-this.scrollY;return`translate(${u}, ${h})`}).each((c,l,u)=>{const h=It(u[l]),p=r[c],f=(()=>{let y=h.select(".name");return y.empty()&&(y=h.append("text").classed("name",!0).attr("id",p.name).attr("dy","-0.4em").style("font-size",this.baseSize).attr("user-select","none").style("cursor","pointer").on("pointerenter",()=>{Xo.set(0),is.set(o.indexOf(p)===-1?p:null);const d=_=>{const g=_.target;(!g.classList.contains("name")||g.id!==p.name)&&(is.set(null),Xo.set(1),window.removeEventListener("pointermove",d))};window.addEventListener("pointermove",d)}).on("click",()=>{const d=Wt.get();d.findIndex(g=>g.id===p.id)===-1?Wt.set([...d,p]):Wt.set(d.filter(g=>g.id!==p.id)),Xo.set(Xo.get()===1?0:1)})),y})(),x=a.get(p.id)??Lt;f.attr("x",0).attr("y",this.tableX.h*.5).attr("fill",x).attr("text-anchor","start").attr("dominant-baseline","middle").text(p.name)})}renderFigureBars(t,e){const i=e.height,r=this.tableX,s=s2.get().filter(x=>{const y=r.h*x;return r.h*(x+1)>=this.scrollY&&y<=this.scrollY+i}),a=ra.get(),o=Vr.get(),c=bu.get(),l=vr.get(),u=Te.get(),h=Us.get(),p=re.get();mi.get();const f=this.baseSize;t.selectAll(".bars").data(s,x=>x).join("g").classed("bars",!0).attr("transform",(x,y)=>`translate(0, ${r.h*x-this.scrollY})`).each((x,y,d)=>{const _=It(d[y]),g=h.idx2OriginIdx.get(x),m=c[g],v=u===null?null:u[g];if((()=>{let M=_.select(".weight-bar");return M.empty()&&(M=_.append("rect").classed("weight-bar",!0)),M})().attr("x",r.xWeight-r.wWeight*.5-this.tableX.x1).attr("y",0).attr("width",r.wWeight*m._w/c._maxW).attr("height",f).attr("fill",fi),_.selectAll(".historical-bar").data(Object.keys(o)).join("g").classed("historical-bar",!0).attr("transform",(M,w)=>{const L=M,P=r.hContext[L]-r.x1,N=r.whContext[L];return`translate(${P-N*.5}, 0)`}).each((M,w,L)=>{const P=It(L[w]),N=M,k=r.whContext[N],D=m[M].weight/c.maxWs[N];P.html(""),P.append("rect").attr("x",0).attr("y",0).attr("width",k*D).attr("height",f).attr("fill",fi)}),v===null){_.selectAll(".figure-bar").html("");return}else _.selectAll(".figure-bar").data(Object.keys(l)).join("g").classed("figure-bar",!0).attr("transform",(M,w)=>{const L=M,P=r.fContext[L]-r.x1,N=r.wfContext[L];return`translate(${P-N*.5}, 0)`}).each((M,w,L)=>{const P=It(L[w]),N=M,k=r.wfContext[N];let D=0;P.selectAll(".sub-bar").data(v).join("rect").classed("sub-bar",!0).each((C,T,A)=>{const E=It(A[T]),I=a.get(p[T].id),B=k*C[M].weight/u.maxWs[N];E.attr("x",D).attr("y",0).attr("width",B).attr("height",f).attr("fill",I),D+=B})})})}updateTotalHistoricalContextWeight(t){ce.get().forEach(e=>{e.totalHistoricalContextWeight=G0(e,e.time,t).weight})}listenInteraction(){ce.listen(()=>{this.render({renderSearchBox:!0})}),Us.listen(()=>{this.render({renderFigures:!0})}),is.listen(()=>{this.render({renderFigures:!0})}),re.listen(()=>{const t=re.get();this.switchLock?this.switchLock=!1:t.length>r2.length?Qi.set(re.get().at(-1)):re.get().indexOf(Qi.get())===-1&&Qi.set(re.get().length===0?null:re.get()[0]),this.render({renderSelectedFigure:!0}),r2=t}),Qi.listen(()=>{this.render({renderSelectedFigure:!0})}),Xn.listen(()=>{const t=Xn.get();if(t!==null){const e=re.get(),i=t.figure,r=t.idx;let s;(s=e.find(a=>a.id===i.id))!==void 0&&(Qi.set(s),setTimeout(()=>{this.scrollToEvent(r)},0))}}),Ji.listen(()=>{this.render({renderSelectedFigure:!0})})}update(){}}const VE=document.getElementById("app");VE.innerHTML=`
    <div id="container"></div>
`;const pn=document.getElementById("container");async function a4(){const n=await dE();console.log(n),Si.set(n)}async function h1(){const n=Tl.get().width,t=Tl.get().height,e=n*.01,i=n*.155,r=n*.17,s=n*.63,a=n*.805,o=n*.185,c=t*.01,l=t*.98,u=l*.035;pn.setAttribute("width",n.toString()+"px"),pn.setAttribute("height",t.toString()+"px");const h=await aE(s,u),p=await oE(s);lE(h,p,s);const f=h.height,x=l*.98-f,y=(()=>{const w=pn.querySelector("svg.left-sidebar");if(w===null){const L=pn.appendChild(document.createElementNS("http://www.w3.org/2000/svg","svg"));return L.classList.add("left-sidebar"),L}return w})();y.style.position="absolute",y.style.left=e+"px",y.style.top=c+"px",y.style.width=i+"px",y.style.height=l+"px";const d=new $E({x:e,y:c,width:i,height:l});d.setRoot(y),d.render({renderBorder:!0,renderTitle:!0,renderLayout:!0,renderBookmarks:!0,renderKeywordSearcher:!0,renderWeightFilter:!0,renderLocationFilter:!0,renderPostFilter:!0,renderTypeFilter:!0,renderLegend:!0});const _=(()=>{const w=pn.querySelector("div.right-sidebar");if(w===null){const L=pn.appendChild(document.createElement("div"));return L.classList.add("right-sidebar"),L}return w})();_.style.position="absolute",_.style.left=a+"px",_.style.top=c+"px",_.style.width=o+"px",_.style.height=l+"px";const g=new XE({x:a,y:c,width:o,height:l});g.setRoot(_),g.render({updateTablePosition:!0,renderBorder:!0,renderSearchBox:!0,renderSelectedFigure:!0,renderContextController:!0,renderFigures:!0});const m=(()=>{const w=pn.querySelector("div.timelines");if(w===null){const L=pn.appendChild(document.createElement("div"));return L.classList.add("timelines"),L}return w})(),v=new PC({x:r,y:c,totalWidth:s,totalHeight:l,color:"#6f4922",bgcolor:"#ab8c70",timelines:h,groups:p});v.setRoot(m),v.render(),v.renderBrush(),ce.listen(()=>v.render()),v.zoom(hc.get());const S=(()=>{const w=pn.querySelector("div.labels");if(w===null){const L=pn.appendChild(document.createElement("div"));return L.classList.add("labels"),L}return w})();S.style.position="absolute",S.style.left=r+"px",S.style.top=c+"px",S.style.width=s+"px",S.style.height=x+"px";const M=new QA({x:r,y:c,width:s,height:x,data:ce.get()});await M.setRoot(S),M.render(),M.zoom(hc.get(),Qh.get()),v.setEmit({zoom(w){hc.set(w),M.zoom(w,Qh.get())},brush(w,L){L==="end"&&Wu.set(w)}}),M.setEmit({zoom(w,L){hc.set(w),Qh.set(L),console.log("labels zoom",w,L),v.zoom(w)}})}a4().then(()=>{h1()});Tl.listen(()=>{h1()});Er.listen(()=>{a4().then(()=>{h1()})});export{n1 as $,gv as A,yi as B,Ue as C,sn as D,se as E,on as F,Yu as G,MS as H,jg as I,Cr as J,JS as K,lT as L,Qt as M,Ne as N,He as O,ei as P,dT as Q,Wf as R,IT as S,mc as T,zf as U,Vg as V,cd as W,Kg as X,PS as Y,Ee as Z,z5 as _,Ln as a,mv as a0,le as a1,we as a2,yT as a3,HT as a4,sk as a5,ok as a6,dk as a7,pk as a8,gk as a9,Z0 as aa,ls as ab,mM as ac,yM as ad,Cu as ae,Tu as af,Hs as ag,Lv as ah,dm as ai,um as aj,qC as ak,oe as al,ZC as am,_M as an,i1 as ao,bM as ap,Nv as aq,Ml as b,Hc as c,V0 as d,Xi as e,hm as f,DT as g,dv as h,K5 as i,cn as j,hv as k,rk as l,ak as m,Ig as n,uk as o,fk as p,wv as q,uS as r,q0 as s,te as t,ov as u,KC as v,oi as w,yk as x,Jn as y,F5 as z};
